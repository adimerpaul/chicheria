(()=>{var e={64921:(e,a,t)=>{"use strict";t(10071),t(67280),t(65363);var o=t(98880),l=t(99592),i=t(83673);function s(e,a,t,o,l,s){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}const n=(0,i.aZ)({name:"App"});n.render=s;const r=n;var d=t(60214),c=t(47083),m=t(79582);const u=(0,i.HX)("data-v-146e0b55");(0,i.dD)("data-v-146e0b55");const p={class:"row"},h=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1),g={class:"col-12 col-md-8"},f={class:"text-h6"},b=(0,i.Uk)(" Ingreso al sistemas "),v=(0,i.Wm)("div",{class:"text-subtitle2"},"ingresar nombre y contraseña",-1),w=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1);(0,i.Cn)();const W=u(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-icon"),r=(0,i.up)("q-card-section"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),W=(0,i.up)("q-separator"),y=(0,i.up)("q-card"),V=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-md"},{default:u((()=>[(0,i.Wm)("div",p,[h,(0,i.Wm)("div",g,[(0,i.Wm)(y,{class:""},{default:u((()=>[(0,i.Wm)(r,{class:"bg-secondary text-white"},{default:u((()=>[(0,i.Wm)("div",f,[(0,i.Wm)(n,{name:"login"}),b]),v])),_:1}),(0,i.Wm)(r,null,{default:u((()=>[(0,i.Wm)(m,{onSubmit:s.login,onReset:s.onReset,class:"q-gutter-md"},{default:u((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.email,"onUpdate:modelValue":a[1]||(a[1]=e=>l.email=e),label:"Ingresa tu email *",hint:"Email de ingreso","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{autocomplete:"on",type:"password",filled:"",modelValue:l.password,"onUpdate:modelValue":a[2]||(a[2]=e=>l.password=e),label:"Password *",hint:"Contraseña ","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Ingresar",type:"submit",icon:"login",color:"positive"}),(0,i.Wm)(c,{label:"Reset",type:"reset",icon:"restart_alt",color:"negative",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])),_:1}),(0,i.Wm)(W,{dark:""})])),_:1})]),w])])),_:1})})),y={data(){return{email:"",password:""}},methods:{login(){this.$q.loading.show(),this.$store.dispatch("login/login",{email:this.email,password:this.password}).then((()=>{this.$q.loading.hide(),this.$router.push("/")})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e,color:"red",icon:"error"})}))},onReset(){this.email="",this.password=""}}};var V=t(24379),C=t(10151),x=t(25589),_=t(24554),q=t(68689),E=t(34842),A=t(28886),D=t(2165),k=t(65869),M=t(99367),T=t(7518),S=t.n(T);y.render=W,y.__scopeId="data-v-146e0b55";const O=y;S()(y,"components",{QPage:V.Z,QCard:C.Z,QCardSection:x.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QSeparator:k.Z,QCardActions:M.Z});var R=t(62323);const N={class:"row"},U={class:"col-12"},I={class:"col-12"},P={class:"row"},Y={class:"col-12 col-sm-2"},$={class:"col-12 col-sm-2"},L={class:"col-12 col-sm-2"},F={class:"col-12 col-sm-2"},z={class:"col-12 col-sm-2"},Z={class:"col-12 flex flex-center"},j=(0,i.Wm)("div",null,null,-1),B={class:"col-12"},Q={class:"q-pa-md"},G=(0,i.Wm)("div",{class:" responsive"},null,-1),H={class:"row"},J={class:"col-3 q-pa-xs"},K={class:"col-3 q-pa-xs "},X={class:"col-3 q-pa-xs"},ee=(0,i.Uk)(" NO "),ae=(0,i.Uk)(" LOCAL "),te=(0,i.Uk)(" CLIENTE "),oe=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),le={key:0},ie=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function se(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-form"),m=(0,i.up)("q-card"),u=(0,i.up)("q-td"),p=(0,i.up)("q-tr"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card-section"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-avatar"),w=(0,i.up)("q-card-actions"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",N,[(0,i.Wm)("div",U,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS CLIENTES",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",I,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:a[6]||(a[6]=e=>s.registrar(2)),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",P,[(0,i.Wm)("div",Y,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.cliente.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>l.cliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",$,[(0,i.Wm)(r,{outlined:"",modelValue:l.cliente.titular,"onUpdate:modelValue":a[2]||(a[2]=e=>l.cliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",L,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.cliente.telefono,"onUpdate:modelValue":a[3]||(a[3]=e=>l.cliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",F,[(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.cliente.direccion,"onUpdate:modelValue":a[4]||(a[4]=e=>l.cliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",z,[(0,i.Wm)(r,{outlined:"",modelValue:l.cliente.observacion,"onUpdate:modelValue":a[5]||(a[5]=e=>l.cliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Z,[(0,i.Wm)(d,{label:"Registrar",icon:"send",type:"submit",color:"primary",class:"full-width"})])]),j])),_:1})])),_:1})]),(0,i.Wm)("div",B,[(0,i.Wm)("div",Q,[G,(0,i.Wm)("div",H,[(0,i.Wm)("div",J,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.ini,"onUpdate:modelValue":a[7]||(a[7]=e=>l.ini=e),label:"Fecha Ini"},null,8,["modelValue"])]),(0,i.Wm)("div",K,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.fin,"onUpdate:modelValue":a[8]||(a[8]=e=>l.fin=e),label:"Fecha fin"},null,8,["modelValue"])]),(0,i.Wm)("div",X,[(0,i.Wm)(d,{color:"green",label:"EXCEL",onClick:s.generarExcel},null,8,["onClick"])])]),(0,i.Wm)(g,{title:"CLIENTES",rows:l.rows,columns:l.columns,"row-key":"name",filter:l.filter,"rows-per-page-options":[20,50,100,0]},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(p,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{key:"estado",props:e,onClick:a=>s.activar(e.row)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"red"},{default:(0,i.w5)((()=>[ee])),_:1}))])),_:2},1032,["props","onClick"])])),_:2},1032,["props"])])),"body-cell-tipocliente":(0,i.w5)((e=>[(0,i.Wm)(u,{key:"tipocliente",props:e},{default:(0,i.w5)((()=>["1"==e.row.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[ae])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"info"},{default:(0,i.w5)((()=>[te])),_:1}))])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(u,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>s.editRow(e.row),icon:"edit"},null,8,["onClick"]),(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"red",onClick:a=>s.delRow(e.row),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[9]||(a[9]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(b,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[oe])),_:1}),(0,i.Wm)(f,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",le,[(0,i.Wm)(r,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:l.dialog_del,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{icon:"clear",color:"red","text-color":"white"}),ie])),_:1}),(0,i.Wm)(w,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var ne=t(21082),re=t(47345),de=t.n(re),ce=t(59988),me=t.n(ce);const ue={data(){return{ini:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fin:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),tab:"cliente",days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"direccion",label:"DIRECCIÓN",field:"direccion"},{name:"observacion",label:"OBSERVACIÓN",field:"observacion"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){this.listado(2),console.log(this.days)},methods:{generarExcel(){this.$axios.post("https://bnaty.siscenter.org/api/repClienteVenta2",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data);let a=[{sheet:"Cliente Total Venta",columns:[{label:"titular",value:"titular"},{label:"total",value:"total"},{label:"cantidad",value:"cantidad"}],content:e.data}],t={fileName:"VentaCliente",extraLength:7,writeOptions:{}};me()(a,t)}))},listado(e){this.$q.loading.show(),this.rows=[],this.days=[],this.$axios.get("https://bnaty.siscenter.org/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=ne.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push(ne.ZP.formatDate(Date.now(),"YYYY")+"/"+ne.ZP.formatDate(e,"MM")+"/"+ne.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$axios.get("https://bnaty.siscenter.org/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=ne.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push(ne.ZP.formatDate(Date.now(),"YYYY")+"/"+ne.ZP.formatDate(e,"MM")+"/"+ne.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$q.loading.hide()}))}))},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("https://bnaty.siscenter.org/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.siscenter.org/api/activar",this.dato).then((e=>{this.listado(2)}))},editRow(e){this.dato=e,console.log(this.dato),this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado(2)})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var pe=t(69721),he=t(30481),ge=t(5363),fe=t(55242),be=t(18186),ve=t(83884),we=t(46778),We=t(75096),ye=t(60677);ue.render=se;const Ve=ue;S()(ue,"components",{QBadge:pe.Z,QCard:C.Z,QForm:q.Z,QInput:E.Z,QBtn:D.Z,QMarkupTable:he.Z,QTooltip:ge.Z,QTable:fe.Z,QTr:be.Z,QTd:ve.Z,QIcon:_.Z,QDialog:we.Z,QCardSection:x.Z,QAvatar:We.Z,QCardActions:M.Z}),S()(ue,"directives",{ClosePopup:ye.Z});const Ce={class:"row"},xe={class:"col-12"},_e={class:"col-12"},qe={class:"row"},Ee={class:"col-12 col-sm-2"},Ae={class:"col-12 col-sm-2"},De={class:"col-12 col-sm-2"},ke={class:"col-12 col-sm-2"},Me={class:"col-12 col-sm-2"},Te={class:"col-12 col-sm-2"},Se={class:"col-12 col-sm-2"},Oe={class:"col-12 col-sm-2"},Re={class:"col-12 col-sm-2"},Ne={class:"col-12 col-sm-2"},Ue={class:"col-12 col-sm-2"},Ie={class:"col-12 col-sm-2"},Pe={class:"col-12 flex flex-center"},Ye=(0,i.Wm)("div",null,null,-1),$e={class:"col-12"},Le={class:"q-pa-md"},Fe=(0,i.Wm)("div",{class:" responsive"},null,-1),ze={class:"row"},Ze={class:"col-3 q-pa-xs"},je={class:"col-3 q-pa-xs "},Be={class:"col-3 q-pa-xs"},Qe=(0,i.Uk)(" NO "),Ge=(0,i.Uk)(" LOCAL "),He=(0,i.Uk)(" CLIENTE "),Je=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),Ke={key:0},Xe=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),ea={class:"col-12"};function aa(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-separator"),d=(0,i.up)("q-input"),c=(0,i.up)("q-select"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-card"),h=(0,i.up)("q-td"),g=(0,i.up)("q-tr"),f=(0,i.up)("q-icon"),b=(0,i.up)("q-table"),v=(0,i.up)("q-card-section"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-avatar"),y=(0,i.up)("q-card-actions"),V=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Ce,[(0,i.Wm)("div",xe,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS LOCALES ",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",_e,[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(u,{onSubmit:a[13]||(a[13]=e=>s.registrar(1)),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",qe,[(0,i.Wm)("div",Ee,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.local,"onUpdate:modelValue":a[1]||(a[1]=e=>l.cliente.local=e),label:"Local",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Ae,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.ci,"onUpdate:modelValue":a[2]||(a[2]=e=>l.cliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",De,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.titular,"onUpdate:modelValue":a[3]||(a[3]=e=>l.cliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ke,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.telefono,"onUpdate:modelValue":a[4]||(a[4]=e=>l.cliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Me,[(0,i.Wm)(d,{type:"date",outlined:"",modelValue:l.cliente.fechanac,"onUpdate:modelValue":a[5]||(a[5]=e=>l.cliente.fechanac=e),label:"Fecha Nac"},null,8,["modelValue"])]),(0,i.Wm)("div",Te,[(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.cliente.direccion,"onUpdate:modelValue":a[6]||(a[6]=e=>l.cliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Se,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>l.cliente.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",Oe,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.legalidad,"onUpdate:modelValue":a[8]||(a[8]=e=>l.cliente.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Re,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.categoria,"onUpdate:modelValue":a[9]||(a[9]=e=>l.cliente.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"])]),(0,i.Wm)("div",Ne,[(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.cliente.razon,"onUpdate:modelValue":a[10]||(a[10]=e=>l.cliente.razon=e),label:"Razon Social",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Ue,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.nit,"onUpdate:modelValue":a[11]||(a[11]=e=>l.cliente.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Ie,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.observacion,"onUpdate:modelValue":a[12]||(a[12]=e=>l.cliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Pe,[(0,i.Wm)(m,{label:"Registrar",icon:"send",type:"submit",color:"primary",class:"full-width"})])]),Ye])),_:1})])),_:1})]),(0,i.Wm)("div",$e,[(0,i.Wm)("div",Le,[Fe,(0,i.Wm)("div",ze,[(0,i.Wm)("div",Ze,[(0,i.Wm)(d,{type:"date",outlined:"",dense:"",modelValue:l.ini,"onUpdate:modelValue":a[14]||(a[14]=e=>l.ini=e),label:"Fecha Ini"},null,8,["modelValue"])]),(0,i.Wm)("div",je,[(0,i.Wm)(d,{type:"date",outlined:"",dense:"",modelValue:l.fin,"onUpdate:modelValue":a[15]||(a[15]=e=>l.fin=e),label:"Fecha fin"},null,8,["modelValue"])]),(0,i.Wm)("div",Be,[(0,i.Wm)(m,{color:"green",label:"EXCEL",onClick:s.generarExcel},null,8,["onClick"])])]),(0,i.Wm)(b,{title:"CLIENTES",rows:l.rows,columns:l.columns,"row-key":"name",filter:l.filter,"rows-per-page-options":[20,50,100,0]},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(g,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{key:"estado",props:e,onClick:a=>s.activar(e.row)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"red"},{default:(0,i.w5)((()=>[Qe])),_:1}))])),_:2},1032,["props","onClick"])])),_:2},1032,["props"])])),"body-cell-datos":(0,i.w5)((e=>[(0,i.Wm)(g,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{key:"datos",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{icon:"description",dense:"",color:"amber",onClick:a=>s.verDatos(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"body-cell-tipocliente":(0,i.w5)((e=>[(0,i.Wm)(h,{key:"tipocliente",props:e},{default:(0,i.w5)((()=>["1"==e.row.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Ge])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"info"},{default:(0,i.w5)((()=>[He])),_:1}))])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(h,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>s.editRow(e.row),icon:"edit"},null,8,["onClick"]),(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"red",onClick:a=>s.delRow(e.row),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[16]||(a[16]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(w,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[29]||(a[29]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Je])),_:1}),(0,i.Wm)(v,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.local,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.local=e),label:"Local",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[19]||(a[19]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{type:"date",outlined:"",modelValue:l.dato.fechanac,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dato.fechanac=e),label:"Fecha Nac"},null,8,["modelValue"]),(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[23]||(a[23]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",Ke,[(0,i.Wm)(c,{modelValue:l.dato.tipo,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dato.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"]),(0,i.Wm)(c,{outlined:"",modelValue:l.dato.legalidad,"onUpdate:modelValue":a[25]||(a[25]=e=>l.dato.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad Tributaria"},null,8,["modelValue"]),(0,i.Wm)(c,{outlined:"",modelValue:l.dato.categoria,"onUpdate:modelValue":a[26]||(a[26]=e=>l.dato.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"]),(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.dato.razon,"onUpdate:modelValue":a[27]||(a[27]=e=>l.dato.razon=e),label:"Razon Social",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[28]||(a[28]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(m,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(m,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[V]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:l.dialog_del,"onUpdate:modelValue":a[30]||(a[30]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{icon:"clear",color:"red","text-color":"white"}),Xe])),_:1}),(0,i.Wm)(y,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cancelar",color:"primary"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",ea,[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.days,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.cumple)+" "+(0,R.zw)(e.local)+" "+(0,R.zw)(e.titular),1)))),128))])])])}var ta=t(11488),oa=t.n(ta);const la={data(){return{tab:"local",ini:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fin:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"local",align:"center",label:"LOCAL",field:"local",sortable:!0},{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"fecha nac",label:"FECHA NAC",field:"fechanac"},{name:"razon",label:"RAZON SOCIAL",field:"razon"},{name:"nit",label:"NÚMERO NIT",field:"nit"},{name:"datos",label:"Datos",field:"datos"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){this.filtrarlista(),console.log(this.days)},methods:{verDatos(e){this.$q.dialog({title:"DATOS CLIENTE",message:"<b>Direcion:</b>"+e.direccion+"<br><b>Legalidad: </b>"+e.legalidad+"<br><b>Cateogoria: </b>"+e.categoria+"<br><b>Observacion:</b>"+e.observacion,html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},generarExcel(){this.$axios.post("https://bnaty.siscenter.org/api/repClienteVenta",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data);let a=[{sheet:"Cliente Total Venta",columns:[{label:"local",value:"local"},{label:"titular",value:"titular"},{label:"total",value:"total"},{label:"cantidad",value:"cantidad"}],content:e.data}],t={fileName:"VentaCliente",extraLength:7,writeOptions:{}};me()(a,t)}))},listado(e){this.$q.loading.show(),this.rows=[],this.days=[],this.$axios.get("https://bnaty.siscenter.org/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=ne.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push({cumple:ne.ZP.formatDate(Date.now(),"YYYY")+"/"+ne.ZP.formatDate(e,"MM")+"/"+ne.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$axios.get("https://bnaty.siscenter.org/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=ne.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push({cumple:ne.ZP.formatDate(Date.now(),"YYYY")+"/"+ne.ZP.formatDate(e,"MM")+"/"+ne.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$q.loading.hide()}))}))},filtrarlista(){"local"==this.tab?this.listado(1):this.listado(2)},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("https://bnaty.siscenter.org/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.siscenter.org/api/activar",this.dato).then((e=>{this.filtrarlista()}))},editRow(e){this.dato=e,console.log(this.dato),this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.filtrarlista()})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var ia=t(63314);la.render=aa;const sa=la;S()(la,"components",{QBadge:pe.Z,QCard:C.Z,QSeparator:k.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBtn:D.Z,QMarkupTable:he.Z,QTooltip:ge.Z,QTable:fe.Z,QTr:be.Z,QTd:ve.Z,QIcon:_.Z,QDialog:we.Z,QCardSection:x.Z,QAvatar:We.Z,QCardActions:M.Z}),S()(la,"directives",{ClosePopup:ye.Z});const na={class:"row"},ra={class:"col-12"},da=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("h5",{style:{"text-align":"center"}},"INFORMACIÓN DE PRODUCTOS")],-1),ca=(0,i.Wm)("div",{class:"text-h6"},"REGISTRO NUEVO PRODUCTO",-1),ma={class:"row"},ua={class:"col-2"},pa={class:"col-2"},ha={class:"col-2"},ga={class:"col-2"},fa={class:"col-2 flex flex-center"},ba={class:"q-pa-md"},va=(0,i.Uk)("Editar"),wa=(0,i.Uk)("Eliminar"),Wa=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO PRODUCTO",-1),ya=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),Va=(0,i.Wm)("div",{class:"text-h6"},"Agregar Cantidad Producto",-1),Ca=(0,i.Wm)("div",{class:"text-h6"},"Retirar cantidad Producto ",-1),xa=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function _a(e,a,t,o,l,s){const n=(0,i.up)("q-card-section"),r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-color"),m=(0,i.up)("q-popup-proxy"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-btn"),h=(0,i.up)("q-form"),g=(0,i.up)("q-card"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-tooltip"),w=(0,i.up)("q-table"),W=(0,i.up)("q-dialog"),y=(0,i.up)("q-avatar"),V=(0,i.up)("q-card-actions"),C=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",na,[(0,i.Wm)("div",ra,[da,(0,i.Wm)(g,{style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[ca])),_:1}),(0,i.Wm)(n,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{onSubmit:s.registrar,onReset:s.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ma,[(0,i.Wm)("div",ua,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.producto.nombre,"onUpdate:modelValue":a[1]||(a[1]=e=>l.producto.nombre=e),label:"Nombre",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",pa,[(0,i.Wm)(r,{outlined:"",type:"number",step:"0.1",modelValue:l.producto.precio,"onUpdate:modelValue":a[2]||(a[2]=e=>l.producto.precio=e),label:"PRECIO"},null,8,["modelValue"])]),(0,i.Wm)("div",ha,[(0,i.Wm)(d,{outlined:"",modelValue:l.producto.tipo,"onUpdate:modelValue":a[3]||(a[3]=e=>l.producto.tipo=e),options:["LOCAL","DETALLE"],label:"TIPO"},null,8,["modelValue"])]),(0,i.Wm)(r,{style:"background-color: "+l.producto.color,label:"color",outlined:"",modelValue:l.producto.color,"onUpdate:modelValue":a[5]||(a[5]=e=>l.producto.color=e),class:"my-input",readonly:""},{append:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"colorize",class:"cursor-pointer"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.producto.color,"onUpdate:modelValue":a[4]||(a[4]=e=>l.producto.color=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["style","modelValue"]),(0,i.Wm)("div",ga,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.producto.observacion,"onUpdate:modelValue":a[6]||(a[6]=e=>l.producto.observacion=e),label:"Observacion",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",fa,[(0,i.Wm)(p,{label:"Registrar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1}),(0,i.Wm)("div",ba,[(0,i.Wm)(w,{title:"LISTA DE PRODUCTOS REGISTRADOS",rows:l.rows,columns:l.columns,filter:l.filter,"rows-per-page-options":[0],"row-key":"name"},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[7]||(a[7]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(f,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024))])),_:2},1032,["props","onClick"])])),"body-cell-tipo":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e},{default:(0,i.w5)((()=>["LOCAL"==e.row.tipo?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(f,{key:1,color:"secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024))])),_:2},1032,["props"])])),"body-cell-color":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"color",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)("div",{style:"width: 20px;height:20px; background-color: "+e.row.color},null,4)])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(b,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[va])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[wa])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(W,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Wa])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.nombre=e),label:"Nombre"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.precio=e),label:"Precio"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.observacion,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.tipo,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.tipo=e),options:["LOCAL","DETALLE"],label:"TIPO"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.orden=e),label:"N° Orden"},null,8,["modelValue"]),(0,i.Wm)(r,{style:"background-color: "+l.dato.color,label:"color",outlined:"",modelValue:l.dato.color,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.color=e),class:"my-input",readonly:""},{append:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"colorize",class:"cursor-pointer"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:l.dato.color,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.color=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["style","modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[C]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:l.dialog_del,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{icon:"clear",color:"red","text-color":"white"}),ya])),_:1}),(0,i.Wm)(V,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:l.dialog_add,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Va])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(r,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[19]||(a[19]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Ca])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(r,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[23]||(a[23]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:l.dialog_del,"onUpdate:modelValue":a[25]||(a[25]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{icon:"clear",color:"red","text-color":"white"}),xa])),_:1}),(0,i.Wm)(V,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const qa={data(){return{crear:!1,filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:0,disminuir:0,producto:{},color:"",dato:{},columns:[{name:"nombre",label:"NOMBRE",align:"center",field:"nombre",sortable:!0},{name:"precio",align:"center",label:"PRECIO",field:"precio",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACIÓN",field:"observacion",sortable:!0},{name:"tipo",align:"center",label:"TIPO",field:"tipo",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"orden",align:"center",label:"ORDEN",field:"orden"},{name:"color",align:"center",label:"COLOR",field:"color"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){this.listado()},methods:{listado(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/producto").then((e=>{console.log(e.data),this.rows=e.data,this.$q.loading.hide()}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("https://bnaty.siscenter.org/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("https://bnaty.siscenter.org/api/activarprod",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e.row,this.dialog_mod=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.dato=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/producto/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/producto/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",icon:"info",message:e})})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("https://bnaty.siscenter.org/api/inventarioadd",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar=0,this.listado()}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("https://bnaty.siscenter.org/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir=0,this.listado()}))},onReset(){this.producto={}}}};var Ea=t(83944),Aa=t(50555);qa.render=_a;const Da=qa;S()(qa,"components",{QCard:C.Z,QCardSection:x.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QIcon:_.Z,QPopupProxy:Ea.Z,QColor:Aa.Z,QBtn:D.Z,QTable:fe.Z,QTr:be.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QAvatar:We.Z,QCardActions:M.Z}),S()(qa,"directives",{ClosePopup:ye.Z});const ka=(0,i.HX)("data-v-57bd675b");(0,i.dD)("data-v-57bd675b");const Ma={class:"row"},Ta=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Sa={class:"col-12"},Oa={class:"row"},Ra={class:"col-6 col-sm-6 q-pa-xs"},Na={class:"col-6 col-sm-6 q-pa-xs"},Ua={class:"row"},Ia={class:"col-6 col-sm-2 q-pa-xs"},Pa={class:"col-6 col-sm-2 q-pa-xs"},Ya={class:"col-6 col-sm-2 q-pa-xs"},$a={class:"col-6 col-sm-2 q-pa-xs"},La={class:"col-6 col-sm-2 q-pa-xs"},Fa={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},za={class:"col-12"},Za={class:"col-12"},ja={class:"row"},Ba={class:"col-6 col-sm-2 q-pa-xs"},Qa={class:"col-6 col-sm-2 q-pa-xs"},Ga={class:"col-6 col-sm-2 q-pa-xs"},Ha={class:"col-6 col-sm-2 q-pa-xs"},Ja={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Ka=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Xa={class:"col-6 col-sm-4 q-pa-xs"},et={class:"col-6 col-sm-4 q-pa-xs"},at={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},tt={class:"col-12"};(0,i.Cn)();const ot=ka(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:ka((()=>[(0,i.Wm)("div",Ma,[Ta,(0,i.Wm)("div",Sa,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:ka((()=>[(0,i.Wm)("div",Oa,[(0,i.Wm)("div",Ra,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Na,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",Ua,[(0,i.Wm)("div",Ia,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Pa,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ya,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$a,[(0,i.Wm)(r,{type:"number",label:"Cantidad",step:"0.1",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",La,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Fa,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",za,[(0,i.Wm)(p,{dense:"",columns:s.columns,rows:s.detalles},{"body-cell-action":ka((e=>[(0,i.Wm)(u,{props:e},{default:ka((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",Za,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:ka((()=>[(0,i.Wm)("div",ja,[(0,i.Wm)("div",Ba,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Qa,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ga,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ha,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ja,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),Ka,(0,i.Wm)("div",Xa,[(0,i.Wm)(r,{type:"date",label:"fecha inicio",modelValue:s.fecha2,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",et,[(0,i.Wm)(r,{type:"date",label:"fecha fin",modelValue:s.fecha3,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",at,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",tt,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{"top-right":ka((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>s.filter=e),placeholder:"Search"},{append:ka((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),lt={name:"Venta",data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("https://bnaty.siscenter.org/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.siscenter.org/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},agregar(){this.detalles.push({nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};lt.render=ot,lt.__scopeId="data-v-57bd675b";S()(lt,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBtn:D.Z,QTable:fe.Z,QTd:ve.Z,QIcon:_.Z});const it={class:"row"},st=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Registro de Garantias de Prestamo")],-1),nt={class:"col-12"},rt={class:"row"},dt={class:"col-6 col-sm-6 q-pa-xs"},ct={class:"col-6 col-sm-6 q-pa-xs"},mt={class:"row"},ut={class:"col-6 col-sm-3 q-pa-xs"},pt={class:"col-6 col-sm-3 q-pa-xs"},ht={class:"col-6 col-sm-3 q-pa-xs"},gt={class:"col-6 col-sm-3 q-pa-xs"},ft={class:"row"},bt={class:"col-6 col-sm-2 q-pa-xs"},vt={class:"col-6 col-sm-2 q-pa-xs"},wt={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Wt={class:"col-12"},yt={class:"col-12"},Vt={class:"row"},Ct={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},xt=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de Garantia")],-1),_t={class:"col-6 col-sm-6 q-pa-xs"},qt={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},Et={class:"col-12"};function At(e,a,t,l,s,n){const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",it,[st,(0,i.Wm)("div",nt,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",rt,[(0,i.Wm)("div",dt,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ct,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:"",readonly:""},null,8,["modelValue"])])]),(0,i.Wm)("div",mt,[(0,i.Wm)("div",ut,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",pt,[(0,i.Wm)(r,{type:"number",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[4]||(a[4]=e=>s.efectivo=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",ht,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",gt,[(0,i.Wm)(r,{type:"text",label:"Detalle",modelValue:s.detalle,"onUpdate:modelValue":a[6]||(a[6]=e=>s.detalle=e),outlined:""},null,8,["modelValue"])])]),(0,i.Wm)("div",ft,[(0,i.Wm)("div",bt,[(0,i.Wm)(d,{modelValue:s.inventario,"onUpdate:modelValue":a[7]||(a[7]=e=>s.inventario=e),outlined:"",options:s.inventarios,"option-label":"nombre","option-value":"id",label:"Material",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",vt,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",wt,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Wt,[(0,i.Wm)(p,{columns:s.columns,rows:s.detalles,"rows-per-page-options":[0,50,100]},{"body-cell-action":(0,i.w5)((e=>[(0,i.Wm)(u,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",yt,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Vt,[(0,i.Wm)("div",Ct,[(0,i.Wm)(c,{color:"positive",label:"Registrar Garantia",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),xt,(0,i.Wm)("div",_t,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",qt,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.listado},null,8,["onClick"])]),(0,i.Wm)("div",Et,[(0,i.Wm)(p,{columns:s.columns2,rows:s.garantias,title:"Historial de Garantia",filter:s.filter,"rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[10]||(a[10]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})}const Dt={name:"Garantias",data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",fisico:"",detalle:"",clientes:[],cliente:"",inventarios:[],inventario:"",efectivo:0,cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreinv",label:"Nombre material",field:"nombreinv"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],garantias:[],filter:""}},mounted(){this.listado(),this.$axios.get("https://bnaty.siscenter.org/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.siscenter.org/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.siscenter.org/api/listado",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{listado(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/listado",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.garantias=[],console.log(e.data),e.data.forEach((e=>{this.garantias.push({efectivo:e.efectivo,fisico:e.fisico,estado:e.estado,cliente:e.cliente["local"],user:e.user["name"]})}))}))},agregar(){this.detalles.push({nombreinv:this.inventario.nombre,inventario_id:this.inventario.id,cantidad:this.cantidad})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/garantia",{fecha:this.fecha,efectivo:this.efectivo,fisico:this.fisico,detalle:this.detalle,estado:"PRESTAMO",cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"registro exitosa",color:"green",icon:"info"}),this.listado()}))},deleteval(e){this.detalles.splice(e,1)}}};Dt.render=At;const kt=Dt;S()(Dt,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBtn:D.Z,QTable:fe.Z,QTd:ve.Z,QIcon:_.Z});const Mt={class:"row"},Tt={class:"col-12"},St=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("div",{style:{"text-align":"center"}},"REGISTRO DE INVENTARIO DE MATERIALES")],-1),Ot={class:"row"},Rt={class:"col-12 col-sm-2 q-pa-xs"},Nt={class:"col-12 col-sm-2 q-pa-xs"},Ut={class:"col-12 col-sm-2 q-pa-xs"},It={class:"col-12 col-sm-2 q-pa-xs"},Pt={class:"col-12 col-sm-2 q-pa-xs"},Yt={class:"col-12 col-sm-2 q-pa-xs"},$t={class:"col-12 col-sm-2 q-pa-xs "},Lt={class:"col-12"},Ft={class:"q-pa-md"},zt={class:" responsive"},Zt={id:"example",class:"display",style:{width:"100%"}},jt=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"CODIGO"),(0,i.Wm)("th",null,"ITEM"),(0,i.Wm)("th",null,"CANTIDAD GLOBAL"),(0,i.Wm)("th",null,"PRESTAMO"),(0,i.Wm)("th",null,"VENTAS"),(0,i.Wm)("th",null,"SALDO"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"OBSERVACIONES"),(0,i.Wm)("th",null,"ORDEN"),(0,i.Wm)("th",null,"ESTADO"),(0,i.Wm)("th",null,"OPCIONES")])],-1),Bt={style:{"font-size":"16px","font-weight":"bold"}},Qt=(0,i.Uk)("Agregar Prod"),Gt=(0,i.Uk)("Retirar Prod"),Ht=(0,i.Uk)("Listado "),Jt=(0,i.Uk)("Editar"),Kt=(0,i.Uk)("Eliminar"),Xt=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR INVENTARIO",-1),eo={class:"col-12 col-sm-2 q-pa-xs"},ao=(0,i.Wm)("div",{class:"text-h7"},"AGREGAR CANTIDAD DE MATERIAL",-1),to=(0,i.Wm)("div",{class:"text-h7"},"DAR DE BAJA - MATERIALES ",-1),oo=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),lo=(0,i.Wm)("div",{class:"text-h7"},"DETALLE DE REGISTRO DE MATERIALES",-1),io=(0,i.Uk)(" Agregar "),so=(0,i.Uk)(" Disminuir ");function no(e,a,t,o,l,s){const n=(0,i.up)("q-input"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-form"),c=(0,i.up)("q-tooltip"),m=(0,i.up)("q-card-section"),u=(0,i.up)("q-card"),p=(0,i.up)("q-dialog"),h=(0,i.up)("q-avatar"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-table"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Mt,[(0,i.Wm)("div",Tt,[St,(0,i.Wm)(d,{onSubmit:s.registrar,onReset:s.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ot,[(0,i.Wm)("div",Rt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"text",modelValue:l.inventario.codigo,"onUpdate:modelValue":a[1]||(a[1]=e=>l.inventario.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Nt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"text",modelValue:l.inventario.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>l.inventario.nombre=e),style:{"text-transform":"uppercase"},label:"Nombre","lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Ut,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",modelValue:l.inventario.cantidad,"onUpdate:modelValue":a[3]||(a[3]=e=>l.inventario.cantidad=e),label:"CANTIDAD",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",It,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",step:"0.1",modelValue:l.inventario.precio,"onUpdate:modelValue":a[4]||(a[4]=e=>l.inventario.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Pt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",modelValue:l.inventario.orden,"onUpdate:modelValue":a[5]||(a[5]=e=>l.inventario.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Yt,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.inventario.detalle,"onUpdate:modelValue":a[6]||(a[6]=e=>l.inventario.detalle=e),type:"text",label:"OBSERVACIONES",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",$t,[(0,i.Wm)(r,{label:"Registrar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit","onReset"]),(0,i.Wm)("div",Lt,[(0,i.Wm)("div",Ft,[(0,i.Wm)("div",zt,[(0,i.Wm)("table",Zt,[jt,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.rows,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.codigo),1),(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.global),1),(0,i.Wm)("td",null,(0,R.zw)(a.prestamo),1),(0,i.Wm)("td",null,(0,R.zw)(a.ventas),1),(0,i.Wm)("td",Bt,(0,R.zw)(a.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(a.orden),1),(0,i.Wm)("td",null,[(0,i.Wm)(r,{onClick:e=>s.activar(a),dense:"",color:"ACTIVO"==a.estado?"green":"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["onClick","color"])]),(0,i.Wm)("td",null,[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"green",onClick:e=>s.addRow(a),icon:"add"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Qt])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:e=>s.substractRow(a),icon:"remove"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Gt])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.logRow(a),icon:"list"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Ht])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Jt])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Kt])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])])]),(0,i.Wm)(p,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Xt])),_:1}),(0,i.Wm)(m,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.codigo,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.nombre=e),label:"Item",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",eo,[(0,i.Wm)(n,{filled:"",dense:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",dense:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.detalle,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.detalle=e),style:{"text-transform":"uppercase"},label:"Observaciones"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:l.dialog_add,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[ao])),_:1}),(0,i.Wm)(m,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(n,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.motivo=e),type:"text",label:"Motivo Descripción",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[15]||(a[15]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[to])),_:1}),(0,i.Wm)(m,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(n,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[19]||(a[19]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"}),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:l.dialog_del,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(m,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{icon:"clear",color:"red","text-color":"white"}),oo])),_:1}),(0,i.Wm)(g,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:l.dialog_log,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dialog_log=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{style:{"min-width":"350px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[lo])),_:1}),(0,i.Wm)(m,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{dense:"",title:"REGISTRO DE MATERIALES",columns:l.logcol,rows:l.logdata,"row-key":"name"},{"body-cell-agregar":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>[1==e.row.agregar?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"green"},{default:(0,i.w5)((()=>[io])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:1,color:"red"},{default:(0,i.w5)((()=>[so])),_:1}))])),_:2},1032,["props","onClick"])])),_:1},8,["columns","rows"])])),_:1}),(0,i.Wm)(g,{align:"right",class:"text-primary"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancel"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const ro={data(){return{filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:"",disminuir:"",inventario:{orden:0},productos:[],color:"",dato:{},columns:[{name:"codigo",label:"Codigo",align:"center",field:"codigo",sortable:!0},{name:"nombre",label:"ITEM",align:"center",field:"nombre",sortable:!0},{name:"global",align:"center",label:"CANTIDAD GLOBAL",field:"global",sortable:!0},{name:"prestamo",align:"center",label:"PRESTAMO",field:"prestamo",sortable:!0},{name:"ventas",align:"center",label:"VENTAS",field:"ventas",sortable:!0},{name:"cantidad",align:"center",label:"SALDO",field:"cantidad",sortable:!0},{name:"detalle",align:"center",label:"OBSERVACIONES",field:"detalle",sortable:!0},{name:"orden",align:"center",label:"ORDEN",field:"orden",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[],logdata:[],logcol:[{name:"fecha",label:"FECHA",align:"center",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"agregar",align:"center",label:"AGREGAR",field:"agregar",sortable:!0},{name:"motivo",align:"center",label:"MOTIVO",field:"motivo",sortable:!0}]}},created(){de()("#example").DataTable(),this.listado(),this.cargar()},methods:{listado(){this.$q.loading.show(),de()("#example").DataTable().destroy(),this.$axios.get("https://bnaty.siscenter.org/api/inventario").then((e=>{this.rows=[],e.data.forEach((e=>{let a=e,t=0,o=0;0!=e.prestamos.length&&e.prestamos.forEach((e=>{"EN PRESTAMO"==e.estado&&(t+=e.prestado),"VENTA"==e.estado&&(console.log(e),o+=e.cantidad)})),a.global=a.cantidad+t,a.prestamo=t,a.ventas=o,this.rows.push(a)})),this.$q.loading.hide(),de()("#example").DataTable().destroy(),this.$nextTick((()=>{de()("#example").DataTable({dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},cargar(){this.productos=[],this.$axios.get("https://bnaty.siscenter.org/api/listaproducto").then((e=>{e.data.forEach((e=>{this.productos.push({label:e.nombre,value:e.id})}))}))},registrar(){this.inventario.orden=void 0==this.inventario.orden?0:this.inventario.orden,this.$axios.post("https://bnaty.siscenter.org/api/inventario",this.inventario).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar "})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.siscenter.org/api/activarinv",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e,this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},addRow(e){this.dato=e,this.dialog_add=!0},substractRow(e){this.dato=e,this.dialog_sub=!0},logRow(e){this.dato=e,this.$axios.post("https://bnaty.siscenter.org/api/listlog/",this.dato).then((e=>{console.log(e.data),this.logdata=e.data})),this.dialog_log=!0},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/inventario/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/inventario/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("https://bnaty.siscenter.org/api/inventarioadd",this.modprod).then((e=>{console.log(e.data),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar="",this.dato.motivo="",this.listado()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",textColor:"white",icon:"error",message:e.response.data.message})}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("https://bnaty.siscenter.org/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir="",this.dato.motivo="",this.listado()}))},onReset(){this.inventario={orden:0}}}};ro.render=no;const co=ro;S()(ro,"components",{QBtn:D.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QAvatar:We.Z,QCardActions:M.Z}),S()(ro,"directives",{ClosePopup:ye.Z});const mo=(0,i.HX)("data-v-446e542d");(0,i.dD)("data-v-446e542d");const uo={class:"row"},po=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"CONTROL EMPLEADOS")],-1),ho={class:"col-12"},go={class:"row"},fo={class:"col-12 q-pa-xs col-sm-2"},bo={class:"col-12 q-pa-xs col-sm-4"},vo={class:"col-12 q-pa-xs col-sm-2"},wo={class:"col-12 q-pa-xs col-sm-2"},Wo={class:"col-12 q-pa-xs col-sm-2"},yo={class:"col-12 q-pa-xs col-sm-2"},Vo={class:"col-12 q-pa-xs col-sm-2"},Co={class:"col-12 col-sm-12 flex flex-center"},xo={class:"col-12"},_o=(0,i.Uk)("Listado planilla"),qo=(0,i.Uk)("Modificar"),Eo=(0,i.Uk)("Lista Adelantos"),Ao={class:"row"},Do=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-accent text-center text-white"},"HISTORIAL DE PAGOS")],-1),ko={class:"col-6 col-sm-4 q-pa-xs"},Mo={class:"col-6 col-sm-4 q-pa-xs"},To={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},So={class:"col-12"},Oo={class:" responsive"},Ro={id:"example",style:{width:"100%"},class:"cell-border"},No=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"EMPLEADO"),(0,i.Wm)("th",null,"ADELANTO"),(0,i.Wm)("th",null,"DESCUENTO"),(0,i.Wm)("th",null,"EXTRA"),(0,i.Wm)("th",null,"OPCION")])],-1),Uo=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"Modificar empleados")],-1),Io={class:"col-12"},Po={class:"col-12 q-pa-xs col-sm-2"},Yo={class:"col-12 q-pa-xs col-sm-3"},$o={class:"col-12 q-pa-xs col-sm-3"},Lo={class:"col-12 q-pa-xs col-sm-2"},Fo={class:"col-12 q-pa-xs col-sm-2"},zo={class:"col-12 q-pa-xs col-sm-2"},Zo={class:"col-12 q-pa-xs col-sm-2"},jo={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},Bo={class:"text-h6"},Qo={class:"row"},Go={class:"col-2"},Ho={class:"col-2"},Jo={class:"col-2"},Ko={class:"col-4"},Xo={key:0,class:"col-3"},el={class:"col-2 flex flex-center"},al={class:"row"},tl={class:"col-12"},ol={class:"col-12"},ll={class:"col-12"},il={class:"col-12"},sl={class:"col-12"},nl={class:"col-12"},rl={class:"col-12"},dl={class:"col-12"},cl={class:"col-12"},ml={class:"col-12"},ul={class:"row"};(0,i.Cn)();const pl=mo(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-badge"),h=(0,i.up)("q-td"),g=(0,i.up)("q-tooltip"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-card-section"),W=(0,i.up)("q-card-actions"),y=(0,i.up)("q-radio"),V=(0,i.up)("q-page"),C=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-xs"},{default:mo((()=>[(0,i.Wm)("div",uo,[po,(0,i.Wm)("div",ho,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:mo((()=>[(0,i.Wm)("div",go,[(0,i.Wm)("div",fo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"CI",modelValue:s.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>s.empleado.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",bo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Nombre",modelValue:s.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>s.empleado.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",vo,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:s.empleado.tipo,"onUpdate:modelValue":a[3]||(a[3]=e=>s.empleado.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",wo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado.fechanac,"onUpdate:modelValue":a[4]||(a[4]=e=>s.empleado.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha Ingreso",type:"date",modelValue:s.empleado.fechaingreso,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.fechaingreso=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",yo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Celular",modelValue:s.empleado.celular,"onUpdate:modelValue":a[6]||(a[6]=e=>s.empleado.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Salario",modelValue:s.empleado.salario,"onUpdate:modelValue":a[7]||(a[7]=e=>s.empleado.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",Co,[(0,i.Wm)(c,{class:"full-width",icon:"send",label:"CREAR",type:"submit",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",xo,[(0,i.Wm)(f,{columns:s.columns,rows:s.empleados,"rows-per-page-options":[0,50,100],filter:s.filter,"wrap-cells":""},{"top-right":mo((()=>[(0,i.Wm)(r,{borderless:"",dense:"",outlined:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[8]||(a[8]=e=>s.filter=e),placeholder:"Search"},{append:mo((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-tipo":mo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:mo((()=>[(0,i.Wm)(p,{color:"FIJO"==e.row.tipo?"green":"teal"},{default:mo((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-estado":mo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:mo((()=>[(0,i.Wm)(p,{color:"ACTIVO"==e.row.estado?"green":"red",onClick:a=>n.cambioEstado(e.row)},{default:mo((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color","onClick"])])),_:2},1032,["props"])])),"body-cell-action":mo((e=>[(0,i.Wm)(h,{props:e},{default:mo((()=>[(0,i.Wm)(c,{color:"accent","icon-right":"payment","no-caps":"",label:"Planilla",flat:"",dense:"",onClick:a=>n.verplanilla(e.row)},{default:mo((()=>[(0,i.Wm)(g,null,{default:mo((()=>[_o])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{color:"warning","icon-right":"edit","no-caps":"",label:"Modificar",flat:"",dense:"",onClick:a=>n.updateval(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",label:"Eliminar",flat:"",dense:"",onClick:a=>n.deleteval(e.row)},{default:mo((()=>[(0,i.Wm)(g,null,{default:mo((()=>[qo])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{color:"info","icon-right":"list","no-caps":"",label:"Sueldos",flat:"",dense:"",onClick:a=>n.pagosval(e.row)},{default:mo((()=>[(0,i.Wm)(g,null,{default:mo((()=>[Eo])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"]),(0,i.Wm)("div",Ao,[Do,(0,i.Wm)("div",ko,[(0,i.Wm)(r,{dense:"",type:"date",label:"Desde",modelValue:s.fecha1,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Mo,[(0,i.Wm)(r,{dense:"",type:"date",label:"Hasta",modelValue:s.fecha2,"onUpdate:modelValue":a[10]||(a[10]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",To,[(0,i.Wm)(c,{color:"info",class:"full-width",label:"Consultar",icon:"search",type:"submit",onClick:n.missalarios},null,8,["onClick"])]),(0,i.Wm)("div",So,[(0,i.Wm)("div",Oo,[(0,i.Wm)("table",Ro,[No,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.salarios,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.adelanto),1),(0,i.Wm)("td",null,(0,R.zw)(a.descuento),1),(0,i.Wm)("td",null,(0,R.zw)(a.extra),1),(0,i.Wm)("td",null,[e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",dense:"",color:"accent",onClick:e=>n.genplanilla(a)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])])]),(0,i.Wm)(v,{modelValue:s.modempleado,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modempleado=e)},{default:mo((()=>[(0,i.Wm)(b,{style:{"min-width":"350px"}},{default:mo((()=>[Uo,(0,i.Wm)("div",Io,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.modificar,["prevent"])},{default:mo((()=>[(0,i.Wm)("div",Po,[(0,i.Wm)(r,{outlined:"",label:"CI",modelValue:s.empleado2.ci,"onUpdate:modelValue":a[11]||(a[11]=e=>s.empleado2.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yo,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.empleado2.nombre,"onUpdate:modelValue":a[12]||(a[12]=e=>s.empleado2.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$o,[(0,i.Wm)(d,{modelValue:s.empleado2.tipo,"onUpdate:modelValue":a[13]||(a[13]=e=>s.empleado2.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Lo,[(0,i.Wm)(r,{outlined:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado2.fechanac,"onUpdate:modelValue":a[14]||(a[14]=e=>s.empleado2.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Fo,[(0,i.Wm)(r,{outlined:"",label:"Fecha Ingreso",type:"date",modelValue:s.empleado2.fechaingreso,"onUpdate:modelValue":a[15]||(a[15]=e=>s.empleado2.fechaingreso=e)},null,8,["modelValue"])]),(0,i.Wm)("div",zo,[(0,i.Wm)(r,{outlined:"",label:"Celular",modelValue:s.empleado2.celular,"onUpdate:modelValue":a[16]||(a[16]=e=>s.empleado2.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Zo,[(0,i.Wm)(r,{outlined:"",label:"Salario",modelValue:s.empleado2.salario,"onUpdate:modelValue":a[17]||(a[17]=e=>s.empleado2.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",jo,[(0,i.Wm)(c,{icon:"edit",label:"MODIFICAR",type:"submit",color:"warning"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.pagos,"onUpdate:modelValue":a[25]||(a[25]=e=>s.pagos=e),"full-width":""},{default:mo((()=>[(0,i.Wm)(b,null,{default:mo((()=>[(0,i.Wm)(w,null,{default:mo((()=>[(0,i.Wm)("div",Bo,"Historial de "+(0,R.zw)(s.empleado2.nombre),1)])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:mo((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK"},null,512),[[C]])])),_:1}),(0,i.Wm)(w,{class:"q-pt-none"},{default:mo((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:mo((()=>[(0,i.Wm)("div",Qo,[(0,i.Wm)("div",Go,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[19]||(a[19]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ho,[(0,i.Wm)(d,{outlined:"",dense:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[20]||(a[20]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",Jo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha",modelValue:s.pago.fecha,"onUpdate:modelValue":a[21]||(a[21]=e=>s.pago.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ko,[(0,i.Wm)(r,{outlined:"",dense:"",type:"text",label:"observacion",modelValue:s.pago.observacion,"onUpdate:modelValue":a[22]||(a[22]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Xo,[(0,i.Wm)(y,{modelValue:s.checkgasto,"onUpdate:modelValue":a[23]||(a[23]=e=>s.checkgasto=e),val:"CAJA GENERAL",label:"CAJA GENERAL"},null,8,["modelValue"]),(0,i.Wm)(y,{modelValue:s.checkgasto,"onUpdate:modelValue":a[24]||(a[24]=e=>s.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",el,[(0,i.Wm)(c,{class:"full-with",label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),e.$store.state.login.reportepago?((0,i.wg)(),(0,i.j4)(f,{key:0,title:"Historial de pagos","rows-per-page-options":[0,50,100],columns:s.columns2,rows:s.empleadohistorial},{"body-cell-opcion":mo((e=>[(0,i.Wm)(h,{props:e},{default:mo((()=>["ANULADO"!=e.row.tipo?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delsueldo(e.row)},null,8,["onClick"])):(0,i.kq)("",!0),"ANULADO"!=e.row.tipo?((0,i.wg)(),(0,i.j4)(c,{key:1,dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-tipo":mo((e=>[(0,i.Wm)(h,{props:e},{default:mo((()=>[(0,i.Wm)(p,{color:"DESCUENTO"==e.row.tipo||"ANULADO"==e.row.tipo?"red":"green","text-color":"white"},{default:mo((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-observacion":mo((e=>[(0,i.Wm)(h,{props:e},{default:mo((()=>[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:e.row.observacion,"onUpdate:modelValue":a=>e.row.observacion=a,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,i.Wm)(v,{modelValue:s.dialoggenplanilla,"onUpdate:modelValue":a[35]||(a[35]=e=>s.dialoggenplanilla=e)},{default:mo((()=>[(0,i.Wm)(b,null,{default:mo((()=>[(0,i.Wm)(w,{class:"text-center text-bold q-pa-none q-ma-none"},{default:mo((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(w,null,{default:mo((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.creategenplanilla,["prevent"])},{default:mo((()=>[(0,i.Wm)("div",al,[(0,i.Wm)("div",tl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechainicio",modelValue:s.planilla.fechainicio,"onUpdate:modelValue":a[26]||(a[26]=e=>s.planilla.fechainicio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",ol,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechafin",modelValue:s.planilla.fechafin,"onUpdate:modelValue":a[27]||(a[27]=e=>s.planilla.fechafin=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",ll,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechapago",modelValue:s.planilla.fechapago,"onUpdate:modelValue":a[28]||(a[28]=e=>s.planilla.fechapago=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",il,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Salario",modelValue:s.planilla.monto,"onUpdate:modelValue":[a[29]||(a[29]=e=>s.planilla.monto=e),n.actualizamonto]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",sl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"adelanto",modelValue:s.planilla.adelanto,"onUpdate:modelValue":a[30]||(a[30]=e=>s.planilla.adelanto=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",nl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"descuento",modelValue:s.planilla.descuento,"onUpdate:modelValue":a[31]||(a[31]=e=>s.planilla.descuento=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",rl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"bono",modelValue:s.planilla.bono,"onUpdate:modelValue":a[32]||(a[32]=e=>s.planilla.bono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",dl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"total",modelValue:s.planilla.total,"onUpdate:modelValue":a[33]||(a[33]=e=>s.planilla.total=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",cl,[(0,i.Wm)(r,{dense:"",outlined:"",label:"observacion",modelValue:s.planilla.observacion,"onUpdate:modelValue":a[34]||(a[34]=e=>s.planilla.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ml,[s.validarplan?((0,i.wg)(),(0,i.j4)(c,{key:0,class:"full-width\t",type:"submit",color:"primary",icon:"add_circle",label:"crear planilla"})):(0,i.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogver,"onUpdate:modelValue":a[36]||(a[36]=e=>s.dialogver=e)},{default:mo((()=>[(0,i.Wm)(b,{style:{width:"800px","max-width":"80vw"}},{default:mo((()=>[(0,i.Wm)(w,{class:"text-center text-bold q-pa-none q-ma-none"},{default:mo((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(w,null,{default:mo((()=>[(0,i.Wm)("div",ul,[(0,i.Wm)(f,{title:"PLANILLAS",rows:s.planillas,columns:s.colplan,"row-key":"name","rows-per-page-options":[0,50,100]},{"body-cell-opcion":mo((e=>[(0,i.Wm)(h,{props:e},{default:mo((()=>["ANULADO"!=e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>n.imprimirplanilla(e.row)},null,8,["onClick"])):(0,i.kq)("",!0),"ANULADO"!=e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:1,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delplanilla(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var hl=t(47213),gl=t(23377);t(69755);const fl=t(21694),bl={name:"Venta",data(){return{dialoggenplanilla:!1,dialogver:!1,filter:"",pagos:!1,checkgasto:"GASTO",pago:{fecha:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],emp:{},empleados2:[],empleadohistorial:{},boolcrear:!0,salarios:[],planillas:[],planilla:{},validarplan:!0,modempleado:!1,empleado:{fechanac:"2000-01-01",fechaingreso:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleado2:{},dialog_plan:!1,fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocaja:0,montogeneral:0,columns:[{name:"ci",label:"CI",field:"ci"},{name:"nombre",label:"NOMBRE",field:"nombre",sortable:!0,align:"left"},{name:"fechaingreso",label:"FECHA INGRESO",field:"fechaingreso",sortable:!0,align:"left"},{name:"tipo",label:"TIPO",field:"tipo"},{name:"estado",label:"ESTADO",field:"estado"},{name:"action",label:"OPCION",field:"action"}],columns2:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"fecha",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"hora",label:"HORA",field:"hora"},{name:"tipo",label:"TIPO",field:"tipo",sortable:!0},{name:"monto",label:"MONTO",field:"monto",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name,sortable:!0},{name:"observacion",label:"observacion",field:"observacion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"extra"},{name:"pago",label:"Pago",field:"pago"},{name:"cancelar",label:"Cancelar",field:"cancelar"},{name:"opcion",label:"opcion",field:"opcion"}],colplan:[{name:"opcion",label:"opcion",field:"opcion"},{name:"Fecha",label:"Fecha In",field:e=>oa()(e.fechainicio).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha Fin",field:e=>oa()(e.fechafin).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha pago",field:e=>oa()(e.fechapago).format("DD/MM/YYYY")},{name:"salario",label:"Sueldo",field:"monto"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"bono"},{name:"pago",label:"Pago",field:"total"}]}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,50,100],["All",50,100]]}),this.missalarios(),this.misempleados(),this.totalgeneral()},methods:{cambioEstado(e){this.$axios.post("https://bnaty.siscenter.org/api/estadoEmpleado",e).then((e=>{this.missalarios(),this.misempleados()}))},printRow(e){this.$axios.get("https://bnaty.siscenter.org/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delplanilla(e){console.log(e),this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/planilla/"+e.id).then((e=>{this.$q.notify({message:"Eliminado",icon:"info",color:"green"}),this.dialogver=!1,this.misempleados()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},delsueldo(e){this.$q.dialog({title:"Confirmar",message:"Ingrese el motivo por el cual esta eliminando?",prompt:{model:"",type:"text"},cancel:!0,persistent:!1}).onOk((a=>{this.$axios.delete("https://bnaty.siscenter.org/api/sueldo/"+e.id,{params:{motivo:a}}).then((e=>{this.$q.notify({message:"Anulado",icon:"info",color:"green"}),this.pagos=!1,this.misempleados()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},genplanilla(e){this.dialoggenplanilla=!0,this.emp=e,this.planilla.fechainicio=this.fecha1,this.planilla.fechafin=this.fecha2,this.planilla.fechapago=ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.planilla.monto=null==e.salario?0:e.salario,this.planilla.adelanto=null==e.adelanto?0:e.adelanto,this.planilla.descuento=null==e.descuento?0:e.descuento,this.planilla.bono=null==e.extra?0:e.extra,this.planilla.total=this.totalmonto,this.planilla.empleado_id=e.id,this.planilla.restante=0,this.$axios.post("https://bnaty.siscenter.org/api/valplanilla",this.planilla).then((e=>{e.data.length>0?this.validarplan=!1:this.validarplan=!0}))},actualizamonto(){this.planilla.total=this.totalmonto},creategenplanilla(){return this.checkgasto="GASTO","GASTO"==this.checkgasto&&this.planilla.total>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&this.planilla.total>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.planilla.tpago=this.checkgasto,void this.$axios.post("https://bnaty.siscenter.org/api/planilla",this.planilla).then((e=>{this.$q.loading.hide(),this.$q.notify({message:"Planilla Creada",icon:"info",color:"green"}),this.imprimirplanilla(this.planilla),this.dialoggenplanilla=!1,this.planilla={},this.misempleados(),this.totalgeneral()})))},imprimirplanilla(e){function a(){var a=new Image;a.src="logo.png",t.addImage(a,"png",5,2,37,17),t.setFont(void 0,"bold"),t.setFontSize(8),t.text(170,5,"fecha de proceso: "+ne.ZP.formatDate(Date.now(),"DD-MM-YYYY")),t.setFontSize(11),t.text("CHICHERIA DOÑA NATI",110,7,"center"),t.text("BOLETA DE PAGO",110,12,"center"),t.text("Correspondiente  "+oa()(e.fechainicio).format("DD/MM/YYYY")+" Al "+oa()(e.fechafin).format("DD/MM/YYYY"),100,17,"center"),t.text(" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":oa()(e.fechapago).format("DD/MM/YYYY")),170,17,"left"),t.line(5,20,210,20),t.setFont(void 0,"normal")}var t=new hl.kH("p",void 0,"letter");t.setFont("Times"),a(),t.setFontSize(10),t.setFont(void 0,"bold"),t.text(["CI:","Nombre:"],10,25),t.setFont(void 0,"normal"),t.text([this.emp.ci,this.emp.nombre],65,25,"center"),t.setFont(void 0,"bold"),t.text(["Tipo:"],130,25),t.setFont(void 0,"normal");var o=oa()(this.emp.fechanac),l=oa()();l.diff(o,"years");t.text([this.emp.tipo],170,25,"center"),t.line(5,35,210,35),t.setFont(void 0,"bold"),t.text("INGRESOS",45,39,"center"),t.text("DESCUENTOS",150,39,"center"),t.line(5,40,210,40),t.line(110,40,110,70),t.setFont(void 0,"bold"),t.text(["Salario:"],15,45),t.setFont(void 0,"normal"),t.text([e.monto+" Bs"],105,45,"right"),t.setFont(void 0,"bold"),t.text(["Adelanto:","Descuento:"],115,45),t.setFont(void 0,"normal"),t.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),t.line(5,65,210,65),t.setFont(void 0,"bold"),t.text("Total ganado:",35,69,"center"),t.text("Total descuento:",140,69,"center"),t.setFont(void 0,"normal"),t.text(parseInt(e.monto)+" Bs",105,69,"right"),t.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),t.line(5,70,210,70),t.setFont(void 0,"bold"),t.setFontSize(14),t.text("Liquido pagable: "+e.total+" Bs",110,75,"center"),t.setFontSize(9);let i=fl.conversorNumerosALetras,s=new i,n=s.convertToText(parseInt(e.total));t.setFont(void 0,"normal"),t.text("SON: "+n.toUpperCase()+" Bs",110,80,"center"),t.setFont(void 0,"bold"),""!=e.observacion&&null!=e.observacion&&(t.setFont(void 0,"bold"),t.text("Obs: ",2,85,"left"),t.setFont(void 0,"normal"),t.text(e.observacion.substring(0,95),10,85,"left"),t.text(e.observacion.substring(95,95),10,90,"left"),t.text(e.observacion.substring(190,95),10,90,"left"),t.setFont(void 0,"bold")),t.text(5,100,"____________________________                                                                   ______________________________"),t.text(10,105,"FIRMA EMPLEADO"),t.text(150,105,"FIRMA RESPONSABLE"),window.open(t.output("bloburl"),"_blank")},cancelar(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago,this.$axios.post("https://bnaty.siscenter.org/api/cancelacion",{monto:a,fecha:this.fecha2,empleado_id:e.id,empleado_nombre:e.nombre}).then((e=>{this.missalarios(),this.$q.notify({message:"Registro correctamente",icon:"info",color:"positive"})}))},imprimirboleta(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago;let t="<div><img class='fondo' src='logo.png' style='height:20px'> Chicheria Doña Naty <span>"+oa()().format("DD/MM/YYYY")+"</span></div><br>";t+="<div style='text-align:center'>BOLETA DE PAGO "+ne.ZP.formatDate(this.fecha1,"YYYY-MM")+"</div><hr>",t+="<div>Nombre: "+e.nombre+"</div><div>Salario Basico: "+e.salario+"</div>",t+="<div>CI: "+e.ci+"</div><div>Celular: "+e.celular+"</div><hr>",t+="<table style='width:100%'><thead><tr><th>INGRESOS</th><th>DESCUENTOS</th></tr></thead>",t+="<tbody><tr><td>Salario Basico:"+e.salario+"</td><td>Descuentos: "+e.descuento+"</td></tr>",t+="<tr><td>Extra:"+e.extra+"</td><td>Adelanto: "+e.adelanto+"</td></tr>",t+="<tr><td>Pago:"+e.pago+"</td><td> </td></tr>",t+="</tbody></table><hr>",t+="<div style='text-align:right'>Liquido Pagable: "+a+"</div>",t+="<div> "+e.obs+"</div>",t+="<br><br><div style='text-align:center; with:100%'>FIRMA</div>";let o=window.open("","Imprimir","width=1000,height=1000");o.document.write(t),o.document.close(),o.focus(),setTimeout((function(){o.print(),o.close()}),500)},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de prestmos Sueldos pagos Adelantos"),t.text(5,1.5,"DE "+e.fecha1),t.text(1,3,"Empleado"),t.text(7,3,"Sueldo"),t.text(9,3,"Extra"),t.text(11,3,"Adelanto"),t.text(13,3,"Descuento"),t.text(16,3,"Pago"),t.text(19,3,"Cancelar"),t.setFont(void 0,"normal")}var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0,l=0;this.salarios.forEach((e=>{let i=null==e.extra?0:e.extra,s=null==e.adelanto?0:e.adelanto,n=null==e.descuento?0:e.descuento,r=null==e.pago?0:e.pago,d=e.salario-s-n+r;o+=.5,t.text(1,o+3,""+e.nombre),t.text(7,o+3,""+e.salario),t.text(9,o+3,""+i),t.text(11,o+3,""+s),t.text(13,o+3,""+n),t.text(16,o+3,""+r),t.text(19,o+3,""+d),l+=d,o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,t.text(11,o+3,"TOTAL"),t.text(14,o+3,""+l),window.open(t.output("bloburl"),"_blank")},missalarios(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/missueldos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{this.salarios=e.data,de()("#example").DataTable().destroy(),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",ordering:!1,buttons:["excel","pdf"],lengthMenu:[[-1,50,100],["All",50,100]]})})),this.$q.loading.hide()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},totalcaja(){this.$axios.post("https://bnaty.siscenter.org/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},totalgeneral(){this.$axios.post("https://bnaty.siscenter.org/api/totalgeneral").then((e=>{console.log(e.data.monto),this.montogeneral=parseFloat(e.data.monto)}))},agregarpago(){return console.log(this.empleadohistorial),"FIJO"==this.empleado2.tipo&&parseFloat(this.empleado2.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleado2.id,this.pago.empleado_nombre=this.empleado2.nombre,this.pago.checkbox=this.checkgasto,void this.$axios.post("https://bnaty.siscenter.org/api/sueldo",this.pago).then((e=>{this.pago={fecha:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.totalgeneral();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagos=!1})))},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/empleado").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},valplanilla(){},modificar(){this.$axios.put("https://bnaty.siscenter.org/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.misempleados(),this.boolcrear=!0,this.empleado2=[],this.modempleado=!1,this.$q.notify({message:"Modificado correctamente",icon:"info",color:"positive"})}))},agregar(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/empleado",this.empleado).then((e=>{this.$q.loading.hide(),this.misempleados(),this.empleado={fechanac:"2000-01-01"},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})}))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},verplanilla(e){this.emp=e,this.planillas=this.emp.planillas,this.dialogver=!0},updateval(e){this.empleado2=e,this.modempleado=!0},pagosval(e){this.$q.loading.show(),this.empleado2=e,this.$axios.get("https://bnaty.siscenter.org/api/empleado/"+e.id).then((e=>{console.log(e.data),this.empleadohistorial=e.data,this.$q.loading.hide(),this.pagos=!0}))}},computed:{totalmonto(){let e=0;return e=parseFloat(this.planilla.monto)-parseFloat(null==this.planilla.adelanto?0:this.planilla.adelanto)-parseFloat(null==this.planilla.descuento?0:this.planilla.descuento),e},totaldescuento(){let e=0;return this.empleadohistorial.forEach((a=>{ne.ZP.formatDate(a.fecha,"YYYY-MM")==ne.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e}}};var vl=t(77991);bl.render=pl,bl.__scopeId="data-v-446e542d";const wl=bl;S()(bl,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBtn:D.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QTr:be.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z,QRadio:vl.Z}),S()(bl,"directives",{ClosePopup:ye.Z});const Wl=(0,i.HX)("data-v-b8966106");(0,i.dD)("data-v-b8966106");const yl={class:"row"},Vl=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Cl={class:"col-12"},xl={class:"row"},_l={class:"col-6 col-sm-6 q-pa-xs"},ql={class:"col-6 col-sm-6 q-pa-xs"},El={class:"row"},Al={class:"col-6 col-sm-2 q-pa-xs"},Dl={class:"col-6 col-sm-2 q-pa-xs"},kl={class:"col-6 col-sm-2 q-pa-xs"},Ml={class:"col-6 col-sm-1 q-pa-xs"},Tl={class:"col-6 col-sm-2 q-pa-xs"},Sl=(0,i.Wm)("div",{class:"col-6 col-sm-2 q-pa-xs flex flex-center"},null,-1),Ol={class:"col-12"},Rl={class:"row"},Nl={class:"col-6 col-sm-2 q-pa-xs"},Ul={class:"col-6 col-sm-2 q-pa-xs"},Il={class:"col-6 col-sm-2 q-pa-xs"},Pl={class:"col-6 col-sm-2 q-pa-xs"},Yl={class:"col-12"},$l={class:"row"},Ll={class:"col-6 col-sm-2 q-pa-xs"},Fl={class:"col-6 col-sm-2 q-pa-xs"},zl={class:"col-6 col-sm-2 q-pa-xs"},Zl={class:"col-6 col-sm-2 q-pa-xs"},jl={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Bl=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Ql={class:"col-6 col-sm-6 q-pa-xs"},Gl={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},Hl={class:"col-12"};(0,i.Cn)();const Jl=Wl(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-table"),h=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(h,{class:"q-pa-xs"},{default:Wl((()=>[(0,i.Wm)("div",yl,[Vl,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Wl((()=>[(0,i.Wm)("div",Cl,[(0,i.Wm)("div",xl,[(0,i.Wm)("div",_l,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ql,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",El,[(0,i.Wm)("div",Al,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Dl,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",kl,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ml,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Tl,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),Sl])]),(0,i.Wm)("div",Ol,[(0,i.Wm)("div",Rl,[(0,i.Wm)("div",Nl,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ul,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Il,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pl,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])])])]),(0,i.Wm)("div",Yl,[(0,i.Wm)("div",$l,[(0,i.Wm)("div",Ll,[(0,i.Wm)(r,{type:"number",min:"0",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[12]||(a[12]=e=>s.efectivo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Fl,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",zl,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:e.obervacion,"onUpdate:modelValue":a[14]||(a[14]=a=>e.obervacion=a),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Zl,[(0,i.Wm)(r,{type:"text",label:"Estado material",modelValue:s.material,"onUpdate:modelValue":a[15]||(a[15]=e=>s.material=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",jl,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])])),_:1},8,["onSubmit"]),Bl,(0,i.Wm)("div",Ql,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[16]||(a[16]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gl,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",Hl,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter,"hide-header":""},{"top-right":Wl((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[17]||(a[17]=e=>s.filter=e),placeholder:"Search"},{append:Wl((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),Kl={name:"Venta",data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,fisico:"",efectivo:0,observacion:"",material:"",detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("https://bnaty.siscenter.org/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.siscenter.org/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("https://bnaty.siscenter.org/api/misventas",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/misventas",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},guardar(){this.$q.loading.show(),this.detalles={nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal},this.garantias={efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,estado:this.material},this.$axios.post("https://bnaty.siscenter.org/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles,garantias:this.garantias}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return e=this.subtotal,e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};Kl.render=Jl,Kl.__scopeId="data-v-b8966106";S()(Kl,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBtn:D.Z,QTable:fe.Z,QIcon:_.Z});const Xl=(0,i.HX)("data-v-0857cd66");(0,i.dD)("data-v-0857cd66");const ei={class:"row"},ai=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),ti={class:"col-12"},oi={class:"row"},li={class:"col-6 col-sm-6 q-pa-xs"},ii={class:"col-6 col-sm-6 q-pa-xs"},si={class:"row"},ni={class:"col-6 col-sm-2 q-pa-xs"},ri={class:"col-6 col-sm-2 q-pa-xs"},di={class:"col-6 col-sm-1 q-pa-xs"},ci={class:"col-6 col-sm-1 q-pa-xs"},mi={class:"col-6 col-sm-2 q-pa-xs"},ui={class:"col-6 col-sm-1 q-pa-xs"},pi=(0,i.Uk)("Subtotal "),hi=(0,i.Wm)("br",null,null,-1),gi={class:"col-6 col-sm-1 q-pa-xs"},fi={class:"col-6 col-sm-1 q-pa-xs"},bi=(0,i.Uk)("Subtotal "),vi=(0,i.Wm)("br",null,null,-1),wi={class:"col-6 col-sm-1 q-pa-xs"},Wi=(0,i.Uk)("Subtotal "),yi=(0,i.Wm)("br",null,null,-1),Vi={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},Ci={class:"col-12"},xi={class:"row"},_i={class:"col-12 col-sm-12"},qi={class:"row"},Ei=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Ai={class:"col-6 col-sm-4 q-pa-xs"},Di={class:"col-6 col-sm-4 q-pa-xs"},ki={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},Mi={class:"col-12"},Ti={class:"col-12"};(0,i.Cn)();const Si=Xl(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-badge"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),f=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(f,{class:"q-pa-xs"},{default:Xl((()=>[(0,i.Wm)("div",ei,[ai,(0,i.Wm)("div",ti,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Xl((()=>[(0,i.Wm)("div",oi,[(0,i.Wm)("div",li,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ii,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",si,[(0,i.Wm)("div",ni,[(0,i.Wm)(d,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[3]||(a[3]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Selecionar local",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])]),(0,i.Wm)("div",ri,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",di,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ci,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",mi,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ui,[(0,i.Wm)(c,{class:"full-width full-height",color:"positive"},{default:Xl((()=>[pi,hi,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",gi,[(0,i.Wm)(r,{type:"text",label:"A cuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[8]||(a[8]=e=>s.acuenta=e),step:"0.1",outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",fi,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Xl((()=>[bi,vi,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",wi,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Xl((()=>[Wi,yi,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",Vi,[(0,i.Wm)(m,{color:"accent",class:"",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Ci,[(0,i.Wm)("div",xi,[(0,i.Wm)("div",_i,[(0,i.Wm)("div",qi,[Ei,e.$store.state.login.historialventalocal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",Ai,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Di,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[10]||(a[10]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ki,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",Mi,[(0,i.Wm)(g,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:Xl((a=>[(0,i.Wm)(h,{props:a},{default:Xl((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"local",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.local),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:Xl((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:Xl((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:Xl((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:Xl((()=>["ANULADO"!=a.row.estado&&e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"cancel",color:"red",onClick:e=>n.anular(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:1},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",Ti,[(0,i.Wm)(m,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])])])),_:1})})),Oi={name:"Venta",data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.$axios.get("https://bnaty.siscenter.org/api/listacliente").then((e=>{e.data.forEach((e=>{1==e.tipocliente&&this.clientes.push({label:e.local+" "+e.titular,id:e.id})}))})),this.$axios.get("https://bnaty.siscenter.org/api/listaproducto").then((e=>{e.data.forEach((e=>{"LOCAL"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("https://bnaty.siscenter.org/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{impruta(e){this.$axios.post("https://bnaty.siscenter.org/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.siscenter.org/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestmos "+e.model.label),t.text(5,1.5,"DE "+oa()(e.fecha4).format("DD/MM/YYYY")+" AL "+oa()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,e.fecha.toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+oa()(e.fecha2).format("DD/MM/YYYY")+" AL "+oa()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(9.5,3,"Local"),t.text(13.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;t.setFontSize(8),this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(13.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"LOCAL"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,observacion:e.observacion,user:e.user.name})})),console.log(this.ventas)}))},agregar(){},impboleta(e){console.log(e),this.$axios.post("https://bnaty.siscenter.org/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},guardar(){return 0==this.model?(this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",html:!0,position:"center",icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,tipo:"LOCAL",observacion:this.observacion,cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500),this.misventas(),this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Oi.render=Si,Oi.__scopeId="data-v-0857cd66";const Ri=Oi;S()(Oi,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QBadge:pe.Z,QBtn:D.Z,QTable:fe.Z,QTd:ve.Z,QIcon:_.Z,QTr:be.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z}),S()(Oi,"directives",{ClosePopup:ye.Z});const Ni={class:"row"},Ui={class:"col-12"},Ii=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("h5",{style:{"text-align":"center"}},"Reporte de Ventas por Usuario")],-1),Pi={class:"row"},Yi={class:"col-3"},$i={class:"col-2"},Li={class:"col-2"},Fi={class:"col-3"},zi={class:"col-2 flex flex-center"},Zi={class:"q-pa-md"},ji={class:" responsive"},Bi={id:"example",style:{width:"100%"},class:"cell-border"},Qi=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado")])],-1),Gi=(0,i.Uk)("LOCAL"),Hi=(0,i.Uk)("CLIENTE"),Ji=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Ki=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1),Xi={class:"col-12"},es={class:"row"},as={class:"col-4 q-pa-md"},ts={class:"col-4 q-pa-md"},os={class:"col-4 q-pa-md"},ls={class:"q-pa-md",hidden:""};function is(e,a,t,l,s,n){const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-badge"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-td"),W=(0,i.up)("q-icon"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Ni,[(0,i.Wm)("div",Ui,[Ii,(0,i.Wm)(u,{onSubmit:n.generar},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Pi,[(0,i.Wm)("div",Yi,[(0,i.Wm)(r,{dense:"",modelValue:s.usuario,"onUpdate:modelValue":a[1]||(a[1]=e=>s.usuario=e),outlined:"",options:s.usuarios,"option-label":"name","option-value":"id",label:"Usuarios",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",$i,[(0,i.Wm)(d,{dense:"",outlined:"",type:"date",modelValue:s.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha=e),label:"Fecha ini",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Li,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",outlined:"",type:"date",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=s.fecha||"Fecha debe ser mayor o igual"]},null,8,["modelValue","rules"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Fi,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",zi,[(0,i.Wm)(m,{label:"Generar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Zi,[(0,i.Wm)("div",ji,[(0,i.Wm)("table",Bi,[Qi,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Gi])),_:1})):((0,i.wg)(),(0,i.j4)(p,{key:1,color:"teal"},{default:(0,i.w5)((()=>[Hi])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(p,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])])])))),128))])])]),(0,i.Wm)(v,{modelValue:s.alert,"onUpdate:modelValue":a[5]||(a[5]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[Ji])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{title:"Pagos",rows:s.pagos,columns:s.colrep,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(f,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[Ki])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(m,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",Xi,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",es,[(0,i.Wm)("div",as,[(0,i.Wm)(d,{type:"text",label:"Venta total","label-color":"positive",modelValue:n.ventat,"onUpdate:modelValue":a[9]||(a[9]=e=>n.ventat=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",ts,[(0,i.Wm)(d,{type:"text",label:"Saldo caja","label-color":"info",modelValue:n.porc,"onUpdate:modelValue":a[10]||(a[10]=e=>n.porc=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",os,[(0,i.Wm)(d,{type:"text",label:"Por cobrar","label-color":"negative",modelValue:n.saldoc,"onUpdate:modelValue":a[11]||(a[11]=e=>n.saldoc=e),outlined:""},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",ls,[(0,i.Wm)(g,{title:"Reporte Deudores",rows:s.deudas,columns:s.columns2,"row-key":"local",filter:s.filter},{"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(w,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{icon:"segment",color:"green",onClick:a=>n.listpago(e.row)},null,8,["onClick"]),"POR COBRAR"==e.row.estado?((0,i.wg)(),(0,i.j4)(m,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[12]||(a[12]=e=>s.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(W,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])])])])}const ss={data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),usuarios:[],filter:"",usuario:"",ventas:[],rango:"RANGO",deudas:[],regpago:{},pagos:{},dato:{},alert:!1,dialog_pago:!1,colrep:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns:[{name:"local",label:"local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"total",field:"total"},{name:"cuenta",align:"center",label:"cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"saldo",field:"saldo"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"Tipo",field:"tipo"},{name:"usuario",align:"center",label:"usuario",field:"name"}],columns2:[{name:"local",label:"Local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"Titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"Total",field:"total"},{name:"cuenta",align:"center",label:"Cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"Saldo",field:"saldo"},{name:"fecha",align:"center",label:"fecha",field:"fecha"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"tipo",field:"tipocliente"},{name:"usuario",align:"center",label:"usuario",field:"name"},{name:"opcion",align:"center",label:"opcion",field:"opcion"}]}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})},created(){this.listado(),this.deudores()},methods:{onPago(){this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.$axios.post("https://bnaty.siscenter.org/api/listuser").then((e=>{console.log(e.data),this.usuarios.push({id:"0",name:"Todos"}),e.data.forEach((e=>{this.usuarios.push(e)})),this.usuarios.length>0&&(this.usuario=e.data[0])}))},deudores(){this.deudas=[],this.$axios.post("https://bnaty.siscenter.org/api/listadodeudores").then((e=>{console.log(e.data),e.data.forEach((e=>{let a="";a=1==e.cliente.tipocliente?"LOCAL":"DETALLE",this.deudas.push({id:e.id,local:e.cliente.local,titular:e.cliente.titular,total:e.total,cuenta:e.acuenta,saldo:e.saldo,tipocliente:a,fecha:e.fecha,estado:e.estado,name:e.user.name,pagos:e.pagos})}))}))},generar(){this.ventas=[],this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha),this.$axios.post("https://bnaty.siscenter.org/api/listadoventa",{ini:this.fecha,fin:this.fecha2,id:this.usuario.id}).then((e=>{console.log(e.data),this.$q.loading.hide(),e.data.forEach((e=>{this.ventas.push({local:e.cliente.local,tipo:e.tipo,titular:e.cliente.titular,cuenta:e.acuenta,saldo:e.saldo,total:e.total,estado:e.estado,name:e.user.name})})),de()("#example").DataTable().destroy(),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0}},computed:{ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.cuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};ss.render=is;const ns=ss;S()(ss,"components",{QForm:q.Z,QSelect:ia.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:fe.Z,QBadge:pe.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z,QTd:ve.Z,QIcon:_.Z}),S()(ss,"directives",{ClosePopup:ye.Z});const rs={class:"q-pa-md"},ds={class:"text-h7"},cs=(0,i.Uk)(" REGISTRO DE NUEVO USUARIO"),ms={class:"row"},us={class:"col-6"},ps={class:"col-6"},hs=(0,i.Wm)("div",{class:"text-5"},"Permisos",-1),gs=(0,i.Uk)("Editar"),fs=(0,i.Uk)("Cambiar contraseña"),bs=(0,i.Uk)("Permisos"),vs=(0,i.Uk)("Eliminar"),ws={class:"text-h7"},Ws=(0,i.Uk)(" MODIFICAR DATOS DE USUARIO"),ys=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),Vs={class:"text-h7 text-white"},Cs=(0,i.Uk)(" PERMISOS DE ACCESO"),xs={class:"col-1"},_s={class:"col-4 text-subtitle2"},qs={class:"col-6 text-caption"};function Es(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-icon"),c=(0,i.up)("q-card-section"),m=(0,i.up)("q-input"),u=(0,i.up)("q-checkbox"),p=(0,i.up)("q-form"),h=(0,i.up)("q-card"),g=(0,i.up)("q-dialog"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-tooltip"),w=(0,i.up)("q-table"),W=(0,i.up)("q-avatar"),y=(0,i.up)("q-card-actions"),V=(0,i.up)("q-btn-group"),C=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",rs,[(0,i.Wm)(r,{label:"Nuevo usuario",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(g,{modelValue:s.alert,"onUpdate:modelValue":a[6]||(a[6]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ds,[(0,i.Wm)(d,{name:"add_circle"}),cs])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ms,[(0,i.Wm)("div",us,[(0,i.Wm)(m,{filled:"",modelValue:s.dato.name,"onUpdate:modelValue":a[2]||(a[2]=e=>s.dato.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.email,"onUpdate:modelValue":a[3]||(a[3]=e=>s.dato.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.password,"onUpdate:modelValue":a[4]||(a[4]=e=>s.dato.password=e),type:"password",label:"Contraseña",hint:"Contraseña","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",hint:"Fecha limite de acceso",modelValue:s.dato.fechalimite,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.fechalimite=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ps,[hs,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)(u,{style:{width:"100%"},key:a,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])))),128))])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[C]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{dense:"",filter:s.filter,title:"REGISTRO DE USUARIOS",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(m,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[7]||(a[7]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{color:"ACTIVO"==e.row.estado?"green":"red",label:e.row.estado,onClick:a=>n.cambioEstado(e.row)},null,8,["color","label","onClick"])])),_:2},1032,["props"])])),"body-cell-permisos":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"permisos",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.nombre),1)))),128))])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>n.editRow(e),icon:"edit"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[gs])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"positive",onClick:a=>n.cambiopass(e),icon:"vpn_key"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[fs])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"green-10",onClick:a=>n.mispermisos(e),icon:"post_add"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[bs])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e),icon:"o_delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[vs])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"]),(0,i.Wm)(g,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[11]||(a[11]=e=>s.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-warning text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ws,[(0,i.Wm)(d,{name:"edit"}),Ws])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{filled:"",modelValue:s.dato2.name,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dato2.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato2.email,"onUpdate:modelValue":a[9]||(a[9]=e=>s.dato2.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",modelValue:s.dato2.fechalimite,"onUpdate:modelValue":a[10]||(a[10]=e=>s.dato2.fechalimite=e)},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[C]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.dialog_del,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{icon:"clear",color:"red","text-color":"white"}),ys])),_:1}),(0,i.Wm)(y,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{flat:"",label:"Eliminar",color:"deep-orange",onClick:n.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"primary"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.modelpermiso,"onUpdate:modelValue":a[13]||(a[13]=e=>s.modelpermiso=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{width:"850px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-info q-py-none"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Vs,[(0,i.Wm)(d,{name:"folder"}),Cs])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:(0,o.iM)(n.updatepermisos,["prevent"])},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos2,((e,a)=>((0,i.wg)(),(0,i.j4)("div",{class:"row",key:a},[(0,i.Wm)("div",xs,[(0,i.Wm)(V,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{icon:"expand_less",size:"10px",outline:"",dense:"",round:"",color:"green",onClick:a=>n.orden(e,"Aumentar")},null,8,["onClick"]),(0,i.Wm)(r,{icon:"expand_more",size:"10px",outline:"",dense:"",round:"",color:"red",onClick:a=>n.orden(e,"Reducir")},null,8,["onClick"])])),_:2},1024)]),(0,i.Wm)("div",_s,[(0,i.Wm)(u,{dense:"",label:`${e.id} ${e.nombre}`,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",qs,(0,R.zw)(e.descripcion),1)])))),128)),(0,i.Wm)(r,{dense:"",class:"full-width","no-caps":"",type:"submit",color:"info",icon:"send",label:"Actualizar"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const{addToDate:As}=ne.ZP,Ds={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{fechalimite:ne.ZP.formatDate(As(new Date,{days:7}),"YYYY-MM-DD")},model:"",dato2:{},options:[],props:[],unidades:[],permisos:[],permisos2:[],modelpermiso:!1,uni:{},columns:[{name:"name",align:"left",label:"NOMBRE ",field:"name",sortable:!0},{name:"estado",align:"left",label:"ESTADO ",field:"estado",sortable:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0},{name:"permisos",align:"left",label:"PERMISOS",field:"permisos",sortable:!0},{name:"fechalimite",align:"left",label:"FECHA LÍMITE",field:e=>ne.ZP.formatDate(e.fechalimite,"DD/MM/YYYY"),sortable:!0},{name:"opcion",label:"OPCIÓN",field:"action",sortable:!1}],data:[]}},created(){this.misdatos(),this.permisosGet()},methods:{permisosGet(){this.permisos=[],this.permisos2=[],this.$axios.get("https://bnaty.siscenter.org/api/permiso").then((e=>{e.data.forEach((e=>{this.permisos.push({id:e.id,nombre:e.nombre,estado:!1,descripcion:e.descripcion}),this.permisos2.push({id:e.id,nombre:e.nombre,estado:!1,descripcion:e.descripcion})}))}))},orden(e,a){console.log(e),this.$axios.post("https://bnaty.siscenter.org/api/orden",{permiso_id:e.id,accion:a}).then((e=>{this.permisosGet()}))},cambioEstado(e){this.$axios.post("https://bnaty.siscenter.org/api/cambioestado",e).then((e=>{this.misdatos()}))},updatepermisos(){this.$axios.put("https://bnaty.siscenter.org/api/updatepermisos/"+this.dato2.id,{permisos:this.permisos2}).then((e=>{this.modelpermiso=!1,this.misdatos()})).catch((e=>{this.$q.notify({message:e.response.data.message,icon:"close",color:"red"})}))},mispermisos(e){let a;this.modelpermiso=!0,this.dato2=e.row,this.permisos2.forEach((e=>{a=this.dato2.permisos.find((a=>a.pivot.permiso_id==e.id)),e.estado=void 0!=a}))},misdatos(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/user").then((e=>{console.log(e.data),this.data=e.data,this.$q.loading.hide()}))},editRow(e){this.dato2=e.row,this.dato2.unid_id=e.row.unid,this.dialog_mod=!0},deleteRow(e){this.dato2=e.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/user",{name:this.dato.name,password:this.dato.password,email:this.dato.email,celular:this.dato.celular,carnet:this.dato.carnet,fechalimite:this.dato.fechalimite,permisos:this.permisos}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={fechalimite:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/user/"+this.dato2.id,{name:this.dato2.name,email:this.dato2.email,carnet:this.dato2.carnet,celular:this.dato2.celular,fechalimite:this.dato2.fechalimite}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/user/"+this.dato2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre=null,this.dato.inicio=0,this.dato.fin=0},cambiopass(e){this.$q.dialog({title:"CAMBIAR PASSWORD",message:"Ingresar nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/pass/"+e.row.id,{password:a}).then((e=>{this.$q.loading.hide()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}};var ks=t(65735),Ms=t(36375);Ds.render=Es;const Ts=Ds;S()(Ds,"components",{QBtn:D.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QSelect:ia.Z,QCheckbox:ks.Z,QTable:fe.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QAvatar:We.Z,QCardActions:M.Z,QBtnGroup:Ms.Z}),S()(Ds,"directives",{ClosePopup:ye.Z});const Ss=(0,i.HX)("data-v-254a4d82");(0,i.dD)("data-v-254a4d82");const Os={class:"row"},Rs=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-red text-center text-white"},"CONTROL DE GASTOS")],-1),Ns={class:"col-6 col-sm-2 q-pa-xs"},Us={key:0,class:"col-6 col-sm-2 q-pa-xs"},Is={class:"col-6 col-sm-2 q-pa-xs"},Ps={key:1,class:"col-6 col-sm-3 q-pa-xs"},Ys={class:"col-6 col-sm-3 q-pa-xs flex flex-center"},$s={class:"col-12"},Ls={class:"row"},Fs={class:"col-12 q-pa-xs col-sm-1"},zs={class:"col-12 q-pa-xs col-sm-3"},Zs=(0,i.Uk)(" No results "),js={class:"col-12 q-pa-xs col-sm-1"},Bs={class:"col-12 q-pa-xs col-sm-3"},Qs={class:"col-12 q-pa-xs col-sm-2"},Gs={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},Hs={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},Js={class:"col-3"},Ks={class:"col-3 "},Xs={class:"col-3 "},en={class:"col-3"},an={class:"col-12"},tn=(0,i.Wm)("div",{class:"text-h5",align:"center"},"HISTORIAL DE CAJA DE VENTAS",-1),on={id:"example",style:{width:"100%"},class:"cell-border"},ln=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"precio"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"observacion"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"user"),(0,i.Wm)("th",null,"action")])],-1),sn=(0,i.Uk)("Modificar"),nn=(0,i.Uk)("Eliminar"),rn=(0,i.Uk)("Impresion"),dn=(0,i.Wm)("tfoot",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{colspan:"7",style:{"text-align":"right"}},"Total:"),(0,i.Wm)("th")])],-1),cn=(0,i.Wm)("div",{class:"text-h5",align:"center"},"HISTORIAL DE GATOS DE CAJA CHICA",-1),mn={id:"example2",style:{width:"100%"},class:"cell-border"},un=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"usuario"),(0,i.Wm)("th",null,"opcion")])],-1),pn=(0,i.Uk)("Impresion"),hn={class:"text-h6"},gn={class:"row"},fn={class:"col-3"},bn={class:"col-3"},vn={class:"col-3"},wn={class:"col-3"},Wn={key:0,class:"col-3"},yn={class:"col-3 flex flex-center"},Vn={class:"text-h6"},Cn={class:"row"},xn={class:"col-12"},_n=(0,i.Uk)(" No results "),qn={class:"col-12"},En={class:"col-12"},An={class:"col-3 flex flex-center"},Dn={class:"text-h6"},kn={class:"row"},Mn={class:"col-12"},Tn=(0,i.Uk)(" No results "),Sn={class:"col-12"},On={class:"col-12"},Rn={class:"col-3 flex flex-center"},Nn=(0,i.Wm)("div",{class:"text-h6"},"Registro / Mod Glosa",-1),Un={class:"row"},In={class:"col-6"},Pn={class:"col-3"},Yn={class:"col-3 "};(0,i.Cn)();const $n=Ss(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-select"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),h=(0,i.up)("q-form"),g=(0,i.up)("q-tooltip"),f=(0,i.up)("q-td"),b=(0,i.up)("q-space"),v=(0,i.up)("q-card-section"),w=(0,i.up)("q-radio"),W=(0,i.up)("q-table"),y=(0,i.up)("q-card-actions"),V=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),x=(0,i.up)("q-page"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(x,{class:"q-pa-xs"},{default:Ss((()=>[(0,i.Wm)("div",Os,[Rs,(0,i.Wm)("div",Ns,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Us,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Is,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA"},null,8,["modelValue","label"])]),e.$store.state.login.gastoreporteuser?((0,i.wg)(),(0,i.j4)("div",Ps,[(0,i.Wm)(c,{dense:"",modelValue:s.user,"onUpdate:modelValue":a[4]||(a[4]=e=>s.user=e),options:s.users,label:"Usuarios",outlined:""},null,8,["modelValue","options"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Ys,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misgastos},null,8,["onClick"])]),(0,i.Wm)("div",$s,[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Ss((()=>[(0,i.Wm)("div",Ls,[(0,i.Wm)("div",Fs,[(0,i.Wm)(r,{dense:"",outlined:"",type:"number",step:"0.1",label:"Precio",modelValue:s.empleado.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.precio=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",zs,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[6]||(a[6]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Ss((()=>[(0,i.Wm)(p,null,{default:Ss((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Ss((()=>[Zs])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",js,[e.$store.state.login.editglosa?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"green",icon:"add_circle",onClick:a[7]||(a[7]=e=>s.dialogaddglosa=!0)})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Bs,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Observacion",modelValue:s.empleado.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.empleado.observacion=e),style:{"text-transform":"uppercase"},required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Qs,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Fecha ",type:"date",modelValue:s.empleado.fecha,"onUpdate:modelValue":a[9]||(a[9]=e=>s.empleado.fecha=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gs,[(0,i.Wm)(m,{icon:"send",label:s.boolcrear?"CREAR":"MODIFICAR",type:"submit",color:s.boolcrear?"positive":"warning"},null,8,["label","color"])])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Hs,[(0,i.Wm)(m,{icon:"price_change",label:"Caja Chica",type:"button",color:"accent",onClick:a[10]||(a[10]=e=>s.cajachica=!0)})])]),(0,i.Wm)("div",Js,[(0,i.Wm)(m,{label:"Imprimir mis gastos",icon:"print",color:"info",class:"full-width",onClick:a[11]||(a[11]=e=>n.imprimir(s.user)),dense:"","no-caps":""})]),(0,i.Wm)("div",Ks,[(0,i.Wm)(m,{label:"Imprimir mis ventas Detalle",icon:"print",color:"teal",style:{width:"100%"},onClick:a[12]||(a[12]=e=>n.imprimirmisventasdetalle(s.user)),dense:"","no-caps":""})]),(0,i.Wm)("div",Xs,[(0,i.Wm)(m,{label:"Imprimir mis ventas Local",icon:"print",color:"warning",style:{width:"100%"},onClick:a[13]||(a[13]=e=>n.imprimirmisventaslocal(s.user)),dense:"","no-caps":""})]),(0,i.Wm)("div",en,[(0,i.Wm)(m,{label:"Imprimir mis ventas y gastos",icon:"print",color:"accent",class:"full-width",onClick:a[14]||(a[14]=e=>n.impresionventagasto(s.user)),dense:"","no-caps":""})]),(0,i.Wm)("div",an,[tn,(0,i.Wm)("table",on,[ln,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.gastos,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.i},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.observacion),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(f,null,{default:Ss((()=>[(0,i.Wm)(m,{hidden:"",color:"warning","icon-right":"edit","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.updateval(a)},{default:Ss((()=>[(0,i.Wm)(g,null,{default:Ss((()=>[sn])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.eliminargasto?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.deleteval(a)},{default:Ss((()=>[(0,i.Wm)(g,null,{default:Ss((()=>[nn])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:1,color:"info","icon-right":"print","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.printgasto(a)},{default:Ss((()=>[(0,i.Wm)(g,null,{default:Ss((()=>[rn])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1024)])])))),128))]),dn]),cn,(0,i.Wm)("table",mn,[un,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.chica,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.monto),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:0,size:"xs",onClick:e=>n.printcaja(a),color:"primary",icon:"print"},{default:Ss((()=>[(0,i.Wm)(g,null,{default:Ss((()=>[pn])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])]),(0,i.Wm)(C,{modelValue:s.pagos,"onUpdate:modelValue":a[21]||(a[21]=e=>s.pagos=e),"full-width":""},{default:Ss((()=>[(0,i.Wm)(V,null,{default:Ss((()=>[(0,i.Wm)(v,{class:"row items-center q-pb-none"},{default:Ss((()=>[(0,i.Wm)("div",hn,"Historial de "+(0,R.zw)(s.empleadopago.nombre),1),(0,i.Wm)(b),(0,i.wy)((0,i.Wm)(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[_]])])),_:1}),(0,i.Wm)(v,{class:"q-pt-none"},{default:Ss((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:Ss((()=>[(0,i.Wm)("div",gn,[(0,i.Wm)("div",fn,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[15]||(a[15]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",bn,[(0,i.Wm)(c,{outlined:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[16]||(a[16]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",vn,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.pago.observacion,"onUpdate:modelValue":a[17]||(a[17]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wn,[(0,i.Wm)(r,{outlined:"",label:"Fecha",type:"date",modelValue:s.pago.fecha,"onUpdate:modelValue":a[18]||(a[18]=e=>s.pago.fecha=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Wn,[(0,i.Wm)(w,{modelValue:s.checkgasto,"onUpdate:modelValue":a[19]||(a[19]=e=>s.checkgasto=e),val:"GASTO",label:"GASTO"},null,8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.checkgasto,"onUpdate:modelValue":a[20]||(a[20]=e=>s.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",yn,[(0,i.Wm)(m,{label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),e.$store.state.login.reportepago?((0,i.wg)(),(0,i.j4)(W,{key:0,title:"Hitorial de pagos","rows-per-page-options":[50,100,0],columns:s.columns2,rows:s.listpagos},{"body-cell-opcion":Ss((e=>[(0,i.Wm)(f,{key:"opcion",props:e},{default:Ss((()=>[(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(y,{align:"right",class:"bg-white text-teal"},{default:Ss((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"OK"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.cajachica,"onUpdate:modelValue":a[25]||(a[25]=e=>s.cajachica=e)},{default:Ss((()=>[(0,i.Wm)(V,null,{default:Ss((()=>[(0,i.Wm)(v,null,{default:Ss((()=>[(0,i.Wm)("div",Vn,"Registro Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(v,{class:"q-pt-none"},{default:Ss((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregarcjchica,["prevent"])},{default:Ss((()=>[(0,i.Wm)("div",Cn,[(0,i.Wm)("div",xn,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[22]||(a[22]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Ss((()=>[(0,i.Wm)(p,null,{default:Ss((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Ss((()=>[_n])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",qn,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica.precio,"onUpdate:modelValue":a[23]||(a[23]=e=>s.cchica.precio=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",En,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica.observacion,"onUpdate:modelValue":a[24]||(a[24]=e=>s.cchica.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",An,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info",loading:s.loading},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(y,{align:"right",class:"bg-white text-teal"},{default:Ss((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.modifcajachica,"onUpdate:modelValue":a[29]||(a[29]=e=>s.modifcajachica=e)},{default:Ss((()=>[(0,i.Wm)(V,null,{default:Ss((()=>[(0,i.Wm)(v,null,{default:Ss((()=>[(0,i.Wm)("div",Dn,"Modificar Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(v,{class:"q-pt-none"},{default:Ss((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.modificarcjchica,["prevent"])},{default:Ss((()=>[(0,i.Wm)("div",kn,[(0,i.Wm)("div",Mn,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[26]||(a[26]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Ss((()=>[(0,i.Wm)(p,null,{default:Ss((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Ss((()=>[Tn])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",Sn,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica2.monto,"onUpdate:modelValue":a[27]||(a[27]=e=>s.cchica2.monto=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",On,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica2.motivo,"onUpdate:modelValue":a[28]||(a[28]=e=>s.cchica2.motivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Rn,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(y,{align:"right",class:"bg-white text-teal"},{default:Ss((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialogaddglosa,"onUpdate:modelValue":a[32]||(a[32]=e=>s.dialogaddglosa=e)},{default:Ss((()=>[(0,i.Wm)(V,null,{default:Ss((()=>[(0,i.Wm)(v,null,{default:Ss((()=>[Nn])),_:1}),(0,i.Wm)(v,{class:"q-pt-none"},{default:Ss((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.regglosa,["prevent"])},{default:Ss((()=>[(0,i.Wm)("div",Un,[(0,i.Wm)("div",In,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.glosa.nombre,"onUpdate:modelValue":a[30]||(a[30]=e=>s.glosa.nombre=e),rules:[e=>e.length>0||"INGRESE NOMBRE"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Pn,[(0,i.Wm)(r,{outlined:"",label:"N orden",modelValue:s.glosa.orden,"onUpdate:modelValue":a[31]||(a[31]=e=>s.glosa.orden=e),type:"number",rules:[e=>e>=0||"INGRESE nummero"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Yn,[(0,i.Wm)(m,{label:"Reg/Mod",type:"submit",icon:"send",color:"info",dense:""})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(y,{align:"right",class:"bg-white text-teal"},{default:Ss((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})})),Ln={name:"Venta",data(){return{filter:"",loading:!1,filtercaja:"",cchica:{},cchica2:{},glosa:{},glosas:[],chica:[],checkgasto:"CAJA",dialogaddglosa:!1,pagos:!1,cajachica:!1,modifcajachica:!1,pago:{fecha:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],empleadohistorial:{},boolcrear:!0,gastos:[],anulados:[],rango:"RANGO",empleadopago:{},rpagos:[],reporteventa:[],prestamoventa:[],users:[],user:{},gl:[],filterglosa:[],listpagos:[],pageTotal:"",tot:"",resumenplanilla:0,empleado:{fecha:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocajachica:0,montogeneral:0,columns:[{name:"id",label:"Id",field:"id"},{name:"precio",label:"Precio",field:"precio"},{name:"glosa",label:"Glosa",field:e=>e.glosa.nombre},{name:"observacion",label:"Observacion",field:"observacion"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"action",label:"Action",field:"action"}],columns2:[{name:"opcion",label:"Opcion",field:"opcion"},{name:"fecha",label:"Fecha",field:"fecha",sortable:!0},{name:"hora",label:"Hora",field:"hora"},{name:"tipo",label:"Tipo",field:"tipo",sortable:!0},{name:"monto",label:"Monto",field:"monto"},{name:"observacion",label:"observacion",field:"observacion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"pago",label:"Pago",field:"pago"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"}],columns4:[{name:"id",label:"Id",field:"id"},{name:"monto",label:"Monto",field:"monto"},{name:"glosa",label:"Glosa",field:"glosa"},{name:"motivo",label:"Motivo",field:"motivo"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion"}],encabezado:{id:"id",Monto:"monto",Glosa:"glosa",Motivo:"glosa",Fecha:"fecha",Hora:"hora",Usuario:"user"}}},mounted(){console.log(this.$store.state.login.user),de()("#example").DataTable(),de()("#example2").DataTable(),this.misglosa(),this.listadog(),this.misempleados(),this.totalcaja(),this.totalgeneral(),this.misuser(),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.misgastos()},methods:{cargarPagos(){console.log(this.empleadopago),this.$axios.get("https://bnaty.siscenter.org/api/empleado/"+this.empleadopago.id).then((e=>{console.log(e.data),this.listpagos=e.data,this.pagos=!0}))},modificarcjchica(){if(void 0==this.glosa.id)return!1;this.cchica2.glosa_id=this.glosa.id,this.$axios.put("https://bnaty.siscenter.org/api/logcaja/"+this.cchica2.id,this.cchica2).then((e=>{console.log(e.data),this.modifcajachica=!1,this.glosa={label:""},this.misgastos(),this.totalcaja(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})}))},exportTable(){let e=[{sheet:"Caja Chica",columns:[{label:"id",value:"id"},{label:"Monto",value:"monto"},{label:"Glosa",value:"glosa"},{label:"Motivo",value:"motivo"},{label:"fecha",value:"fecha"},{label:"Hora",value:"hora"},{label:"Usuario",value:"user"}],content:this.chica}],a={fileName:"CajaChica",extraLength:7,writeOptions:{}};me()(e,a)},totalgeneral(){this.$axios.post("https://bnaty.siscenter.org/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},regglosa(){void 0==this.glosa.id?this.$axios.post("https://bnaty.siscenter.org/api/glosa",{nombre:this.glosa.nombre,orden:void 0==this.glosa.orden?0:this.glosa.orden}).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})})):(void 0!=this.glosa.orden&&this.glosa.orden,this.$axios.put("https://bnaty.siscenter.org/api/glosa/"+this.glosa.id,this.glosa).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})})))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.glosas=this.filterglosa.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.glosas=this.filterglosa})},printRow(e){this.$axios.get("https://bnaty.siscenter.org/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},modifcaja(e){this.cchica2=e;let a=e.gl;a.label=a.nombre,this.glosa=a,this.modifcajachica=!0,console.log(this.cchica2)},printcaja(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO CAJA CHICA</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+oa()(e.fecha).format("DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.monto+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.motivo+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.print(),t.close()},agregarcjchica(){if(void 0==this.glosa.id)return!1;this.loading=!0,this.cchica.glosa_id=this.glosa.id,this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/gastocaja",this.cchica).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");this.$q.loading.hide(),a.document.write(e.data),a.document.close(),a.print(),a.close(),this.cchica.precio=0,this.cchica.observacion="",this.cajachica=!1,this.glosa={},this.misgastos(),this.totalcaja(),this.loading=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})}))},totalcaja(){this.$axios.post("https://bnaty.siscenter.org/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},listadog(){this.$axios.post("https://bnaty.siscenter.org/api/listglosa").then((e=>{this.gl=e.data}))},misuser(){this.$axios.post("https://bnaty.siscenter.org/api/listuser").then((e=>{this.users=[{label:"TODOS",id:0}],e.data.forEach((e=>{this.users.push({label:e.name,id:e.id})})),this.user=this.users[0]}))},misglosa(){this.glosas=[{label:""}],this.$axios.get("https://bnaty.siscenter.org/api/glosa").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.glosas.push(e)})),this.filterglosa=this.glosas,this.glosa=this.glosas[0]}))},async impresionventagasto(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o=0,l=0,i=0,s=0,n=0,r=0,d="style='color:red'",c="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL DE INGRESOS Y GASTOS DE "+e.label+" "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";this.ventas.length>0&&(c+="<div>VENTAS DETALLE Y LOCAL</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>LOCAL</th><th>TITULAR</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(t+=e.acuenta,o+=e.total,l+=e.saldo,c+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{c+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.local+"</td><td>"+e.titular+"</td><td ","POR COBRAR"==e.estado&&(c+=d),c+=">"+e.estado+"</td></tr>")})),c+="</table><div><b>TOTAL VENTAS:</b>"+o+"</div><br>",this.totalruta&&(c+="<div>VENTAS CON RUTA</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>LOCAL</th><th>TITULAR</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(i+=e.acuenta,s+=e.total,n+=e.saldo,c+="<tr><td>R-"+e.id+"</td><td>",e.detalles.forEach((e=>{c+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.local+"</td><td>"+e.titular+"</td><td ","POR COBRAR"==e.estado&&(c+=d),c+=">"+e.estado+"</td></tr>")})),c+="</table><div><b>TOTAL VENTAS RUTA:</b>"+s+"</div><br>        "));let m=0;this.totalanulado>0&&(m+=this.totalanulado,c+="<div>INGRESOS DE ANULADOS PRESTAMOS</div>        <table>          <tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.anulados.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local.toString():"",c+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs</td>              <td>"+e.cliente.local+"</td><td>"+e.cliente.titular+"</td></tr>"})),c+="</table><div><b>TOTAL ANULADO:</b>"+this.totalanulado+"</div><br>");let u=0;if(this.totalpresventa>0&&(c+="<div>INGRESOS DE VENTA MATERIAL</div>        <table><tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.prestamoventa.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local:"",c+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs.</td><td>"+e.cliente.local+"</td><td>"+e.cliente.titular+"</td></tr>",u+=parseFloat(e.efectivo)})),c+="</table><div><b>TOTAL VENTA MATERIAL: </b> "+this.totalpresventa+" Bs</div><br>"),this.rpagos.length>0){let e="";c+="<div>INGRESOS DE PENDIENTES DE PAGO</div>        <table><tr><th>TIPO</th><th>DETALLE</th><th>MONTO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.rpagos.forEach((a=>{r+=a.monto,e=null!=a.venta.fechaentrega&&""!=a.venta.fechaentrega?"R-"+a.venta.id:a.venta.tipo.substring(0,1)+"-"+a.venta.id,a.venta.cliente.local=null!=a.venta.cliente.local?a.venta.cliente.local.toString():"",c+="<tr><td>"+e+"</td><td>",a.venta.detalles.forEach((e=>{c+=e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+a.monto+" Bs </td><td>"+a.venta.cliente.local+"</td><td>"+a.venta.cliente.titular+"</td></tr>"})),c+="</table><div><b>T.V. Pago: </b>"+this.totalpagos+"</div><br>"}let p=0,h=0;this.gastos.length>0&&(c+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{c+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?p+=parseFloat(null!=e.precio?e.precio:0):h+=parseFloat(null!=e.precio?e.precio:0)})),c+="</table><div><b>TOTAL GASTOS: </b>"+h+" Bs</div><br>"),this.chica.length>0&&(c+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{c+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",p+=parseFloat(null!=e.monto?e.monto:0)})),c+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+p+" Bs</div><br>"),c+="<table><tr><td>",o>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTAS : </b>"+o+" Bs</div>"),s>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTAS RUTA: </b>"+s+" Bs</div>"),t+i>0&&(c+="<div style='font-size:16px'><b>TOTAL A CUENTA: </b>"+(t+i)+" Bs</div>"),u>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTA MATERIAL: </b>"+u+" Bs</div>"),m>0&&(c+="<div style='font-size:16px'><b>TOTAL PRESTAMO ANULADOS: </b>"+m+" Bs</div>"),r>0&&(c+="<div style='font-size:16px'><b>TOTAL CXC PAGOS: </b>"+r+" Bs</div>"),c+="</td><td>",l+n>0&&(c+="<div style='font-size:16px'><b>TOTAL SALDO : </b>"+(l+n)+" Bs</div>"),h>0&&(c+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+h+" Bs</div>"),c+="</td><td>",p>0&&(c+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+p+" Bs</div>"),c+="</td></tr></table>",c+="<div style='font-size:16px'><b>TOTAL TOTAL ACUENTA-GASTO: </b>"+(t+i-h)+" Bs</div>",c+="<div style='font-size:16px'><b>TOTAL TOTAL GENERAL: </b>"+(t+i+u+r-h)+" Bs</div>";let g=window.open("_blank");g.document.write(c),g.document.close()},imprimirmisventasygastos(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"HISTORIAL DE INGRESOS Y GASTOS "+e.label),o.text(5,1.5,"DE "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"Tipo V"),o.text(2.5,3,"Cant"),o.text(3.5,3,"Producto"),o.text(7,3,"Total"),o.text(8.5,3,"Acuenta"),o.text(10,3,"Saldo"),o.text(11.5,3,"Titular"),o.text(15.5,3,"Local"),o.text(19,3,"Estado"),o.setFont(void 0,"normal")}this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);var o=new hl.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0,i=0,s=0,n=0;this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(l+=.5,o.setFontSize(6),o.text(1,l+3,e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),i+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T VENTA:"),o.text(3,l+3,i+" Bs."),l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------"),l+=.5,o.text(1,l+3,"REGISTRO DE VENTAS CON RUTA"),o.setFont(void 0,"normal"),this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(l+=.5,o.setFontSize(6),o.text(1,l+3,"R-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),s+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"TR VENTA:"),o.text(3,l+3,s+" Bs.");let r=0,d=0;i+=s,l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO"),o.setFont(void 0,"normal"),this.gastos.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.precio?e.precio+" Bs":"0 Bs."),"CAJA CHICA"==e.glosa?d+=parseFloat(null!=e.precio?e.precio:0):r+=parseFloat(null!=e.precio?e.precio:0),o.text(10,l+3,e.glosa+": "+e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T GASTO:"),o.text(3,l+3,r+"Bs."),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO CAJA CHICA"),o.setFont(void 0,"normal"),this.chica.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.monto?e.monto+" Bs":"0 Bs."),d+=parseFloat(null!=e.monto?e.monto:0),o.text(10,l+3,null==e.glosa?"GASTO":e.glosa+" : "+e.motivo),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"Gasto Caja Chica:"),o.text(6,l+3,d+"Bs."),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5;let c=0;o.setFont(void 0,"bold"),o.text(1,l+3,"INGRESOS DE ANULADOS PRESTAMOS"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.totalanulado>0&&(c+=this.totalanulado,this.anulados.forEach((e=>{l+=.5,o.text(2.5,l+3,e.cantidad+""),o.text(3.5,l+3,e.inventario.nombre),o.text(7,l+3,e.efectivo+" Bs"),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T. Anulado"),o.text(3,l+3,this.totalanulado+" Bs")),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE VENTA MATERIAL"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0);let m=0;this.prestamoventa.forEach((e=>{l+=.5,o.text(1,l+3,""),o.text(2.5,l+3,e.cantidad+""),o.setFontSize(6),o.text(3.5,l+3,e.inventario.nombre),o.setFontSize(9),o.text(7,l+3,e.efectivo+" Bs."),m+=parseFloat(e.efectivo),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T MATERIAL"),o.text(3,l+3,this.totalpresventa+" Bs."),this.totalpagos>0&&(l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE PENDIENTES DE PAGO"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.rpagos.forEach((e=>{l+=.5,o.setFontSize(6),o.text(1,l+3,null!=e.fechaentrega&&""!=e.fechaentrega?"R-"+e.id:e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(3.5,l+3,null!=e.nombreproducto?e.nombreproducto.toString():""),o.text(7,l+3,null!=e.monto?e.monto+" Bs":" 0 Bs."),n+=e.monto,o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,l+4>25&&(o.addPage(),t(),l=0),o.text(1,l+3,"T.V. Pago:"),o.text(3,l+3,this.totalpagos+" Bs.")),l+4>25&&(o.addPage(),t(),l=0),o.setFontSize(11),o.setFont(void 0,"normal"),o.text(2,l+4,"T Ing Venta: "),o.setFont(void 0,"bold"),o.text(5.5,l+4,i+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5,"T Prest A: "),o.setFont(void 0,"bold"),o.text(5.5,l+5,c+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5.5,"T Mat Vent: "),o.setFont(void 0,"bold"),o.text(5.5,l+5.5,m+"Bs"),o.setFont(void 0,"normal"),o.text(8,l+4,"Total gasto: "),o.setFont(void 0,"bold"),o.text(11,l+4,r+"Bs"),o.setFont(void 0,"normal"),o.text(14,l+4,"Total saldo: "),o.setFont(void 0,"bold"),o.text(17,l+4,i-r+" Bs"),o.setFont(void 0,"normal"),o.text(2,l+4.5,"T. CxC pagos: "),o.setFont(void 0,"bold"),o.text(5.5,l+4.5,n+"Bs"),1==this.$store.state.login.user.id&&(o.setFont(void 0,"normal"),o.text(8,l+4.5,"Salarios:"),o.setFont(void 0,"bold"),o.text(11,l+4.5,this.resumenplanilla+"Bs.")),window.open(o.output("bloburl"),"_blank")},imprimirmisventasdetalle(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA DETALLE DE "+e.label+" "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"DETALLE"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimirmisventaslocal(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA LOCAL DE "+e.label+" "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"LOCAL"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimir(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL GASTOS DE "+e.label+" "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")+"</div><br>",o=0,l=0;this.gastos.length>0&&(t+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{t+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?o+=parseFloat(null!=e.precio?e.precio:0):l+=parseFloat(null!=e.precio?e.precio:0)})),t+="</table><div><b>TOTAL GASTOS: </b>"+l+" Bs</div><br>"),this.chica.length>0&&(t+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{t+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",o+=parseFloat(null!=e.monto?e.monto:0)})),t+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+o+" Bs</div><br>"),t+="<table><tr><td>",t+="</td><td>",l>0&&(t+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+l+" Bs</div>"),t+="</td><td>",o>0&&(t+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+o+" Bs</div>"),t+="</td></tr></table>";let i=window.open("_blank");i.document.write(t),i.document.close()},misgastos(){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$q.loading.show(),this.gastos=[],this.chica=[],this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),de()("#example").DataTable().destroy(),de()("#example2").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/misgastos",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{de()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{this.gastos.push({id:e.id,observacion:e.observacion,glosa:e.glosa.nombre,precio:e.precio,fecha:oa()(e.fecha).format("DD-MM-YYYY"),hora:e.hora,user:e.user.name})})),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.siscenter.org/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{console.log(e.data),de()("#example2").DataTable().destroy(),e.data.forEach((e=>{"GASTO"==e.tipo&&this.chica.push({id:e.id,motivo:e.motivo,glosa:null==e.glosa?"GASTO":e.glosa.nombre,monto:e.monto,fecha:oa()(e.fecha).format("DD-MM-YYYY"),hora:e.hora,user:e.user.name,gl:null==e.glosa?"GASTO":e.glosa})})),this.$nextTick((()=>{de()("#example2").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],buttons:["excel","pdf"],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),de()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})})),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],buttons:["excel","pdf"],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),de()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})}))})),this.$axios.post("https://bnaty.siscenter.org/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),this.resumenplanilla=null==e.data[0].total?0:e.data[0].total})),this.$store.state.login.gastoreporteuser||(this.user=this.users.find((e=>e.id==this.$store.state.login.user.id))),this.$axios.post("https://bnaty.siscenter.org/api/reportSale",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:null==e.cliente.local?"":e.cliente.local,titular:e.cliente.titular,user:e.user.name,fechaentrega:e.fechaentrega,tipo:e.tipo,hora:e.hora,detalles:e.detalles})})),console.log(this.ventas),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.siscenter.org/api/misanulados",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.anulados=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.siscenter.org/api/reportepago",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.rpagos=[],this.rpagos=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.siscenter.org/api/reporteventa",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{this.prestamoventa=[],this.prestamoventa=e.data}))}))}))}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},agregarpago(){return"FIJO"==this.empleadopago.tipo&&parseFloat(this.empleadopago.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleadopago.id,this.pago.empleado_nombre=this.empleadopago.label,this.pago.checkbox=this.checkgasto,"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):void this.$axios.post("https://bnaty.siscenter.org/api/sueldo",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagosval(),this.misgastos(),this.totalcaja(),this.totalgeneral(),this.pagos=!1,this.checkgasto="CAJA",this.pago.monto=0,this.pago.tipo="",this.pago.observacion="",this.pago.fecha=ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")})))},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/listEmpleado").then((e=>{this.$q.loading.hide(),this.empleados=[],e.data.forEach((e=>{e.label=e.nombre,this.empleados.push(e)})),console.log(this.empleados),this.empleadopago=this.empleados[0]}))},agregar(){return void 0!=this.glosa.id&&(this.totalgeneral(),console.log(this.montogeneral),parseFloat(this.montogeneral)<parseFloat(this.empleado.precio)?(this.$q.notify({message:"No se Tiene Fondos",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.empleado.observacion=this.empleado.observacion.toUpperCase(),this.empleado.glosa=this.glosa.nombre,this.empleado.glosa_id=this.glosa.id,void(this.boolcrear?this.$axios.post("https://bnaty.siscenter.org/api/gasto",this.empleado).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.loading.hide(),this.misgastos(),this.listadog(),this.totalgeneral(),this.empleado.precio=0,this.empleado.observacion="",this.empleado.glosa="",this.glosa={label:""},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})):this.$axios.put("https://bnaty.siscenter.org/api/gasto/"+this.empleado.id,this.empleado).then((e=>{this.$q.loading.hide(),this.misgastos(),this.listadog(),this.boolcrear=!0,this.empleado={fecha:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})))))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},printgasto(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+ne.ZP.formatDate(e.fecha,"DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.precio+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.observacion+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.focus(),t.print(),t.close()},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/gasto/"+e.id).then((e=>{this.$q.loading.hide(),this.misgastos(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},updateval(e){console.log(e),e.glosa.label=e.glosa.nombre,this.glosa=e.glosa,this.empleado=e,this.boolcrear=!1},pagosval(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/empleado/"+this.empleadopago.id).then((e=>{this.listpagos=e.data,this.$q.loading.hide()}))}},computed:{totalruta(){let e=0;return this.ventas.forEach((a=>{null!=a.fechaentrega&&""!=a.fechaentrega&&e++})),e},totaldescuento(){let e=0;return this.listpagos.forEach((a=>{ne.ZP.formatDate(a.fecha,"YYYY-MM")==ne.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e},totalanulado(){let e=0;return this.anulados.forEach((a=>{e+=parseFloat(a.efectivo)})),e},totalpagos(){let e=0;return this.rpagos.forEach((a=>{e+=parseFloat(a.monto)})),e},totalpresventa(){let e=0;return this.prestamoventa.forEach((a=>{e+=parseFloat(a.efectivo)})),e}}};var Fn=t(83414),zn=t(52035),Zn=t(62025);Ln.render=$n,Ln.__scopeId="data-v-254a4d82";const jn=Ln;S()(Ln,"components",{QPage:V.Z,QInput:E.Z,QToggle:A.Z,QSelect:ia.Z,QBtn:D.Z,QForm:q.Z,QItem:Fn.Z,QItemSection:zn.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QTooltip:ge.Z,QTr:be.Z,QBadge:pe.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QSpace:Zn.Z,QRadio:vl.Z,QCardActions:M.Z}),S()(Ln,"directives",{ClosePopup:ye.Z});const Bn=(0,i.HX)("data-v-29807053");(0,i.dD)("data-v-29807053");const Qn={class:"row"},Gn=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Hn={class:"col-12"},Jn={class:"row"},Kn={class:"col-6 col-sm-6 q-pa-xs"},Xn={class:"col-6 col-sm-6 q-pa-xs"},er={class:"row"},ar={class:"col-6 col-sm-2 q-pa-xs"},tr={class:"row"},or={class:"col-2"},lr={class:"col-10"},ir={class:"col-6 col-sm-2 q-pa-xs"},sr={class:"col-6 col-sm-1 q-pa-xs"},nr={class:"col-4 col-sm-1 q-pa-xs"},rr={class:"col-4 col-sm-2 q-pa-xs"},dr={class:"col-6 col-sm-1 q-pa-xs"},cr=(0,i.Uk)("Subtotal "),mr=(0,i.Wm)("br",null,null,-1),ur={class:"col-6 col-sm-1 q-pa-xs"},pr={class:"col-6 col-sm-1 q-pa-xs"},hr=(0,i.Uk)("Subtotal "),gr=(0,i.Wm)("br",null,null,-1),fr={class:"col-6 col-sm-1 q-pa-xs"},br=(0,i.Uk)("Subtotal "),vr=(0,i.Wm)("br",null,null,-1),wr={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},Wr={class:"col-12"},yr={class:"row"},Vr={class:"col-12 col-sm-12"},Cr={class:"row"},xr=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),_r={class:"col-6 col-sm-4 q-pa-xs"},qr={class:"col-6 col-sm-4 q-pa-xs"},Er={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},Ar={class:"col-12"},Dr={class:"col-12"},kr=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),Mr={class:"row"},Tr={class:"col-12 col-md-6 q-pa-xs"},Sr={class:"col-12 col-md-6 q-pa-xs"},Or={class:"col-12 col-md-6 q-pa-xs"},Rr={class:"col-12 col-md-6 q-pa-xs"},Nr={class:"col-12  q-pa-xs flex flex-center"},Ur=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),Ir=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),Pr={class:"row"},Yr={class:"col-12 col-md-4 q-pa-xs"},$r={class:"col-12 col-md-4 q-pa-xs"},Lr={class:"col-12 col-md-4 q-pa-xs"},Fr={class:"col-12 col-md-4 q-pa-xs"},zr={class:"col-12 col-md-4 q-pa-xs"},Zr={class:"col-12 col-md-4 q-pa-xs"},jr={class:"col-12 col-md-4 q-pa-xs"},Br={class:"col-12 col-md-4 q-pa-xs"},Qr={class:"col-12 col-md-4 q-pa-xs flex flex-center"},Gr=(0,i.Wm)("b",null," EN PRESTAMO ",-1),Hr=(0,i.Wm)("b",null," VENTA ",-1),Jr={class:"col-12  q-pa-xs flex flex-center"},Kr={class:"text-h6"},Xr={class:"row"},ed={class:"col-12 col-md-6 q-pa-xs"},ad={class:"col-12 col-md-6 q-pa-xs"},td={class:"col-12 col-md-6 q-pa-xs"},od={class:"col-12 col-md-6 q-pa-xs"},ld={class:"col-12 col-md-6 q-pa-xs"},id={class:"col-12 col-md-6 q-pa-xs"},sd={class:"col-12 col-md-6 q-pa-xs"},nd={class:"col-12 col-md-6 q-pa-xs"},rd={class:"col-12 col-md-6 q-pa-xs"},dd={class:"col-12 col-md-6 q-pa-xs"},cd={class:"col-12 col-md-6 q-pa-xs"},md={class:"col-12  q-pa-xs flex flex-center"};(0,i.Cn)();const ud=Bn(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-select"),m=(0,i.up)("q-badge"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-btn-group"),g=(0,i.up)("q-tr"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:Bn((()=>[(0,i.Wm)("div",Qn,[Gn,(0,i.Wm)("div",Hn,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Bn((()=>[(0,i.Wm)("div",Jn,[(0,i.Wm)("div",Kn,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Xn,[(0,i.Wm)(r,{dense:"",type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",er,[(0,i.Wm)("div",ar,[(0,i.Wm)("div",tr,[(0,i.Wm)("div",or,[(0,i.Wm)(d,{onClick:a[3]||(a[3]=e=>s.modalregistro=!0),class:"full-width full-height",color:"green",icon:"add_circle",size:"xs"}),s.model?((0,i.wg)(),(0,i.j4)(d,{key:0,onClick:a[4]||(a[4]=e=>{s.modcliente=s.model,s.dialog_mod=!0}),class:"full-width full-height",color:"yellow",icon:"edit",size:"xs"})):(0,i.kq)("",!0)]),(0,i.Wm)("div",lr,[(0,i.Wm)(c,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[5]||(a[5]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Seleccionar Cliente",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])])])]),(0,i.Wm)("div",ir,[(0,i.Wm)(c,{modelValue:s.producto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",sr,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[7]||(a[7]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",nr,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",rr,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[9]||(a[9]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",dr,[(0,i.Wm)(m,{class:"full-width full-height",color:"positive"},{default:Bn((()=>[cr,mr,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",ur,[(0,i.Wm)(r,{type:"number",label:"A cuenta",step:"0.1",modelValue:s.acuenta,"onUpdate:modelValue":a[10]||(a[10]=e=>s.acuenta=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",pr,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Bn((()=>[hr,gr,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",fr,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Bn((()=>[br,vr,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",wr,[(0,i.Wm)(d,{color:"accent",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Wr,[(0,i.Wm)("div",yr,[(0,i.Wm)("div",Vr,[(0,i.Wm)("div",Cr,[xr,e.$store.state.login.historialventadetalle?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",_r,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[11]||(a[11]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",qr,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Er,[(0,i.Wm)(d,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",Ar,[(0,i.Wm)(f,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:Bn((a=>[(0,i.Wm)(g,{props:a},{default:Bn((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"cantidad",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.cantidad),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"producto",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.producto),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:Bn((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:Bn((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:Bn((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:Bn((()=>["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:0},{default:Bn((()=>[e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"delete",color:"red",onClick:e=>n.anular(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"local_shipping",color:"info",onClick:e=>n.clickhojaruta(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:2},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",Dr,[(0,i.Wm)(d,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])]),(0,i.Wm)(w,{modelValue:s.modalregistro,"onUpdate:modelValue":a[17]||(a[17]=e=>s.modalregistro=e)},{default:Bn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Bn((()=>[(0,i.Wm)(b,null,{default:Bn((()=>[kr])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Bn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:Bn((()=>[(0,i.Wm)("div",Mr,[(0,i.Wm)("div",Tr,[(0,i.Wm)(r,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[13]||(a[13]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Sr,[(0,i.Wm)(r,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[14]||(a[14]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Or,[(0,i.Wm)(r,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[15]||(a[15]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Rr,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[16]||(a[16]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Nr,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Bn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[23]||(a[23]=e=>s.dialog_mod=e)},{default:Bn((()=>[(0,i.Wm)(v,null,{default:Bn((()=>[(0,i.Wm)(b,{class:"bg-green-14 text-white"},{default:Bn((()=>[Ur])),_:1}),(0,i.Wm)(b,{class:"q-pt-xs"},{default:Bn((()=>[(0,i.Wm)(u,{onSubmit:n.onMod,class:"q-gutter-md"},{default:Bn((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.ci,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modcliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.titular,"onUpdate:modelValue":a[19]||(a[19]=e=>s.modcliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.telefono,"onUpdate:modelValue":a[20]||(a[20]=e=>s.modcliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:s.modcliente.direccion,"onUpdate:modelValue":a[21]||(a[21]=e=>s.modcliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.observacion,"onUpdate:modelValue":a[22]||(a[22]=e=>s.modcliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[34]||(a[34]=e=>s.modalgarantia=e)},{default:Bn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Bn((()=>[(0,i.Wm)(b,null,{default:Bn((()=>[Ir])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Bn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:Bn((()=>[(0,i.Wm)("div",Pr,[(0,i.Wm)("div",Yr,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.model.label,"onUpdate:modelValue":a[24]||(a[24]=e=>s.model.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",$r,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.model.telefono,"onUpdate:modelValue":a[25]||(a[25]=e=>s.model.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Lr,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.model.direccion,"onUpdate:modelValue":a[26]||(a[26]=e=>s.model.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Fr,[(0,i.Wm)(c,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":a[27]||(a[27]=e=>s.inventario=e),options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options"])]),(0,i.Wm)("div",zr,[(0,i.Wm)(r,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":a[28]||(a[28]=e=>s.newgarantia.cantidad=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Zr,[(0,i.Wm)(r,{outlined:"",type:"number",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[29]||(a[29]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",jr,[(0,i.Wm)(r,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[30]||(a[30]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Br,[(0,i.Wm)(r,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[31]||(a[31]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Qr,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[32]||(a[32]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Gr,(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[33]||(a[33]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Hr]),(0,i.Wm)("div",Jr,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Bn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[46]||(a[46]=e=>s.modalhojaruta=e)},{default:Bn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Bn((()=>[(0,i.Wm)(b,null,{default:Bn((()=>[(0,i.Wm)("div",Kr,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Bn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:Bn((()=>[(0,i.Wm)("div",Xr,[(0,i.Wm)("div",ed,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[35]||(a[35]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ad,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[36]||(a[36]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",td,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[37]||(a[37]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",od,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[38]||(a[38]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ld,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[39]||(a[39]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",id,[(0,i.Wm)(r,{required:"",outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[40]||(a[40]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",sd,[(0,i.Wm)(r,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[41]||(a[41]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",nd,[(0,i.Wm)(r,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[42]||(a[42]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",rd,[(0,i.Wm)(r,{required:"",outlined:"",label:"precio",modelValue:s.venta.precio,"onUpdate:modelValue":a[43]||(a[43]=e=>s.venta.precio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",dd,[(0,i.Wm)(r,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[44]||(a[44]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",cd,[(0,i.Wm)(r,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[45]||(a[45]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",md,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Bn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),pd={name:"Venta",data(){return{modalregistro:!1,dialog_mod:!1,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",newgarantia:{tipo:"EN PRESTAMO"},newcliente:{},clientes:[],clientes2:[],modcliente:{},cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},modalgarantia:!1,modalhojaruta:!1,columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"titular",label:"Cliente",field:"titular"},{name:"cantidad",label:"cantidad",field:"cantidad"},{name:"producto",label:"Producto",field:"producto"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],respuesta:{},venta:{},prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.misclientes(),this.$axios.get("https://bnaty.siscenter.org/api/listaproducto").then((e=>{e.data.forEach((e=>{"DETALLE"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("https://bnaty.siscenter.org/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.get("https://bnaty.siscenter.org/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.misclientes()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},misclientes(){this.$axios.get("https://bnaty.siscenter.org/api/listacliente").then((e=>{this.clientes=[],e.data.forEach((e=>{2==e.tipocliente&&(e.label=e.ci+" "+e.titular,this.clientes.push(e))}))}))},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("https://bnaty.siscenter.org/api/agregarcliente",this.newcliente).then((()=>{this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))},actualizarventa(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/venta/"+this.venta.id,{turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misventas(),this.modalhojaruta=!1}))},agregargarantia(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("https://bnaty.siscenter.org/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.model.id,tipo:this.newgarantia.tipo,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={},this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.modalgarantia=!1,this.respuesta={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message.error,color:"red",position:"center",icon:"error"})}))},impboleta(e){console.log(e),this.$axios.post("https://bnaty.siscenter.org/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},impruta(e){this.$axios.post("https://bnaty.siscenter.org/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.siscenter.org/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",position:"center",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",icon:"error",html:!0}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestamos "+e.model.label),t.text(5,1.5,"DE "+oa()(e.fecha4).format("DD/MM/YYYY")+" AL "+oa()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,ne.ZP.formatDate(e.fecha,"DD/MM/YYYY").toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+oa()(e.fecha2).format("DD/MM/YYYY")+" AL "+oa()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(11.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(11.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"DETALLE"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,precio:e.total,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,direccion:e.direccion,envase:e.envase,telefono1:e.cliente.telefono,fechaentrega:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),telefono2:e.telefono2,user:e.user.name,turno:e.turno,hora:e.hora,observacion:e.observacion,producto:e.detalle.nombreproducto,cantidad:e.detalle.cantidad})})),console.log(this.ventas)}))},agregar(){},guardar(){return 0==this.model?(this.$q.notify({position:"center",message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",spinnerSize:"100px",icon:"error",html:!0}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,observacion:this.observacion,tipo:"DETALLE",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.notify({message:"Venta exitosa",color:"green",position:"center",icon:"info"}),this.misventas(),this.$q.dialog({message:"Deseas registrar garantia?",title:"Garantia?",cancel:!0}).onOk((()=>{this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.modalgarantia=!0})).onCancel((()=>{this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0,this.respuesta={}}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",position:"center",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};pd.render=ud,pd.__scopeId="data-v-29807053";const hd=pd;S()(pd,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QBtn:D.Z,QSelect:ia.Z,QBadge:pe.Z,QTable:fe.Z,QTd:ve.Z,QIcon:_.Z,QTr:be.Z,QBtnGroup:Ms.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z}),S()(pd,"directives",{ClosePopup:ye.Z});const gd=(0,i.HX)("data-v-78dfb7f5");(0,i.dD)("data-v-78dfb7f5");const fd=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"PRESTAMOS DETALLE")],-1),bd={class:"row"},vd={class:"col-12 col-sm-3 q-pa-xs"},wd={class:"col-12 col-sm-3 q-pa-xs"},Wd={class:"col-12 col-sm-3 q-pa-xs"},yd={class:"col-12 col-sm-3 q-pa-xs"},Vd={class:"col-12 col-sm-3 q-pa-xs"},Cd={class:"col-12 col-sm-3 q-pa-xs"},xd={class:"col-12 col-sm-3 q-pa-xs"},_d={class:"col-12 col-sm-3 q-pa-xs flex flex-center"},qd={class:"row"},Ed={class:"col-6  q-pa-xs "},Ad={class:"col-6  q-pa-xs ",style:{"text-align":"right"}},Dd={class:"col-12 flex flex-center"},kd={style:{margin:"0px",padding:"0px",border:"0px"}},Md=(0,i.Wm)("b",null,"Cant:",-1),Td=(0,i.Wm)("b",null,"Fecha:",-1),Sd=(0,i.Uk)(" Imprimir "),Od=(0,i.Uk)(" Devolver "),Rd=(0,i.Uk)(" Listado "),Nd=(0,i.Uk)(" Modificar "),Ud=(0,i.Uk)(" Baja "),Id=(0,i.Uk)(" Eliminar "),Pd=(0,i.Wm)("hr",null,null,-1),Yd={key:1},$d=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Uk)(),(0,i.Wm)("th",null,"Monto")])],-1),Ld=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),Fd=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion ",-1);(0,i.Cn)();const zd=gd(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-pagination"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-td"),f=(0,i.up)("q-avatar"),b=(0,i.up)("q-item-section"),v=(0,i.up)("q-item"),w=(0,i.up)("q-list"),W=(0,i.up)("q-btn-dropdown"),y=(0,i.up)("q-table"),V=(0,i.up)("q-card-section"),C=(0,i.up)("q-card"),x=(0,i.up)("q-dialog"),_=(0,i.up)("q-page"),q=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(_,{class:"q-pa-xs"},{default:gd((()=>[fd,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:gd((()=>[(0,i.Wm)("div",bd,[(0,i.Wm)("div",vd,[1==s.tab?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"","use-input":"",outlined:"",label:"Seleccionar local",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos,onFilter:n.filterFn},null,8,["modelValue","options","onFilter"])):((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"","use-input":"",onFilter:n.filterFn,outlined:"",label:"Seleccionar Cliente",modelValue:s.cliente,"onUpdate:modelValue":a[2]||(a[2]=e=>s.cliente=e),options:s.prestamos,"option-label":"titular"},null,8,["onFilter","modelValue","options"]))]),(0,i.Wm)("div",wd,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Wd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.cantidad=e),n.calcular],type:"number",rules:[e=>e>0||"Ingrese valor"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,i.Wm)("div",yd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Vd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.efectivo=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",Cd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[7]||(a[7]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",xd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",_d,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[10]||(a[10]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)])]),(0,i.Wm)("div",qd,[(0,i.Wm)("div",Ed,[(0,i.Wm)(c,{label:"Imprimir Pendientes",color:"amber",icon:"print",onClick:n.imprimir},null,8,["onClick"])]),(0,i.Wm)("div",Ad,[s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(c,{key:1,label:"agregar",icon:"send",color:"positive",type:"submit"}))])])])),_:1},8,["onSubmit"]),2==s.tab?((0,i.wg)(),(0,i.j4)(u,{key:0,class:"full-width text-h5 flex flex-center",color:"red"},{default:gd((()=>[(0,i.Uk)("TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs.",1)])),_:1})):(0,i.kq)("",!0),(0,i.Wm)("div",Dd,[(0,i.Wm)(p,{modelValue:s.pagination.page,"onUpdate:modelValue":a[11]||(a[11]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[12]||(a[12]=e=>n.listadoprestamo()),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])]),(0,i.Wm)(y,{title:"LISTA DE PRESTAMOS DETALLE",rows:s.listadop,columns:s.colprestamo,filter:s.filter,pagination:s.pagination,"onUpdate:pagination":a[14]||(a[14]=e=>s.pagination=e),"rows-per-page-options":[0],"row-key":"name","wrap-cells":""},{"top-right":gd((()=>[(0,i.Wm)(d,{outlined:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[13]||(a[13]=e=>s.filter=e),n.listadoprestamo],placeholder:"Buscar"},{append:gd((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),"body-cell-prestado":gd((e=>[(0,i.Wm)(g,{key:"prestado",props:e,style:e.row.prestado>0?"color:green;font-size:20px; font-weight: bold;":"color:red;font-size:20px; font-weight: bold;"},{default:gd((()=>[(0,i.Uk)((0,R.zw)(e.row.prestado),1)])),_:2},1032,["props","style"])])),"body-cell-observacion":gd((e=>[(0,i.Wm)(g,{key:"observacion",props:e},{default:gd((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":gd((e=>[(0,i.Wm)(g,{key:"estado",props:e},{default:gd((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"negative"},{default:gd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:1,color:"amber"},{default:gd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:2,color:"positive"},{default:gd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:3,color:"blue"},{default:gd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":gd((e=>[(0,i.Wm)(g,{key:"logprestamos",props:e},{default:gd((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",kd,[Md,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),Td,(0,i.Uk)((0,R.zw)(e.fecha),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":gd((e=>[(0,i.Wm)(g,{key:"telfono",props:e},{default:gd((()=>[""!=e.row.telefono?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-motivoanulacion":gd((e=>[(0,i.Wm)(g,{key:"motivoanulacion",props:e},{default:gd((()=>[""!=e.row.motivoAnulacion&&null!=e.row.motivoAnulacion?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verAnulacion(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-fisico":gd((e=>[(0,i.Wm)(g,{key:"fisico",props:e},{default:gd((()=>[""!=e.row.fisico?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verFisico(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":gd((a=>[(0,i.Wm)(g,{key:"opcion",props:a},{default:gd((()=>[(0,i.Wm)(W,{color:"primary",label:"Opcion"},{default:gd((()=>[(0,i.Wm)(w,null,{default:gd((()=>["EN PRESTAMO"==a.row.estado||"DEVUELTO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:0,clickable:"",onClick:e=>n.onPrint(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"print",color:"info","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Sd])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:1,clickable:"",onClick:e=>n.onDev(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"refresh",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Od])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(v,{clickable:"",onClick:e=>n.onList(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"list",color:"green","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Rd])),_:1})])),_:2},1032,["onClick"]),[[q]]),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:2,clickable:"",onClick:e=>n.onMod(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"edit",color:"yellow","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Nd])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:3,clickable:"",onClick:e=>n.onEliminar(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"delete",color:"red-12","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Ud])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(v,{key:4,clickable:"",onClick:e=>n.ondelete(a.row),dense:""},{default:gd((()=>[(0,i.Wm)(b,{avatar:""},{default:gd((()=>[(0,i.Wm)(f,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:gd((()=>[Id])),_:1})])),_:2},1032,["onClick"])),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination"]),Pd,1==s.tab?((0,i.wg)(),(0,i.j4)("table",Yd,[$d,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(x,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[17]||(a[17]=e=>s.dialog_dev=e)},{default:gd((()=>[(0,i.Wm)(C,{style:{"min-width":"350px"}},{default:gd((()=>[(0,i.Wm)(V,null,{default:gd((()=>[Ld])),_:1}),(0,i.Wm)(m,{onSubmit:n.devolver,class:"q-gutter-md"},{default:gd((()=>[(0,i.Wm)(V,{class:"q-pt-none"},{default:gd((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[15]||(a[15]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[16]||(a[16]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[q]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:s.dialog_list,"onUpdate:modelValue":a[18]||(a[18]=e=>s.dialog_list=e)},{default:gd((()=>[(0,i.Wm)(C,{style:{"min-width":"350px"}},{default:gd((()=>[(0,i.Wm)(V,null,{default:gd((()=>[Fd])),_:1}),(0,i.Wm)(V,{class:"q-pt-none"},{default:gd((()=>[(0,i.Wm)(y,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name","rows-per-page-options":[0]},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:gd((e=>[(0,i.Wm)(g,{key:"op",props:e},{default:gd((()=>[(0,i.Wm)(c,{color:"info",icon:"print",dense:"",onClick:a=>n.printDevuelto(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delDevuelto(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),Zd={name:"Venta",data(){return{tab:2,prestamos:[],cliente:"",inventarios:[],inventario:"",cantidades:[],cantidad:1,fisico:"",efectivo:0,observacion:"",tipo:"EN PRESTAMO",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},prestamo_id:"",listado:[],listadop:[],dev:{},reportepres:[],options:[],boolmod:!1,filter:"",fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),colum:[{name:"op",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"fecha",field:e=>ne.ZP.formatDate(e.fecha,"DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id",sortable:!0},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"fechaAnulacion",label:"FECHA ANULACION",field:e=>oa()(e.fechaAnulacion).format("DD/MM/YYYY"),sortable:!0},{name:"motivoanulacion",label:"MOTIVO ANULACION",field:e=>e.motivoAnulacion,sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"fisico",label:"FISICO",field:"fisico",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}],pagination:{page:1,rowsPerPage:20,rowsNumber:0,last_page:0}}},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("https://bnaty.siscenter.org/api/listInv").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0],console.log(this.inventario),this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{onPrint(e){this.$axios.post("https://bnaty.siscenter.org/api/impresion/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},printDevuelto(e){this.$axios.post("https://bnaty.siscenter.org/api/impdevolucion/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delDevuelto(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Devolucion"}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/logprestamo/"+e.id).then((e=>{this.dialog_list=!1,this.$axios.get("https://bnaty.siscenter.org/api/listInv").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0],this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:"<h6>"+e.cliente.telefono+"</h6>",html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verFisico(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.fisico}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verAnulacion(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.motivoAnulacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.prestamos.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fecha:this.fecha,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.listadoprestamo(),this.boolmod=!1,this.$q.loading.hide(),this.cantidad=1,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.efectivo=0,this.observacion=""})),this.filtrarlista(),this.cajaprestamo()},reporte(){this.$axios.post("https://bnaty.siscenter.org/api/reportecliente").then((e=>{this.reportepres=[],e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&this.reportepres.push(e),2==this.tab&&2==e.tipocliente&&this.reportepres.push(e)}))}))},listadoprestamo(){this.$axios.post("https://bnaty.siscenter.org/api/listPag",{tipo:this.tab,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.listadop=[],this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{"ANULADO"==e.estado&&(e.estado="BAJA"),this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){this.$q.dialog({title:"Dar de Baja",message:"Motivo de Baja",prompt:{model:"",type:"textarea"}}).onOk((a=>{e.motivo=a,this.$axios.post("https://bnaty.siscenter.org/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("https://bnaty.siscenter.org/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},onMod(e){console.log(e),this.boolmod=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fecha=e.fecha,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.inventario=e.inventario},cajaprestamo(){this.$axios.post("https://bnaty.siscenter.org/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},listclientes(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/listacliente").then((e=>{this.prestamos=[],console.log(e.data),e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&(e.titular=e.local,e.label=e.titular,this.prestamos.push(e)),2==this.tab&&2==e.tipocliente&&(e.label=e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/cliente").then((e=>{this.prestamos=e.data,this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):null==this.cliente?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/prestamo",{efectivo:this.efectivo,fecha:this.fecha,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,tipo:this.tipo,inventario_id:this.inventario.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.listadoprestamo(),this.$q.loading.hide(),this.cantidad=1,this.efectivo=0,this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.calcular})),this.filtrarlista(),void this.cajaprestamo())},devolver(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/logprestamo",{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.listadoprestamo(),this.cajaprestamo(),this.dialog_dev=!1,this.dev={},this.$q.loading.hide(),this.filtrarlista()}))},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new hl.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto&&"ANULADO"!=l.estado?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};var jd=t(87300),Bd=t(82226),Qd=t(27011);Zd.render=zd,Zd.__scopeId="data-v-78dfb7f5";const Gd=Zd;S()(Zd,"components",{QPage:V.Z,QForm:q.Z,QSelect:ia.Z,QInput:E.Z,QBtn:D.Z,QBadge:pe.Z,QPagination:jd.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QBtnDropdown:Bd.Z,QList:Qd.Z,QItem:Fn.Z,QItemSection:zn.Z,QAvatar:We.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z}),S()(Zd,"directives",{ClosePopup:ye.Z});const Hd=(0,i.HX)("data-v-563bd557");(0,i.dD)("data-v-563bd557");const Jd=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"PRESTAMOS LOCAL")],-1),Kd={class:"row"},Xd={class:"col-12 col-sm-3 q-pa-xs"},ec={class:"col-12 col-sm-3 q-pa-xs"},ac={class:"col-12 col-sm-3 q-pa-xs"},tc={class:"col-12 col-sm-3 q-pa-xs"},oc={class:"col-12 col-sm-3 q-pa-xs"},lc={class:"col-12 col-sm-3 q-pa-xs"},ic={class:"col-12 col-sm-3 q-pa-xs"},sc={class:"col-12 col-sm-3 q-pa-xs flex flex-center"},nc={class:"row"},rc={class:"col-6  q-pa-xs hidden"},dc={class:"col-6  q-pa-xs ",style:{"text-align":"right"}},cc={key:0,class:"text-h5"},mc={class:"col-12 flex flex-center"},uc={style:{margin:"0px",padding:"0px",border:"0px"}},pc=(0,i.Wm)("b",null,"Cant:",-1),hc=(0,i.Wm)("b",null,"Fecha: ",-1),gc=(0,i.Uk)("Devolver"),fc=(0,i.Uk)("Listar"),bc=(0,i.Uk)("Modificar"),vc=(0,i.Uk)("Dar Baja"),wc=(0,i.Uk)("Eliminar"),Wc=(0,i.Wm)("hr",null,null,-1),yc={key:1,id:"example",style:{width:"100%"},class:"cell-border"},Vc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Uk)(),(0,i.Wm)("th",null,"Monto")])],-1),Cc=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),xc=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion ",-1);(0,i.Cn)();const _c=Hd(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-pagination"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-td"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-avatar"),b=(0,i.up)("q-item-section"),v=(0,i.up)("q-item-label"),w=(0,i.up)("q-item"),W=(0,i.up)("q-list"),y=(0,i.up)("q-btn-dropdown"),V=(0,i.up)("q-table"),C=(0,i.up)("q-card-section"),x=(0,i.up)("q-card"),_=(0,i.up)("q-dialog"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:Hd((()=>[Jd,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Hd((()=>[(0,i.Wm)("div",Kd,[(0,i.Wm)("div",Xd,[1==s.tab?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"","use-input":"",onFilter:n.filterFn,outlined:"",label:"Seleccionar local",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos,"option-label":"label"},null,8,["onFilter","modelValue","options"])):((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",outlined:"",label:"Seleccionar Cliente",modelValue:s.cliente,"onUpdate:modelValue":a[2]||(a[2]=e=>s.cliente=e),options:s.prestamos,"option-label":"titular"},null,8,["modelValue","options"]))]),(0,i.Wm)("div",ec,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",ac,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.cantidad=e),n.calcular],type:"number",rules:[e=>e>0||"Ingrese valor"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,i.Wm)("div",tc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",oc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.efectivo=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",lc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[7]||(a[7]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",ic,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",sc,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[10]||(a[10]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)])]),(0,i.Wm)("div",nc,[(0,i.Wm)("div",rc,[(0,i.Wm)(c,{label:"Imprimir Pendientes",color:"amber",icon:"print",onClick:n.imprimir},null,8,["onClick"])]),(0,i.Wm)("div",dc,[s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(c,{key:1,label:"agregar",icon:"send",color:"positive",type:"submit"}))])])])),_:1},8,["onSubmit"]),2==s.tab?((0,i.wg)(),(0,i.j4)("div",cc,"TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs.",1)):(0,i.kq)("",!0),(0,i.Wm)("div",mc,[(0,i.Wm)(u,{modelValue:s.pagination.page,"onUpdate:modelValue":a[11]||(a[11]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[12]||(a[12]=e=>n.listadoprestamo()),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])]),(0,i.Wm)(V,{title:"LISTA DE PRESTAMOS LOCAL",rows:s.listadop,columns:s.colprestamo,pagination:s.pagination,"onUpdate:pagination":a[14]||(a[14]=e=>s.pagination=e),filter:s.filter,"rows-per-page-options":[0],"row-key":"name"},{"top-right":Hd((()=>[(0,i.Wm)(d,{borderless:"",dense:"",outlined:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[13]||(a[13]=e=>s.filter=e),n.listadoprestamo],placeholder:"Buscar"},{append:Hd((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),"body-cell-prestado":Hd((e=>[(0,i.Wm)(h,{key:"prestado",props:e,style:e.row.prestado>0?"color:red;font-size:20px; font-weight: bold;":"color:green;font-size:20px; font-weight: bold;"},{default:Hd((()=>[(0,i.Uk)((0,R.zw)(e.row.prestado),1)])),_:2},1032,["props","style"])])),"body-cell-observacion":Hd((e=>[(0,i.Wm)(h,{key:"observacion",props:e},{default:Hd((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":Hd((e=>[(0,i.Wm)(h,{key:"estado",props:e},{default:Hd((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(g,{key:0,color:"negative"},{default:Hd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(g,{key:1,color:"amber"},{default:Hd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(g,{key:2,color:"positive"},{default:Hd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(g,{key:3,color:"blue"},{default:Hd((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":Hd((e=>[(0,i.Wm)(h,{key:"logprestamos",props:e},{default:Hd((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",uc,[pc,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),hc,(0,i.Uk)((0,R.zw)(n.cambiofecha(e.fecha)),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":Hd((e=>[(0,i.Wm)(h,{key:"telfono",props:e},{default:Hd((()=>[(0,i.Wm)(c,{icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-fisico":Hd((e=>[(0,i.Wm)(h,{key:"fisico",props:e},{default:Hd((()=>[""!=e.row.fisico?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verFisico(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":Hd((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:Hd((()=>[(0,i.Wm)(y,{color:"primary",label:"Opcion","no-caps":"",dense:""},{default:Hd((()=>[(0,i.Wm)(W,null,{default:Hd((()=>["EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{key:0,clickable:"",onClick:e=>n.onDev(a.row)},{default:Hd((()=>[(0,i.Wm)(b,{avatar:""},{default:Hd((()=>[(0,i.Wm)(f,{icon:"refresh",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:Hd((()=>[(0,i.Wm)(v,null,{default:Hd((()=>[gc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(w,{clickable:"",onClick:e=>n.onList(a.row)},{default:Hd((()=>[(0,i.Wm)(b,{avatar:""},{default:Hd((()=>[(0,i.Wm)(f,{icon:"list",color:"green","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:Hd((()=>[(0,i.Wm)(v,null,{default:Hd((()=>[fc])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[E]]),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{key:1,clickable:"",onClick:e=>n.onMod(a.row)},{default:Hd((()=>[(0,i.Wm)(b,{avatar:""},{default:Hd((()=>[(0,i.Wm)(f,{icon:"edit",color:"yellow","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:Hd((()=>[(0,i.Wm)(v,null,{default:Hd((()=>[bc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{key:2,clickable:"",onClick:e=>n.onEliminar(a.row)},{default:Hd((()=>[(0,i.Wm)(b,{avatar:""},{default:Hd((()=>[(0,i.Wm)(f,{icon:"stop",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:Hd((()=>[(0,i.Wm)(v,null,{default:Hd((()=>[vc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(w,{key:3,clickable:"",onClick:e=>n.ondelete(a.row)},{default:Hd((()=>[(0,i.Wm)(b,{avatar:""},{default:Hd((()=>[(0,i.Wm)(f,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(b,null,{default:Hd((()=>[(0,i.Wm)(v,null,{default:Hd((()=>[wc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","filter"]),Wc,1==s.tab?((0,i.wg)(),(0,i.j4)("table",yc,[Vc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(_,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[17]||(a[17]=e=>s.dialog_dev=e)},{default:Hd((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:Hd((()=>[(0,i.Wm)(C,null,{default:Hd((()=>[Cc])),_:1}),(0,i.Wm)(m,{onSubmit:n.devolver,class:"q-gutter-md"},{default:Hd((()=>[(0,i.Wm)(C,{class:"q-pt-none"},{default:Hd((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[15]||(a[15]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[16]||(a[16]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(_,{modelValue:s.dialog_list,"onUpdate:modelValue":a[18]||(a[18]=e=>s.dialog_list=e)},{default:Hd((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:Hd((()=>[(0,i.Wm)(C,null,{default:Hd((()=>[xc])),_:1}),(0,i.Wm)(C,{class:"q-pt-none"},{default:Hd((()=>[(0,i.Wm)(V,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name","rows-per-page-options":[0]},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:Hd((e=>[(0,i.Wm)(h,{key:"op",props:e},{default:Hd((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delDevuelto(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),qc={name:"Venta",data(){return{tab:1,prestamos:[],cliente:"",inventarios:[],inventario:"",cantidades:[],cantidad:1,fisico:"",efectivo:0,observacion:"",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},listado:[],listadop:[],dev:{},tipo:"EN PRESTAMO",reportepres:[],options:[],fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),boolmod:!1,filter:"",pagination:{page:1,rowsPerPage:20,rowsNumber:0,last_page:0},colum:[{name:"op",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"fecha",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id",sortable:!0},{name:"local",label:"LOCAL",field:e=>e.cliente.local,sortable:!0,align:"left"},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"fechaAnulacion",label:"FECHA ANULACION",field:e=>oa()(e.fechaAnulacion).format("DD/MM/YYYY"),sortable:!0},{name:"motivoanulacion",label:"MOTIVO ANULACION",field:e=>e.motivoAnulacion,sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}]}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("https://bnaty.siscenter.org/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0]})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{delDevuelto(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Devolucion"}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/logprestamo/"+e.id).then((e=>{this.dialog_list=!1,this.$axios.get("https://bnaty.siscenter.org/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0]})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:"<h6>"+e.cliente.telefono+"</h6>",html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verFisico(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.fisico}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.prestamos.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},reporte(){this.$axios.post("https://bnaty.siscenter.org/api/reportecliente").then((e=>{this.reportepres=[],de()("#example").DataTable().destroy(),e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&this.reportepres.push(e),2==this.tab&&2==e.tipocliente&&this.reportepres.push(e)})),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},listadoprestamo(){this.$axios.post("https://bnaty.siscenter.org/api/listPag",{tipo:this.tab,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.listadop=[],this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{"ANULADO"==e.estado&&(e.estado="BAJA"),this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){this.$q.dialog({title:"Eliminar",message:"Seguro de eliminar?",cancel:!0,persistent:!0}).onOk((()=>{this.$axios.post("https://bnaty.siscenter.org/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))})).onCancel((()=>{})).onDismiss((()=>{}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("https://bnaty.siscenter.org/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},cajaprestamo(){this.$axios.post("https://bnaty.siscenter.org/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fisico:this.fisico,fecha:this.fecha,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.listadoprestamo(),this.boolmod=!1,this.$q.loading.hide(),this.cantidad=1,this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.efectivo=0,this.observacion=""})),this.filtrarlista(),this.cajaprestamo()},listclientes(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/listacliente").then((e=>{this.prestamos=[],console.log(e.data),e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&(e.titular=e.local+" "+e.titular,e.label=e.titular,this.prestamos.push(e)),2==this.tab&&2==e.tipocliente&&(e.label=e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/cliente").then((e=>{this.prestamos=e.data,this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):null==this.cliente?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/prestamo",{efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,tipo:this.tipo,fecha:this.fecha,inventario_id:this.inventario.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.listadoprestamo(),this.$q.loading.hide(),this.cantidad=1,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.calcular})),this.filtrarlista(),void this.cajaprestamo())},onMod(e){console.log(e),this.boolmod=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.inventario=e.inventario,this.fecha=e.fecha},devolver(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/logprestamo",{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{console.log(e.data);let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.dialog_dev=!1,this.listadoprestamo(),this.cajaprestamo(),this.dev={},this.$q.loading.hide()}))},cambiofecha(e){return oa()(e).format("DD/MM/YYYY")},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new hl.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};var Ec=t(2350);qc.render=_c,qc.__scopeId="data-v-563bd557";const Ac=qc;S()(qc,"components",{QPage:V.Z,QForm:q.Z,QSelect:ia.Z,QInput:E.Z,QBtn:D.Z,QPagination:jd.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QBadge:pe.Z,QBtnDropdown:Bd.Z,QList:Qd.Z,QItem:Fn.Z,QItemSection:zn.Z,QAvatar:We.Z,QItemLabel:Ec.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z}),S()(qc,"directives",{ClosePopup:ye.Z});const Dc=(0,i.HX)("data-v-19e77ff6");(0,i.dD)("data-v-19e77ff6");const kc=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL DE VENTAS")],-1),Mc=(0,i.Wm)("div",{class:"col-12"},null,-1),Tc={class:"row"},Sc={class:"col-3  q-pa-xs"},Oc={key:0,class:"col-3  q-pa-xs"},Rc={class:"col-3"},Nc={class:"col-3  q-pa-xs flex flex-center"},Uc={class:"col-12"},Ic={class:" responsive"},Pc={id:"example",style:{width:"100%"},class:"cell-border"},Yc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),$c={class:"hidden"},Lc=(0,i.Uk)("LOCAL"),Fc=(0,i.Uk)("CLIENTE"),zc=(0,i.Uk)("Listado Pago"),Zc=(0,i.Uk)("Detalle Venta"),jc=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),Bc=(0,i.Wm)("b",null,"Obs:",-1),Qc={style:{width:"100%"}},Gc=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1),Hc=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Jc=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Kc=Dc(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-table"),w=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:Dc((()=>[kc,Mc,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Dc((()=>[(0,i.Wm)("div",Tc,[(0,i.Wm)("div",Sc,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Oc,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Rc,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Nc,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Uc,[(0,i.Wm)("div",Ic,[(0,i.Wm)("table",Pc,[Yc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",$c,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Dc((()=>[Lc])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Dc((()=>[Fc])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:Dc((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:Dc((()=>[(0,i.Wm)(p,null,{default:Dc((()=>[zc])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{icon:"shopping_cart",color:"accent",onClick:a=>{s.venta=e,s.modalDialog=!0},dense:""},{default:Dc((()=>[(0,i.Wm)(p,null,{default:Dc((()=>[Zc])),_:1})])),_:2},1032,["onClick"])])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.modalDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>s.modalDialog=e)},{default:Dc((()=>[(0,i.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:Dc((()=>[(0,i.Wm)(h,null,{default:Dc((()=>[jc])),_:1}),(0,i.Wm)(h,null,{default:Dc((()=>[(0,i.Wm)("div",null,[Bc,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",Qc,[Gc,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:Dc((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[5]||(a[5]=e=>s.alert=e)},{default:Dc((()=>[(0,i.Wm)(f,null,{default:Dc((()=>[(0,i.Wm)(h,null,{default:Dc((()=>[Hc])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Dc((()=>[(0,i.Wm)(v,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:Dc((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:Dc((()=>[(0,i.Wm)(f,null,{default:Dc((()=>[(0,i.Wm)(h,null,{default:Dc((()=>[Jc])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Dc((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Dc((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));t(79720);var Xc=t(7167),em=t.n(Xc),am=t(90182),tm=t.n(am),om=t(17033),lm=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),tm().vfs=om.I.vfs,window.JSZip=em();const im={name:"Venta",data(){return{valcobrar:!1,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],rango:"RANGO",inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,modalDialog:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},venta:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){lm("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onPago(){this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),lm("#example").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/listadoventa",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],lm("#example").DataTable().destroy(),e.data.forEach((e=>{console.log(e),this.ventas.push({id:e.id,fechaord:e.fecha,fecha:oa()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,observacion:e.observacion,detalles:e.detalles})})),this.$nextTick((()=>{lm("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};im.render=Kc,im.__scopeId="data-v-19e77ff6";const sm=im;S()(im,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:fe.Z,QIcon:_.Z,QTr:be.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z}),S()(im,"directives",{ClosePopup:ye.Z});const nm=(0,i.HX)("data-v-b8c0e9e2");(0,i.dD)("data-v-b8c0e9e2");const rm={class:"col-12"},dm=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR DETALLE",-1),cm=(0,i.Wm)("div",{class:"col-12"},null,-1),mm={class:"row q-pa-xs"},um={class:"col-3"},pm={key:0,class:"col-3"},hm={class:"col-3"},gm={class:"col-3"},fm={class:"col-12"},bm={class:" responsive"},vm={id:"example",style:{width:"100%"},class:"cell-border"},wm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Wm={class:"hidden"},ym={style:{"font-weight":"bold","font-size":"16px"}},Vm=(0,i.Uk)("LOCAL"),Cm=(0,i.Uk)("CLIENTE"),xm=(0,i.Uk)("Listado Pago"),_m=(0,i.Uk)("Realizar Pago"),qm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Em=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Am=nm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-td"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:nm((()=>[(0,i.Wm)("div",rm,[dm,cm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:nm((()=>[(0,i.Wm)("div",mm,[(0,i.Wm)("div",um,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:"",style:{width:"100%"}},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",pm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:"",style:{width:"100%"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",hm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",gm,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",fm,[(0,i.Wm)("div",bm,[(0,i.Wm)("table",vm,[wm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",Wm,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",ym,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:nm((()=>[Vm])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:nm((()=>[Cm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:nm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:nm((()=>[(0,i.Wm)(p,null,{default:nm((()=>[xm])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:nm((()=>[(0,i.Wm)(p,null,{default:nm((()=>[_m])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(w,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:nm((()=>[(0,i.Wm)(v,null,{default:nm((()=>[(0,i.Wm)(h,null,{default:nm((()=>[qm])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:nm((()=>[(0,i.Wm)(f,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:nm((e=>[(0,i.Wm)(g,{key:"op",props:e},{default:nm((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(b,{align:"right"},{default:nm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:nm((()=>[(0,i.Wm)(v,null,{default:nm((()=>[(0,i.Wm)(h,null,{default:nm((()=>[Em])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:nm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:nm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})})),Dm={name:"Venta",data(){return{loading:!1,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),rango:"RANGO",alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>oa()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{console.log(e.data),this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),de()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/listventdetalle",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:oa()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),de()("#example").DataTable().destroy(),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Dm.render=Am,Dm.__scopeId="data-v-b8c0e9e2";const km=Dm;S()(Dm,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QTable:fe.Z,QTd:ve.Z,QCardActions:M.Z}),S()(Dm,"directives",{ClosePopup:ye.Z});const Mm=(0,i.HX)("data-v-bd0de1da");(0,i.dD)("data-v-bd0de1da");const Tm={class:"col-12"},Sm=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR LOCAL",-1),Om={class:"col-12 col-sm-12"},Rm=(0,i.Wm)("div",{class:"col-12"},null,-1),Nm={class:"row"},Um={class:"col-3  q-pa-xs"},Im={key:0,class:"col-3  q-pa-xs"},Pm={class:"col-3"},Ym={class:"col-3  q-pa-xs flex flex-center"},$m={class:"col-12"},Lm={class:" responsive"},Fm={id:"example",style:{width:"100%"},class:"cell-border"},zm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Zm={class:"hidden"},jm={style:{"font-weight":"bold","font-size":"20px"}},Bm=(0,i.Uk)("LOCAL"),Qm=(0,i.Uk)("CLIENTE"),Gm=(0,i.Uk)("Listado Pago"),Hm=(0,i.Uk)("Realizar Pago"),Jm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Km=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Xm=Mm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-td"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:Mm((()=>[(0,i.Wm)("div",Tm,[Sm,(0,i.Wm)("div",Om,[Rm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Mm((()=>[(0,i.Wm)("div",Nm,[(0,i.Wm)("div",Um,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Im,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Pm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Ym,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",$m,[(0,i.Wm)("div",Lm,[(0,i.Wm)("table",Fm,[zm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.i},[(0,i.Wm)("td",Zm,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",jm,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Mm((()=>[Bm])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Mm((()=>[Qm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:Mm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:Mm((()=>[(0,i.Wm)(p,null,{default:Mm((()=>[Gm])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:Mm((()=>[(0,i.Wm)(p,null,{default:Mm((()=>[Hm])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(w,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:Mm((()=>[(0,i.Wm)(v,null,{default:Mm((()=>[(0,i.Wm)(h,null,{default:Mm((()=>[Jm])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Mm((()=>[(0,i.Wm)(f,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:Mm((e=>[(0,i.Wm)(g,{key:"op",props:e},{default:Mm((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(b,{align:"right"},{default:Mm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:Mm((()=>[(0,i.Wm)(v,null,{default:Mm((()=>[(0,i.Wm)(h,null,{default:Mm((()=>[Km])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Mm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Mm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})})),eu={name:"Venta",data(){return{loading:!1,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>oa()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:"",tot:"",pageTotal:"",ttotal:"",tacuenta:"",tsaldo:""}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(4).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.ttotal=i.column(3,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tcuenta=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tsaldo=i.column(5,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),de()(i.column(4).footer()).html("total:"+this.ttotal+" a cuenta:"+this.tcuenta+" saldo:"+this.tsaldo+" ")}}),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),de()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/listventlocal",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],de()("#example").DataTable().destroy(),e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:oa()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(4).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.ttotal=i.column(3,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tcuenta=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tsaldo=i.column(5,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),de()(i.column(4).footer()).html("total:"+this.ttotal+" a cuenta:"+this.tcuenta+" saldo:"+this.tsaldo+" ")}})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};eu.render=Xm,eu.__scopeId="data-v-bd0de1da";const au=eu;S()(eu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QTable:fe.Z,QTd:ve.Z,QCardActions:M.Z}),S()(eu,"directives",{ClosePopup:ye.Z});const tu=(0,i.HX)("data-v-4e905371");(0,i.dD)("data-v-4e905371");const ou=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR RUTA")],-1),lu=(0,i.Wm)("div",{class:"col-12"},null,-1),iu={class:"row"},su={class:"col-3  q-pa-xs"},nu={key:0,class:"col-3  q-pa-xs"},ru={class:"col-3"},du={class:"col-3  q-pa-xs flex flex-center"},cu={class:"col-12"},mu={class:" responsive"},uu={id:"example",style:{width:"100%"},class:"cell-border"},pu=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),hu={class:"hidden"},gu={style:{"font-weight":"bold","font-size":"16px"}},fu=(0,i.Uk)("LOCAL"),bu=(0,i.Uk)("CLIENTE"),vu=(0,i.Uk)("Listado Pago"),wu=(0,i.Uk)("Realizar Pago"),Wu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),yu=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Vu=tu(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-td"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:tu((()=>[ou,lu,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:tu((()=>[(0,i.Wm)("div",iu,[(0,i.Wm)("div",su,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",nu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",ru,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",du,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",cu,[(0,i.Wm)("div",mu,[(0,i.Wm)("table",uu,[pu,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",hu,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",gu,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:tu((()=>[fu])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:tu((()=>[bu])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:tu((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:tu((()=>[(0,i.Wm)(p,null,{default:tu((()=>[vu])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:tu((()=>[(0,i.Wm)(p,null,{default:tu((()=>[wu])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(w,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:tu((()=>[(0,i.Wm)(v,null,{default:tu((()=>[(0,i.Wm)(h,null,{default:tu((()=>[Wu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:tu((()=>[(0,i.Wm)(f,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:tu((e=>[(0,i.Wm)(g,{key:"op",props:e},{default:tu((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(b,{align:"right"},{default:tu((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:tu((()=>[(0,i.Wm)(v,null,{default:tu((()=>[(0,i.Wm)(h,null,{default:tu((()=>[yu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:tu((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:tu((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})})),Cu={name:"Venta",data(){return{loading:!1,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],rango:"RANGO",cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>oa()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),de()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/listventruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],de()("#example").DataTable().destroy(),e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:oa()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),this.$nextTick((()=>{de()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Cu.render=Vu,Cu.__scopeId="data-v-4e905371";const xu=Cu;S()(Cu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:fe.Z,QIcon:_.Z,QTr:be.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z}),S()(Cu,"directives",{ClosePopup:ye.Z});const _u=(0,i.HX)("data-v-44e1217e");(0,i.dD)("data-v-44e1217e");const qu=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas con Rutas")],-1),Eu={class:"row"},Au={class:"col-3  q-pa-xs"},Du={key:0,class:"col-3  q-pa-xs"},ku={class:"col-3"},Mu={class:"col-3  q-pa-xs flex flex-center"},Tu={class:"col-12"},Su={class:" responsive"},Ou={id:"example",style:{width:"100%"},class:"cell-border"},Ru=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Nu=(0,i.Uk)("LOCAL"),Uu=(0,i.Uk)("CLIENTE"),Iu=(0,i.Uk)("Listado Pago"),Pu=(0,i.Uk)("Impresion "),Yu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),$u=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Lu=_u(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:_u((()=>[qu,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:_u((()=>[(0,i.Wm)("div",Eu,[(0,i.Wm)("div",Au,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Du,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",ku,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Mu,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Tu,[(0,i.Wm)("div",Su,[(0,i.Wm)("table",Ou,[Ru,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.local),1),(0,i.Wm)("td",null,(0,R.zw)(a.titular),1),(0,i.Wm)("td",null,(0,R.zw)(a.total),1),(0,i.Wm)("td",null,(0,R.zw)(a.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(a.saldo),1),(0,i.Wm)("td",null,[1==a.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:_u((()=>[Nu])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:_u((()=>[Uu])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==a.estado?"positive":"negative"},{default:_u((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:e=>n.listpago(a),dense:""},{default:_u((()=>[(0,i.Wm)(p,null,{default:_u((()=>[Iu])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"info",icon:"print",dense:"",onClick:e=>n.printRuta(a)},{default:_u((()=>[(0,i.Wm)(p,null,{default:_u((()=>[Pu])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(v,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:_u((()=>[(0,i.Wm)(b,null,{default:_u((()=>[(0,i.Wm)(h,null,{default:_u((()=>[Yu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:_u((()=>[(0,i.Wm)(g,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(f,{align:"right"},{default:_u((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dialog_pago=e)},{default:_u((()=>[(0,i.Wm)(b,null,{default:_u((()=>[(0,i.Wm)(h,null,{default:_u((()=>[$u])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:_u((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:_u((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));var Fu=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),tm().vfs=om.I.vfs,window.JSZip=em();const zu={name:"Venta",data(){return{fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"id",label:"Id",field:"id"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"direccion",label:"Direccion",field:"direccion"},{name:"fechaentrega",label:"Fecha Entrega",field:"fechaentrega"},{name:"telefono1",label:"Telefono 1",field:"telefono1"},{name:"telefono2",label:"Telefono 2",field:"telefono2"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){Fu("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{this.responsable=e.data.name}))},methods:{printRuta(e){console.log(e),this.$axios.post("https://bnaty.siscenter.org/api/impresionruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},onPago(){this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),Fu("#example").DataTable().destroy(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),this.$axios.post("https://bnaty.siscenter.org/api/listadoventaruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:oa()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,direccion:e.direccion,fechaentrega:e.fechaentrega,telefono1:e.telefono1,telefono2:e.telefono2})})),this.$nextTick((()=>{Fu("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.siscenter.org/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=ne.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.siscenter.org/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.siscenter.org/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.siscenter.org/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};zu.render=Lu,zu.__scopeId="data-v-44e1217e";const Zu=zu;S()(zu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:fe.Z,QIcon:_.Z,QTr:be.Z,QTd:ve.Z,QBadge:pe.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QCardActions:M.Z}),S()(zu,"directives",{ClosePopup:ye.Z});const ju={class:"q-pa-md"},Bu={class:"row"},Qu={class:"col-3  q-pa-xs"},Gu={class:"col-3  q-pa-xs"},Hu={class:"col-3"},Ju={class:"col-3  q-pa-xs flex flex-center"},Ku={class:"text-h6"},Xu=(0,i.Uk)(" Caja Chica"),ep={class:"row"},ap={class:"col-12"},tp=(0,i.Uk)("Eliminar");function op(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-td"),w=(0,i.up)("q-tooltip"),W=(0,i.up)("q-table"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",ju,[(0,i.Wm)(r,{label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Bu,[(0,i.Wm)("div",Qu,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gu,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Hu,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Ju,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA CHICA: "+(0,R.zw)(s.cajachica.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[8]||(a[8]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ku,[(0,i.Wm)(p,{name:"add_circle"}),Xu])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ep,[(0,i.Wm)("div",ap,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGA","RETIRA"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{filter:s.filter,title:"Caja Chica",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[9]||(a[9]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-motivo":(0,i.w5)((e=>[(0,i.Wm)(v,{key:"motivo",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"accent",onClick:a=>n.viewRow(e.row),icon:"list"},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(v,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e.row),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[tp])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"])])}const lp={data(){return{alert:!1,filter:"",fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",rango:"RANGO",dato:{},options:[],props:[],cajachica:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[]}},created(){this.misdatos(),this.totalcaja()},methods:{deleteRow(e){this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/logcaja/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("https://bnaty.siscenter.org/api/totalcaja").then((e=>{this.cajachica=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$axios.post("https://bnaty.siscenter.org/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:0}).then((e=>{console.log(e.data),this.data=e.data,this.totalcaja(),this.$q.loading.hide()}))},viewRow(e){this.$q.dialog({title:"MOTIVO ",message:e.motivo}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},onSubmit(){if("RETIRA"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajachica.monto))return this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/logcaja",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGA"}}};lp.render=op;const ip=lp;S()(lp,"components",{QBtn:D.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:pe.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QIcon:_.Z,QSelect:ia.Z,QTable:fe.Z,QTd:ve.Z,QTooltip:ge.Z}),S()(lp,"directives",{ClosePopup:ye.Z});const sp={class:"q-pa-md"},np={class:"row"},rp={class:"col-3  q-pa-xs"},dp={class:"col-3  q-pa-xs"},cp={class:"col-3"},mp={class:"col-3  q-pa-xs flex flex-center"},up={class:"text-h6"},pp=(0,i.Uk)(" Caja General"),hp={class:"row"},gp={class:"col-12"},fp={id:"example",class:"display"},bp=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"Detalle"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"Glosa"),(0,i.Wm)("th",null,"Tipo"),(0,i.Wm)("th",null,"Opcion")])],-1),vp=(0,i.Uk)("Eliminar"),wp=(0,i.Wm)("td",null,null,-1);function Wp(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-tooltip"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",sp,[(0,i.Wm)(r,{label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",np,[(0,i.Wm)("div",rp,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",dp,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",cp,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",mp,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA GENERAL: "+(0,R.zw)(s.cajageneral.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[8]||(a[8]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",up,[(0,i.Wm)(p,{name:"add_circle"}),pp])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",hp,[(0,i.Wm)("div",gp,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGAR","RETIRAR"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("table",fp,[bp,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.data,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.monto),1),(0,i.Wm)("td",null,(0,R.zw)(a.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(a.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(null==a.glosa?"":a.glosa.nombre),1),(0,i.Wm)("td",null,["INGRESO"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"EGRESO"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"AGREGAR"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:2,color:"blue"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"RETIRAR"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:3,color:"purple"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0)]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"red",onClick:e=>n.deleteRow(a),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[vp])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),wp])))),128))])])])}const yp={data(){return{alert:!1,filter:"",fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",dato:{},options:[],props:[],pageTotal:"",rango:"RANGO",tot:"",cajageneral:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"detalle",align:"left",label:"DETALLE",field:"detalle",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[]}},created(){de()("#example").DataTable(),this.misdatos(),this.totalcaja()},methods:{deleteRow(e){console.log(e),this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/loggeneral/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("https://bnaty.siscenter.org/api/totalgeneral").then((e=>{this.cajageneral=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),de()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.siscenter.org/api/listgeneral",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{de()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{e.fechaord=e.fecha,e.fecha=oa()(e.fecha).format("DD/MM/YYYY")})),this.data=e.data,this.totalcaja(),this.$nextTick((()=>{de()("#example").DataTable({order:[[0,"desc"]],language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),de()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}}),this.$q.loading.hide()}))}))},onSubmit(){if("RETIRAR"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajageneral.monto))return this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/loggeneral",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGAR"}}};yp.render=Wp;const Vp=yp;S()(yp,"components",{QBtn:D.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:pe.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QIcon:_.Z,QSelect:ia.Z,QTooltip:ge.Z,QTable:fe.Z,QTd:ve.Z}),S()(yp,"directives",{ClosePopup:ye.Z});const Cp={class:"row"},xp=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-h5 text-center text-bold"},"INVENTARIO DE MATERIAL")],-1),_p={class:"col-3 flex flex-center"},qp=(0,i.Uk)("REGISTRO"),Ep=(0,i.Uk)("MODIFICAR"),Ap=(0,i.Uk)("ELIMINAR"),Dp={class:"col-6"},kp={class:"col-3 flex flex-center"},Mp={class:"col-12"},Tp={class:"q-pa-none"},Sp={class:"absolute-full flex flex-center"},Op={class:"row"},Rp={class:"col-3"},Np={class:"col-3"},Up={class:"col-3"},Ip={class:"col-3"},Pp={class:"q-pa-none"},Yp={class:"q-pa-none"},$p=(0,i.Wm)("div",{class:"text-h7"},"Compra MATERIAL ",-1),Lp={class:"text-h7"},Fp={class:"row"},zp={class:"col-12"},Zp={class:"col-2"},jp={class:"col-2"},Bp={class:"col-2"},Qp={class:"col-3"},Gp={class:"col-3"},Hp={class:"col-3"},Jp={class:"col-1"},Kp={style:{width:"100%","border-collapse":"collapse"}},Xp=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"NRO"),(0,i.Wm)("th",null,"MATERIAL"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"COSTO"),(0,i.Wm)("th",null,"SUBTOTAL"),(0,i.Wm)("th",null,"LOTE"),(0,i.Wm)("th",null,"FEC VEN"),(0,i.Wm)("th",null,"OBS"),(0,i.Wm)("th",null,"OPCION")])],-1),eh=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL ",-1),ah={class:"text-h7"},th={class:"text-h7"},oh={class:"text-h7"},lh=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO PROVEEDOR",-1),ih=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO MATERIAL",-1),sh=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR MATERIAL",-1),nh=(0,i.Wm)("div",{class:"text-h7"},"PAGAR POR LA COMPRA",-1),rh=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR PROVEEDOR",-1),dh=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),ch=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function mh(e,a,t,o,l,s){const n=(0,i.up)("q-item-label"),r=(0,i.up)("q-item-section"),d=(0,i.up)("q-item"),c=(0,i.up)("q-list"),m=(0,i.up)("q-btn-dropdown"),u=(0,i.up)("q-select"),p=(0,i.up)("q-btn"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-input"),f=(0,i.up)("q-td"),b=(0,i.up)("q-badge"),v=(0,i.up)("q-linear-progress"),w=(0,i.up)("q-table"),W=(0,i.up)("q-card-section"),y=(0,i.up)("q-card"),V=(0,i.up)("q-dialog"),C=(0,i.up)("q-form"),x=(0,i.up)("q-card-actions"),_=(0,i.up)("q-avatar"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Cp,[xp,(0,i.Wm)("div",_p,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(m,{key:0,icon:"list",class:"full-width",color:"accent",label:"PROVEEDOR"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:a[1]||(a[1]=e=>{l.dialog_prov=!0,l.proveedor={}})},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[qp])),_:1})])),_:1})])),_:1},512),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.modif_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Ep])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.del_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Ap])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]])])),_:1})])),_:1})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Dp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(u,{key:0,dense:"",outlined:"",modelValue:l.proveedor,"onUpdate:modelValue":a[2]||(a[2]=e=>l.proveedor=e),options:l.proveedores,label:"Provedores"},null,8,["modelValue","options"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",kp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,icon:"engineering",color:"teal",class:"full-width",label:"Registrar Material",onClick:a[3]||(a[3]=e=>{l.dialog_mat=!0,l.material={}})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Mp,[(0,i.Wm)("div",Tp,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE MATERIALES ",rows:l.materiales,columns:l.columns,filter:l.filter,"row-key":"name"},{"top-right":(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"amber-8",icon:"shopping_cart",label:"COMPRAS",onClick:a[4]||(a[4]=e=>{l.dialog_add=!0,l.compras=[]})})):(0,i.kq)("",!0),(0,i.Wm)(g,{dense:"",outlined:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.retirarRow(a),icon:"download"},null,8,["onClick"]),(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"cyan",onClick:e=>s.reporte(a),icon:"poll"},null,8,["onClick"]),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-stock":(0,i.w5)((e=>[(0,i.Wm)(f,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"25px",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",class:"full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Sp,[(0,i.Wm)(b,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",Op,[(0,i.Wm)("div",Rp,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[6]||(a[6]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Np,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[7]||(a[7]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Up,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material3,"onUpdate:modelValue":a[8]||(a[8]=e=>l.material3=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ip,[(0,i.Wm)(p,{color:"info",label:"Consultar",onClick:s.consultmaterial},null,8,["onClick"])])]),(0,i.Wm)("div",Pp,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,"row-key":"name"},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(f,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{color:"POR PAGAR"==e.row.estado?"red":"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda>0?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listpago(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:2,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",Yp,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE RETIROS ",rows:l.recutodo,columns:l.colrecuento,filter:l.filter,"row-key":"name"},{"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:e=>s.modrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(V,{modelValue:l.dialog_add,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{width:"800px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[$p,(0,i.Wm)("div",Lp,"Proveedor: "+(0,R.zw)(l.proveedor.razon),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Fp,[(0,i.Wm)("div",zp,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[9]||(a[9]=e=>l.material=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Zp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[10]||(a[10]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",jp,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(g,{key:0,dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[11]||(a[11]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Bp,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)(" Subtotal: "+(0,R.zw)(l.compra.costo*l.compra.cantidad),1)],64)):(0,i.kq)("",!0)]),(0,i.Wm)("div",Qp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[12]||(a[12]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Gp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[13]||(a[13]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),(0,i.Wm)("div",Hp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[14]||(a[14]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Jp,[(0,i.Wm)(p,{dense:"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])]),(0,i.Wm)("table",Kp,[Xp,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",null,(0,R.zw)(a+1),1),(0,i.Wm)("td",null,(0,R.zw)(e.material),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",null,(0,R.zw)(e.lote),1),(0,i.Wm)("td",null,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",null,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",null,[(0,i.Wm)(p,{color:"red",icon:"delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dialog_remove=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[eh,(0,i.Wm)("div",ah,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[16]||(a[16]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[17]||(a[17]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modcompra,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dialog_modcompra=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",th,"Modificar Compra material : "+(0,R.zw)(l.compra2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.updatecompra,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[19]||(a[19]=e=>l.compra2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"number",modelValue:l.compra2.costo,"onUpdate:modelValue":a[20]||(a[20]=e=>l.compra2.costo=e),label:"Costo U"},null,8,["modelValue"]),(0,i.Uk)(" Subtotal: "+(0,R.zw)(l.compra2.costo*l.compra2.cantidad)+" ",1),(0,i.Wm)(g,{outlined:"",type:"date",modelValue:l.compra2.fechaven,"onUpdate:modelValue":a[21]||(a[21]=e=>l.compra2.fechaven=e),label:"fecha Ven"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.lote,"onUpdate:modelValue":a[22]||(a[22]=e=>l.compra2.lote=e),label:"Lote"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.observacion,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[27]||(a[27]=e=>l.dialog_modret=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",oh,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[25]||(a[25]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[26]||(a[26]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_prov,"onUpdate:modelValue":a[33]||(a[33]=e=>l.dialog_prov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[lh])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.razon,"onUpdate:modelValue":a[28]||(a[28]=e=>l.proveedor.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.nit,"onUpdate:modelValue":a[29]||(a[29]=e=>l.proveedor.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.direccion,"onUpdate:modelValue":a[30]||(a[30]=e=>l.proveedor.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.email,"onUpdate:modelValue":a[31]||(a[31]=e=>l.proveedor.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.telefono,"onUpdate:modelValue":a[32]||(a[32]=e=>l.proveedor.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_mat,"onUpdate:modelValue":a[37]||(a[37]=e=>l.dialog_mat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[ih])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.onRegmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.nombre,"onUpdate:modelValue":a[34]||(a[34]=e=>l.material.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.unid,"onUpdate:modelValue":a[35]||(a[35]=e=>l.material.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.min,"onUpdate:modelValue":a[36]||(a[36]=e=>l.material.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modmat,"onUpdate:modelValue":a[41]||(a[41]=e=>l.dialog_modmat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[sh])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.onModmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.nombre,"onUpdate:modelValue":a[38]||(a[38]=e=>l.material2.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.unid,"onUpdate:modelValue":a[39]||(a[39]=e=>l.material2.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.min,"onUpdate:modelValue":a[40]||(a[40]=e=>l.material2.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[44]||(a[44]=e=>l.dialogpagar=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[nh])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.regpago,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.monto,"onUpdate:modelValue":a[42]||(a[42]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[43]||(a[43]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modprov,"onUpdate:modelValue":a[50]||(a[50]=e=>l.dialog_modprov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-yellow-14 text-white"},{default:(0,i.w5)((()=>[rh])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(C,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.razon,"onUpdate:modelValue":a[45]||(a[45]=e=>l.proveedor2.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.nit,"onUpdate:modelValue":a[46]||(a[46]=e=>l.proveedor2.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.direccion,"onUpdate:modelValue":a[47]||(a[47]=e=>l.proveedor2.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.email,"onUpdate:modelValue":a[48]||(a[48]=e=>l.proveedor2.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.telefono,"onUpdate:modelValue":a[49]||(a[49]=e=>l.proveedor2.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[53]||(a[53]=e=>l.dialog_reporte=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:(0,i.w5)((()=>[dh])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[51]||(a[51]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[52]||(a[52]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(x,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_del,"onUpdate:modelValue":a[54]||(a[54]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"clear",color:"red","text-color":"white"}),ch])),_:1}),(0,i.Wm)(x,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[55]||(a[55]=e=>l.dialoglistpagos=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(x,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}const uh={data(){return{proveedor:{},proveedor2:{},dialog_prov:!1,dialog_modprov:!1,dialog_mat:!1,dialog_modmat:!1,dialog_reporte:!1,dialog_modcompra:!1,dialog_modret:!1,checkgasto:"CAJA",material:{},materiales:[],material2:{},material3:{},proveedores:[],compras:[],comptodo:[],compra:{},compra2:{},recutodo:[],crear:!1,recuento:{},recuento2:{},filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_remove:!1,dialog_log:!1,dialogpagar:!1,dialoglistpagos:!1,pago:{},agregar:0,disminuir:0,producto:{},color:"",dato:{},fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha3:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha4:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),columns:[{name:"nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"unid",align:"center",label:"unidad",field:"unid",sortable:!0},{name:"min",align:"center",label:"Minimo",field:"min",sortable:!0},{name:"stock",align:"center",label:"stock",field:"stock",sortable:!0},{name:"opcion",label:"OPCIONES",field:"opcion"}],colcompra:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"deuda",align:"center",label:"DEUDA",field:"deuda",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:"fechaven",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colpagos:[{name:"fecha",align:"center",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],rows:[],montogeneral:0,totalcompra:0,montocaja:0,pagos:[]}},created(){this.misproveedores(),this.mismateriales(),this.totalgeneral(),this.totalcaja()},methods:{listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},totalcaja(){this.$axios.post("https://bnaty.siscenter.org/api/totalcaja").then((e=>{this.montocaja=e.data.monto}))},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$axios.post("https://bnaty.siscenter.org/api/logcompra",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "}),this.checkgasto="CAJA",this.consultmaterial()})))},totalgeneral(){this.$axios.post("https://bnaty.siscenter.org/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},updatecompra(){this.$axios.put("https://bnaty.siscenter.org/api/compra/"+this.compra2.id,this.compra2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modcompra=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("https://bnaty.siscenter.org/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modcompra(e){this.compra2=e,this.dialog_modcompra=!0},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/compra/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/recuento/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultmaterial(){this.$axios.post("https://bnaty.siscenter.org/api/consultar",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{console.log(e.data),this.comptodo=e.data})),this.$axios.post("https://bnaty.siscenter.org/api/consulrecuento",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},genreporte(){console.log(ne.ZP.formatDate(new Date,"DD/MM/YYYY HH:mm:ss")),this.$axios.post("https://bnaty.siscenter.org/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=this;function t(){var e=new Image;e.src="logo.png",o.addImage(e,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"INVENTARIO MATERIAL : "+a.material2.nombre),o.text(5,1.5,"DE "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"TIPO"),o.text(2.5,3,"PROVEEDOR"),o.text(5,3,"MATERIAL"),o.text(7,3,"FECHA"),o.text(9.5,3,"COSTO"),o.text(11,3,"CANTIDAD"),o.text(13,3,"FECHA VEN"),o.text(15,3,"OBSERVACION"),o.setFont(void 0,"normal")}var o=new hl.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0;e.data.forEach((e=>{l+=.5,o.text(1,l+3,e.tipo),o.text(2.5,l+3,e.razon),o.text(5,l+3,e.nombre),o.text(7,l+3,ne.ZP.formatDate(new Date(e.fecha),"DD/MM/YYYY")),o.text(9.5,l+3,null==e.costo?"":e.costo+""),o.text(11,l+3,e.cantidad+""),o.text(13,l+3,null==e.fechaven?"":e.fechaven),o.text(15,l+3,null==e.observacion?"":e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),window.open(o.output("bloburl"),"_blank")}))},reporte(e){this.material2=e.row,this.dialog_reporte=!0},regcompra(){return 0==this.compras.length?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1):(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra)?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1):void this.$axios.post("https://bnaty.siscenter.org/api/compra",{provider_id:this.proveedor.id,user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.mismateriales()})))},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){return""!=this.compra.cantidad&&0!=this.compra.cantidad&&void 0!=this.compra.cantidad&&(void 0!=this.compra.costo&&""!=this.compra.costo&&0!=this.compra.costo&&(void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,this.compras.push(this.compra),void(this.compra={})))},onRegRecuento(){this.recuento.material_id=this.material2.id,this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("https://bnaty.siscenter.org/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_add=!1,this.mismateriales()}))},onRegRecuento2(){if(this.material2.stock<this.recuento.cantidad)return!1;this.recuento.material_id=this.material2.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("https://bnaty.siscenter.org/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.mismateriales()}))},agregarRow(e){this.material2=e.row,this.dialog_add=!0},retirarRow(e){this.material2=e.row,this.dialog_remove=!0},modif_prov(){this.proveedor2=this.proveedor,this.dialog_modprov=!0},onReg(){this.$axios.post("https://bnaty.siscenter.org/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},onRegmat(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/material",this.material).then((e=>{this.$q.loading.hide(),this.dialog_mat=!1,this.mismateriales(),this.material={}}))},onModmat(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/material/"+this.material2.id,this.material2).then((e=>{this.$q.loading.hide(),this.dialog_modmat=!1,this.mismateriales(),this.material={}}))},misproveedores(){this.proveedores=[],this.$axios.get("https://bnaty.siscenter.org/api/provider").then((e=>{e.data.forEach((e=>{e.label=e.razon,this.proveedores.push(e)})),this.proveedor=this.proveedores[0]}))},mismateriales(){this.materiales=[],this.$axios.get("https://bnaty.siscenter.org/api/material").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.materiales.push(e)})),this.material=this.materiales[0],this.material3=this.materiales[0]}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("https://bnaty.siscenter.org/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("https://bnaty.siscenter.org/api/activarprod",this.dato).then((e=>{this.listado()}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},editRow(e){this.material2=e.row,this.dialog_modmat=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.material2=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/material/"+this.material2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.mismateriales()})),this.$q.loading.hide()},del_prov(){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/provider/"+this.proveedor.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.misproveedores()})),this.$q.loading.hide()}))},onReset(){this.producto={}},computed:{}}};var ph=t(51598);uh.render=mh;const hh=uh;S()(uh,"components",{QPage:V.Z,QBtnDropdown:Bd.Z,QList:Qd.Z,QItem:Fn.Z,QItemSection:zn.Z,QItemLabel:Ec.Z,QSelect:ia.Z,QBtn:D.Z,QTable:fe.Z,QInput:E.Z,QIcon:_.Z,QTd:ve.Z,QLinearProgress:ph.Z,QBadge:pe.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QForm:q.Z,QCardActions:M.Z,QAvatar:We.Z}),S()(uh,"directives",{ClosePopup:ye.Z});const gh={class:"row"},fh=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-center text-bold"},"RESUMEN DE INGRESOS Y EGRESOS")],-1),bh={class:"col-12"},vh={class:"row"},wh={class:"col-4"},Wh={class:"col-4"},yh={class:"col-4 flex "},Vh={class:"col-12"},Ch={class:" responsive"},xh={class:"col-12"},_h={class:"row"},qh={class:"col-3 q-pa-md"},Eh={class:"col-3 q-pa-md"},Ah={class:"col-3 q-pa-md"},Dh={class:"col-3 q-pa-md"},kh={class:"col-12"};function Mh(e,a,t,o,l,s){const n=(0,i.up)("q-input"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-form"),c=(0,i.up)("q-table");return(0,i.wg)(),(0,i.j4)("div",gh,[fh,(0,i.Wm)("div",bh,[(0,i.Wm)(d,{onSubmit:s.listado},{default:(0,i.w5)((()=>[(0,i.Wm)("div",vh,[(0,i.Wm)("div",wh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>l.fecha1=e),label:"Fecha ini",required:"",hint:"Porfavor ingresar fecha inicio",counter:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=l.fecha1||"Fecha debe ser mayor o igual"],hint:"Porfavor ingresar fecha fin",counter:""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",yh,[(0,i.Wm)(r,{label:"Generar",class:"full-width ",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Vh,[(0,i.Wm)("div",Ch,[(0,i.Wm)(c,{dense:"",title:"Ingresos",rows:l.ingreso,columns:l.columns,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Egresos",rows:l.egreso,columns:l.columns2,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Caja Chica",rows:l.cchica,columns:l.columns3,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"])])]),(0,i.Wm)("div",xh,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",_h,[(0,i.Wm)("div",qh,[(0,i.Wm)(n,{type:"text",label:"Ingreso total","label-color":"positive",modelValue:s.totalingreso,"onUpdate:modelValue":a[3]||(a[3]=e=>s.totalingreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Eh,[(0,i.Wm)(n,{type:"text",label:"Egreso Total","label-color":"info",modelValue:s.totalegreso,"onUpdate:modelValue":a[4]||(a[4]=e=>s.totalegreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ah,[(0,i.Wm)(n,{type:"text",label:"Caja Chica Total","label-color":"info",modelValue:s.totalchica,"onUpdate:modelValue":a[5]||(a[5]=e=>s.totalchica=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Dh,[(0,i.Wm)(n,{type:"text",label:"Balance","label-color":"teal",outlined:"",modelValue:s.balance,"onUpdate:modelValue":a[6]||(a[6]=e=>s.balance=e)},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",kh,[(0,i.Wm)(r,{label:"Imprimir",icon:"print",color:"accent",class:"full-width",onClick:a[7]||(a[7]=e=>s.impresion2())})])])])}const Th={data(){return{fecha1:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),resumen:[],usuarios:[],filter:"",usuario:"",ventas:[],deudas:[],ingreso:[],egreso:[],cchica:[],regpago:{},pagos:{},final:0,dato:{},alert:!1,dialog_pago:!1,columns:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns2:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns3:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}]}},mounted(){},created(){de()("#example1").DataTable(),de()("#example2").DataTable(),de()("#example3").DataTable(),this.listado()},methods:{onPago(){this.$axios.post("https://bnaty.siscenter.org/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.ingreso=[],this.egreso=[],this.cchica=[],this.$axios.post("https://bnaty.siscenter.org/api/repventa",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Venta "+e.tipo,total:e.total,ingreso:e.total,egreso:0})}))})),this.$axios.post("https://bnaty.siscenter.org/api/repventpago",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{null!=e.data.total&&void 0!=e.data.total&&this.ingreso.push({detalle:"CxC pagos",total:e.data.total,ingreso:e.data.total,egreso:0})})),this.$axios.post("https://bnaty.siscenter.org/api/repingprestamo",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Prest/mat "+e.estado,total:e.total,ingreso:e.total,egreso:0})}))})),this.$axios.post("https://bnaty.siscenter.org/api/repgastos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.egreso.push({detalle:e.glosa,total:e.total,egreso:e.total,ingreso:0})}))})),this.$axios.post("https://bnaty.siscenter.org/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"SALARIOS",total:a.total,egreso:a.total,ingreso:0})})),this.$axios.post("https://bnaty.siscenter.org/api/repcompra",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"COMPRA ALMACEN",total:a.total,egreso:a.total,ingreso:0})})),this.$axios.post("https://bnaty.siscenter.org/api/repcaja",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),e.data.forEach((e=>{this.cchica.push({detalle:e.glosa,total:e.total,egreso:e.total,ingreso:0})}))}))},impresion2(){this.resumen=[],this.ingreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:e.total,egreso:0})})),this.egreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:0,egreso:e.total})}));let e=this,a=0,t=0,o=0,l="<style>        *{font-size:14px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>RESUMEN DE BALANCE DE <br>"+oa()(e.fecha1).format("DD/MM/YYYY")+" AL "+oa()(e.fecha2).format("DD/MM/YYYY")+"</div><br>        <div>INGRESOS</div><table><tr><th>DETALLE</th> <th>INGRESO</th> </tr>";this.ingreso.forEach((e=>{a+=e.ingreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.ingreso+"</td></tr>"})),l+="</table><br><div>EGRESOS</div><table><tr><th>DETALLE</th>  <th>EGRESO</th></tr>",this.egreso.forEach((e=>{t+=e.egreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.egreso+"</td></tr>"})),l+="</table><br><div>CAJA CHICA</div><table><tr><th>DETALLE</th> <th>EGRESO</th></tr>",this.cchica.forEach((e=>{o+=e.egreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.egreso+"</td></tr>"}));var i=a-t-o;l+="</table><div><b>TOTAL INGRESO: </b> "+a+" Bs</div>        <div><b>TOTAL EGRESO: </b> "+t+" Bs</div>        <div><b>T. CJA CHICA: </b> "+o+" Bs</div>        <div><b>BALANCE: </b> "+i+" Bs</div>";let s=window.open("_blank");s.document.write(l),s.document.close()},impresion(){this.resumen=[],this.ingreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:e.total,egreso:0})})),this.egreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:0,egreso:e.total})}));let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"RESUMEN DE BALANCE "),t.text(5,1.5,"DE "+oa()(e.fecha1).format("DD/MM/YYYY")+" AL "+oa()(e.fecha2).format("DD/MM/YYYY")),t.text(1,3,"DETALLE"),t.text(10,3,"INGRESO"),t.text(14,3,"EGRESO"),t.setFont(void 0,"normal")}var t=new hl.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(12),a();let o=0,l=0,i=0,s=0;this.ingreso.forEach((e=>{l+=e.ingreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.egreso.forEach((e=>{i+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.cchica.forEach((e=>{s+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(1,o+4,"TOTAL INGRESO: "),t.setFont(void 0,"normal"),t.text(4,o+4,l+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"TOTAL EGRESO: "),t.setFont(void 0,"normal"),t.text(10,o+4,i+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4.5,"T. CJA CHICA: "),t.setFont(void 0,"normal"),t.text(10,o+4.5,s+" Bs");var n=l-i-s;t.setFont(void 0,"bold"),t.text(14,o+4,"BALANCE: "),t.setFont(void 0,"normal"),t.text(18,o+4,n+"Bs"),window.open(t.output("bloburl"),"_blank")}},computed:{totalingreso(){let e=0;return this.ingreso.forEach((a=>{e+=parseFloat(a.ingreso)})),e},totalegreso(){let e=0;return this.egreso.forEach((a=>{e+=parseFloat(a.egreso)})),e},totalchica(){let e=0;return this.cchica.forEach((a=>{e+=parseFloat(a.total)})),e},balance(){var e=this.totalingreso-this.totalegreso-this.totalchica;return e}}};Th.render=Mh;const Sh=Th;S()(Th,"components",{QForm:q.Z,QInput:E.Z,QBtn:D.Z,QTable:fe.Z});const Oh=(0,i.HX)("data-v-2de20f13");(0,i.dD)("data-v-2de20f13");const Rh={class:"row"},Nh={class:"col-12"},Uh={class:"col-2"},Ih={class:"col-1 flex flex-center"},Ph={class:"col-5"},Yh=(0,i.Uk)(" No results "),$h={class:"col-4"},Lh={class:"col-7"},Fh={class:"row"},zh={class:"text-bold text-grey-9"},Zh={key:0},jh={class:"text-subtitle2 flex-center flex text-center"},Bh={class:"col-5"},Qh=(0,i.Wm)("div",{class:"text-subtitle2 flex-center flex text-center bg-primary text-white"},"PRODUCTOS",-1),Gh=(0,i.Wm)("div",{class:"row items-center bg-primary text-white"},[(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Cantidad"),(0,i.Wm)("div",{class:"col-5 text-center text-bold"},"Nombre"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Precio"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Subtotal"),(0,i.Wm)("div",{class:"col-1 text-center text-bold"},"Op")],-1),Hh={class:"col-2 text-center text-bold"},Jh={class:"col-5 text-grey"},Kh={class:"col-2 text-right text-grey"},Xh=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),eg={class:"col-2 text-right q-pr-xs text-bold"},ag={class:"col-1"},tg={class:"row"},og={class:"col-3"},lg=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),ig={class:"col-3"},sg={class:"text-bold text-grey"},ng=(0,i.Uk)("Total: "),rg={class:"text-black text-h5"},dg={class:"col-3"},cg={class:"text-bold text-grey"},mg=(0,i.Uk)("Saldo: "),ug={class:"col-3"},pg={class:"col-12",align:"center"},hg=(0,i.Wm)("div",{class:"col-12"},null,-1),gg=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),fg={class:"row"},bg={class:"col-12 col-md-6 q-pa-xs"},vg={class:"col-12 col-md-6 q-pa-xs"},wg={class:"col-12 col-md-6 q-pa-xs"},Wg={class:"col-12 col-md-6 q-pa-xs"},yg={class:"col-12 col-md-6 q-pa-xs"},Vg={class:"col-12 col-md-6 q-pa-xs"},Cg={class:"col-12 col-md-6 q-pa-xs"},xg={class:"col-12 col-md-6 q-pa-xs"},_g={class:"col-12 col-md-6 q-pa-xs"},qg={class:"col-12 col-md-6 q-pa-xs"},Eg={class:"col-12 col-md-6 q-pa-xs"},Ag={class:"col-12  q-pa-xs flex flex-center"},Dg=(0,i.Wm)("div",{class:"text-h6"},"Garantia?",-1),kg=(0,i.Uk)(" Desea registrar préstamo o venta de material? "),Mg=(0,i.Wm)("div",{class:"text-h6"},"Garantia?",-1),Tg=(0,i.Uk)(" Desea registrar préstamo o venta de material? "),Sg=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),Og={class:"col-12"},Rg={class:"row"},Ng={class:"col-3"},Ug={class:"col-3"},Ig={class:"col-1"},Pg={class:"col-3"},Yg={class:"col-12 flex flex-center"},$g={class:"col-12"},Lg=(0,i.Uk)("Anular"),Fg=(0,i.Uk)("Imprimir Ruta"),zg=(0,i.Uk)("Hoja de Ruta"),Zg=(0,i.Uk)("Detalle Venta"),jg=(0,i.Uk)("Imprimir Boleta"),Bg=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),Qg={class:"row"},Gg={class:"col-12 col-md-4 q-pa-xs"},Hg={class:"col-12 col-md-4 q-pa-xs"},Jg={class:"col-12 col-md-4 q-pa-xs"},Kg={class:"col-12 col-md-4 q-pa-xs"},Xg={class:"col-12 col-md-4 q-pa-xs"},ef={class:"col-12 col-md-4 q-pa-xs"},af={class:"col-12 col-md-4 q-pa-xs"},tf={class:"col-12 col-md-4 q-pa-xs"},of={class:"col-12 col-md-4 q-pa-xs flex flex-center"},lf=(0,i.Wm)("b",null," EN PRESTAMO ",-1),sf=(0,i.Wm)("b",null," VENTA ",-1),nf={class:"col-12  q-pa-xs flex flex-center "},rf={class:"col-6"},df={class:"col-6"},cf={class:"text-h6"},mf={class:"row"},uf={class:"col-12  q-pa-xs"},pf={class:"col-12 col-md-6 q-pa-xs"},hf={class:"col-12 col-md-6 q-pa-xs"},gf={class:"col-12 col-md-6 q-pa-xs"},ff={class:"col-12 col-md-6 q-pa-xs"},bf={class:"col-12 col-md-6 q-pa-xs"},vf={class:"col-12 col-md-6 q-pa-xs"},wf={class:"col-12 col-md-6 q-pa-xs"},Wf={class:"col-12 col-md-6 q-pa-xs"},yf={class:"col-12  q-pa-xs"},Vf={class:"col-12  q-pa-xs flex flex-center"},Cf=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),xf=(0,i.Wm)("b",null,"Obs:",-1),_f={style:{width:"100%"}},qf=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1);(0,i.Cn)();const Ef=Oh(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),u=(0,i.up)("q-select"),p=(0,i.up)("q-space"),h=(0,i.up)("q-chip"),g=(0,i.up)("q-card-section"),f=(0,i.up)("q-card"),b=(0,i.up)("q-form"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-card-actions"),W=(0,i.up)("q-toggle"),y=(0,i.up)("q-pagination"),V=(0,i.up)("q-icon"),C=(0,i.up)("q-td"),x=(0,i.up)("q-badge"),_=(0,i.up)("q-tooltip"),q=(0,i.up)("q-btn-group"),E=(0,i.up)("q-table"),A=(0,i.up)("q-page"),D=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(A,null,{default:Oh((()=>[(0,i.Wm)("div",Rh,[(0,i.Wm)("div",Nh,[(0,i.Wm)("div",{class:`q-pa-xs bg-${"detalle"==s.type?"red":"green"} text-center text-bold text-white`},(0,R.zw)("detalle"==s.type?"VENTA POR DETALLE":"VENTA POR LOCAL"),3)]),(0,i.Wm)("div",Uh,[(0,i.Wm)(r,{type:"date",outlined:"",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),dense:"",label:"Fecha"},null,8,["modelValue"])]),(0,i.Wm)("div",Ih,[(0,i.Wm)(d,{dense:"",color:"green",icon:"add_circle",onClick:a[2]||(a[2]=e=>{s.modalregistro=!0,s.newcliente={fechanac:"2000-01-01"}})}),s.client?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",color:"yellow",icon:"edit",onClick:a[3]||(a[3]=a=>{e.modcliente=s.client,s.dialog_mod=!0})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Ph,[(0,i.Wm)(u,{outlined:"",dense:"",modelValue:s.client,"onUpdate:modelValue":a[4]||(a[4]=e=>s.client=e),"use-input":"","input-debounce":"0",label:"Cliente",options:s.clients,onFilter:n.filterFn,behavior:"menu"},{"no-option":Oh((()=>[(0,i.Wm)(m,null,{default:Oh((()=>[(0,i.Wm)(c,{class:"text-grey"},{default:Oh((()=>[Yh])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",$h,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:s.obs,"onUpdate:modelValue":a[5]||(a[5]=e=>s.obs=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Lh,[(0,i.Wm)("div",Fh,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.products,(e=>((0,i.wg)(),(0,i.j4)("div",{class:"col-2",key:e.id,style:{padding:"5px"}},[(0,i.Wm)(f,{style:[{height:"80px"},"background-color: "+e.color],onClick:a=>n.saleAdd(e),class:"no_selection"},{default:Oh((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"},{default:Oh((()=>[(0,i.Wm)("div",zh,(0,R.zw)(e.precio)+"Bs.",1),(0,i.Wm)(p),e.cantidad>0?((0,i.wg)(),(0,i.j4)("div",Zh,[(0,i.Wm)(h,{color:"primary",class:" q-ma-none text-bold text-white",dense:"",label:e.cantidad},null,8,["label"])])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Wm)(g,{class:"q-pa-none"},{default:Oh((()=>[(0,i.Wm)("div",jh,(0,R.zw)(e.nombre),1)])),_:2},1024)])),_:2},1032,["onClick","style"])])))),128))])]),(0,i.Wm)("div",Bh,[(0,i.Wm)(f,null,{default:Oh((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Oh((()=>[Qh])),_:1}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Oh((()=>[Gh,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.productSales,((e,a)=>((0,i.wg)(),(0,i.j4)("div",{class:"row items-center",key:e.id},[(0,i.Wm)("div",Hh,[(0,i.Wm)(r,{modelValue:e.cantidad,"onUpdate:modelValue":a=>e.cantidad=a,dense:"",type:"number",step:"0.25"},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",Jh,(0,R.zw)(e.nombre),1),(0,i.Wm)("div",Kh,[(0,i.Wm)(r,{modelValue:e.precio,"onUpdate:modelValue":a=>e.precio=a,dense:"",type:"number",step:"0.1"},{append:Oh((()=>[Xh])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",eg,(0,R.zw)(e.precio*e.cantidad)+"Bs.",1),(0,i.Wm)("div",ag,[(0,i.Wm)(d,{color:"red",icon:"delete",dense:"",onClick:t=>n.delProduct(a,e.id)},null,8,["onClick"])])])))),128))])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:Oh((()=>[(0,i.Wm)("div",tg,[(0,i.Wm)("div",og,[(0,i.Wm)(r,{modelValue:s.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.monto=e),dense:"",outlined:"",label:"Monto",type:"number",step:"0.1"},{append:Oh((()=>[lg])),_:1},8,["modelValue"])]),(0,i.Wm)("div",ig,[(0,i.Wm)("div",sg,[ng,(0,i.Wm)("span",rg,(0,R.zw)(n.total)+"Bs.",1)])]),(0,i.Wm)("div",dg,[(0,i.Wm)("div",cg,[mg,(0,i.Wm)("span",{class:n.porCobrar>0?"text-red text-h5":"text-green text-h5"},(0,R.zw)(n.porCobrar)+"Bs.",3)])]),(0,i.Wm)("div",ug,[(0,i.Wm)("div",{class:`bg-${n.porCobrar>0?"red":"green"}-3 text-${n.porCobrar>0?"red":"green"}-8 text-bold q-ma-xs q-pa-xs`,style:`border: 1px solid ${n.porCobrar>0?"red":"green"};border-radius: 5px`},(0,R.zw)(n.porCobrar>0?"POR COBRAR":"CANCELADO"),7)]),(0,i.Wm)("div",pg,[(0,i.Wm)(d,{color:"green",icon:"check_circle",label:"Generar Venta",onClick:n.saleSave},null,8,["onClick"])]),hg])])),_:1})]),(0,i.Wm)(v,{modelValue:s.modalregistro,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modalregistro=e)},{default:Oh((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[gg])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Oh((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:Oh((()=>[(0,i.Wm)("div",fg,[(0,i.Wm)("div",bg,[(0,i.Wm)(r,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[7]||(a[7]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",vg,[(0,i.Wm)(r,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[8]||(a[8]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wg,[(0,i.Wm)(r,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[9]||(a[9]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Wg,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[10]||(a[10]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),"local"==s.type?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",yg,[(0,i.Wm)(r,{outlined:"",label:"Local",modelValue:s.newcliente.local,"onUpdate:modelValue":a[11]||(a[11]=e=>s.newcliente.local=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vg,[(0,i.Wm)(r,{outlined:"",label:"Fecha Nac",type:"date",modelValue:s.newcliente.fechanac,"onUpdate:modelValue":a[12]||(a[12]=e=>s.newcliente.fechanac=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Cg,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.tipo,"onUpdate:modelValue":a[13]||(a[13]=e=>s.newcliente.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",xg,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.legalidad,"onUpdate:modelValue":a[14]||(a[14]=e=>s.newcliente.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"])]),(0,i.Wm)("div",_g,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.categoria,"onUpdate:modelValue":a[15]||(a[15]=e=>s.newcliente.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"])]),(0,i.Wm)("div",qg,[(0,i.Wm)(r,{outlined:"",label:"Razon Social",modelValue:s.newcliente.razon,"onUpdate:modelValue":a[16]||(a[16]=e=>s.newcliente.razon=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Eg,[(0,i.Wm)(r,{outlined:"",label:"NIT",modelValue:s.newcliente.nit,"onUpdate:modelValue":a[17]||(a[17]=e=>s.newcliente.nit=e)},null,8,["modelValue"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",Ag,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Oh((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogGarantia,"onUpdate:modelValue":a[19]||(a[19]=e=>s.dialogGarantia=e),persistent:""},{default:Oh((()=>[(0,i.Wm)(f,null,{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[Dg])),_:1}),(0,i.Wm)(g,null,{default:Oh((()=>[kg])),_:1}),(0,i.Wm)(w,{align:"center"},{default:Oh((()=>[(0,i.Wm)(d,{flat:"",label:"FINALIZAR",color:"accent",onClick:n.garantiaFin},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"OK",color:"green",onClick:n.garantiaOk},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"IMPRIMIR",color:"red",onClick:n.garantiaCancel},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogGarantia2,"onUpdate:modelValue":a[20]||(a[20]=e=>s.dialogGarantia2=e),persistent:""},{default:Oh((()=>[(0,i.Wm)(f,null,{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[Mg])),_:1}),(0,i.Wm)(g,null,{default:Oh((()=>[Tg])),_:1}),(0,i.Wm)(w,{align:"center"},{default:Oh((()=>[(0,i.Wm)(d,{flat:"",label:"FINALIZAR",color:"accent",onClick:n.garantiaFin2},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"OK",color:"green",onClick:n.garantiaOk2},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"IMPRIMIR",color:"red",onClick:n.garantiaCancel2},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[33]||(a[33]=e=>s.dialog_mod=e)},{default:Oh((()=>[(0,i.Wm)(f,null,{default:Oh((()=>[(0,i.Wm)(g,{class:"bg-green-14 text-white"},{default:Oh((()=>[Sg])),_:1}),(0,i.Wm)(g,{class:"q-pt-xs"},{default:Oh((()=>[(0,i.Wm)(b,{onSubmit:n.onMod,class:"q-gutter-md"},{default:Oh((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:e.modcliente.ci,"onUpdate:modelValue":a[21]||(a[21]=a=>e.modcliente.ci=a),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:e.modcliente.titular,"onUpdate:modelValue":a[22]||(a[22]=a=>e.modcliente.titular=a),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:e.modcliente.telefono,"onUpdate:modelValue":a[23]||(a[23]=a=>e.modcliente.telefono=a),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:e.modcliente.direccion,"onUpdate:modelValue":a[24]||(a[24]=a=>e.modcliente.direccion=a),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:e.modcliente.observacion,"onUpdate:modelValue":a[25]||(a[25]=a=>e.modcliente.observacion=a),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,["local"==s.type?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)(r,{outlined:"",label:"Local",modelValue:e.modcliente.local,"onUpdate:modelValue":a[26]||(a[26]=a=>e.modcliente.local=a)},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"Fecha Nac",type:"date",modelValue:e.modcliente.fechanac,"onUpdate:modelValue":a[27]||(a[27]=a=>e.modcliente.fechanac=a)},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.tipo,"onUpdate:modelValue":a[28]||(a[28]=a=>e.modcliente.tipo=a),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.legalidad,"onUpdate:modelValue":a[29]||(a[29]=a=>e.modcliente.legalidad=a),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.categoria,"onUpdate:modelValue":a[30]||(a[30]=a=>e.modcliente.categoria=a),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"Razon Social",modelValue:e.modcliente.razon,"onUpdate:modelValue":a[31]||(a[31]=a=>e.modcliente.razon=a)},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"NIT",modelValue:e.modcliente.nit,"onUpdate:modelValue":a[32]||(a[32]=a=>e.modcliente.nit=a)},null,8,["modelValue"])],64)):(0,i.kq)("",!0),(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[D]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("div",Og,[(0,i.Wm)("div",Rg,[(0,i.Wm)("div",Ng,[(0,i.Wm)(r,{outlined:"",modelValue:s.fecha1,"onUpdate:modelValue":a[34]||(a[34]=e=>s.fecha1=e),label:"Fecha Inicial",dense:"",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ug,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(r,{key:0,outlined:"",modelValue:s.fecha2,"onUpdate:modelValue":a[35]||(a[35]=e=>s.fecha2=e),label:"Fecha Final",dense:"",type:"date"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Ig,[(0,i.Wm)(W,{modelValue:s.rango,"onUpdate:modelValue":a[36]||(a[36]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Pg,[(0,i.Wm)(d,{color:"info",label:"CONSULTAR",icon:"search",dense:"",onClick:a[37]||(a[37]=e=>n.consultaVenta(s.type))})]),(0,i.Wm)("div",Yg,[(0,i.Wm)(y,{modelValue:s.pagination.page,"onUpdate:modelValue":a[38]||(a[38]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[39]||(a[39]=e=>n.consultaVenta(s.type)),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])])]),(0,i.Wm)("div",$g,[(0,i.Wm)(E,{pagination:s.pagination,"onUpdate:pagination":a[41]||(a[41]=e=>s.pagination=e),title:"Ventas",rows:s.ventas,columns:s.columnas,"row-key":"name",filter:s.filter,"rows-per-page-options":[0]},{"top-right":Oh((()=>[(0,i.Wm)(r,{outlined:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[40]||(a[40]=e=>s.filter=e),n.consultaVenta],placeholder:"Search"},{append:Oh((()=>[(0,i.Wm)(V,{name:"search"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),"body-cell-cliente":Oh((e=>[(0,i.Wm)(C,{key:"cliente",props:e},{default:Oh((()=>[(0,i.Uk)((0,R.zw)(e.row.cliente.local)+" "+(0,R.zw)(e.row.cliente.titular),1)])),_:2},1032,["props"])])),"body-cell-observacion":Oh((e=>[(0,i.Wm)(C,{key:"cliente",props:e},{default:Oh((()=>[""!=e.row.observacion?((0,i.wg)(),(0,i.j4)(d,{key:0,color:"purple",icon:"subject",onClick:a=>n.verObs(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-user":Oh((e=>[(0,i.Wm)(C,{key:"user",props:e},{default:Oh((()=>[(0,i.Uk)((0,R.zw)(e.row.user.name),1)])),_:2},1032,["props"])])),"body-cell-estado":Oh((e=>[(0,i.Wm)(C,{key:"estado",props:e},{default:Oh((()=>[(0,i.Wm)(x,{color:"POR COBRAR"==e.row.estado||"ANULADO"==e.row.estado?"red":"green",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":Oh((a=>[(0,i.Wm)(C,{key:"opcion",props:a},{default:Oh((()=>[(0,i.Wm)(q,null,{default:Oh((()=>[e.$store.state.login.anularventa&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"delete",color:"red",onClick:e=>n.anular(a.row),size:"xs"},{default:Oh((()=>[(0,i.Wm)(_,null,{default:Oh((()=>[Lg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),null!=a.row.fechaentrega&&""!=a.row.fechaentrega&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"local_shipping",color:"indigo-3",onClick:e=>n.printruta(a.row),size:"xs"},{default:Oh((()=>[(0,i.Wm)(_,null,{default:Oh((()=>[Fg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:2,icon:"local_shipping",color:"accent",onClick:e=>n.clickhojaruta(a.row),size:"xs"},{default:Oh((()=>[(0,i.Wm)(_,null,{default:Oh((()=>[zg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(d,{icon:"shopping_cart",color:"orange",onClick:e=>n.clickcompra(a.row),size:"xs"},{default:Oh((()=>[(0,i.Wm)(_,null,{default:Oh((()=>[Zg])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.reimpresion&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(i.HY,{key:3},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},{default:Oh((()=>[(0,i.Wm)(_,null,{default:Oh((()=>[jg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["pagination","rows","columns","filter"])])]),(0,i.Wm)(v,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[52]||(a[52]=e=>s.modalgarantia=e),persistent:""},{default:Oh((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[Bg])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Oh((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:Oh((()=>[(0,i.Wm)("div",Qg,[(0,i.Wm)("div",Gg,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.client.label,"onUpdate:modelValue":a[42]||(a[42]=e=>s.client.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Hg,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.client.telefono,"onUpdate:modelValue":a[43]||(a[43]=e=>s.client.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Jg,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.client.direccion,"onUpdate:modelValue":a[44]||(a[44]=e=>s.client.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Kg,[(0,i.Wm)(u,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[45]||(a[45]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Xg,[(0,i.Wm)(r,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":[a[46]||(a[46]=e=>s.newgarantia.cantidad=e),n.calcular]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",ef,[(0,i.Wm)(r,{outlined:"",type:"number",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[47]||(a[47]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",af,[(0,i.Wm)(r,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[48]||(a[48]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",tf,[(0,i.Wm)(r,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[49]||(a[49]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",of,[(0,i.wy)((0,i.Wm)("input",{style:{"margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[50]||(a[50]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),lf,(0,i.wy)((0,i.Wm)("input",{style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"VENTA","onUpdate:modelValue":a[51]||(a[51]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),sf]),(0,i.Wm)("div",nf,[(0,i.Wm)("div",rf,[(0,i.Wm)(d,{type:"submit",color:"primary",icon:"add_circle",label:"Registrar"})]),(0,i.Wm)("div",df,[(0,i.Wm)(d,{color:"red",icon:"cancel",label:"Cancelar",onClick:n.cancelarGarantia},null,8,["onClick"])])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[63]||(a[63]=e=>s.modalhojaruta=e)},{default:Oh((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[(0,i.Wm)("div",cf,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Oh((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:Oh((()=>[(0,i.Wm)("div",mf,[(0,i.Wm)("div",uf,[(0,i.Wm)(r,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[53]||(a[53]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",pf,[(0,i.Wm)(u,{required:"",options:["MAÑANA","TARDE","NOCHE"],outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[54]||(a[54]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",hf,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[55]||(a[55]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",gf,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[56]||(a[56]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ff,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[57]||(a[57]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",bf,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[58]||(a[58]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",vf,[(0,i.Wm)(r,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[59]||(a[59]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wf,[(0,i.Wm)(r,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[60]||(a[60]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wf,[(0,i.Wm)(r,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[61]||(a[61]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",yf,[(0,i.Wm)(r,{outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[62]||(a[62]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vf,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Oh((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalDialog,"onUpdate:modelValue":a[64]||(a[64]=e=>s.modalDialog=e)},{default:Oh((()=>[(0,i.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:Oh((()=>[(0,i.Wm)(g,null,{default:Oh((()=>[Cf])),_:1}),(0,i.Wm)(g,null,{default:Oh((()=>[(0,i.Wm)("div",null,[xf,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",_f,[qf,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(w,{align:"right"},{default:Oh((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"OK",color:"primary"},null,512),[[D]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})})),Af={name:"Sale",data(){return{monto:0,dialogGarantia:!1,dialogGarantia2:!1,printboleta:"",prestamolista:[],fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha1:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(new Date,"YYYY-MM-DD"),products:[],modalregistro:!1,newcliente:{fechanac:"2000-01-01"},filter:"",product:{},clients2:[],clients:[],client:"",productSales:[],sale:{},ventas:[],obs:"",inventarios:[],inventario:{},newgarantia:{},modalgarantia:!1,modalhojaruta:!1,modalDialog:!1,dialog_mod:!1,rango:"RANGO",venta:{},type:this.$route.params.type,pagination:{page:1,rowsPerPage:15,rowsNumber:0,last_page:0},columnas:[{label:"opcion",name:"opcion",field:"opcion"},{label:"id",name:"id",field:"id"},{label:"fecha",name:"fecha",field:e=>oa()(e.fecha).format("DD/MM/YYYY")},{label:"hora",name:"hora",field:e=>oa()(e.created_at).format("HH:mm")},{label:"cliente",name:"cliente",field:e=>e.cliente.local+" "+e.cliente.titular,align:"left"},{label:"total",name:"total",field:"total"},{label:"acuenta",name:"acuenta",field:"acuenta"},{label:"saldo",name:"saldo",field:"saldo"},{label:"estado",name:"estado",field:"estado"},{label:"user",name:"user",field:"user"},{label:"observacion",name:"observacion",field:"observacion"}]}},created(){console.log(this.type),this.$watch((()=>this.$route.params),(e=>{if(console.log(e),console.log(e),void 0==e)return!1;this.type=e.type,this.datosGet(e.type),this.consultaVenta(e.type),this.calcular(),this.$axios.get("https://bnaty.siscenter.org/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]}))})),this.datosGet(this.type),this.consultaVenta(this.type),this.calcular(),this.$axios.get("https://bnaty.siscenter.org/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]}))},methods:{cancelarGarantia(){this.modalgarantia=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}},onRequest(e){this.datosGet(this.type,e.pagination.page)},delProduct(e,a){console.log(e),this.productSales.splice(e,1),find=this.products.find((e=>e.id==a)),find.cantidad=0},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.newgarantia.efectivo=parseFloat(this.newgarantia.cantidad)*parseFloat(this.inventario.precio)},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.datosGet(this.type)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,"local"==this.type?this.newcliente.tipocliente=1:this.newcliente.fechanac=null,this.$axios.post("https://bnaty.siscenter.org/api/agregarcliente",this.newcliente).then((()=>{this.$q.notify({message:"Cliente Registrado",color:"green",position:"top",icon:"info"}),this.$q.loading.hide(),this.datosGet(this.type),this.modalregistro=!1,this.newcliente={fechanac:"2000-01-01"}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"top",icon:"error"})}))},impresion(){if(0==this.ventas.length)return!1;let e=0,a=0,t=0,o="<style>\n      *{\n      }\n      table{width:100%;border-collapse: collapse;}\n      table, th, td {\n        //border: 1px solid;\n      }\n      </style>\n      <div style='padding:5px'>\n      <div style='text-align:center'>HISTORIAL DE VENTAS DE "+this.fecha1+" AL "+this.fecha2+"</div>\n      <hr>\n      <table>\n        <tr><th>TOTAL</th><th>A CUENTA</th><th>SALDO</th><th>TITULAR</th><th>USUARIO</th><tr>";this.ventas.forEach((l=>{e+=l.total,a+=l.acuenta,t+=l.saldo,o+="<tr><td>"+l.total+"</td><td>"+l.acuenta+"</td><td>"+l.saldo+"</td><td>"+l.cliente.titular+"</td><td>"+l.user.name+"</td></tr>"})),o+="</table>      <div><b>Total Venta </b>"+e+"</div>      <div><b>Total A Cuenta </b>"+a+"</div>      <div><b>Total Saldo </b>"+t+"</div>      </div>";let l=window.open("","Imprimir","width=1000,height=1000");l.document.write(o),l.document.close(),l.focus(),setTimeout((function(){l.print(),l.close()}),500)},impboleta(e){this.$axios.post("https://bnaty.siscenter.org/api/impresionVenta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickcompra(e){console.log(e),this.venta=e,this.modalDialog=!0},actualizarventa(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/updateRuta",{id:this.venta.id,turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{this.modalhojaruta=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.$q.loading.hide(),this.consultaVenta(this.type)}))},printruta(e){this.$axios.post("https://bnaty.siscenter.org/api/impresionruta/"+e.id).then((e=>{let a=window.open("_blank");a.document.write(e.data),a.document.close()}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.siscenter.org/api/anular",{id:e.id,observacion:a}).then((e=>{this.consultaVenta(this.type),this.$q.notify({message:"Venta Anulado ",color:"green",position:"top",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultaVenta(e){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$api.post("listSale",{tipo:"detalle"==e?"DETALLE":"LOCAL",ini:this.fecha1,fin:this.fecha2,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{e.telefono1=e.cliente.telefono})),this.ventas=e.data.data}))},saleSave(){return""==this.fecha||void 0==this.fecha?(this.$q.notify({message:"Ingrese la fecha",color:"red",position:"top",icon:"error"}),!1):0==this.productSales.length?(console.log("sin prod"),this.$q.notify({message:"Seleccione Productos",color:"red",position:"top",icon:"error"}),!1):void 0==this.client.id||""==this.client.id?(console.log("sin cliente"),this.$q.notify({message:"Debe Seleccionar Cliente",color:"red",position:"top",icon:"error"}),!1):this.monto<0||this.monto>this.total||void 0==this.monto?(console.log("sin monto"),this.$q.notify({message:"Verifique el monto",color:"red",position:"top",icon:"error"}),!1):(console.log(this.client.id),this.$q.loading.show(),this.productSales.forEach((e=>{e.subtotal=e.precio*e.cantidad})),this.sale.tipo="detalle"==this.type?"DETALLE":"LOCAL",this.sale.fecha=this.fecha,this.sale.cliente_id=this.client.id,this.sale.total=this.total,this.sale.acuenta=this.monto,this.sale.saldo=this.porCobrar,this.sale.estado=this.porCobrar>0?"POR COBRAR":"CANCELADO",this.sale.detalles=this.productSales,this.sale.observacion=this.obs,console.log(this.sale),this.printboleta="",void this.$api.post("sale",this.sale).then((e=>{this.printboleta=e.data,this.dialogGarantia=!0,this.$q.loading.hide(),this.consultaVenta(this.type),this.saleClear(),this.$q.notify({message:"Venta exitosa",color:"green",position:"top",icon:"info"})})))},garantiaOk(){this.prestamolista=[],this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.dialogGarantia=!1,this.calcular,this.modalgarantia=!0},garantiaFin(){this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""},this.client={label:""},this.dialogGarantia=!1},garantiaCancel(){this.dialogGarantia=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""};let e=window.open("","Imprimir","width=1000,height=1000");e.document.write(this.printboleta),e.document.close(),e.focus(),e.print(),e.close()},datosGet(e,a=1){this.products=[],this.$q.loading.show(),this.$api.get(`/listaproducto/${e}`).then((e=>{e.data.forEach((e=>{e.cantidad=0,this.products.push(e)}))})),this.clients=[],this.clients2=[],this.$api.get(`/listacliente2/${e}`).then((e=>{e.data.forEach((e=>{e.label=e.ci+" "+e.local+" "+e.titular,this.clients2.push(e),this.clients.push(e)}))})),this.$q.loading.hide()},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.clients=this.clients2.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.clients=this.clients2})},saleClear(){this.productSales=[],this.products.forEach((e=>{e.cantidad=0}))},saleAdd(e){e.cantidad++;let a=this.productSales.find((a=>a.id==e.id));a?a.cantidad++:this.productSales.push({id:e.id,nombre:e.nombre,precio:e.precio,cantidad:1})},agregargarantia(){this.monto=0,this.obs="",this.sale={},this.productSales=[],this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.client.id,tipo:this.newgarantia.tipo,fecha:ne.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.prestamolista.push({cantidad:this.newgarantia.cantidad,nombre:this.inventario.nombre,efectivo:this.newgarantia.efectivo,tipo:this.newgarantia.tipo}),this.$q.loading.hide(),this.producto="",this.cantidad=1,this.newgarantia={},this.calcular,this.modalgarantia=!1,this.dialogGarantia2=!0})).catch((e=>{this.$q.loading.hide(),console.log(e),this.$q.notify({message:e.message.error,color:"red",position:"top",icon:"error"})}))},garantiaOk2(){this.dialogGarantia2=!1,this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.modalgarantia=!0},garantiaCancel2(){this.dialogGarantia2=!1,this.printboleta+="<hr><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((e=>{this.printboleta+="<tr><td>"+e.cantidad+"</td><td>"+e.nombre+"</td><td>"+e.efectivo+"</td><td>"+e.tipo+"</td></tr>"})),this.printboleta+="</table></div>",this.printboleta+="<br><hr><div><b>Cliente </b>"+this.client.local+" - "+this.client.titular+"</div><div><b>Fecha: </b>"+this.fecha+"</div><div><b>Usuario: </b>"+this.$store.state.login.user.name+"</div><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((e=>{this.printboleta+="<tr><td>"+e.cantidad+"</td><td>"+e.nombre+"</td><td>"+e.efectivo+"</td><td>"+e.tipo+"</td></tr>"})),this.printboleta+="</table></div><div class='leyenda'><b>* SOLO SE RECIBIRA EL ENVASE SI ESTA LIMPIO Y EN BUEN ESTADO<br>* TIEMPO MAXIMO DE DEVOLUCION 5 DIAS, CASO CONTRARIO SE DARA DE BAJA <br>* HORARIO DE DEVOLUCION DE GARANTIA DE LUNES - DOMINGO, EXCEPTO EL DIA MIERCOLES DE 9:00 AM A 17:00 PM<b></div>";let e=window.open("","Imprimir","width=1000,height=1000");e.document.write(this.printboleta),e.document.close(),e.focus(),e.print(),e.close(),this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}},garantiaFin2(){this.dialogGarantia2=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}}},computed:{total(){let e=0;return this.productSales.forEach((a=>{e+=a.precio*a.cantidad})),e},porCobrar(){return this.total-this.monto}}};var Df=t(67030);Af.render=Ef,Af.__scopeId="data-v-2de20f13";const kf=Af;S()(Af,"components",{QPage:V.Z,QInput:E.Z,QBtn:D.Z,QSelect:ia.Z,QItem:Fn.Z,QItemSection:zn.Z,QCard:C.Z,QCardSection:x.Z,QSpace:Zn.Z,QChip:Df.Z,QForm:q.Z,QDialog:we.Z,QCardActions:M.Z,QToggle:A.Z,QPagination:jd.Z,QTable:fe.Z,QIcon:_.Z,QTd:ve.Z,QBadge:pe.Z,QBtnGroup:Ms.Z,QTooltip:ge.Z}),S()(Af,"directives",{ClosePopup:ye.Z});const Mf=(0,i.HX)("data-v-54012e84");(0,i.dD)("data-v-54012e84");const Tf={class:"row"},Sf={class:"col-4 flex flex-center"},Of={class:"col-4 flex flex-center"},Rf={class:"col-4 flex flex-center"},Nf={class:"col-12"},Uf=(0,i.Uk)("Editar"),If=(0,i.Uk)("Eliminar"),Pf=(0,i.Uk)("Reporte"),Yf={class:"absolute-full flex flex-center"},$f={class:"col-3"},Lf={class:"col-3"},Ff={class:"col-3 flex flex-center"},zf={class:"col-3 flex flex-center"},Zf={class:"col-12"},jf=(0,i.Uk)("Realizar Pago"),Bf=(0,i.Uk)("Ver Pagos"),Qf=(0,i.Uk)("Realizar retiro"),Gf=(0,i.Uk)("Ver Retiros"),Hf=(0,i.Uk)("Editar"),Jf=(0,i.Uk)("Eliminar"),Kf={class:"text-h6"},Xf={class:"row"},eb={class:"col-5"},ab={class:"col-4"},tb={class:"col-3"},ob={class:"col-12"},lb={class:"col-6"},ib={class:"col-6"},sb={class:"text-h6"},nb={class:"row"},rb={class:"col-12"},db={class:"col-6"},cb={class:"col-6"},mb=(0,i.Uk)(" Cantidad minima de material en almacen "),ub=(0,i.Wm)("div",{class:"text-bold text-center"},"INGRESO DE MATERIA PRIMA",-1),pb={class:"row"},hb={class:"col-6"},gb={class:"col-6"},fb={class:"col-2"},bb={class:"col-2"},vb={key:0,class:"col-1 flex-center flex text-bold text-center"},wb={class:"col-1"},Wb={class:"col-3"},yb={class:"col-3"},Vb={class:"col-12 text-right"},Cb={key:1,class:"col-12"},xb=(0,i.Wm)("th",{class:"text-left"},"NRO",-1),_b=(0,i.Wm)("th",{class:"text-left"},"MATERIAL",-1),qb=(0,i.Wm)("th",{class:"text-center"},"CANTIDAD",-1),Eb={key:0},Ab={key:1},Db=(0,i.Wm)("th",{class:"text-center"},"LOTE",-1),kb=(0,i.Wm)("th",{class:"text-left"},"FEC VEN",-1),Mb=(0,i.Wm)("th",{class:"text-left"},"OBS",-1),Tb=(0,i.Wm)("th",{class:"text-right"},"OPCION",-1),Sb={class:"text-left"},Ob={class:"text-left"},Rb={class:"text-center"},Nb={class:"text-center"},Ub={class:"text-left"},Ib={class:"text-left"},Pb={class:"text-right"},Yb=(0,i.Wm)("div",null,null,-1),$b=(0,i.Wm)("div",{class:"text-h7 text-bold text-center"},"PAGAR POR LA COMPRA",-1),Lb={class:"row"},Fb={key:0},zb={class:"col-5"},Zb={class:"col-5"},jb={class:"col-2"},Bb={class:"col-4"},Qb={class:"col-4"},Gb={class:"col-4"},Hb={class:"col-6"},Jb={class:"col-6"},Kb={class:"col-12"},Xb=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),ev=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL ",-1),av={class:"text-h7"},tv={class:"text-h7"};(0,i.Cn)();const ov=Mf(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-btn"),r=(0,i.up)("q-icon"),d=(0,i.up)("q-input"),c=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),u=(0,i.up)("q-list"),p=(0,i.up)("q-btn-dropdown"),h=(0,i.up)("q-td"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-linear-progress"),b=(0,i.up)("q-table"),v=(0,i.up)("q-tooltip"),w=(0,i.up)("q-space"),W=(0,i.up)("q-card-section"),y=(0,i.up)("q-form"),V=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),x=(0,i.up)("q-select"),_=(0,i.up)("q-markup-table"),q=(0,i.up)("q-card-actions"),E=(0,i.up)("q-page"),A=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(E,{class:"q-pa-xs"},{default:Mf((()=>[(0,i.Wm)("div",Tf,[(0,i.Wm)("div",Sf,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.providerList,loading:l.loading,label:"Registro de Provedor",color:"blue-7","no-caps":"",icon:"o_assignment_ind"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Of,[e.$store.state.login.almacenCrearMateriaPrima?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.materialAdd,loading:l.loading,label:"Registro de materia prima",color:"green-7","no-caps":"",icon:"o_shopping_bag"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Rf,[e.$store.state.login.ingresoMaterial?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.compraAdd,loading:l.loading,label:"Ingreso de Material Prima",color:"cyan-7","no-caps":"",icon:"add_circle_outline"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Nf,[(0,i.Wm)(b,{dense:"",title:"Lista de Materiales",rows:l.materials,columns:l.materialColumns,loading:l.loading,"rows-per-page-options":[0],filter:l.almacenFilter,flat:"","row-class":"cursor-pointer"},{"top-right":Mf((()=>[(0,i.Wm)(n,{dense:"",color:"green",label:"EXCEL",onClick:s.exportTable},null,8,["onClick"]),(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.almacenFilter,"onUpdate:modelValue":a[1]||(a[1]=e=>l.almacenFilter=e),debounce:"300",placeholder:"Buscar..."},{append:Mf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":Mf((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:Mf((()=>[(0,i.Wm)(p,{icon:"more_vert","no-caps":"",dense:"",color:"primary",label:"Opciones"},{default:Mf((()=>[(0,i.Wm)(u,null,{default:Mf((()=>[(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialEdit(e.row)},{default:Mf((()=>[(0,i.Wm)(c,null,{default:Mf((()=>[Uf])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialDelete(e.row)},{default:Mf((()=>[(0,i.Wm)(c,null,{default:Mf((()=>[If])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.reporte(e.row)},{default:Mf((()=>[(0,i.Wm)(c,null,{default:Mf((()=>[Pf])),_:1})])),_:2},1032,["onClick"]),[[A]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-stock":Mf((e=>[(0,i.Wm)(h,{props:e},{default:Mf((()=>[(0,i.Wm)(f,{size:"18px",rounded:"",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",class:"full-width"},{default:Mf((()=>[(0,i.Wm)("div",Yf,[(0,i.Wm)(g,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","filter"])]),(0,i.Wm)("div",$f,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Lf,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[3]||(a[3]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ff,[(0,i.Wm)(n,{color:"info",label:"Consultar",onClick:s.consultmaterial,"no-caps":""},null,8,["onClick"])]),(0,i.Wm)("div",zf,[(0,i.Wm)(n,{color:"green",label:"EXCEL",onClick:s.exportTable2,"no-caps":""},null,8,["onClick"])]),(0,i.Wm)("div",Zf,[(0,i.Wm)(b,{dense:"","rows-per-page-options":[0],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,flat:"","row-key":"name"},{"body-cell-estado":Mf((a=>[(0,i.Wm)(h,{key:"estado",props:a},{default:Mf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(g,{key:0,color:"POR PAGAR"==a.row.estado?"red":"green"},{default:Mf((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":Mf((()=>[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[4]||(a[4]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Mf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-costo":Mf((a=>[(0,i.Wm)(h,{props:a},{default:Mf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(g,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Mf((()=>[(0,i.Uk)((0,R.zw)(a.row.costo),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldocant":Mf((e=>[(0,i.Wm)(h,{props:e,style:{"font-weight":"bold","font-size":"18px"},color:e.row.saldocant>=1?"black":"red"},{default:Mf((()=>[(0,i.Uk)((0,R.zw)(e.row.saldocant),1)])),_:2},1032,["props","color"])])),"body-cell-material":Mf((e=>[(0,i.Wm)(h,{props:e,style:{"font-weight":"bold"}},{default:Mf((()=>[(0,i.Uk)((0,R.zw)(e.row.material.nombre),1)])),_:2},1032,["props"])])),"body-cell-subtotal":Mf((a=>[(0,i.Wm)(h,{props:a},{default:Mf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(g,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Mf((()=>[(0,i.Uk)((0,R.zw)(a.row.subtotal),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldopago":Mf((a=>[(0,i.Wm)(h,{props:a},{default:Mf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.saldopago),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-deuda":Mf((a=>[(0,i.Wm)(h,{props:a},{default:Mf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.deuda),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":Mf((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:Mf((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda<a.row.subtotal?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[jf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.almacenHistorialPago&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(n,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"point_of_sale",onClick:e=>s.listpago(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[Bf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.retiro<a.row.cantidad?((0,i.wg)(),(0,i.j4)(n,{key:2,dense:"",round:"",flat:"",color:"teal",icon:"o_download",onClick:e=>s.retirarRow(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[Qf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.recuentos.length>0?((0,i.wg)(),(0,i.j4)(n,{key:3,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listrecuento(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[Gf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&"POR PAGAR"==a.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:4,dense:"",round:"",flat:"",color:"yellow-9",icon:"o_edit",onClick:e=>s.editcompra(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[Hf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&"POR PAGAR"==a.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:5,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[Jf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(C,{modelValue:l.providerDialog,"onUpdate:modelValue":a[15]||(a[15]=e=>l.providerDialog=e)},{default:Mf((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Mf((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Mf((()=>[(0,i.Wm)("div",Kf,(0,R.zw)("create"===l.providerOptions?"Registro de Provedor":"list"===l.providerOptions?"Lista de Provedores":"Editar Provedor"),1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Mf((()=>["create"==l.providerOptions||"edit"==l.providerOptions?((0,i.wg)(),(0,i.j4)(y,{key:0,onSubmit:a[12]||(a[12]=e=>"create"===l.providerOptions?s.providerCreate():s.providerUpdate())},{default:Mf((()=>[(0,i.Wm)("div",Xf,[(0,i.Wm)("div",eb,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.nombre,"onUpdate:modelValue":a[5]||(a[5]=e=>l.provider.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ab,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.razon,"onUpdate:modelValue":a[6]||(a[6]=e=>l.provider.razon=e),label:"Razón Social","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",tb,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.nit,"onUpdate:modelValue":a[7]||(a[7]=e=>l.provider.nit=e),label:"CI/NIT",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",ob,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.direccion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.provider.direccion=e),label:"Dirección",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",lb,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.email,"onUpdate:modelValue":a[9]||(a[9]=e=>l.provider.email=e),label:"Email",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",ib,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>l.provider.telefono=e),label:"Teléfono",hint:""},null,8,["modelValue"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Mf((()=>[(0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:"",onClick:a[11]||(a[11]=e=>l.providerOptions="list")},null,8,["loading"]),(0,i.Wm)(n,{loading:l.loading,"no-caps":"",icon:"o_save",dense:"",type:"submit",label:"create"===l.providerOptions?"Guardar":"Actualizar",color:"create"===l.providerOptions?"green":"yellow-7"},null,8,["loading","label","color"])])),_:1})])),_:1})):(0,i.kq)("",!0),"list"===l.providerOptions?((0,i.wg)(),(0,i.j4)(b,{key:1,loading:l.loading,"rows-per-page-options":[0],dense:"",rows:l.providers,columns:l.providerColumns,"row-key":"name"},{"top-right":Mf((()=>[(0,i.Wm)(n,{color:"green",icon:"add_circle_outline",label:"Nuevo","no-caps":"",onClick:a[13]||(a[13]=e=>{l.providerOptions="create",l.provider={}})}),(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Mf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":Mf((e=>[(0,i.Wm)(h,{key:"opcion",props:e},{default:Mf((()=>[(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:a=>{l.providerOptions="edit",l.provider=e.row}},null,8,["onClick"]),(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.delprovider(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.materialDialog,"onUpdate:modelValue":a[20]||(a[20]=e=>l.materialDialog=e)},{default:Mf((()=>[(0,i.Wm)(V,{style:{width:"500px","max-width":"90vw"}},{default:Mf((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Mf((()=>[(0,i.Wm)("div",sb,(0,R.zw)("create"===l.materialOptions?"Registro de ":"Editar ")+" de materia prima",1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Mf((()=>[(0,i.Wm)(y,{onSubmit:a[19]||(a[19]=e=>"create"===l.materialOptions?s.materialCreate():s.materialUpdate())},{default:Mf((()=>[(0,i.Wm)("div",nb,[(0,i.Wm)("div",rb,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.material.nombre,"onUpdate:modelValue":a[16]||(a[16]=e=>l.material.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",db,[(0,i.Wm)(x,{outlined:"",dense:"",modelValue:l.material.unid,"onUpdate:modelValue":a[17]||(a[17]=e=>l.material.unid=e),label:"Unidad",options:l.unidades,"lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),(0,i.Wm)("div",cb,[(0,i.Wm)(d,{outlined:"",type:"number",dense:"",modelValue:l.material.min,"onUpdate:modelValue":a[18]||(a[18]=e=>l.material.min=e),label:"Minimo",hint:"",rules:[e=>!!e||"Campo requerido"]},{default:Mf((()=>[(0,i.Wm)(v,null,{default:Mf((()=>[mb])),_:1})])),_:1},8,["modelValue","rules"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Mf((()=>[(0,i.wy)((0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:""},null,8,["loading"]),[[A]]),(0,i.Wm)(n,{loading:l.loading,color:"green","no-caps":"",icon:"o_save",label:"Guardar",dense:"",type:"submit"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_add,"onUpdate:modelValue":a[28]||(a[28]=e=>l.dialog_add=e)},{default:Mf((()=>[(0,i.Wm)(V,{style:{width:"800px","max-width":"80vw"}},{default:Mf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white q-pb-none"},{default:Mf((()=>[ub])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Mf((()=>[(0,i.Wm)("div",pb,[(0,i.Wm)("div",hb,[(0,i.Wm)(x,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[21]||(a[21]=e=>l.material=e),options:l.materials,label:"Material","option-label":"nombre","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",gb,[(0,i.Wm)(x,{dense:"",outlined:"",modelValue:l.provider,"onUpdate:modelValue":a[22]||(a[22]=e=>l.provider=e),options:l.providers,label:"Proveedor","option-label":"razon","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",fb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",bb,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[24]||(a[24]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)]),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("div",vb,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)(" Subtotal: "+(0,R.zw)(s.subTotalNumber(l.compra.costo,l.compra.cantidad)),1)],64)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)("div",wb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[25]||(a[25]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Wb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[26]||(a[26]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),(0,i.Wm)("div",yb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[27]||(a[27]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Vb,["create"===l.compraOptions?((0,i.wg)(),(0,i.j4)(n,{key:0,label:"Añadir","no-caps":"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])):(0,i.kq)("",!0)]),"create"===l.compraOptions?((0,i.wg)(),(0,i.j4)("div",Cb,[(0,i.Wm)(_,null,{default:Mf((()=>[(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[xb,_b,qb,e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",Eb,"COSTO")):(0,i.kq)("",!0),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",Ab,"SUBTOTAL")):(0,i.kq)("",!0),Db,kb,Mb,Tb])]),(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",Sb,(0,R.zw)(a+1),1),(0,i.Wm)("td",Ob,(0,R.zw)(e.material),1),(0,i.Wm)("td",Rb,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",Nb,(0,R.zw)(e.lote),1),(0,i.Wm)("td",Ub,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",Ib,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",Pb,[(0,i.Wm)(n,{flat:"",dense:"",color:"red",icon:"o_delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])),_:1})])):(0,i.kq)("",!0),Yb]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{loading:l.loading,label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["loading","onClick"]),(0,i.wy)((0,i.Wm)(n,{loading:l.loading,label:"Cancelar",icon:"delete",color:"negative"},null,8,["loading"]),[[A]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[29]||(a[29]=e=>l.dialoglistpagos=e)},{default:Mf((()=>[(0,i.Wm)(V,null,{default:Mf((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Mf((()=>[(0,i.Wm)(b,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name","rows-per-page-options":[0],dense:""},{"body-cell-op":Mf((e=>[(0,i.Wm)(h,{key:"op",props:e},{default:Mf((()=>[(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>s.printpago(e.row)},null,8,["onClick"]),(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.anularpago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Mf((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialoglistretiros,"onUpdate:modelValue":a[30]||(a[30]=e=>l.dialoglistretiros=e)},{default:Mf((()=>[(0,i.Wm)(V,null,{default:Mf((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Mf((()=>[(0,i.Wm)(b,{title:"RETIROS",rows:l.retiros,columns:l.colretiros,"row-key":"name",flat:"","rows-per-page-options":[0]},{"body-cell-op":Mf((a=>[(0,i.Wm)(h,{key:"op",props:a},{default:Mf((()=>[e.$store.state.login.almacenHistorialPago?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Mf((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[39]||(a[39]=e=>l.dialogpagar=e)},{default:Mf((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Mf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Mf((()=>[$b])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Mf((()=>[(0,i.Wm)(y,{onSubmit:s.regpago,class:"q-gutter-md"},{default:Mf((()=>[(0,i.Wm)("div",Lb,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Fb,[(0,i.Wm)("div",zb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.provider.razon,"onUpdate:modelValue":a[31]||(a[31]=e=>l.compra2.provider.razon=e),readonly:"",label:"proveedor"},null,8,["modelValue"])]),(0,i.Wm)("div",Zb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.material.nombre,"onUpdate:modelValue":a[32]||(a[32]=e=>l.compra2.material.nombre=e),readonly:"",label:"material"},null,8,["modelValue"])]),(0,i.Wm)("div",jb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.lote,"onUpdate:modelValue":a[33]||(a[33]=e=>l.compra2.lote=e),readonly:"",label:"lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Bb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[34]||(a[34]=e=>l.compra2.cantidad=e),readonly:"",label:"cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Qb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.costo,"onUpdate:modelValue":a[35]||(a[35]=e=>l.compra2.costo=e),readonly:"",label:"costo"},null,8,["modelValue"])]),(0,i.Wm)("div",Gb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.subtotal,"onUpdate:modelValue":a[36]||(a[36]=e=>l.compra2.subtotal=e),readonly:"",label:"subtotal"},null,8,["modelValue"])])])):(0,i.kq)("",!0),(0,i.Wm)("div",Hb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.pago.monto,"onUpdate:modelValue":a[37]||(a[37]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.subtotal-l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Jb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[38]||(a[38]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"])])]),(0,i.Wm)("div",Kb,[(0,i.Wm)(n,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[42]||(a[42]=e=>l.dialog_reporte=e)},{default:Mf((()=>[(0,i.Wm)(V,null,{default:Mf((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:Mf((()=>[Xb])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:Mf((()=>[(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[40]||(a[40]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[41]||(a[41]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Mf((()=>[(0,i.Wm)(n,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[45]||(a[45]=e=>l.dialog_remove=e)},{default:Mf((()=>[(0,i.Wm)(V,{style:{width:"350px","max-width":"90vw"}},{default:Mf((()=>[(0,i.Wm)(W,{class:"bg-green-8 text-white text-bold"},{default:Mf((()=>[ev,(0,i.Wm)("div",av,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Mf((()=>[(0,i.Wm)(y,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:Mf((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[43]||(a[43]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[44]||(a[44]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[48]||(a[48]=e=>l.dialog_modret=e)},{default:Mf((()=>[(0,i.Wm)(V,null,{default:Mf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Mf((()=>[(0,i.Wm)("div",tv,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Mf((()=>[(0,i.Wm)(y,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:Mf((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[46]||(a[46]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[47]||(a[47]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));t(19544);const lv={data(){return{providerColumns:[{name:"razon",label:"Razon Social",field:"razon",align:"left",sortable:!0},{name:"nombre",label:"Nombre",field:"nombre",align:"left",sortable:!0},{name:"nit",label:"NIT",field:"nit",align:"left",sortable:!0},{name:"telefono",label:"Telefono",field:"telefono",align:"left",sortable:!0},{name:"direccion",label:"Direccion",field:"direccion",align:"left",sortable:!0},{name:"email",label:"Email",field:"email",align:"left",sortable:!0},{name:"actions",label:"Acciones",field:"actions",align:"center"}],dialog_modret:!1,dialog_remove:!1,providers:[],provider:{},dialogpagar:!1,dialog_reporte:!1,filter:"",compraOptions:"create",pago:{},recuento:{},recuento2:{},pagos:[],compra2:{},providerOptions:"create",providerDialog:!1,loading:!1,almacenFilter:"",materials:[],material:"",dialog_add:!1,fecha3:oa()().subtract(30,"days").format("YYYY-MM-DD"),fecha4:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha1:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:ne.ZP.formatDate(Date.now(),"YYYY-MM-DD"),unidades:["Kilogramos","Litros","Unidad","Metros","Metros Cuadrados","Metros Cubicos","Caja","Bolsa","Paquete","Quintal","Lata","Otro"],materialDialog:!1,compra:{cantidad:0,costo:0,lote:"",fechaven:"",observacion:""},comp:{},comptodo:[],excelcompra:[],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colcompra:[{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"saldocant",align:"center",label:"SALDO CANT",field:"saldocant",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"saldopago",align:"center",label:"SALDO PAGO",field:"saldopago",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:e=>oa()(e.fechaven).format("DD/MM/YYYY"),sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colpagos:[{name:"op",align:"center",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colretiros:[{name:"op",align:"center",label:"OP",field:"op"},{name:"fecha",align:"center",label:"FECHA",field:e=>oa()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],recutodo:[],compras:[],retiros:[],material2:{},materialOptions:"create",materialColumns:[{name:"nombre",label:"Material",align:"left",field:"nombre",sortable:!0},{name:"unid",label:"Unidad",align:"left",field:"unid",sortable:!0},{name:"stock",label:"Stock",align:"center",field:"stock",sortable:!0},{name:"actions",label:"Acciones",align:"center",field:"actions",sortable:!0},{name:"min",label:"Minimo",align:"center",field:"min",sortable:!0}],dialoglistpagos:!1,dialoglistretiros:!1}},created(){this.providersGet(),this.materialsGet(),this.consultmaterial()},methods:{exportTable(){let e=[{sheet:"Almacen",columns:[{label:"Material",value:"nombre"},{label:"Cantidad",value:"stock"}],content:this.materials}],a={fileName:"Almacen",extraLength:7,writeOptions:{}};me()(e,a)},exportTable2(){let e=[{sheet:"Compras",columns:[{label:"id",value:"id"},{label:"Material",value:e=>e.material.nombre},{label:"Proveedor",value:e=>e.provider.razon},{label:"Lote",value:"lote"},{label:"Cantidad",value:"cantidad"},{label:"Saldo",value:"saldocant"}],content:this.excelcompra}],a={fileName:"Compras",extraLength:7,writeOptions:{}};me()(e,a)},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.siscenter.org/api/recuento/"+e.id).then((e=>{this.dialoglistretiros=!1,this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado ",position:"top"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("https://bnaty.siscenter.org/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.materialsGet(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado ",position:"top"})}))},onRegRecuento2(){if(this.comp.cantidad-this.comp.retiro<this.recuento.cantidad)return this.$q.notify({color:"negative",textColor:"white",icon:"report_problem",message:"No se puede retirar mas de lo que hay en registro",position:"top"}),!1;this.recuento.material_id=this.material2.id,this.recuento.compra_id=this.comp.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,console.log(this.recuento),this.$api.post("https://bnaty.siscenter.org/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.materialsGet(),this.consultmaterial()}))},principioMesYmd(){let e=oa()().startOf("month").format("YYYY-MM-DD");return e},reporte(e){this.material2=e,this.recuento.material_id=e.id,this.recuento.cantidad="",this.recuento.observacion="",this.dialog_reporte=!0},genreporte(){this.$api.post("https://bnaty.siscenter.org/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=this,t="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>INVENTARIO MATERIAL :  "+a.material2.nombre+"<br>DE "+oa()(a.fecha1).format("DD/MM/YYYY")+" AL "+oa()(a.fecha2).format("DD/MM/YYYY")+"</div><br>        <table>        <tr><th>TIPO</th><th>PROVEEDOR</th><th>MATERIAL</th><th>FECHA</th><th>COSTO</th><th>CANTIDAD</th><th>FECHA VEN</th><th>OBSERVACION</th></tr>";e.data.forEach((e=>{t+="<tr><td>"+e.tipo+"</td><td>"+e.razon+"</td><td>"+e.nombre+"</td><td>"+oa()(e.fecha).format("DD/MM/YYYY")+"</td><td>"+e.costo+"</td><td>"+e.cantidad+"</td><td>"+e.fechaven+"</td><td>"+e.observacion+"</td></tr>"}));let o=window.open("_blank");o.document.write(t),o.document.close()}))},editcompra(e){this.dialog_add=!0,this.compra=e,this.material=e.material,this.provider=e.provider,this.compraOptions="edit"},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$api.post("https://bnaty.siscenter.org/api/logcompra",this.pago).then((e=>{console.log(e.data);let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.consultmaterial(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "})})))},onReg(){this.$api.post("https://bnaty.siscenter.org/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},listrecuento(e){this.retiros=e.recuentos,this.dialoglistretiros=!0},retirarRow(e){console.log(e.material),this.material2=e.material,this.comp=e,this.dialog_remove=!0},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("https://bnaty.siscenter.org/api/compra/"+e.id).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})})).catch((e=>{console.log(e.response),this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.error})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},consultmaterial(){this.comptodo=[],this.excelcompra=[],this.$api.post("https://bnaty.siscenter.org/api/consultar2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{e.data.forEach((e=>{e.saldocant=e.cantidad-e.retiro,e.saldopago=e.subtotal-e.deuda,this.comptodo.push(e),e.saldocant>0&&this.excelcompra.push(e)}))})),this.$api.post("https://bnaty.siscenter.org/api/consulrecuento2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},subTotalNumber(e,a){return void 0==e||""==e||0==e||void 0==a||""==a||0==a?0:parseFloat(e)*parseFloat(a)},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){if(""==this.compra.cantidad||0==this.compra.cantidad||void 0==this.compra.cantidad)return this.$q.notify({color:"red-4",textColor:"white",icon:"warning",message:"Ingrese la cantidad",position:"top"}),!1;void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,this.compra.provider_id=this.provider.id,this.compras.push(this.compra),this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""}},regcompra(){if("create"==this.compraOptions){if(0==this.compras.length)return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1;if(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1;this.loading=!0,this.$api.post("https://bnaty.siscenter.org/api/compra2",{user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.materialsGet(),this.loading=!1}))}else{if(parseFloat(this.compra.cantidad)<parseFloat(this.compra.retiro))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la cantidad No puede ser menor al retiro"}),!1;if(parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo)<parseFloat(this.compra.deuda))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la subtotal No puede ser menor a lo pagado"}),!1;this.loading=!0,this.compra.material_id=this.material.id,this.compra.provider_id=this.provider.id,this.$q.dialog({dark:!0,title:"Confirmar",message:"Esta seguro de Modificar?",cancel:!0,persistent:!0}).onOk((()=>{this.$api.post("https://bnaty.siscenter.org/api/compraModificar",this.compra).then((e=>{this.dialog_add=!1,this.materialsGet(),this.consultmaterial(),this.loading=!1}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}},totalgeneral(){this.$api.post("https://bnaty.siscenter.org/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},compraAdd(){this.compraOptions="create",this.dialog_add=!0,this.compras=[],this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""},this.material="",this.provider=""},materialAdd(){this.material={},this.materialDialog=!0,this.materialOptions="create"},providerList(){this.providerDialog=!0,this.providerOptions="list"},providerAdd(){this.provider={},this.providerDialog=!0,this.providerOptions="create"},providersGet(){this.$api.get("provider").then((e=>{this.providers=e.data})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},providerUpdate(){this.loading=!0,this.$api.put("provider/"+this.provider.id,this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},providerCreate(){this.loading=!0,this.$api.post("provider",this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},materialUpdate(){this.loading=!0,this.$api.put("material/"+this.material.id,this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},delprovider(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el proveedor?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("provider/"+e.id).then((e=>{this.providersGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"warning",message:"No se puede eliminar el proveedor, tiene registros asociados",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialCreate(){this.loading=!0,this.$api.post("material",this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialEdit(e){this.material=e,this.materialDialog=!0,this.materialOptions="update"},materialDelete(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el material?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("material/"+e.id).then((e=>{this.materialsGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialsGet(){this.loading=!0,this.$api.get("material").then((e=>{this.materials=e.data,console.log(this.materials)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},printpago(e){this.$api.get("impPagoAlmacen/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},anularpago(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el pago?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.post("anularLogcompra",e).then((e=>{this.dialoglistpagos=!1,this.consultmaterial()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))}}};lv.render=ov,lv.__scopeId="data-v-54012e84";const iv=lv;S()(lv,"components",{QPage:V.Z,QBtn:D.Z,QTable:fe.Z,QInput:E.Z,QIcon:_.Z,QTd:ve.Z,QBtnDropdown:Bd.Z,QList:Qd.Z,QItem:Fn.Z,QItemSection:zn.Z,QLinearProgress:ph.Z,QBadge:pe.Z,QSelect:ia.Z,QTooltip:ge.Z,QDialog:we.Z,QCard:C.Z,QCardSection:x.Z,QSpace:Zn.Z,QForm:q.Z,QMarkupTable:he.Z,QCardActions:M.Z}),S()(lv,"directives",{ClosePopup:ye.Z});const sv=[{path:"/",component:()=>Promise.all([t.e(736),t.e(213)]).then(t.bind(t,98213)),children:[{path:"",component:()=>t.e(106).then(t.bind(t,24106))},{path:"login",component:O},{path:"cliente",component:Ve,meta:{requiresAuth:!0}},{path:"clientelocal",component:sa,meta:{requiresAuth:!0}},{path:"producto",component:Da,meta:{requiresAuth:!0}},{path:"venta",component:hd,meta:{requiresAuth:!0}},{path:"ventalocal",component:Ri,meta:{requiresAuth:!0}},{path:"garantia",component:kt,meta:{requiresAuth:!0}},{path:"inventario",component:co,meta:{requiresAuth:!0}},{path:"empleado",component:wl,meta:{requiresAuth:!0}},{path:"empleadosueldo",component:()=>t.e(505).then(t.bind(t,6505)),meta:{requiresAuth:!0}},{path:"reporteuser",component:ns,meta:{requiresAuth:!0}},{path:"user",component:Ts,meta:{requiresAuth:!0}},{path:"gasto",component:jn,meta:{requiresAuth:!0}},{path:"prestamos",component:Gd,meta:{requiresAuth:!0}},{path:"prestamoslocal",component:Ac,meta:{requiresAuth:!0}},{path:"historial",component:sm,meta:{requiresAuth:!0}},{path:"cxcdetalle",component:km,meta:{requiresAuth:!0}},{path:"cxclocal",component:au,meta:{requiresAuth:!0}},{path:"cxcruta",component:xu,meta:{requiresAuth:!0}},{path:"historialruta",component:Zu,meta:{requiresAuth:!0}},{path:"caja",component:ip,meta:{requiresAuth:!0}},{path:"cajageneral",component:Vp,meta:{requiresAuth:!0}},{path:"planillas",component:gl.Z,meta:{requiresAuth:!0}},{path:"almacen",component:hh,meta:{requiresAuth:!0}},{path:"almacen2",component:iv,meta:{requiresAuth:!0}},{path:"contable",component:Sh,meta:{requiresAuth:!0}},{path:"sale/:type",component:kf,meta:{requiresAuth:!0}}]},{path:"/:catchAll(.*)*",component:()=>t.e(193).then(t.bind(t,32193))}],nv=sv,rv=(0,c.BC)((function(){const e=m.r5,a=(0,m.p7)({scrollBehavior:()=>({left:0,top:0}),routes:nv,history:e("")});return a.beforeEach(((e,a,t)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if((0,d.default)().getters["login/isLoggedIn"])return void t();t("/login")}else t()})),a}));async function dv(e,a){const o="function"===typeof d.default?await(0,d.default)({}):d.default,{storeKey:i}=await Promise.resolve().then(t.bind(t,60214)),s="function"===typeof rv?await rv({store:o}):rv;o.$router=s;const n=e(r);return n.use(l.Z,a),{app:n,store:o,storeKey:i,router:s}}var cv=t(40729),mv=t(16249),uv=t(64434),pv=t(48508);const hv={config:{},lang:cv.Z,plugins:{Loading:mv.Z,Notify:uv.Z,Dialog:pv.Z}};var gv=t(91413);(0,gv.z)("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&t.e(736).then(t.t.bind(t,49501,23));const fv="";async function bv({app:e,router:a,store:t,storeKey:o},l){let i=!1;const s=e=>{i=!0;const t=Object(e)===e?a.resolve(e).fullPath:e;window.location.href=t},n=window.location.href.replace(window.location.origin,"");for(let d=0;!1===i&&d<l.length;d++)try{await l[d]({app:e,router:a,store:t,ssrContext:null,redirect:s,urlPath:n,publicPath:fv})}catch(r){return r&&r.url?void(window.location.href=r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(a),e.use(t,o),e.mount("#q-app"))}dv(o.ri,hv).then((e=>Promise.all([Promise.resolve().then(t.bind(t,5474))]).then((a=>{const t=a.map((e=>e.default)).filter((e=>"function"===typeof e));bv(e,t)}))))},5474:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,axios:()=>i.a,api:()=>s});var o=t(47083),l=t(30052),i=t.n(l);const s=i().create({baseURL:"https://bnaty.siscenter.org/api"}),n=(0,o.xr)((({app:e,router:a,store:t})=>{e.config.globalProperties.$axios=i(),e.config.globalProperties.$api=s;const o=localStorage.getItem("tokenchi");o&&(e.config.globalProperties.$axios.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$api.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$axios.post("https://bnaty.siscenter.org/api/me").then((e=>{t.commit("login/auth_success",{token:o,user:e.data})})).catch((e=>{t.commit("login/salir"),localStorage.removeItem("tokenchi")}))),e.config.globalProperties.$api=s,e.config.globalProperties.$axios=i()}))},60214:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var o={};t.r(o),t.d(o,{authStatus:()=>c,isLoggedIn:()=>d,user:()=>m});var l={};t.r(l),t.d(l,{auth_error:()=>h,auth_request:()=>u,auth_success:()=>p,salir:()=>g});var i={};t.r(i),t.d(i,{login:()=>b,logout:()=>v});var s=t(47083),n=t(87874);function r(){return{status:"",token:localStorage.getItem("tokenchi")||"",user:{},pedido:[],usuarios:!1,clientes:!1,productos:!1,inventario:!1,ventadetalle:!1,historialventadetalle:!1,ventalocal:!1,historialventalocal:!1,empleados:!1,reportes:!1,gastos:!1,historialprestamo:!1,anularventa:!1,ruta:!1,anularprestamo:!1,reimpresion:!1,eliminargasto:!1,cobrardetalle:!1,cobrarlocal:!1,cobrarruta:!1,cajachica:!1,editalmacen:!1,editproducto:!1,editinventario:!1,editglosa:!1,delprestamo:!1,veralmacen:!1,pagoalmacen:!1,cajageneral:!1,gastoreporteuser:!1,reportepago:!1,resumencontable:!1,delpago:!1,preciounitario:!1,registroMateriaPrima:!1,registroProveedor:!1,registroProducto:!1,almacenCostoSubtotal:!1,almacenCrearMateriaPrima:!1,almacenHistorialPago:!1,empleadoSueldo:!1}}function d(e){return!!e.token}function c(e){return e.status}function m(e){return e.user}function u(e){e.status="loading"}function p(e,a){e.status="success",e.token=a.token,e.user=a.user,e.usuarios=void 0!=a.user.permisos.find((e=>1===e.id)),e.clientes=void 0!=a.user.permisos.find((e=>2===e.id)),e.productos=void 0!=a.user.permisos.find((e=>3===e.id)),e.inventario=void 0!=a.user.permisos.find((e=>4===e.id)),e.ventadetalle=void 0!=a.user.permisos.find((e=>5===e.id)),e.historialventadetalle=void 0!=a.user.permisos.find((e=>6===e.id)),e.ventalocal=void 0!=a.user.permisos.find((e=>7===e.id)),e.historialventalocal=void 0!=a.user.permisos.find((e=>8===e.id)),e.empleados=void 0!=a.user.permisos.find((e=>9===e.id)),e.reportes=void 0!=a.user.permisos.find((e=>10===e.id)),e.gastos=void 0!=a.user.permisos.find((e=>11===e.id)),e.historialprestamo=void 0!=a.user.permisos.find((e=>12===e.id)),e.historialventa=void 0!=a.user.permisos.find((e=>13===e.id)),e.anularventa=void 0!=a.user.permisos.find((e=>14===e.id)),e.ruta=void 0!=a.user.permisos.find((e=>15===e.id)),e.anularprestamo=void 0!=a.user.permisos.find((e=>16===e.id)),e.reimpresion=void 0!=a.user.permisos.find((e=>17===e.id)),e.eliminargasto=void 0!=a.user.permisos.find((e=>18===e.id)),e.cobrardetalle=void 0!=a.user.permisos.find((e=>19===e.id)),e.cobrarlocal=void 0!=a.user.permisos.find((e=>20===e.id)),e.cobrarruta=void 0!=a.user.permisos.find((e=>21===e.id)),e.cajachica=void 0!=a.user.permisos.find((e=>22===e.id)),e.editalmacen=void 0!=a.user.permisos.find((e=>23===e.id)),e.editproducto=void 0!=a.user.permisos.find((e=>24===e.id)),e.editinventario=void 0!=a.user.permisos.find((e=>25===e.id)),e.editglosa=void 0!=a.user.permisos.find((e=>26===e.id)),e.delprestamo=void 0!=a.user.permisos.find((e=>27===e.id)),e.veralmacen=void 0!=a.user.permisos.find((e=>28===e.id)),e.pagoalmacen=void 0!=a.user.permisos.find((e=>29===e.id)),e.cajageneral=void 0!=a.user.permisos.find((e=>30===e.id)),e.gastoreporteuser=void 0!=a.user.permisos.find((e=>31===e.id)),e.reportepago=void 0!=a.user.permisos.find((e=>32===e.id)),e.resumencontable=void 0!=a.user.permisos.find((e=>33===e.id)),e.delpago=void 0!=a.user.permisos.find((e=>34===e.id)),e.preciounitario=void 0!=a.user.permisos.find((e=>35===e.id)),e.ingresoMaterial=void 0!=a.user.permisos.find((e=>36===e.id)),e.egresoMaterial=void 0!=a.user.permisos.find((e=>37===e.id)),e.registroMateriaPrima=void 0!=a.user.permisos.find((e=>38===e.id)),e.registroProveedor=void 0!=a.user.permisos.find((e=>39===e.id)),e.registroProducto=void 0!=a.user.permisos.find((e=>40===e.id)),e.almacenCostoSubtotal=void 0!=a.user.permisos.find((e=>41===e.id)),e.almacenCrearMateriaPrima=void 0!=a.user.permisos.find((e=>42===e.id)),e.almacenHistorialPago=void 0!=a.user.permisos.find((e=>43===e.id)),e.empleadoSueldo=void 0!=a.user.permisos.find((e=>44===e.id))}function h(e){e.status="error"}function g(e){e.status="",e.token="",e.usuarios=!1,e.clientes=!1,e.productos=!1,e.inventario=!1,e.ventadetalle=!1,e.historialventadetalle=!1,e.ventalocal=!1,e.historialventalocal=!1,e.empleados=!1,e.reportes=!1,e.gastos=!1,e.historialprestamo=!1,e.historialventa=!1,e.anularventa=!1,e.ruta=!1,e.anularprestamo=!1,e.reimpresion=!1,e.eliminargasto=!1,e.cobrardetalle=!1,e.cobrarlocal=!1,e.cobrarruta=!1,e.cajachica=!1,e.editalmacen=!1,e.editproducto=!1,e.editinventario=!1,e.editglosa=!1,e.delprestamo=!1,e.veralmacen=!1,e.pagoalmacen=!1,e.cajageneral=!1,e.gastoreporteuser=!1,e.reportepago=!1,e.resumencontable=!1,e.delpago=!1,e.preciounitario=!1,e.ingresoMaterial=!1,e.egresoMaterial=!1,e.registroMateriaPrima=!1,e.registroProveedor=!1,e.registroProducto=!1,e.almacenCostoSubtotal=!1,e.almacenCrearMateriaPrima=!1,e.almacenHistorialPago=!1,e.empleadoSueldo=!1}var f=t(5474);function b({commit:e},a){return new Promise(((t,o)=>{e("auth_request"),f.axios.post("https://bnaty.siscenter.org/api/login",a).then((a=>{const o=a.data.token,l=a.data.user;localStorage.setItem("tokenchi",o),f.axios.defaults.headers.common.Authorization="Bearer "+o,f.api.defaults.headers.common.Authorization="Bearer "+o,e("auth_success",{token:o,user:l}),t(a)})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),o(a)}))}))}function v({commit:e}){return new Promise(((a,t)=>{f.axios.post("https://bnaty.siscenter.org/api/logout").then((t=>{e("salir"),localStorage.removeItem("tokenchi"),delete f.axios.defaults.headers.common.Authorization,a()})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),t(a)}))}))}const w={namespaced:!0,state:r,getters:o,mutations:l,actions:i},W=(0,s.h)((function(){const e=(0,n.MT)({modules:{login:w},strict:!1});return e}))},23377:(e,a,t)=>{"use strict";t.d(a,{Z:()=>Ke});var o=t(83673),l=t(62323),i=t(98880);const s=(0,o.HX)("data-v-14ebe980");(0,o.dD)("data-v-14ebe980");const n=(0,o.Uk)("Modificar empleado"),r=(0,o.Uk)("Modificar empleado"),d=(0,o.Uk)("Eliminar empleado"),c=(0,o.Uk)("Eliminar empleado"),m=(0,o.Uk)("Generar planilla"),u=(0,o.Uk)("Generar planilla"),p=(0,o.Uk)("Crear Empleado"),h={class:"row"},g={class:"col-12"},f={class:"col-12"},b={class:"col-12"},v={class:"col-12"},w={class:"col-12"},W={class:"col-12"},y={class:"col-12"},V=(0,o.Uk)("Modificar Empleado"),C={class:"row"},x={class:"col-12"},_={class:"col-12"},q={class:"col-12"},E={class:"col-12"},A={class:"col-12"},D={class:"col-12"},k={class:"col-12"},M={class:"row"},T={class:"col-12"},S={class:"row"},O={class:"col-3"},R={class:"col-3"},N={class:"col-3"},U={class:"col-3 flex flex-center"},I={class:"col-12"},P=(0,o.Uk)("Modificar planilla"),Y=(0,o.Uk)("Modificar planilla"),$=(0,o.Uk)("Eliminar planilla"),L=(0,o.Uk)("Eliminar planilla"),F=(0,o.Uk)("Imprimir planilla"),z=(0,o.Uk)("Imprimir planilla"),Z=(0,o.Uk)("Adelanto y decuento"),j=(0,o.Uk)("Adelanto y decuento"),B=(0,o.Uk)("Dar por cancelado"),Q=(0,o.Uk)("Dar por cancelado"),G={class:"row"},H={class:"col-12"},J={class:"col-12"},K={class:"col-12"},X={class:"col-12"},ee={class:"col-12"},ae={class:"col-12"},te={class:"col-12 flex flex-center"},oe=(0,o.Uk)(),le={class:"row"},ie={class:"col-12"},se={class:"col-12"},ne={class:"col-12"},re={class:"col-12 flex flex-center"},de=(0,o.Uk)(),ce={class:"row"},me={class:"col-12"},ue={class:"row"},pe={class:"col-3"},he={class:"col-3"},ge={class:"col-3"},fe={class:"col-3 flex flex-center"},be={class:"col-12"},ve=(0,o.Uk)("Modificar planilla"),we=(0,o.Uk)("Modificar planilla"),We=(0,o.Uk)("Eliminar planilla"),ye=(0,o.Uk)("Eliminar planilla");(0,o.Cn)();const Ve=s(((e,a,t,Ve,Ce,xe)=>{const _e=(0,o.up)("q-avatar"),qe=(0,o.up)("q-item-section"),Ee=(0,o.up)("q-item-label"),Ae=(0,o.up)("q-item"),De=(0,o.up)("q-list"),ke=(0,o.up)("q-btn-dropdown"),Me=(0,o.up)("q-td"),Te=(0,o.up)("q-badge"),Se=(0,o.up)("q-btn"),Oe=(0,o.up)("q-input"),Re=(0,o.up)("q-table"),Ne=(0,o.up)("q-card-section"),Ue=(0,o.up)("q-separator"),Ie=(0,o.up)("q-select"),Pe=(0,o.up)("q-form"),Ye=(0,o.up)("q-card"),$e=(0,o.up)("q-dialog"),Le=(0,o.up)("q-page"),Fe=(0,o.Q2)("close-popup"),ze=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(Le,{class:"q-pa-xs"},{default:s((()=>[(0,o.Wm)(Re,{dense:"",flat:"",bordered:"",rows:Ce.empleados,"rows-per-page-options":[0],columns:Ce.columsempleado},{"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(ke,{color:"primary",label:"Opciones"},{default:s((()=>[(0,o.Wm)(De,null,{default:s((()=>[(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.clickmod(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit",color:"warning","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[n])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[r])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.deleteval(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[d])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[c])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.clickplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"add_task",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[m])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[u])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-tipo":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(Te,{color:"CONTRATO"==e.row.tipo?"green":"EVENTUAL"},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-nombre":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.nombre),1)])),_:2},1032,["props"])])),"body-cell-planillas":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(De,{dense:"",bordered:"",padding:"",class:"rounded-borders"},{default:s((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.row.planillas,(e=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:e.id,clickable:""},{default:s((()=>[(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Uk)((0,l.zw)(e.fechainicio)+" "+(0,l.zw)(e.fechafin)+" "+(0,l.zw)(e.monto),1)])),_:2},1024)])),_:2},1536)),[[ze]]))),128))])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-celular":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.celular),1)])),_:2},1032,["props"])])),"top-right":s((()=>[(0,o.Wm)(Se,{onClick:xe.clickcreateempleado,color:"positive",icon:"add_circle",label:"Crear Empleado"},null,8,["onClick"]),(0,o.Wm)(Oe,{dense:"",outlined:"",placeholder:"Buscar"})])),_:1},8,["rows","columns"]),(0,o.Wm)($e,{modelValue:Ce.dialogcreateempleado,"onUpdate:modelValue":a[7]||(a[7]=e=>Ce.dialogcreateempleado=e)},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-subtitle2"},{default:s((()=>[p])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)(Pe,{onSubmit:xe.createempleado},{default:s((()=>[(0,o.Wm)("div",h,[(0,o.Wm)("div",g,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"ci",modelValue:Ce.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>Ce.empleado.ci=e)},null,8,["modelValue"])]),(0,o.Wm)("div",f,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"nombre",modelValue:Ce.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>Ce.empleado.nombre=e)},null,8,["modelValue"])]),(0,o.Wm)("div",b,[(0,o.Wm)(Oe,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:Ce.empleado.fechanac,"onUpdate:modelValue":a[3]||(a[3]=e=>Ce.empleado.fechanac=e)},null,8,["modelValue"])]),(0,o.Wm)("div",v,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"celular",modelValue:Ce.empleado.celular,"onUpdate:modelValue":a[4]||(a[4]=e=>Ce.empleado.celular=e)},null,8,["modelValue"])]),(0,o.Wm)("div",w,[(0,o.Wm)(Ie,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:Ce.empleado.tipo,"onUpdate:modelValue":a[5]||(a[5]=e=>Ce.empleado.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",W,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"salario",type:"number",modelValue:Ce.empleado.salario,"onUpdate:modelValue":a[6]||(a[6]=e=>Ce.empleado.salario=e)},null,8,["modelValue"])]),(0,o.Wm)("div",y,[(0,o.Wm)(Se,{label:"Crear empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)($e,{modelValue:Ce.dialogmodempleado,"onUpdate:modelValue":a[14]||(a[14]=e=>Ce.dialogmodempleado=e)},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-subtitle2"},{default:s((()=>[V])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)(Pe,{onSubmit:xe.modempleado},{default:s((()=>[(0,o.Wm)("div",C,[(0,o.Wm)("div",x,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"ci",modelValue:Ce.empleado2.ci,"onUpdate:modelValue":a[8]||(a[8]=e=>Ce.empleado2.ci=e)},null,8,["modelValue"])]),(0,o.Wm)("div",_,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"nombre",modelValue:Ce.empleado2.nombre,"onUpdate:modelValue":a[9]||(a[9]=e=>Ce.empleado2.nombre=e)},null,8,["modelValue"])]),(0,o.Wm)("div",q,[(0,o.Wm)(Oe,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:Ce.empleado2.fechanac,"onUpdate:modelValue":a[10]||(a[10]=e=>Ce.empleado2.fechanac=e)},null,8,["modelValue"])]),(0,o.Wm)("div",E,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"celular",modelValue:Ce.empleado2.celular,"onUpdate:modelValue":a[11]||(a[11]=e=>Ce.empleado2.celular=e)},null,8,["modelValue"])]),(0,o.Wm)("div",A,[(0,o.Wm)(Ie,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:Ce.empleado2.tipo,"onUpdate:modelValue":a[12]||(a[12]=e=>Ce.empleado2.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",D,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"salario",type:"number",modelValue:Ce.empleado2.salario,"onUpdate:modelValue":a[13]||(a[13]=e=>Ce.empleado2.salario=e)},null,8,["modelValue"])]),(0,o.Wm)("div",k,[(0,o.Wm)(Se,{label:"Modificar empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)($e,{modelValue:Ce.dialogcreateplanilla,"onUpdate:modelValue":a[18]||(a[18]=e=>Ce.dialogcreateplanilla=e),"full-width":"","full-height":""},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-subtitle2"},{default:s((()=>[(0,o.Uk)("Crear Planilla "+(0,l.zw)(Ce.empleado.nombre)+" "+(0,l.zw)(Ce.empleado.tipo),1)])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)("div",M,[(0,o.Wm)("div",T,[(0,o.Wm)(Pe,{onSubmit:xe.createplanilla},{default:s((()=>[(0,o.Wm)("div",S,[(0,o.Wm)("div",O,[(0,o.Wm)(Oe,{dense:"",type:"date",outlined:"",label:"fechainicio",modelValue:Ce.fechainicio,"onUpdate:modelValue":a[15]||(a[15]=e=>Ce.fechainicio=e)},null,8,["modelValue"])]),(0,o.Wm)("div",R,[(0,o.Wm)(Oe,{dense:"",type:"date",outlined:"",label:"fechafin",modelValue:Ce.fechafin,"onUpdate:modelValue":a[16]||(a[16]=e=>Ce.fechafin=e)},null,8,["modelValue"])]),(0,o.Wm)("div",N,[(0,o.Wm)(Oe,{dense:"",outlined:"",label:"monto",modelValue:Ce.monto,"onUpdate:modelValue":a[17]||(a[17]=e=>Ce.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",U,[(0,o.Wm)(Se,{label:"Crear planilla",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,o.Wm)("div",I,[(0,o.Wm)(Re,{columns:Ce.columsmisplanillaempleado,title:"Historial de planillas","rows-per-page-options":[0],rows:Ce.misplanillaempleado},{"body-cell-estado":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Wm)(Te,{color:"CREADO"==e.row.estado?"positive":"negative",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(ke,{color:"CREADO"==e.row.estado?"positive":"negative",label:"Opciones"},{default:s((()=>[(0,o.Wm)(De,null,{default:s((()=>["CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:0,clickable:"",onClick:a=>xe.clickupdateplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[P])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[Y])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[Fe]]):(0,o.kq)("",!0),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:1,clickable:"",onClick:a=>xe.eliminarplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[$])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[L])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[Fe]]):(0,o.kq)("",!0),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.imprimirplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"print",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[F])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[z])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]]),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:2,clickable:"",onClick:a=>xe.adelantodescuento(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"paid",color:"positive","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[Z])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[j])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[Fe]]):(0,o.kq)("",!0),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:3,clickable:"",onClick:a=>xe.darcancelado(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"logout",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[B])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[Q])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[Fe]]):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1032,["color"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)($e,{modelValue:Ce.dialogplanilla,"onUpdate:modelValue":a[25]||(a[25]=e=>Ce.dialogplanilla=e)},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-bold"},{default:s((()=>[(0,o.Uk)("Planilla "+(0,l.zw)(Ce.empleado.nombre)+" "+(0,l.zw)(Ce.empleado.tipo),1)])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)(Pe,{onSubmit:(0,i.iM)(xe.updateplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",G,[(0,o.Wm)("div",H,[(0,o.Wm)(Oe,{label:"fechainicio",type:"date",dense:"",outlined:"",modelValue:Ce.planilla.fechainicio,"onUpdate:modelValue":a[19]||(a[19]=e=>Ce.planilla.fechainicio=e)},null,8,["modelValue"])]),(0,o.Wm)("div",J,[(0,o.Wm)(Oe,{label:"fechafin",type:"date",dense:"",outlined:"",modelValue:Ce.planilla.fechafin,"onUpdate:modelValue":a[20]||(a[20]=e=>Ce.planilla.fechafin=e)},null,8,["modelValue"])]),(0,o.Wm)("div",K,[(0,o.Wm)(Oe,{label:"monto",dense:"",outlined:"",modelValue:Ce.planilla.monto,"onUpdate:modelValue":a[21]||(a[21]=e=>Ce.planilla.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",X,[(0,o.Wm)(Oe,{label:"adelanto",dense:"",outlined:"",modelValue:Ce.planilla.adelanto,"onUpdate:modelValue":a[22]||(a[22]=e=>Ce.planilla.adelanto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ee,[(0,o.Wm)(Oe,{label:"bono",dense:"",outlined:"",modelValue:Ce.planilla.bono,"onUpdate:modelValue":a[23]||(a[23]=e=>Ce.planilla.bono=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ae,[(0,o.Wm)(Oe,{label:"total",dense:"",outlined:"",modelValue:Ce.planilla.total,"onUpdate:modelValue":a[24]||(a[24]=e=>Ce.planilla.total=e)},null,8,["modelValue"])]),(0,o.Wm)("div",te,[(0,o.Wm)(Se,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)($e,{modelValue:Ce.dialoglogplanillaupdate,"onUpdate:modelValue":a[29]||(a[29]=e=>Ce.dialoglogplanillaupdate=e)},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-bold"},{default:s((()=>[(0,o.Wm)("div",null,"Planilla "+(0,l.zw)(Ce.empleado.nombre)+" "+(0,l.zw)(Ce.empleado.tipo),1),oe,(0,o.Wm)("div",null,"Del: "+(0,l.zw)(Ce.planilla.fechainicio)+" Al "+(0,l.zw)(Ce.planilla.fechafin),1)])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)(Pe,{onSubmit:(0,i.iM)(xe.updatelogplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",le,[(0,o.Wm)("div",ie,[(0,o.Wm)(Oe,{label:"tipo",dense:"",outlined:"",modelValue:Ce.logplanillaupdate.tipo,"onUpdate:modelValue":a[26]||(a[26]=e=>Ce.logplanillaupdate.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",se,[(0,o.Wm)(Oe,{label:"monto",type:"number",dense:"",outlined:"",modelValue:Ce.logplanillaupdate.monto,"onUpdate:modelValue":a[27]||(a[27]=e=>Ce.logplanillaupdate.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ne,[(0,o.Wm)(Oe,{label:"motivo",dense:"",outlined:"",modelValue:Ce.logplanillaupdate.motivo,"onUpdate:modelValue":a[28]||(a[28]=e=>Ce.logplanillaupdate.motivo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",re,[(0,o.Wm)(Se,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)($e,{modelValue:Ce.dialoglogplanilla,"onUpdate:modelValue":a[33]||(a[33]=e=>Ce.dialoglogplanilla=e)},{default:s((()=>[(0,o.Wm)(Ye,null,{default:s((()=>[(0,o.Wm)(Ne,{class:"text-center text-bold"},{default:s((()=>[(0,o.Wm)("div",null,"Historial de adelantos y descuentos "+(0,l.zw)(Ce.empleado.nombre)+" "+(0,l.zw)(Ce.empleado.tipo),1),de,(0,o.Wm)("div",null,"Del: "+(0,l.zw)(Ce.planilla.fechainicio)+" Al "+(0,l.zw)(Ce.planilla.fechafin),1)])),_:1}),(0,o.Wm)(Ue),(0,o.Wm)(Ne,null,{default:s((()=>[(0,o.Wm)("div",ce,[(0,o.Wm)("div",me,[(0,o.Wm)(Pe,{onSubmit:(0,i.iM)(xe.createlogplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",ue,[(0,o.Wm)("div",pe,[(0,o.Wm)(Ie,{options:["BONO","ADELANTO","DESCUENTO"],label:"Tipo",dense:"",outlined:"",modelValue:Ce.logplanilla.tipo,"onUpdate:modelValue":a[30]||(a[30]=e=>Ce.logplanilla.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",he,[(0,o.Wm)(Oe,{label:"Monto",type:"number",dense:"",outlined:"",modelValue:Ce.logplanilla.monto,"onUpdate:modelValue":a[31]||(a[31]=e=>Ce.logplanilla.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ge,[(0,o.Wm)(Oe,{label:"Motivo",type:"text",dense:"",outlined:"",modelValue:Ce.logplanilla.motivo,"onUpdate:modelValue":a[32]||(a[32]=e=>Ce.logplanilla.motivo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",fe,[(0,o.Wm)(Se,{type:"submit",class:"full-width",color:"positive",icon:"add_circle",label:"Crear"})])])])),_:1},8,["onSubmit"])]),(0,o.Wm)("div",be,[(0,o.Wm)(Re,{rows:Ce.logplanillas,title:"Historial de planillas",columns:Ce.columslogplanillas,"rows-per-page-options":[0]},{"body-cell-tipo":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Wm)(Te,{color:"ADELANTO"==e.row.tipo||"DESCUENTO"==e.row.tipo?"negative":"BONO"==e.row.tipo?"positive":""},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(ke,{color:"primary",label:"Opciones"},{default:s((()=>[(0,o.Wm)(De,null,{default:s((()=>[(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.clickupdatelogplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[ve])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[we])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>xe.eliminarlogplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[We])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[ye])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[Fe]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var Ce=t(21082),xe=(t(47345),t(47213)),_e=t(11488),qe=t.n(_e);const Ee=t(21694),Ae={name:"Planillas",data(){return{dialoglogplanilla:!1,logplanilla:{},dialoglogplanillaupdate:!1,logplanillaupdate:{},logplanillas:[],dialogplanilla:!1,dialogcreateempleado:!1,dialogmodempleado:!1,dialogcreateplanilla:!1,fechainicio:Ce.ZP.formatDate(new Date,"YYYY-MM-DD"),fechafin:Ce.ZP.formatDate(new Date,"YYYY-MM-DD"),fechahoy:Ce.ZP.formatDate(new Date,"YYYY-MM-DD"),monto:0,empleado:{tipo:"CONTRATO",fechanac:Ce.ZP.formatDate(new Date,"YYYY-MM-DD")},empleado2:{},empleados:[],columsempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"ci",name:"ci",field:"ci",align:"left"},{label:"nombre",name:"nombre",field:"nombre",align:"left"},{label:"fechanac",name:"fechanac",field:"fechanac",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"celular",name:"celular",field:"celular",align:"left"},{label:"salario",name:"salario",field:"salario",align:"left"}],columslogplanillas:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"motivo",name:"motivo",field:"motivo",align:"left"},{label:"fecha",name:"fecha",field:"fecha",align:"left"},{label:"hora",name:"hora",field:"hora",align:"left"}],misplanillaempleado:[],columsmisplanillaempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"fechainicio",name:"fechainicio",field:"fechainicio",align:"left"},{label:"fechafin",name:"fechafin",field:"fechafin",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"adelanto",name:"adelanto",field:"adelanto",align:"left"},{label:"descuento",name:"descuento",field:"descuento",align:"left"},{label:"bono",name:"bono",field:"bono",align:"left"},{label:"total",name:"total",field:"total",align:"left"},{label:"estado",name:"estado",field:"estado",align:"left"}],planilla:{}}},created(){this.misempleados()},mounted(){},methods:{createlogplanilla(){this.$q.loading.show(),this.logplanilla.fecha=Ce.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanilla.hora=Ce.ZP.formatDate(new Date,"HH:mm:ss"),this.logplanilla.planilla_id=this.planilla.id,this.$axios.post("https://bnaty.siscenter.org/api/logplanilla",this.logplanilla).then((e=>{"BONO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.siscenter.org/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:this.planilla.descuento,bono:parseInt(this.planilla.bono)+parseInt(this.logplanilla.monto),total:parseInt(this.planilla.total)+parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"DESCUENTO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.siscenter.org/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:parseInt(this.planilla.descuento)+parseInt(this.logplanilla.monto),bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"ADELANTO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.siscenter.org/api/planilla/"+this.planilla.id,{adelanto:parseInt(this.planilla.adelanto)+parseInt(this.logplanilla.monto),descuento:this.planilla.descuento,bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),this.milogplanillas(),this.logplanilla={}}))},clickmod(e){this.empleado2=e,this.dialogmodempleado=!0},clickplanilla(e){this.empleado=e,this.monto=this.empleado.salario,this.dialogcreateplanilla=!0,this.mihistorialplanilla()},mihistorialplanilla(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/planilla/"+this.empleado.id).then((e=>{this.$q.loading.hide(),this.misplanillaempleado=e.data}))},clickcreateempleado(){this.dialogcreateempleado=!0,this.empleado={tipo:"CONTRATO",fechanac:Ce.ZP.formatDate(new Date,"YYYY-MM-DD")}},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/empleado/1/edit").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},createplanilla(){this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/planilla",{fechainicio:this.fechainicio,fechafin:this.fechafin,fechapago:null,monto:this.monto,adelanto:0,descuento:0,bono:0,restante:this.monto,total:this.monto,estado:"CREADO",empleado_id:this.empleado.id}).then((e=>{this.mihistorialplanilla()}))},updateplanilla(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/planilla/"+this.planilla.id,this.planilla).then((e=>{this.mihistorialplanilla(),this.dialogplanilla=!1}))},updatelogplanilla(){this.$q.loading.show(),this.logplanillaupdate.fecha=Ce.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanillaupdate.hora=Ce.ZP.formatDate(new Date,"HH:mm:ss"),this.$axios.put("https://bnaty.siscenter.org/api/logplanilla/"+this.logplanillaupdate.id,this.logplanillaupdate).then((e=>{this.dialoglogplanillaupdate=!1,this.milogplanillas()}))},clickupdatelogplanilla(e){this.logplanillaupdate=e,this.dialoglogplanillaupdate=!0},eliminarplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/planilla/"+e.id).then((e=>{this.mihistorialplanilla()}))}))},eliminarlogplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/logplanilla/"+e.id).then((e=>{this.milogplanillas()}))}))},darcancelado(e){this.$q.dialog({title:"Seguro dar por cacelado?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/planilla/"+e.id,{estado:"CANCELADO",fechapago:Ce.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.mihistorialplanilla()}))}))},adelantodescuento(e){this.planilla=e,this.dialoglogplanilla=!0,this.milogplanillas()},milogplanillas(){this.$q.loading.show(),this.$axios.get("https://bnaty.siscenter.org/api/logplanilla/"+this.planilla.id).then((e=>{this.logplanillas=e.data,this.$q.loading.hide()}))},imprimirplanilla(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"png",5,2,37,17),o.setFont(void 0,"bold"),o.setFontSize(8),o.text(170,5,"fecha de proceso: "+a.fechahoy,"DD/MM/YYYY"),o.setFontSize(11),o.text("CHICHERIA DOÑA NATI",110,7,"center"),o.text("BOLETA DE PAGO",110,12,"center"),o.text("Correspondiente  "+qe()(e.fechainicio).format("DD/MM/YYYY")+" Al "+qe()(e.fechafin).format("DD/MM/YYYY")+" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":qe()(e.fechapago).format("DD/MM/YYYY")),110,17,"center"),o.line(5,20,210,20),o.setFont(void 0,"normal")}var o=new xe.kH("p",void 0,"letter");o.setFont("Times"),t(),o.setFontSize(10),o.setFont(void 0,"bold"),o.text(["CI:","Nombre:","Fecha nac:"],10,25),o.setFont(void 0,"normal"),o.text([this.empleado.ci,this.empleado.nombre,this.empleado.fechanac],65,25,"center"),o.setFont(void 0,"bold"),o.text(["Tipo:","Celular","Edad:"],130,25),o.setFont(void 0,"normal");var l=qe()(this.empleado.fechanac),i=qe()(),s=i.diff(l,"years");o.text([this.empleado.tipo,this.empleado.celular.toString(),s.toString()],170,25,"center"),o.line(5,35,210,35),o.setFont(void 0,"bold"),o.text("INGRESOS",45,39,"center"),o.text("DESCUENTOS",150,39,"center"),o.line(5,40,210,40),o.line(110,40,110,70),o.setFont(void 0,"bold"),o.text(["Monto:","Bono:"],15,45),o.setFont(void 0,"normal"),o.text([e.monto+" Bs",e.bono+" Bs"],105,45,"right"),o.setFont(void 0,"bold"),o.text(["Adelanto:","Descuento:"],115,45),o.setFont(void 0,"normal"),o.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),o.line(5,65,210,65),o.setFont(void 0,"bold"),o.text("Total ganado:",35,69,"center"),o.text("Total descuento:",140,69,"center"),o.setFont(void 0,"normal"),o.text(parseInt(e.monto)+parseInt(e.bono)+" Bs",105,69,"right"),o.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),o.line(5,70,210,70),o.setFont(void 0,"bold"),o.text("Liquido pagable: "+e.total+" Bs",110,75,"center");let n=Ee.conversorNumerosALetras,r=new n,d=r.convertToText(e.total);o.setFont(void 0,"normal"),o.text("SON: "+d.toUpperCase()+" Bs",110,80,"center"),o.setFont(void 0,"bold"),o.text(5,90,"____________________________                     _____________________________________           ______________________________"),o.text(10,95,"FIRMA SELLO CAJERO"),o.text(75,95,"FIRMA SELLO CONTROL INTERNO"),o.text(150,95,"FIRMA SELLO LIQUIDADOR"),window.open(o.output("bloburl"),"_blank")},clickupdateplanilla(e){this.planilla=e,this.dialogplanilla=!0},createempleado(){console.log(this.empleado),this.$q.loading.show(),this.$axios.post("https://bnaty.siscenter.org/api/empleado",this.empleado).then((e=>{this.empleado={tipo:"CONTRATO",fechanac:Ce.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialogcreateempleado=!1,this.misempleados()}))},modempleado(){this.$q.loading.show(),this.$axios.put("https://bnaty.siscenter.org/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.dialogmodempleado=!1,this.misempleados()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.siscenter.org/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))}}};var De=t(24379),ke=t(55242),Me=t(83884),Te=t(82226),Se=t(27011),Oe=t(83414),Re=t(52035),Ne=t(75096),Ue=t(2350),Ie=t(24554),Pe=t(69721),Ye=t(2165),$e=t(34842),Le=t(46778),Fe=t(10151),ze=t(25589),Ze=t(65869),je=t(68689),Be=t(63314),Qe=t(60677),Ge=t(80860),He=t(7518),Je=t.n(He);Ae.render=Ve,Ae.__scopeId="data-v-14ebe980";const Ke=Ae;Je()(Ae,"components",{QPage:De.Z,QTable:ke.Z,QTd:Me.Z,QBtnDropdown:Te.Z,QList:Se.Z,QItem:Oe.Z,QItemSection:Re.Z,QAvatar:Ne.Z,QItemLabel:Ue.Z,QIcon:Ie.Z,QBadge:Pe.Z,QBtn:Ye.Z,QInput:$e.Z,QDialog:Le.Z,QCard:Fe.Z,QCardSection:ze.Z,QSeparator:Ze.Z,QForm:je.Z,QSelect:Be.Z}),Je()(Ae,"directives",{ClosePopup:Qe.Z,Ripple:Ge.Z})},46700:(e,a,t)=>{var o={"./af":5809,"./af.js":5809,"./ar":46069,"./ar-dz":70481,"./ar-dz.js":70481,"./ar-kw":93994,"./ar-kw.js":93994,"./ar-ly":33312,"./ar-ly.js":33312,"./ar-ma":90239,"./ar-ma.js":90239,"./ar-sa":31863,"./ar-sa.js":31863,"./ar-tn":19607,"./ar-tn.js":19607,"./ar.js":46069,"./az":69281,"./az.js":69281,"./be":29945,"./be.js":29945,"./bg":59384,"./bg.js":59384,"./bm":21476,"./bm.js":21476,"./bn":43345,"./bn-bd":70216,"./bn-bd.js":70216,"./bn.js":43345,"./bo":81713,"./bo.js":81713,"./br":19655,"./br.js":19655,"./bs":87296,"./bs.js":87296,"./ca":43049,"./ca.js":43049,"./cs":62722,"./cs.js":62722,"./cv":98039,"./cv.js":98039,"./cy":95563,"./cy.js":95563,"./da":31960,"./da.js":31960,"./de":67533,"./de-at":76674,"./de-at.js":76674,"./de-ch":17732,"./de-ch.js":17732,"./de.js":67533,"./dv":78343,"./dv.js":78343,"./el":37004,"./el.js":37004,"./en-au":32517,"./en-au.js":32517,"./en-ca":84929,"./en-ca.js":84929,"./en-gb":99722,"./en-gb.js":99722,"./en-ie":96923,"./en-ie.js":96923,"./en-il":68050,"./en-il.js":68050,"./en-in":99624,"./en-in.js":99624,"./en-nz":70540,"./en-nz.js":70540,"./en-sg":14375,"./en-sg.js":14375,"./eo":10040,"./eo.js":10040,"./es":99720,"./es-do":25595,"./es-do.js":25595,"./es-mx":10180,"./es-mx.js":10180,"./es-us":61563,"./es-us.js":61563,"./es.js":99720,"./et":9217,"./et.js":9217,"./eu":39474,"./eu.js":39474,"./fa":85243,"./fa.js":85243,"./fi":57645,"./fi.js":57645,"./fil":55350,"./fil.js":55350,"./fo":75622,"./fo.js":75622,"./fr":91467,"./fr-ca":53439,"./fr-ca.js":53439,"./fr-ch":14335,"./fr-ch.js":14335,"./fr.js":91467,"./fy":86026,"./fy.js":86026,"./ga":32969,"./ga.js":32969,"./gd":21347,"./gd.js":21347,"./gl":11085,"./gl.js":11085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":69597,"./gom-latn.js":69597,"./gu":28705,"./gu.js":28705,"./he":69128,"./he.js":69128,"./hi":92821,"./hi.js":92821,"./hr":9002,"./hr.js":9002,"./hu":94814,"./hu.js":94814,"./hy-am":30658,"./hy-am.js":30658,"./id":29344,"./id.js":29344,"./is":28204,"./is.js":28204,"./it":70376,"./it-ch":81549,"./it-ch.js":81549,"./it.js":70376,"./ja":69293,"./ja.js":69293,"./jv":96401,"./jv.js":96401,"./ka":60482,"./ka.js":60482,"./kk":87329,"./kk.js":87329,"./km":44241,"./km.js":44241,"./kn":23566,"./kn.js":23566,"./ko":52742,"./ko.js":52742,"./ku":92915,"./ku.js":92915,"./ky":86846,"./ky.js":86846,"./lb":44959,"./lb.js":44959,"./lo":82188,"./lo.js":82188,"./lt":58967,"./lt.js":58967,"./lv":41245,"./lv.js":41245,"./me":90751,"./me.js":90751,"./mi":57501,"./mi.js":57501,"./mk":11643,"./mk.js":11643,"./ml":15597,"./ml.js":15597,"./mn":67612,"./mn.js":67612,"./mr":19065,"./mr.js":19065,"./ms":84703,"./ms-my":84645,"./ms-my.js":84645,"./ms.js":84703,"./mt":64365,"./mt.js":64365,"./my":83788,"./my.js":83788,"./nb":57357,"./nb.js":57357,"./ne":99109,"./ne.js":99109,"./nl":63746,"./nl-be":31985,"./nl-be.js":31985,"./nl.js":63746,"./nn":27175,"./nn.js":27175,"./oc-lnc":70566,"./oc-lnc.js":70566,"./pa-in":32733,"./pa-in.js":32733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":17839,"./pt-br.js":17839,"./pt.js":505,"./ro":39578,"./ro.js":39578,"./ru":32328,"./ru.js":32328,"./sd":641,"./sd.js":641,"./se":51758,"./se.js":51758,"./si":36680,"./si.js":36680,"./sk":25016,"./sk.js":25016,"./sl":7424,"./sl.js":7424,"./sq":88635,"./sq.js":88635,"./sr":49038,"./sr-cyrl":73716,"./sr-cyrl.js":73716,"./sr.js":49038,"./ss":64771,"./ss.js":64771,"./sv":3517,"./sv.js":3517,"./sw":39419,"./sw.js":39419,"./ta":55959,"./ta.js":55959,"./te":21739,"./te.js":21739,"./tet":22264,"./tet.js":22264,"./tg":94792,"./tg.js":94792,"./th":88328,"./th.js":88328,"./tk":60702,"./tk.js":60702,"./tl-ph":57814,"./tl-ph.js":57814,"./tlh":10797,"./tlh.js":10797,"./tr":16691,"./tr.js":16691,"./tzl":76891,"./tzl.js":76891,"./tzm":16362,"./tzm-latn":37855,"./tzm-latn.js":37855,"./tzm.js":16362,"./ug-cn":77606,"./ug-cn.js":77606,"./uk":30513,"./uk.js":30513,"./ur":43803,"./ur.js":43803,"./uz":60344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":60344,"./vi":70003,"./vi.js":70003,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":62083,"./yo.js":62083,"./zh-cn":84536,"./zh-cn.js":84536,"./zh-hk":92475,"./zh-hk.js":92475,"./zh-mo":67593,"./zh-mo.js":67593,"./zh-tw":4746,"./zh-tw.js":4746};function l(e){var a=i(e);return t(a)}function i(e){if(!t.o(o,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=46700},54130:()=>{}},a={};function t(o){var l=a[o];if(void 0!==l)return l.exports;var i=a[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,(()=>{var e=[];t.O=(a,o,l,i)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,l,i]=e[c],n=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(t.O).every((e=>t.O[e](o[r])))?o.splice(r--,1):(n=!1,i<s&&(s=i));if(n){e.splice(c--,1);var d=l();void 0!==d&&(a=d)}}return a}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,l,i]}})(),(()=>{t.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(a,{a}),a}})(),(()=>{var e,a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var i=Object.create(null);t.r(i);var s={};e=e||[null,a({}),a([]),a(a)];for(var n=2&l&&o;"object"==typeof n&&!~e.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((e=>s[e]=()=>o[e]));return s["default"]=()=>o,t.d(i,s),i}})(),(()=>{t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((a,o)=>(t.f[o](e,a),a)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{106:"16c54901",193:"58b85f33",213:"46b39d62",505:"eede7b0f"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+(736===e?"vendor":e)+"."+{213:"05389cc0",736:"8c101867"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={},a="Chicheria:";t.l=(o,l,i,s)=>{if(e[o])e[o].push(l);else{var n,r;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==a+i){n=m;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",a+i),n.src=o),e[o]=[l];var u=(a,t)=>{n.onerror=n.onload=null,clearTimeout(p);var l=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),l&&l.forEach((e=>e(t))),a)return a(t)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{t.p=""})(),(()=>{var e=(e,a,t,o)=>{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var i=i=>{if(l.onerror=l.onload=null,"load"===i.type)t();else{var s=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.href||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=s,r.request=n,l.parentNode.removeChild(l),o(r)}};return l.onerror=l.onload=i,l.href=a,document.head.appendChild(l),l},a=(e,a)=>{for(var t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var l=t[o],i=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(i===e||i===a))return l}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){l=s[o],i=l.getAttribute("data-href");if(i===e||i===a)return l}},o=o=>new Promise(((l,i)=>{var s=t.miniCssF(o),n=t.p+s;if(a(s,n))return l();e(o,n,l,i)})),l={143:0};t.f.miniCss=(e,a)=>{var t={213:1};l[e]?a.push(l[e]):0!==l[e]&&t[e]&&a.push(l[e]=o(e).then((()=>{l[e]=0}),(a=>{throw delete l[e],a})))}})(),(()=>{var e={143:0};t.f.j=(a,o)=>{var l=t.o(e,a)?e[a]:void 0;if(0!==l)if(l)o.push(l[2]);else{var i=new Promise(((t,o)=>l=e[a]=[t,o]));o.push(l[2]=i);var s=t.p+t.u(a),n=new Error,r=o=>{if(t.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;n.message="Loading chunk "+a+" failed.\n("+i+": "+s+")",n.name="ChunkLoadError",n.type=i,n.request=s,l[1](n)}};t.l(s,r,"chunk-"+a,a)}},t.O.j=a=>0===e[a];var a=(a,o)=>{var l,i,[s,n,r]=o,d=0;for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(r)var c=r(t);for(a&&a(o);d<s.length;d++)i=s[d],t.o(e,i)&&e[i]&&e[i][0](),e[s[d]]=0;return t.O(c)},o=self["webpackChunkChicheria"]=self["webpackChunkChicheria"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))})();var o=t.O(void 0,[736],(()=>t(64921)));o=t.O(o)})();
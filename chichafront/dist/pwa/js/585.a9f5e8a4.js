"use strict";(self["webpackChunkChicheria"]=self["webpackChunkChicheria"]||[]).push([[585],{33585:(e,a,o)=>{o.r(a),o.d(a,{default:()=>ce});var l=o(83673),t=o(62323),i=o(98880);const n=(0,l.HX)("data-v-2a907a7b");(0,l.dD)("data-v-2a907a7b");const s={class:"row"},d={class:"col-12"},m=(0,l.Uk)("Lista Adelantos"),r=(0,l.Wm)("div",{class:"col-12"},[(0,l.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"Modificar empleados")],-1),c={class:"col-12"},p={class:"col-12 q-pa-xs col-sm-2"},h={class:"col-12 q-pa-xs col-sm-3"},u={class:"col-12 q-pa-xs col-sm-3"},g={class:"col-12 q-pa-xs col-sm-2"},f={class:"col-12 q-pa-xs col-sm-2"},b={class:"col-12 q-pa-xs col-sm-2"},v={class:"col-12 q-pa-xs col-sm-2"},x={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},w={class:"text-h6"},_={class:"row"},W={class:"col-2"},V={class:"col-2"},q={class:"col-2"},D={class:"col-4"},A={key:0,class:"col-3"},y={class:"col-2 flex flex-center"},Y={class:"row"},C={class:"col-12"},$={class:"col-12"},k={class:"col-12"},E={class:"col-12"},F={class:"col-12"},O={class:"col-12"},S={class:"col-12"},M={class:"col-12"},U={class:"col-12"},I={class:"col-12"},T={class:"row"};(0,l.Cn)();const N=n(((e,a,o,N,P,Z)=>{const L=(0,l.up)("q-icon"),j=(0,l.up)("q-input"),R=(0,l.up)("q-badge"),B=(0,l.up)("q-td"),Q=(0,l.up)("q-tooltip"),z=(0,l.up)("q-btn"),G=(0,l.up)("q-table"),H=(0,l.up)("q-select"),J=(0,l.up)("q-form"),X=(0,l.up)("q-card"),K=(0,l.up)("q-dialog"),ee=(0,l.up)("q-card-section"),ae=(0,l.up)("q-card-actions"),oe=(0,l.up)("q-radio"),le=(0,l.up)("q-page"),te=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(le,{class:"q-pa-xs"},{default:n((()=>[(0,l.Wm)("div",s,[(0,l.Wm)("div",d,[(0,l.Wm)(G,{columns:P.columns,rows:P.empleados,"rows-per-page-options":[0,50,100],filter:P.filter,"wrap-cells":""},{"top-right":n((()=>[(0,l.Wm)(j,{borderless:"",dense:"",outlined:"",debounce:"300",modelValue:P.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>P.filter=e),placeholder:"Search"},{append:n((()=>[(0,l.Wm)(L,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-tipo":n((e=>[(0,l.Wm)(B,{props:e,"auto-width":""},{default:n((()=>[(0,l.Wm)(R,{color:"FIJO"==e.row.tipo?"green":"teal"},{default:n((()=>[(0,l.Uk)((0,t.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-estado":n((e=>[(0,l.Wm)(B,{props:e,"auto-width":""},{default:n((()=>[(0,l.Wm)(R,{color:"ACTIVO"==e.row.estado?"green":"red",onClick:a=>Z.cambioEstado(e.row)},{default:n((()=>[(0,l.Uk)((0,t.zw)(e.row.estado),1)])),_:2},1032,["color","onClick"])])),_:2},1032,["props"])])),"body-cell-action":n((e=>[(0,l.Wm)(B,{props:e},{default:n((()=>[(0,l.Wm)(z,{color:"info","icon-right":"list","no-caps":"",label:"Sueldos",flat:"",dense:"",onClick:a=>Z.pagosval(e.row)},{default:n((()=>[(0,l.Wm)(Q,null,{default:n((()=>[m])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"]),(0,l.Wm)(K,{modelValue:P.modempleado,"onUpdate:modelValue":a[9]||(a[9]=e=>P.modempleado=e)},{default:n((()=>[(0,l.Wm)(X,{style:{"min-width":"350px"}},{default:n((()=>[r,(0,l.Wm)("div",c,[(0,l.Wm)(J,{onSubmit:(0,i.iM)(Z.modificar,["prevent"])},{default:n((()=>[(0,l.Wm)("div",p,[(0,l.Wm)(j,{outlined:"",label:"CI",modelValue:P.empleado2.ci,"onUpdate:modelValue":a[2]||(a[2]=e=>P.empleado2.ci=e),required:""},null,8,["modelValue"])]),(0,l.Wm)("div",h,[(0,l.Wm)(j,{outlined:"",label:"Nombre",modelValue:P.empleado2.nombre,"onUpdate:modelValue":a[3]||(a[3]=e=>P.empleado2.nombre=e),required:""},null,8,["modelValue"])]),(0,l.Wm)("div",u,[(0,l.Wm)(H,{modelValue:P.empleado2.tipo,"onUpdate:modelValue":a[4]||(a[4]=e=>P.empleado2.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo",outlined:""},null,8,["modelValue"])]),(0,l.Wm)("div",g,[(0,l.Wm)(j,{outlined:"",label:"Fecha Nacimiento",type:"date",modelValue:P.empleado2.fechanac,"onUpdate:modelValue":a[5]||(a[5]=e=>P.empleado2.fechanac=e),required:""},null,8,["modelValue"])]),(0,l.Wm)("div",f,[(0,l.Wm)(j,{outlined:"",label:"Fecha Ingreso",type:"date",modelValue:P.empleado2.fechaingreso,"onUpdate:modelValue":a[6]||(a[6]=e=>P.empleado2.fechaingreso=e)},null,8,["modelValue"])]),(0,l.Wm)("div",b,[(0,l.Wm)(j,{outlined:"",label:"Celular",modelValue:P.empleado2.celular,"onUpdate:modelValue":a[7]||(a[7]=e=>P.empleado2.celular=e)},null,8,["modelValue"])]),(0,l.Wm)("div",v,[(0,l.Wm)(j,{outlined:"",label:"Salario",modelValue:P.empleado2.salario,"onUpdate:modelValue":a[8]||(a[8]=e=>P.empleado2.salario=e),type:"number"},null,8,["modelValue"])]),(0,l.Wm)("div",x,[(0,l.Wm)(z,{icon:"edit",label:"MODIFICAR",type:"submit",color:"warning"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(K,{modelValue:P.pagos,"onUpdate:modelValue":a[16]||(a[16]=e=>P.pagos=e),"full-width":""},{default:n((()=>[(0,l.Wm)(X,null,{default:n((()=>[(0,l.Wm)(ee,null,{default:n((()=>[(0,l.Wm)("div",w,"Historial de "+(0,t.zw)(P.empleado2.nombre),1)])),_:1}),(0,l.Wm)(ae,{align:"right",class:"bg-white text-teal"},{default:n((()=>[(0,l.wy)((0,l.Wm)(z,{flat:"",label:"OK"},null,512),[[te]])])),_:1}),(0,l.Wm)(ee,{class:"q-pt-none"},{default:n((()=>[(0,l.Wm)(J,{onSubmit:(0,i.iM)(Z.agregarpago,["prevent"])},{default:n((()=>[(0,l.Wm)("div",_,[(0,l.Wm)("div",W,[(0,l.Wm)(j,{outlined:"",dense:"",label:"Monto",type:"number",step:"0.01",modelValue:P.pago.monto,"onUpdate:modelValue":a[10]||(a[10]=e=>P.pago.monto=e),required:"",rules:[e=>e>0&&e<=P.montocajachica||"Monto excede caja chica"]},null,8,["modelValue","rules"])]),(0,l.Wm)("div",V,[(0,l.Wm)(H,{outlined:"",dense:"",label:"Tipo",modelValue:P.pago.tipo,"onUpdate:modelValue":a[11]||(a[11]=e=>P.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,l.Wm)("div",q,[(0,l.Wm)(j,{outlined:"",dense:"",label:"Fecha",modelValue:P.pago.fecha,"onUpdate:modelValue":a[12]||(a[12]=e=>P.pago.fecha=e),type:"date"},null,8,["modelValue"])]),(0,l.Wm)("div",D,[(0,l.Wm)(j,{outlined:"",dense:"",type:"text",label:"observacion",modelValue:P.pago.observacion,"onUpdate:modelValue":a[13]||(a[13]=e=>P.pago.observacion=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,l.wg)(),(0,l.j4)("div",A,[(0,l.Wm)(oe,{modelValue:P.checkgasto,"onUpdate:modelValue":a[14]||(a[14]=e=>P.checkgasto=e),val:"GASTO",label:"CAJA GENERAL"},null,8,["modelValue"]),(0,l.Wm)(oe,{modelValue:P.checkgasto,"onUpdate:modelValue":a[15]||(a[15]=e=>P.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,l.kq)("",!0),(0,l.Wm)("div",y,[(0,l.Wm)(z,{class:"full-with",label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),e.$store.state.login.reportepago?((0,l.wg)(),(0,l.j4)(G,{key:0,title:"Historial de pagos","rows-per-page-options":[0,50,100],columns:P.columns2,rows:P.empleadohistorial},{"body-cell-opcion":n((e=>[(0,l.Wm)(B,{props:e},{default:n((()=>["ANULADO"!=e.row.tipo?((0,l.wg)(),(0,l.j4)(z,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>Z.delsueldo(e.row)},null,8,["onClick"])):(0,l.kq)("",!0),"ANULADO"!=e.row.tipo?((0,l.wg)(),(0,l.j4)(z,{key:1,dense:"",round:"",flat:"",color:"teal",onClick:a=>Z.printRow(e),icon:"print"},null,8,["onClick"])):(0,l.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-tipo":n((e=>[(0,l.Wm)(B,{props:e},{default:n((()=>[(0,l.Wm)(R,{color:"DESCUENTO"==e.row.tipo||"ANULADO"==e.row.tipo?"red":"green","text-color":"white"},{default:n((()=>[(0,l.Uk)((0,t.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-observacion":n((e=>[(0,l.Wm)(B,{props:e},{default:n((()=>[(0,l.Wm)(j,{dense:"",outlined:"",modelValue:e.row.observacion,"onUpdate:modelValue":a=>e.row.observacion=a,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])):(0,l.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,l.Wm)(K,{modelValue:P.dialoggenplanilla,"onUpdate:modelValue":a[26]||(a[26]=e=>P.dialoggenplanilla=e)},{default:n((()=>[(0,l.Wm)(X,null,{default:n((()=>[(0,l.Wm)(ee,{class:"text-center text-bold q-pa-none q-ma-none"},{default:n((()=>[(0,l.Uk)("Datos "+(0,t.zw)(P.emp.nombre),1)])),_:1}),(0,l.Wm)(ee,null,{default:n((()=>[(0,l.Wm)(J,{onSubmit:(0,i.iM)(Z.creategenplanilla,["prevent"])},{default:n((()=>[(0,l.Wm)("div",Y,[(0,l.Wm)("div",C,[(0,l.Wm)(j,{dense:"",outlined:"",label:"fechainicio",modelValue:P.planilla.fechainicio,"onUpdate:modelValue":a[17]||(a[17]=e=>P.planilla.fechainicio=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",$,[(0,l.Wm)(j,{dense:"",outlined:"",label:"fechafin",modelValue:P.planilla.fechafin,"onUpdate:modelValue":a[18]||(a[18]=e=>P.planilla.fechafin=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",k,[(0,l.Wm)(j,{dense:"",outlined:"",label:"fechapago",modelValue:P.planilla.fechapago,"onUpdate:modelValue":a[19]||(a[19]=e=>P.planilla.fechapago=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",E,[(0,l.Wm)(j,{dense:"",outlined:"",label:"Salario",modelValue:P.planilla.monto,"onUpdate:modelValue":[a[20]||(a[20]=e=>P.planilla.monto=e),Z.actualizamonto]},null,8,["modelValue","onUpdate:modelValue"])]),(0,l.Wm)("div",F,[(0,l.Wm)(j,{dense:"",outlined:"",label:"adelanto",modelValue:P.planilla.adelanto,"onUpdate:modelValue":a[21]||(a[21]=e=>P.planilla.adelanto=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",O,[(0,l.Wm)(j,{dense:"",outlined:"",label:"descuento",modelValue:P.planilla.descuento,"onUpdate:modelValue":a[22]||(a[22]=e=>P.planilla.descuento=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",S,[(0,l.Wm)(j,{dense:"",outlined:"",label:"bono",modelValue:P.planilla.bono,"onUpdate:modelValue":a[23]||(a[23]=e=>P.planilla.bono=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",M,[(0,l.Wm)(j,{dense:"",outlined:"",label:"total",modelValue:P.planilla.total,"onUpdate:modelValue":a[24]||(a[24]=e=>P.planilla.total=e),disable:""},null,8,["modelValue"])]),(0,l.Wm)("div",U,[(0,l.Wm)(j,{dense:"",outlined:"",label:"observacion",modelValue:P.planilla.observacion,"onUpdate:modelValue":a[25]||(a[25]=e=>P.planilla.observacion=e)},null,8,["modelValue"])]),(0,l.Wm)("div",I,[P.validarplan?((0,l.wg)(),(0,l.j4)(z,{key:0,class:"full-width\t",type:"submit",color:"primary",icon:"add_circle",label:"crear planilla"})):(0,l.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,l.Wm)(K,{modelValue:P.dialogver,"onUpdate:modelValue":a[27]||(a[27]=e=>P.dialogver=e)},{default:n((()=>[(0,l.Wm)(X,{style:{width:"800px","max-width":"80vw"}},{default:n((()=>[(0,l.Wm)(ee,{class:"text-center text-bold q-pa-none q-ma-none"},{default:n((()=>[(0,l.Uk)("Datos "+(0,t.zw)(P.emp.nombre),1)])),_:1}),(0,l.Wm)(ee,null,{default:n((()=>[(0,l.Wm)("div",T,[(0,l.Wm)(G,{title:"PLANILLAS",rows:P.planillas,columns:P.colplan,"row-key":"name","rows-per-page-options":[0,50,100]},{"body-cell-opcion":n((e=>[(0,l.Wm)(B,{props:e},{default:n((()=>["ANULADO"!=e.row.estado?((0,l.wg)(),(0,l.j4)(z,{key:0,dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>Z.imprimirplanilla(e.row)},null,8,["onClick"])):(0,l.kq)("",!0),"ANULADO"!=e.row.estado?((0,l.wg)(),(0,l.j4)(z,{key:1,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>Z.delplanilla(e.row)},null,8,["onClick"])):(0,l.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));o(47345);var P=o(21082),Z=o(47213),L=o(11488),j=o.n(L);o(23377),o(69755);const R=o(21694),B={name:"EmpleadoSeldos",data(){return{montocajachica:0,dialoggenplanilla:!1,dialogver:!1,filter:"",pagos:!1,checkgasto:"CAJA",pago:{fecha:P.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],emp:{},empleados2:[],empleadohistorial:{},boolcrear:!0,salarios:[],planillas:[],planilla:{},validarplan:!0,modempleado:!1,empleado:{fechanac:"2000-01-01",fechaingreso:P.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleado2:{},dialog_plan:!1,fecha1:P.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:P.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocaja:0,montogeneral:0,columns:[{name:"ci",label:"CI",field:"ci"},{name:"nombre",label:"NOMBRE",field:"nombre",sortable:!0,align:"left"},{name:"fechaingreso",label:"FECHA INGRESO",field:"fechaingreso",sortable:!0,align:"left"},{name:"tipo",label:"TIPO",field:"tipo"},{name:"action",label:"OPCION",field:"action"}],columns2:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"fecha",label:"FECHA",field:e=>j()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"hora",label:"HORA",field:"hora"},{name:"tipo",label:"TIPO",field:"tipo",sortable:!0},{name:"monto",label:"MONTO",field:"monto",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name,sortable:!0},{name:"observacion",label:"observacion",field:"observacion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"extra"},{name:"pago",label:"Pago",field:"pago"},{name:"cancelar",label:"Cancelar",field:"cancelar"},{name:"opcion",label:"opcion",field:"opcion"}],colplan:[{name:"opcion",label:"opcion",field:"opcion"},{name:"Fecha",label:"Fecha In",field:e=>j()(e.fechainicio).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha Fin",field:e=>j()(e.fechafin).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha pago",field:e=>j()(e.fechapago).format("DD/MM/YYYY")},{name:"salario",label:"Sueldo",field:"monto"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"bono"},{name:"pago",label:"Pago",field:"total"}]}},mounted(){this.totalcaja(),this.missalarios(),this.misempleados(),this.totalgeneral()},methods:{cambioEstado(e){this.$axios.post("https://bnaty.tuprogam.com/api/estadoEmpleado",e).then((e=>{this.missalarios(),this.misempleados()}))},printRow(e){this.$axios.get("https://bnaty.tuprogam.com/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delplanilla(e){console.log(e),this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/planilla/"+e.id).then((e=>{this.$q.notify({message:"Eliminado",icon:"info",color:"green"}),this.dialogver=!1,this.misempleados()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},delsueldo(e){this.$q.dialog({title:"Confirmar",message:"Ingrese el motivo por el cual esta eliminando?",prompt:{model:"",type:"text"},cancel:!0,persistent:!1}).onOk((a=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/sueldo/"+e.id,{params:{motivo:a}}).then((e=>{this.$q.notify({message:"Anulado",icon:"info",color:"green"}),this.pagos=!1,this.pagosval(this.empleado2),this.misempleados(),this.$q.loading.hide()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},genplanilla(e){this.dialoggenplanilla=!0,this.emp=e,this.planilla.fechainicio=this.fecha1,this.planilla.fechafin=this.fecha2,this.planilla.fechapago=P.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.planilla.monto=null==e.salario?0:e.salario,this.planilla.adelanto=null==e.adelanto?0:e.adelanto,this.planilla.descuento=null==e.descuento?0:e.descuento,this.planilla.bono=null==e.extra?0:e.extra,this.planilla.total=this.totalmonto,this.planilla.empleado_id=e.id,this.planilla.restante=0,this.$axios.post("https://bnaty.tuprogam.com/api/valplanilla",this.planilla).then((e=>{e.data.length>0?this.validarplan=!1:this.validarplan=!0}))},actualizamonto(){this.planilla.total=this.totalmonto},creategenplanilla(){return this.checkgasto="GASTO","GASTO"==this.checkgasto&&this.planilla.total>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&this.planilla.total>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.planilla.tpago=this.checkgasto,void this.$axios.post("https://bnaty.tuprogam.com/api/planilla",this.planilla).then((e=>{this.$q.loading.hide(),this.$q.notify({message:"Planilla Creada",icon:"info",color:"green"}),this.imprimirplanilla(this.planilla),this.dialoggenplanilla=!1,this.planilla={},this.misempleados(),this.totalgeneral()})))},imprimirplanilla(e){function a(){var a=new Image;a.src="logo.png",o.addImage(a,"png",5,2,37,17),o.setFont(void 0,"bold"),o.setFontSize(8),o.text(170,5,"fecha de proceso: "+P.ZP.formatDate(Date.now(),"DD-MM-YYYY")),o.setFontSize(11),o.text("CHICHERIA DOÑA NATI",110,7,"center"),o.text("BOLETA DE PAGO",110,12,"center"),o.text("Correspondiente  "+j()(e.fechainicio).format("DD/MM/YYYY")+" Al "+j()(e.fechafin).format("DD/MM/YYYY"),100,17,"center"),o.text(" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":j()(e.fechapago).format("DD/MM/YYYY")),170,17,"left"),o.line(5,20,210,20),o.setFont(void 0,"normal")}var o=new Z.kH("p",void 0,"letter");o.setFont("Times"),a(),o.setFontSize(10),o.setFont(void 0,"bold"),o.text(["CI:","Nombre:"],10,25),o.setFont(void 0,"normal"),o.text([this.emp.ci,this.emp.nombre],65,25,"center"),o.setFont(void 0,"bold"),o.text(["Tipo:"],130,25),o.setFont(void 0,"normal");var l=j()(this.emp.fechanac),t=j()();t.diff(l,"years");o.text([this.emp.tipo],170,25,"center"),o.line(5,35,210,35),o.setFont(void 0,"bold"),o.text("INGRESOS",45,39,"center"),o.text("DESCUENTOS",150,39,"center"),o.line(5,40,210,40),o.line(110,40,110,70),o.setFont(void 0,"bold"),o.text(["Salario:"],15,45),o.setFont(void 0,"normal"),o.text([e.monto+" Bs"],105,45,"right"),o.setFont(void 0,"bold"),o.text(["Adelanto:","Descuento:"],115,45),o.setFont(void 0,"normal"),o.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),o.line(5,65,210,65),o.setFont(void 0,"bold"),o.text("Total ganado:",35,69,"center"),o.text("Total descuento:",140,69,"center"),o.setFont(void 0,"normal"),o.text(parseInt(e.monto)+" Bs",105,69,"right"),o.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),o.line(5,70,210,70),o.setFont(void 0,"bold"),o.setFontSize(14),o.text("Liquido pagable: "+e.total+" Bs",110,75,"center"),o.setFontSize(9);let i=R.conversorNumerosALetras,n=new i,s=n.convertToText(parseInt(e.total));o.setFont(void 0,"normal"),o.text("SON: "+s.toUpperCase()+" Bs",110,80,"center"),o.setFont(void 0,"bold"),""!=e.observacion&&null!=e.observacion&&(o.setFont(void 0,"bold"),o.text("Obs: ",2,85,"left"),o.setFont(void 0,"normal"),o.text(e.observacion.substring(0,95),10,85,"left"),o.text(e.observacion.substring(95,95),10,90,"left"),o.text(e.observacion.substring(190,95),10,90,"left"),o.setFont(void 0,"bold")),o.text(5,100,"____________________________                                                                   ______________________________"),o.text(10,105,"FIRMA EMPLEADO"),o.text(150,105,"FIRMA RESPONSABLE"),window.open(o.output("bloburl"),"_blank")},cancelar(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago,this.$axios.post("https://bnaty.tuprogam.com/api/cancelacion",{monto:a,fecha:this.fecha2,empleado_id:e.id,empleado_nombre:e.nombre}).then((e=>{this.missalarios(),this.$q.notify({message:"Registro correctamente",icon:"info",color:"positive"})}))},imprimirboleta(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago;let o="<div><img class='fondo' src='logo.png' style='height:20px'> Chicheria Doña Naty <span>"+j()().format("DD/MM/YYYY")+"</span></div><br>";o+="<div style='text-align:center'>BOLETA DE PAGO "+P.ZP.formatDate(this.fecha1,"YYYY-MM")+"</div><hr>",o+="<div>Nombre: "+e.nombre+"</div><div>Salario Basico: "+e.salario+"</div>",o+="<div>CI: "+e.ci+"</div><div>Celular: "+e.celular+"</div><hr>",o+="<table style='width:100%'><thead><tr><th>INGRESOS</th><th>DESCUENTOS</th></tr></thead>",o+="<tbody><tr><td>Salario Basico:"+e.salario+"</td><td>Descuentos: "+e.descuento+"</td></tr>",o+="<tr><td>Extra:"+e.extra+"</td><td>Adelanto: "+e.adelanto+"</td></tr>",o+="<tr><td>Pago:"+e.pago+"</td><td> </td></tr>",o+="</tbody></table><hr>",o+="<div style='text-align:right'>Liquido Pagable: "+a+"</div>",o+="<div> "+e.obs+"</div>",o+="<br><br><div style='text-align:center; with:100%'>FIRMA</div>";let l=window.open("","Imprimir","width=1000,height=1000");l.document.write(o),l.document.close(),l.focus(),setTimeout((function(){l.print(),l.close()}),500)},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",o.addImage(a,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"Historial de prestmos Sueldos pagos Adelantos"),o.text(5,1.5,"DE "+e.fecha1),o.text(1,3,"Empleado"),o.text(7,3,"Sueldo"),o.text(9,3,"Extra"),o.text(11,3,"Adelanto"),o.text(13,3,"Descuento"),o.text(16,3,"Pago"),o.text(19,3,"Cancelar"),o.setFont(void 0,"normal")}var o=new Z.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),a();let l=0,t=0;this.salarios.forEach((e=>{let i=null==e.extra?0:e.extra,n=null==e.adelanto?0:e.adelanto,s=null==e.descuento?0:e.descuento,d=null==e.pago?0:e.pago,m=e.salario-n-s+d;l+=.5,o.text(1,l+3,""+e.nombre),o.text(7,l+3,""+e.salario),o.text(9,l+3,""+i),o.text(11,l+3,""+n),o.text(13,l+3,""+s),o.text(16,l+3,""+d),o.text(19,l+3,""+m),t+=m,l+3>25&&(o.addPage(),a(),l=0)})),l+=.5,o.text(11,l+3,"TOTAL"),o.text(14,l+3,""+t),window.open(o.output("bloburl"),"_blank")},missalarios(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/missueldos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{this.salarios=e.data,this.$q.loading.hide()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},totalgeneral(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{console.log(e.data.monto),this.montogeneral=parseFloat(e.data.monto)}))},agregarpago(){return console.log(this.empleadohistorial),"FIJO"==this.empleado2.tipo&&parseFloat(this.empleado2.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleado2.id,this.pago.empleado_nombre=this.empleado2.nombre,this.pago.checkbox=this.checkgasto,this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/sueldo",this.pago).then((e=>{this.pago={fecha:P.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.totalgeneral(),this.totalcaja(),this.pagosval(this.empleado2),this.checkgasto="CAJA",this.$q.loading.hide();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagos=!1})))},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/empleadoSueldo").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},valplanilla(){},modificar(){this.$axios.put("https://bnaty.tuprogam.com/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.misempleados(),this.boolcrear=!0,this.empleado2=[],this.modempleado=!1,this.$q.notify({message:"Modificado correctamente",icon:"info",color:"positive"})}))},agregar(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/empleado",this.empleado).then((e=>{this.$q.loading.hide(),this.misempleados(),this.empleado={fechanac:"2000-01-01"},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})}))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},verplanilla(e){this.emp=e,this.planillas=this.emp.planillas,this.dialogver=!0},updateval(e){this.empleado2=e,this.modempleado=!0},pagosval(e){this.$q.loading.show(),this.empleado2=e,this.$axios.get("https://bnaty.tuprogam.com/api/empleado/"+e.id).then((e=>{console.log(e.data),this.empleadohistorial=e.data,this.$q.loading.hide(),this.pagos=!0}))}},computed:{totalmonto(){let e=0;return e=parseFloat(this.planilla.monto)-parseFloat(null==this.planilla.adelanto?0:this.planilla.adelanto)-parseFloat(null==this.planilla.descuento?0:this.planilla.descuento),e},totaldescuento(){let e=0;return this.empleadohistorial.forEach((a=>{P.ZP.formatDate(a.fecha,"YYYY-MM")==P.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e}}};var Q=o(24379),z=o(55242),G=o(34842),H=o(24554),J=o(83884),X=o(69721),K=o(2165),ee=o(5363),ae=o(46778),oe=o(10151),le=o(68689),te=o(63314),ie=o(25589),ne=o(99367),se=o(77991),de=o(60677),me=o(7518),re=o.n(me);B.render=N,B.__scopeId="data-v-2a907a7b";const ce=B;re()(B,"components",{QPage:Q.Z,QTable:z.Z,QInput:G.Z,QIcon:H.Z,QTd:J.Z,QBadge:X.Z,QBtn:K.Z,QTooltip:ee.Z,QDialog:ae.Z,QCard:oe.Z,QForm:le.Z,QSelect:te.Z,QCardSection:ie.Z,QCardActions:ne.Z,QRadio:se.Z}),re()(B,"directives",{ClosePopup:de.Z})}}]);
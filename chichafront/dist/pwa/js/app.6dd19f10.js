(()=>{var e={67999:(e,a,t)=>{"use strict";t(10071),t(67280),t(65363);var o=t(98880),l=t(99592),i=t(83673);function s(e,a,t,o,l,s){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}const n=(0,i.aZ)({name:"App"});n.render=s;const r=n;var d=t(60214),c=t(47083),m=t(79582);const u=(0,i.HX)("data-v-146e0b55");(0,i.dD)("data-v-146e0b55");const p={class:"row"},h=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1),g={class:"col-12 col-md-8"},f={class:"text-h6"},b=(0,i.Uk)(" Ingreso al sistemas "),v=(0,i.Wm)("div",{class:"text-subtitle2"},"ingresar nombre y contraseña",-1),w=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1);(0,i.Cn)();const W=u(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-icon"),r=(0,i.up)("q-card-section"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),W=(0,i.up)("q-separator"),y=(0,i.up)("q-card"),V=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-md"},{default:u((()=>[(0,i.Wm)("div",p,[h,(0,i.Wm)("div",g,[(0,i.Wm)(y,{class:""},{default:u((()=>[(0,i.Wm)(r,{class:"bg-secondary text-white"},{default:u((()=>[(0,i.Wm)("div",f,[(0,i.Wm)(n,{name:"login"}),b]),v])),_:1}),(0,i.Wm)(r,null,{default:u((()=>[(0,i.Wm)(m,{onSubmit:s.login,onReset:s.onReset,class:"q-gutter-md"},{default:u((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.email,"onUpdate:modelValue":a[1]||(a[1]=e=>l.email=e),label:"Ingresa tu email *",hint:"Email de ingreso","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{autocomplete:"on",type:"password",filled:"",modelValue:l.password,"onUpdate:modelValue":a[2]||(a[2]=e=>l.password=e),label:"Password *",hint:"Contraseña ","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Ingresar",type:"submit",icon:"login",color:"positive"}),(0,i.Wm)(c,{label:"Reset",type:"reset",icon:"restart_alt",color:"negative",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])),_:1}),(0,i.Wm)(W,{dark:""})])),_:1})]),w])])),_:1})})),y={data(){return{email:"",password:""}},methods:{login(){this.$q.loading.show(),this.$store.dispatch("login/login",{email:this.email,password:this.password}).then((()=>{this.$q.loading.hide(),this.$router.push("/")})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e,color:"red",icon:"error"})}))},onReset(){this.email="",this.password=""}}};var V=t(24379),x=t(10151),C=t(25589),_=t(24554),q=t(68689),E=t(34842),A=t(28886),k=t(2165),D=t(65869),M=t(99367),O=t(7518),T=t.n(O);y.render=W,y.__scopeId="data-v-146e0b55";const S=y;T()(y,"components",{QPage:V.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QSeparator:D.Z,QCardActions:M.Z});var R=t(62323);const U={class:"row"},$={class:"col-12"},N={class:"col-12"},Y={class:"q-pa-md"},I=(0,i.Wm)("div",{class:" responsive"},null,-1),P={class:"row"},L={class:"col-2 q-pa-xs"},j={class:"col-2 q-pa-xs "},F={class:"col-4 q-pa-xs"},z={class:"col-4 q-pa-xs text-right"},Z=(0,i.Uk)(" NO "),Q=(0,i.Uk)(" LOCAL "),B=(0,i.Uk)(" CLIENTE "),G={class:"text-h7"},H={key:0},J=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function K(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-td"),m=(0,i.up)("q-icon"),u=(0,i.up)("q-table"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-form"),g=(0,i.up)("q-card"),f=(0,i.up)("q-dialog"),b=(0,i.up)("q-avatar"),v=(0,i.up)("q-card-actions"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",U,[(0,i.Wm)("div",$,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS CLIENTES ",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",N,[(0,i.Wm)("div",Y,[I,(0,i.Wm)("div",P,[(0,i.Wm)("div",L,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.ini,"onUpdate:modelValue":a[1]||(a[1]=e=>l.ini=e),label:"Fecha Ini"},null,8,["modelValue"])]),(0,i.Wm)("div",j,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.fin,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fin=e),label:"Fecha fin"},null,8,["modelValue"])]),(0,i.Wm)("div",F,[(0,i.Wm)(d,{color:"green",label:"Generar ultmas ventas excel",onClick:s.generarExcel,"no-caps":"",icon:"shopping_cart"},null,8,["onClick"])]),(0,i.Wm)("div",z,[(0,i.Wm)(d,{color:"green",label:"Crear Cliente",onClick:s.clickCreateCliente,"no-caps":"",icon:"add_circle"},null,8,["onClick"])])]),(0,i.Wm)(u,{title:"CLIENTES",dense:"",flat:"",bordered:"",rows:l.rows,columns:l.columns,"row-key":"name",filter:l.filter,"rows-per-page-options":[20,50,100,0]},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(c,{key:"estado",props:e,onClick:a=>s.activar(e.row)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"red"},{default:(0,i.w5)((()=>[Z])),_:1}))])),_:2},1032,["props","onClick"])])),"body-cell-tipocliente":(0,i.w5)((e=>[(0,i.Wm)(c,{key:"tipocliente",props:e},{default:(0,i.w5)((()=>["1"==e.row.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Q])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"info"},{default:(0,i.w5)((()=>[B])),_:1}))])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(c,{key:"opcion",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a.row),icon:"edit"},null,8,["onClick"]),e.$store.state.login.editcliente?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a.row),icon:"delete"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[3]||(a[3]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(m,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(f,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",G,(0,R.zw)(l.dato.id?"Modificar":"Registrar")+" CLIENTE ",1)])),_:1}),(0,i.Wm)(p,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[4]||(a[4]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[5]||(a[5]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[6]||(a[6]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",H,[(0,i.Wm)(r,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(f,{modelValue:l.dialog_del,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{icon:"clear",color:"red","text-color":"white"}),J])),_:1}),(0,i.Wm)(v,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}t(19544);var X=t(21082),ee=t(47345),ae=t.n(ee),te=t(77774),oe=t.n(te);const le={data(){return{ini:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fin:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),tab:"cliente",days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"direccion",label:"DIRECCIÓN",field:"direccion"},{name:"observacion",label:"OBSERVACIÓN",field:"observacion"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){this.listado(2),console.log(this.days)},methods:{clickCreateCliente(){this.dialog_mod=!0,this.dato={fechanac:""}},generarExcel(){this.$axios.post("https://bnaty.tuprogam.com/api/repClienteVenta2",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data);let a=[{sheet:"Cliente Total Venta",columns:[{label:"titular",value:"titular"},{label:"total",value:"total"},{label:"cantidad",value:"cantidad"}],content:e.data}],t={fileName:"VentaCliente",extraLength:7,writeOptions:{}};oe()(a,t)}))},listado(e){this.$q.loading.show(),this.rows=[],this.days=[],this.$axios.get("https://bnaty.tuprogam.com/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=X.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push(X.ZP.formatDate(Date.now(),"YYYY")+"/"+X.ZP.formatDate(e,"MM")+"/"+X.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$axios.get("https://bnaty.tuprogam.com/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=X.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push(X.ZP.formatDate(Date.now(),"YYYY")+"/"+X.ZP.formatDate(e,"MM")+"/"+X.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$q.loading.hide()}))}))},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("https://bnaty.tuprogam.com/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.tuprogam.com/api/activar",this.dato).then((e=>{this.listado(2)}))},editRow(e){this.dato=e,this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){console.log(this.dato.id),void 0!==this.dato.id?(this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1}))):(this.$q.loading.show(),this.dato.tipocliente=2,this.$axios.post("https://bnaty.tuprogam.com/api/cliente",this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1})))},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al eliminar"})})).finally((()=>{this.dialog_del=!1})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var ie=t(69721),se=t(30481),ne=t(5363),re=t(55242),de=t(18186),ce=t(83884),me=t(46778),ue=t(75096),pe=t(60677);le.render=K;const he=le;T()(le,"components",{QBadge:ie.Z,QCard:x.Z,QForm:q.Z,QInput:E.Z,QBtn:k.Z,QMarkupTable:se.Z,QTooltip:ne.Z,QTable:re.Z,QTr:de.Z,QTd:ce.Z,QIcon:_.Z,QDialog:me.Z,QCardSection:C.Z,QAvatar:ue.Z,QCardActions:M.Z}),T()(le,"directives",{ClosePopup:pe.Z});const ge={class:"row"},fe={class:"col-12"},be={class:"col-12"},ve={class:"q-pa-md"},we=(0,i.Wm)("div",{class:" responsive"},null,-1),We={class:"row"},ye={class:"col-2 q-pa-xs"},Ve={class:"col-2 q-pa-xs "},xe={class:"col-4 q-pa-xs"},Ce={class:"col-4 q-pa-xs text-right"},_e=(0,i.Uk)(" NO "),qe=(0,i.Uk)(" LOCAL "),Ee=(0,i.Uk)(" CLIENTE "),Ae={class:"text-h7"},ke={key:0},De=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),Me={class:"col-12"};function Oe(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-td"),m=(0,i.up)("q-tr"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-table"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-form"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-avatar"),W=(0,i.up)("q-card-actions"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",ge,[(0,i.Wm)("div",fe,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS LOCALES ",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",be,[(0,i.Wm)("div",ve,[we,(0,i.Wm)("div",We,[(0,i.Wm)("div",ye,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.ini,"onUpdate:modelValue":a[1]||(a[1]=e=>l.ini=e),label:"Fecha Ini"},null,8,["modelValue"])]),(0,i.Wm)("div",Ve,[(0,i.Wm)(r,{type:"date",outlined:"",dense:"",modelValue:l.fin,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fin=e),label:"Fecha fin"},null,8,["modelValue"])]),(0,i.Wm)("div",xe,[(0,i.Wm)(d,{color:"green",label:"Generar ultmas ventas excel",onClick:s.generarExcel,"no-caps":"",icon:"shopping_cart"},null,8,["onClick"])]),(0,i.Wm)("div",Ce,[(0,i.Wm)(d,{color:"green",label:"Crear Cliente",onClick:s.clickCreateCliente,"no-caps":"",icon:"add_circle"},null,8,["onClick"])])]),(0,i.Wm)(p,{title:"CLIENTES",rows:l.rows,columns:l.columns,"row-key":"name",filter:l.filter,"rows-per-page-options":[20,50,100,0]},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(m,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{key:"estado",props:e,onClick:a=>s.activar(e.row)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"red"},{default:(0,i.w5)((()=>[_e])),_:1}))])),_:2},1032,["props","onClick"])])),_:2},1032,["props"])])),"body-cell-datos":(0,i.w5)((e=>[(0,i.Wm)(m,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{key:"datos",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{icon:"description",dense:"",color:"amber",onClick:a=>s.verDatos(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),"body-cell-tipocliente":(0,i.w5)((e=>[(0,i.Wm)(c,{key:"tipocliente",props:e},{default:(0,i.w5)((()=>["1"==e.row.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[qe])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"info"},{default:(0,i.w5)((()=>[Ee])),_:1}))])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(c,{key:"opcion",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a.row),icon:"edit"},null,8,["onClick"]),e.$store.state.login.editcliente?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a.row),icon:"delete"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[3]||(a[3]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(v,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ae,(0,R.zw)(l.dato.id?"Modificar":"Registrar")+" CLIENTE ",1)])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.local,"onUpdate:modelValue":a[4]||(a[4]=e=>l.dato.local=e),label:"Local",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[5]||(a[5]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[6]||(a[6]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"date",outlined:"",modelValue:l.dato.fechanac,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.fechanac=e),label:"Fecha Nac"},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",ke,[(0,i.Wm)(g,{modelValue:l.dato.tipo,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",modelValue:l.dato.legalidad,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad Tributaria"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",modelValue:l.dato.categoria,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.dato.razon,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.razon=e),label:"Razon Social",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:l.dialog_del,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{icon:"clear",color:"red","text-color":"white"}),De])),_:1}),(0,i.Wm)(W,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",Me,[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.days,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.cumple)+" "+(0,R.zw)(e.local)+" "+(0,R.zw)(e.titular),1)))),128))])])])}var Te=t(11488),Se=t.n(Te);const Re={data(){return{tab:"local",ini:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fin:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"local",align:"center",label:"LOCAL",field:"local",sortable:!0},{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"fecha nac",label:"FECHA NAC",field:"fechanac"},{name:"razon",label:"RAZON SOCIAL",field:"razon"},{name:"nit",label:"NÚMERO NIT",field:"nit"},{name:"datos",label:"Datos",field:"datos"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){this.filtrarlista(),console.log(this.days)},methods:{verDatos(e){this.$q.dialog({title:"DATOS CLIENTE",message:"<b>Direcion:</b>"+e.direccion+"<br><b>Legalidad: </b>"+e.legalidad+"<br><b>Cateogoria: </b>"+e.categoria+"<br><b>Observacion:</b>"+e.observacion,html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},clickCreateCliente(){this.dialog_mod=!0,this.dato={}},generarExcel(){this.$axios.post("https://bnaty.tuprogam.com/api/repClienteVenta",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data);let a=[{sheet:"Cliente Total Venta",columns:[{label:"local",value:"local"},{label:"titular",value:"titular"},{label:"total",value:"total"},{label:"cantidad",value:"cantidad"}],content:e.data}],t={fileName:"VentaCliente",extraLength:7,writeOptions:{}};oe()(a,t)}))},listado(e){this.$q.loading.show(),this.rows=[],this.days=[],this.$axios.get("https://bnaty.tuprogam.com/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=X.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push({cumple:X.ZP.formatDate(Date.now(),"YYYY")+"/"+X.ZP.formatDate(e,"MM")+"/"+X.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$axios.get("https://bnaty.tuprogam.com/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=X.ZP.extractDate(a.fechanac,"YYYY-MM-DD");"ACTIVO"==a.estado&&this.days.push({cumple:X.ZP.formatDate(Date.now(),"YYYY")+"/"+X.ZP.formatDate(e,"MM")+"/"+X.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,"ACTIVO"!=a.estado&&(this.clientes.estado="NO"),this.rows.push(this.clientes)}})),this.$q.loading.hide()}))}))},filtrarlista(){"local"==this.tab?this.listado(1):this.listado(2)},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("https://bnaty.tuprogam.com/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.tuprogam.com/api/activar",this.dato).then((e=>{this.filtrarlista()}))},editRow(e){this.dato=e,console.log(this.dato),this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){void 0==this.dato.id?(this.$q.loading.show(),this.dato.tipocliente=1,this.$axios.post("https://bnaty.tuprogam.com/api/cliente",this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dialog_mod=!1,this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1}))):(this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1})))},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})})).finally((()=>{this.dialog_del=!1})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var Ue=t(63314);Re.render=Oe;const $e=Re;T()(Re,"components",{QBadge:ie.Z,QCard:x.Z,QSeparator:D.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QMarkupTable:se.Z,QTooltip:ne.Z,QTable:re.Z,QTr:de.Z,QTd:ce.Z,QIcon:_.Z,QDialog:me.Z,QCardSection:C.Z,QAvatar:ue.Z,QCardActions:M.Z}),T()(Re,"directives",{ClosePopup:pe.Z});const Ne={class:"row"},Ye={class:"col-12"},Ie={class:"q-pa-xs"},Pe=(0,i.Uk)(" Editar "),Le=(0,i.Uk)(" Eliminar "),je={class:"text-h7"},Fe=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),ze=(0,i.Wm)("div",{class:"text-h6"},"Agregar Cantidad Producto",-1),Ze=(0,i.Wm)("div",{class:"text-h6"},"Retirar cantidad Producto",-1),Qe=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function Be(e,a,t,o,l,s){const n=(0,i.up)("q-btn"),r=(0,i.up)("q-icon"),d=(0,i.up)("q-input"),c=(0,i.up)("q-badge"),m=(0,i.up)("q-td"),u=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),h=(0,i.up)("q-separator"),g=(0,i.up)("q-list"),f=(0,i.up)("q-btn-dropdown"),b=(0,i.up)("q-table"),v=(0,i.up)("q-card-section"),w=(0,i.up)("q-select"),W=(0,i.up)("q-color"),y=(0,i.up)("q-popup-proxy"),V=(0,i.up)("q-form"),x=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),_=(0,i.up)("q-avatar"),q=(0,i.up)("q-card-actions"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Ne,[(0,i.Wm)("div",Ye,[(0,i.Wm)("div",Ie,[(0,i.Wm)(b,{dense:"",flat:"",bordered:"",title:"LISTA DE PRODUCTOS REGISTRADOS",rows:l.rows,columns:l.columns,filter:l.filter,"rows-per-page-options":[0],"row-key":"name"},{"top-right":(0,i.w5)((()=>[e.$store.state.login.registroProducto?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"green",label:"Agregar Producto",icon:"add_circle",size:"10px","no-caps":"",onClick:s.crearProducto},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(d,{outlined:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(m,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(c,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024))])),_:2},1032,["props","onClick"])])),"body-cell-tipo":(0,i.w5)((e=>[(0,i.Wm)(m,{key:"estado",props:e},{default:(0,i.w5)((()=>["LOCAL"==e.row.tipo?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(c,{key:1,color:"secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024))])),_:2},1032,["props"])])),"body-cell-color":(0,i.w5)((e=>[(0,i.Wm)(m,{key:"color",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)("div",{style:"width: 20px;height:20px; background-color: "+e.row.color},null,4)])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,{label:"Opciones",color:"grey-3","text-color":"black","no-caps":"",size:"10px",dense:""},{default:(0,i.w5)((()=>[(0,i.Wm)(g,null,{default:(0,i.w5)((()=>[e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(p,{key:0,clickable:"",onClick:e=>s.editRow(a)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"edit"})])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[Pe])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(h),e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(p,{key:1,clickable:"",onClick:e=>s.delRow(a)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{avatar:""},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"delete"})])),_:1}),(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[Le])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(C,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",je,(0,R.zw)(l.dato.id?"Modificar Registro Producto":"Nuevo Registro Producto"),1)])),_:1}),(0,i.Wm)(v,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{outlined:"",dense:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>l.dato.nombre=e),label:"Nombre"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",dense:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[3]||(a[3]=e=>l.dato.precio=e),label:"Precio"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",dense:"",type:"text",modelValue:l.dato.observacion,"onUpdate:modelValue":a[4]||(a[4]=e=>l.dato.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)(w,{outlined:"",dense:"",modelValue:l.dato.grupo,"onUpdate:modelValue":a[5]||(a[5]=e=>l.dato.grupo=e),options:e.$gruposProductos,label:"Grupo"},null,8,["modelValue","options"]),(0,i.Wm)(w,{outlined:"",dense:"",modelValue:l.dato.tipo,"onUpdate:modelValue":a[6]||(a[6]=e=>l.dato.tipo=e),options:["LOCAL","DETALLE"],label:"TIPO"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",dense:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.orden=e),label:"N° Orden"},null,8,["modelValue"]),(0,i.Wm)(d,{style:"background-color: "+l.dato.color,label:"color",outlined:"",dense:"",modelValue:l.dato.color,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.color=e),class:"my-input",readonly:""},{append:(0,i.w5)((()=>[(0,i.Wm)(r,{name:"colorize",class:"cursor-pointer"},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{modelValue:l.dato.color,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.color=e)},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["style","modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_del,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"clear",color:"red","text-color":"white"}),Fe])),_:1}),(0,i.Wm)(q,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_add,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[ze])),_:1}),(0,i.Wm)(v,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(d,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[14]||(a[14]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[19]||(a[19]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Ze])),_:1}),(0,i.Wm)(v,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(V,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(d,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[18]||(a[18]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:l.dialog_del,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(x,null,{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"clear",color:"red","text-color":"white"}),Qe])),_:1}),(0,i.Wm)(q,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const Ge={data(){return{crear:!1,filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:0,disminuir:0,producto:{},color:"",dato:{},columns:[{name:"nombre",label:"NOMBRE",align:"center",field:"nombre",sortable:!0},{name:"precio",align:"center",label:"PRECIO",field:"precio",sortable:!0},{name:"grupo",align:"center",label:"GRUPO",field:"grupo",sortable:!0},{name:"tipo",align:"center",label:"TIPO",field:"tipo",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"orden",align:"center",label:"ORDEN",field:"orden"},{name:"color",align:"center",label:"COLOR",field:"color"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){this.listado()},methods:{crearProducto(){this.dialog_mod=!0,this.dato={}},listado(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/producto").then((e=>{console.log(e.data),this.rows=e.data,this.$q.loading.hide()}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("https://bnaty.tuprogam.com/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("https://bnaty.tuprogam.com/api/activarprod",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e.row,this.dialog_mod=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.dato=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onMod(){void 0==this.dato.id?(this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/producto",this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1}))):(this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/producto/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})).finally((()=>{this.$q.loading.hide(),this.dialog_mod=!1})))},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/producto/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",icon:"info",message:e})})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("https://bnaty.tuprogam.com/api/inventarioadd",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar=0,this.listado()}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("https://bnaty.tuprogam.com/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir=0,this.listado()}))},onReset(){this.producto={}}}};var He=t(83944),Je=t(50555),Ke=t(82226),Xe=t(27011),ea=t(83414),aa=t(52035);Ge.render=Be;const ta=Ge;T()(Ge,"components",{QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QIcon:_.Z,QPopupProxy:He.Z,QColor:Je.Z,QBtn:k.Z,QTable:re.Z,QTr:de.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z,QSeparator:D.Z,QDialog:me.Z,QAvatar:ue.Z,QCardActions:M.Z}),T()(Ge,"directives",{ClosePopup:pe.Z});const oa=(0,i.HX)("data-v-57bd675b");(0,i.dD)("data-v-57bd675b");const la={class:"row"},ia=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),sa={class:"col-12"},na={class:"row"},ra={class:"col-6 col-sm-6 q-pa-xs"},da={class:"col-6 col-sm-6 q-pa-xs"},ca={class:"row"},ma={class:"col-6 col-sm-2 q-pa-xs"},ua={class:"col-6 col-sm-2 q-pa-xs"},pa={class:"col-6 col-sm-2 q-pa-xs"},ha={class:"col-6 col-sm-2 q-pa-xs"},ga={class:"col-6 col-sm-2 q-pa-xs"},fa={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},ba={class:"col-12"},va={class:"col-12"},wa={class:"row"},Wa={class:"col-6 col-sm-2 q-pa-xs"},ya={class:"col-6 col-sm-2 q-pa-xs"},Va={class:"col-6 col-sm-2 q-pa-xs"},xa={class:"col-6 col-sm-2 q-pa-xs"},Ca={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},_a=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),qa={class:"col-6 col-sm-4 q-pa-xs"},Ea={class:"col-6 col-sm-4 q-pa-xs"},Aa={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},ka={class:"col-12"};(0,i.Cn)();const Da=oa(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:oa((()=>[(0,i.Wm)("div",la,[ia,(0,i.Wm)("div",sa,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:oa((()=>[(0,i.Wm)("div",na,[(0,i.Wm)("div",ra,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",da,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",ca,[(0,i.Wm)("div",ma,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",ua,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",pa,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ha,[(0,i.Wm)(r,{type:"number",label:"Cantidad",step:"0.1",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",ga,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",fa,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",ba,[(0,i.Wm)(p,{dense:"",columns:s.columns,rows:s.detalles},{"body-cell-action":oa((e=>[(0,i.Wm)(u,{props:e},{default:oa((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",va,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:oa((()=>[(0,i.Wm)("div",wa,[(0,i.Wm)("div",Wa,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",ya,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Va,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",xa,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ca,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),_a,(0,i.Wm)("div",qa,[(0,i.Wm)(r,{type:"date",label:"fecha inicio",modelValue:s.fecha2,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ea,[(0,i.Wm)(r,{type:"date",label:"fecha fin",modelValue:s.fecha3,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Aa,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",ka,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{"top-right":oa((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>s.filter=e),placeholder:"Search"},{append:oa((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),Ma={name:"Venta",data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("https://bnaty.tuprogam.com/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.tuprogam.com/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},agregar(){this.detalles.push({nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};Ma.render=Da,Ma.__scopeId="data-v-57bd675b";T()(Ma,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QTd:ce.Z,QIcon:_.Z});const Oa={class:"row"},Ta=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Registro de Garantias de Prestamo")],-1),Sa={class:"col-12"},Ra={class:"row"},Ua={class:"col-6 col-sm-6 q-pa-xs"},$a={class:"col-6 col-sm-6 q-pa-xs"},Na={class:"row"},Ya={class:"col-6 col-sm-3 q-pa-xs"},Ia={class:"col-6 col-sm-3 q-pa-xs"},Pa={class:"col-6 col-sm-3 q-pa-xs"},La={class:"col-6 col-sm-3 q-pa-xs"},ja={class:"row"},Fa={class:"col-6 col-sm-2 q-pa-xs"},za={class:"col-6 col-sm-2 q-pa-xs"},Za={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Qa={class:"col-12"},Ba={class:"col-12"},Ga={class:"row"},Ha={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Ja=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de Garantia")],-1),Ka={class:"col-6 col-sm-6 q-pa-xs"},Xa={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},et={class:"col-12"};function at(e,a,t,l,s,n){const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Oa,[Ta,(0,i.Wm)("div",Sa,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ra,[(0,i.Wm)("div",Ua,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$a,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:"",readonly:""},null,8,["modelValue"])])]),(0,i.Wm)("div",Na,[(0,i.Wm)("div",Ya,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ia,[(0,i.Wm)(r,{type:"number",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[4]||(a[4]=e=>s.efectivo=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pa,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",La,[(0,i.Wm)(r,{type:"text",label:"Detalle",modelValue:s.detalle,"onUpdate:modelValue":a[6]||(a[6]=e=>s.detalle=e),outlined:""},null,8,["modelValue"])])]),(0,i.Wm)("div",ja,[(0,i.Wm)("div",Fa,[(0,i.Wm)(d,{modelValue:s.inventario,"onUpdate:modelValue":a[7]||(a[7]=e=>s.inventario=e),outlined:"",options:s.inventarios,"option-label":"nombre","option-value":"id",label:"Material",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",za,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Za,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Qa,[(0,i.Wm)(p,{columns:s.columns,rows:s.detalles,"rows-per-page-options":[0,50,100]},{"body-cell-action":(0,i.w5)((e=>[(0,i.Wm)(u,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",Ba,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ga,[(0,i.Wm)("div",Ha,[(0,i.Wm)(c,{color:"positive",label:"Registrar Garantia",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),Ja,(0,i.Wm)("div",Ka,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Xa,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.listado},null,8,["onClick"])]),(0,i.Wm)("div",et,[(0,i.Wm)(p,{columns:s.columns2,rows:s.garantias,title:"Historial de Garantia",filter:s.filter,"rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[10]||(a[10]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})}const tt={name:"Garantias",data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",fisico:"",detalle:"",clientes:[],cliente:"",inventarios:[],inventario:"",efectivo:0,cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreinv",label:"Nombre material",field:"nombreinv"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],garantias:[],filter:""}},mounted(){this.listado(),this.$axios.get("https://bnaty.tuprogam.com/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.tuprogam.com/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.tuprogam.com/api/listado",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{listado(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/listado",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.garantias=[],console.log(e.data),e.data.forEach((e=>{this.garantias.push({efectivo:e.efectivo,fisico:e.fisico,estado:e.estado,cliente:e.cliente["local"],user:e.user["name"]})}))}))},agregar(){this.detalles.push({nombreinv:this.inventario.nombre,inventario_id:this.inventario.id,cantidad:this.cantidad})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/garantia",{fecha:this.fecha,efectivo:this.efectivo,fisico:this.fisico,detalle:this.detalle,estado:"PRESTAMO",cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"registro exitosa",color:"green",icon:"info"}),this.listado()}))},deleteval(e){this.detalles.splice(e,1)}}};tt.render=at;const ot=tt;T()(tt,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QTd:ce.Z,QIcon:_.Z});const lt={class:"row"},it={class:"col-12"},st={class:"text-h6"},nt=(0,i.Wm)("div",{style:{"text-align":"center"}},"REGISTRO DE INVENTARIO DE MATERIALES",-1),rt=(0,i.Wm)("div",{class:"text-h6"},"Registro nuevo Material",-1),dt={class:"row"},ct={class:"col-12 col-sm-6 q-pa-xs"},mt={class:"col-12 col-sm-6 q-pa-xs"},ut={class:"col-12 col-sm-6 q-pa-xs"},pt={class:"col-12 col-sm-6 q-pa-xs"},ht={class:"col-12 col-sm-6 q-pa-xs"},gt={class:"col-12 col-sm-6 q-pa-xs"},ft={class:"col-12 col-sm-6 q-pa-xs "},bt={class:"col-12"},vt={class:"q-pa-md"},wt={class:" responsive"},Wt={id:"example",class:"display",style:{width:"100%"}},yt=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"CODIGO"),(0,i.Wm)("th",null,"ITEM"),(0,i.Wm)("th",null,"CANTIDAD GLOBAL"),(0,i.Wm)("th",null,"PRESTAMO"),(0,i.Wm)("th",null,"VENTAS"),(0,i.Wm)("th",null,"SALDO"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"OBSERVACIONES"),(0,i.Wm)("th",null,"ORDEN"),(0,i.Wm)("th",null,"ESTADO"),(0,i.Wm)("th",null,"OPCIONES")])],-1),Vt={style:{"font-size":"16px","font-weight":"bold"}},xt=(0,i.Uk)("Agregar Prod"),Ct=(0,i.Uk)("Retirar Prod"),_t=(0,i.Uk)("Listado"),qt=(0,i.Uk)("Editar"),Et=(0,i.Uk)("Eliminar"),At=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR INVENTARIO",-1),kt={class:"col-12 col-sm-2 q-pa-xs"},Dt=(0,i.Wm)("div",{class:"text-h7"},"AGREGAR CANTIDAD DE MATERIAL",-1),Mt=(0,i.Wm)("div",{class:"text-h7"},"DAR DE BAJA - MATERIALES",-1),Ot=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),Tt=(0,i.Wm)("div",{class:"text-h7"},"DETALLE DE REGISTRO DE MATERIALES",-1),St=(0,i.Uk)(" Agregar "),Rt=(0,i.Uk)(" Disminuir ");function Ut(e,a,t,o,l,s){const n=(0,i.up)("q-btn"),r=(0,i.up)("q-card-section"),d=(0,i.up)("q-input"),c=(0,i.up)("q-form"),m=(0,i.up)("q-card"),u=(0,i.up)("q-dialog"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-avatar"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-table"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",lt,[(0,i.Wm)("div",it,[(0,i.Wm)("div",st,[nt,(0,i.Wm)(n,{label:"Registrar",icon:"add",color:"positive",onClick:a[1]||(a[1]=e=>l.crear=!0)})]),(0,i.Wm)(u,{modelValue:l.crear,"onUpdate:modelValue":a[8]||(a[8]=e=>l.crear=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[rt])),_:1}),(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.registrar,onReset:s.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",dt,[(0,i.Wm)("div",ct,[(0,i.Wm)(d,{outlined:"",dense:"",type:"text",modelValue:l.inventario.codigo,"onUpdate:modelValue":a[2]||(a[2]=e=>l.inventario.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",mt,[(0,i.Wm)(d,{outlined:"",dense:"",type:"text",modelValue:l.inventario.nombre,"onUpdate:modelValue":a[3]||(a[3]=e=>l.inventario.nombre=e),style:{"text-transform":"uppercase"},label:"Nombre","lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ut,[(0,i.Wm)(d,{outlined:"",dense:"",type:"number",modelValue:l.inventario.cantidad,"onUpdate:modelValue":a[4]||(a[4]=e=>l.inventario.cantidad=e),label:"CANTIDAD",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",pt,[(0,i.Wm)(d,{outlined:"",dense:"",type:"number",step:"0.1",modelValue:l.inventario.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>l.inventario.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ht,[(0,i.Wm)(d,{outlined:"",dense:"",type:"number",modelValue:l.inventario.orden,"onUpdate:modelValue":a[6]||(a[6]=e=>l.inventario.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",gt,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.inventario.detalle,"onUpdate:modelValue":a[7]||(a[7]=e=>l.inventario.detalle=e),type:"text",label:"OBSERVACIONES",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",ft,[(0,i.Wm)(n,{label:"Registrar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("div",bt,[(0,i.Wm)("div",vt,[(0,i.Wm)("div",wt,[(0,i.Wm)("table",Wt,[yt,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.rows,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.codigo),1),(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.global),1),(0,i.Wm)("td",null,(0,R.zw)(a.prestamo),1),(0,i.Wm)("td",null,(0,R.zw)(a.ventas),1),(0,i.Wm)("td",Vt,(0,R.zw)(a.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(a.orden),1),(0,i.Wm)("td",null,[(0,i.Wm)(n,{onClick:e=>s.activar(a),dense:"",color:"ACTIVO"==a.estado?"green":"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["onClick","color"])]),(0,i.Wm)("td",null,[e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"green",onClick:e=>s.addRow(a),icon:"add"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[xt])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(n,{key:1,dense:"",round:"",flat:"",color:"red",onClick:e=>s.substractRow(a),icon:"remove"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[Ct])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.logRow(a),icon:"list"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[_t])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(n,{key:2,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[qt])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(n,{key:3,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[Et])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])])]),(0,i.Wm)(u,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[At])),_:1}),(0,i.Wm)(r,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",type:"text",modelValue:l.dato.codigo,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.nombre=e),label:"Item",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",kt,[(0,i.Wm)(d,{filled:"",dense:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",dense:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)(d,{filled:"",type:"text",modelValue:l.dato.detalle,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.detalle=e),style:{"text-transform":"uppercase"},label:"Observaciones"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_add,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Dt])),_:1}),(0,i.Wm)(r,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(d,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dato.motivo=e),type:"text",label:"Motivo Descripción",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[17]||(a[17]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Mt])),_:1}),(0,i.Wm)(r,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[19]||(a[19]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(d,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[21]||(a[21]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"}),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_del,"onUpdate:modelValue":a[23]||(a[23]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{icon:"clear",color:"red","text-color":"white"}),Ot])),_:1}),(0,i.Wm)(g,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_log,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dialog_log=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{"min-width":"650px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[Tt])),_:1}),(0,i.Wm)(r,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{dense:"",flat:"",bordered:"",columns:l.logcol,rows:l.logdata,"row-key":"name","rows-per-page-options":[0]},{"body-cell-agregar":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>[1==e.row.agregar?((0,i.wg)(),(0,i.j4)(f,{key:0,color:"green"},{default:(0,i.w5)((()=>[St])),_:1})):((0,i.wg)(),(0,i.j4)(f,{key:1,color:"red"},{default:(0,i.w5)((()=>[Rt])),_:1}))])),_:2},1032,["props","onClick"])])),_:1},8,["columns","rows"])])),_:1}),(0,i.Wm)(g,{align:"right",class:"text-primary"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancel"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const $t={data(){return{filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:"",disminuir:"",inventario:{orden:0},productos:[],color:"",dato:{},columns:[{name:"codigo",label:"Codigo",align:"center",field:"codigo",sortable:!0},{name:"nombre",label:"ITEM",align:"center",field:"nombre",sortable:!0},{name:"global",align:"center",label:"CANTIDAD GLOBAL",field:"global",sortable:!0},{name:"prestamo",align:"center",label:"PRESTAMO",field:"prestamo",sortable:!0},{name:"ventas",align:"center",label:"VENTAS",field:"ventas",sortable:!0},{name:"cantidad",align:"center",label:"SALDO",field:"cantidad",sortable:!0},{name:"detalle",align:"center",label:"OBSERVACIONES",field:"detalle",sortable:!0},{name:"orden",align:"center",label:"ORDEN",field:"orden",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[],logdata:[],logcol:[{name:"fecha",label:"FECHA",align:"left",field:"fecha",sortable:!0},{name:"cantidad",align:"right",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"agregar",align:"left",label:"AGREGAR",field:"agregar",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0}]}},created(){ae()("#example").DataTable(),this.listado(),this.cargar()},methods:{listado(){this.$q.loading.show(),ae()("#example").DataTable().destroy(),this.$axios.get("https://bnaty.tuprogam.com/api/inventario").then((e=>{this.rows=[],e.data.forEach((e=>{let a=e,t=0,o=0;0!=e.prestamos.length&&e.prestamos.forEach((e=>{"EN PRESTAMO"==e.estado&&(t+=e.prestado),"VENTA"==e.estado&&(console.log(e),o+=e.cantidad)})),a.global=a.cantidad+t,a.prestamo=t,a.ventas=o,this.rows.push(a)})),this.$q.loading.hide(),ae()("#example").DataTable().destroy(),this.$nextTick((()=>{ae()("#example").DataTable({dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},cargar(){this.productos=[],this.$axios.get("https://bnaty.tuprogam.com/api/listaproducto").then((e=>{e.data.forEach((e=>{this.productos.push({label:e.nombre,value:e.id})}))}))},registrar(){this.inventario.orden=void 0==this.inventario.orden?0:this.inventario.orden,this.$axios.post("https://bnaty.tuprogam.com/api/inventario",this.inventario).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar "})}))},activar(e){this.dato=e,this.$axios.post("https://bnaty.tuprogam.com/api/activarinv",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e,this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},addRow(e){this.dato=e,this.dialog_add=!0},substractRow(e){this.dato=e,this.dialog_sub=!0},logRow(e){this.dato=e,this.$axios.post("https://bnaty.tuprogam.com/api/listlog/",this.dato).then((e=>{console.log(e.data),this.logdata=e.data})),this.dialog_log=!0},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/inventario/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/inventario/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("https://bnaty.tuprogam.com/api/inventarioadd",this.modprod).then((e=>{console.log(e.data),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar="",this.dato.motivo="",this.listado()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",textColor:"white",icon:"error",message:e.response.data.message})}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("https://bnaty.tuprogam.com/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir="",this.dato.motivo="",this.listado()}))},onReset(){this.inventario={orden:0}}}};$t.render=Ut;const Nt=$t;T()($t,"components",{QBtn:k.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QTable:re.Z,QIcon:_.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QAvatar:ue.Z,QCardActions:M.Z}),T()($t,"directives",{ClosePopup:pe.Z});const Yt=(0,i.HX)("data-v-06edcffe");(0,i.dD)("data-v-06edcffe");const It={class:"row"},Pt=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"CONTROL EMPLEADOS")],-1),Lt={class:"col-12"},jt={class:"row"},Ft={class:"col-12 q-pa-xs col-sm-2"},zt={class:"col-12 q-pa-xs col-sm-4"},Zt={class:"col-12 q-pa-xs col-sm-2"},Qt={class:"col-12 q-pa-xs col-sm-2"},Bt={class:"col-12 q-pa-xs col-sm-2"},Gt={class:"col-12 q-pa-xs col-sm-2"},Ht={class:"col-12 q-pa-xs col-sm-2"},Jt={class:"col-12 col-sm-12 flex flex-center"},Kt={class:"col-12"},Xt=(0,i.Uk)("Listado planilla"),eo=(0,i.Uk)("Modificar"),ao=(0,i.Uk)("Lista Adelantos"),to={class:"row"},oo=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-accent text-center text-white"},"HISTORIAL DE PAGOS")],-1),lo={class:"col-6 col-sm-4 q-pa-xs"},io={class:"col-6 col-sm-4 q-pa-xs"},so={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},no={class:"col-12"},ro={class:" responsive"},co={id:"example",style:{width:"100%"},class:"cell-border"},mo=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"EMPLEADO"),(0,i.Wm)("th",null,"ADELANTO"),(0,i.Wm)("th",null,"DESCUENTO"),(0,i.Wm)("th",null,"EXTRA"),(0,i.Wm)("th",null,"OPCION")])],-1),uo=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"Modificar empleados")],-1),po={class:"col-12"},ho={class:"col-12 q-pa-xs col-sm-2"},go={class:"col-12 q-pa-xs col-sm-3"},fo={class:"col-12 q-pa-xs col-sm-3"},bo={class:"col-12 q-pa-xs col-sm-2"},vo={class:"col-12 q-pa-xs col-sm-2"},wo={class:"col-12 q-pa-xs col-sm-2"},Wo={class:"col-12 q-pa-xs col-sm-2"},yo={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},Vo={class:"text-h6"},xo={class:"row"},Co={class:"col-2"},_o={class:"col-2"},qo={class:"col-2"},Eo={class:"col-4"},Ao={key:0,class:"col-3"},ko={class:"col-2 flex flex-center"},Do={class:"row"},Mo={class:"col-12"},Oo={class:"col-12"},To={class:"col-12"},So={class:"col-12"},Ro={class:"col-12"},Uo={class:"col-12"},$o={class:"col-12"},No={class:"col-12"},Yo={class:"col-12"},Io={class:"col-12"},Po={class:"row"};(0,i.Cn)();const Lo=Yt(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-badge"),h=(0,i.up)("q-td"),g=(0,i.up)("q-tooltip"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-card-section"),W=(0,i.up)("q-card-actions"),y=(0,i.up)("q-radio"),V=(0,i.up)("q-page"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-xs"},{default:Yt((()=>[(0,i.Wm)("div",It,[Pt,(0,i.Wm)("div",Lt,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Yt((()=>[(0,i.Wm)("div",jt,[(0,i.Wm)("div",Ft,[(0,i.Wm)(r,{outlined:"",dense:"",label:"CI",modelValue:s.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>s.empleado.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",zt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Nombre",modelValue:s.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>s.empleado.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Zt,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:s.empleado.tipo,"onUpdate:modelValue":a[3]||(a[3]=e=>s.empleado.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",Qt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado.fechanac,"onUpdate:modelValue":a[4]||(a[4]=e=>s.empleado.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Bt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha Ingreso",type:"date",modelValue:s.empleado.fechaingreso,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.fechaingreso=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Celular",modelValue:s.empleado.celular,"onUpdate:modelValue":a[6]||(a[6]=e=>s.empleado.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Ht,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Salario",modelValue:s.empleado.salario,"onUpdate:modelValue":a[7]||(a[7]=e=>s.empleado.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",Jt,[(0,i.Wm)(c,{class:"full-width",icon:"send",label:"CREAR",type:"submit",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Kt,[(0,i.Wm)(f,{columns:s.columns,rows:s.empleados,"rows-per-page-options":[0,50,100],filter:s.filter,"wrap-cells":""},{"top-right":Yt((()=>[(0,i.Wm)(r,{borderless:"",dense:"",outlined:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[8]||(a[8]=e=>s.filter=e),placeholder:"Search"},{append:Yt((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-tipo":Yt((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:Yt((()=>[(0,i.Wm)(p,{color:"FIJO"==e.row.tipo?"green":"teal"},{default:Yt((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-estado":Yt((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:Yt((()=>[(0,i.Wm)(p,{color:"ACTIVO"==e.row.estado?"green":"red",onClick:a=>n.cambioEstado(e.row)},{default:Yt((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color","onClick"])])),_:2},1032,["props"])])),"body-cell-action":Yt((e=>[(0,i.Wm)(h,{props:e},{default:Yt((()=>[(0,i.Wm)(c,{color:"accent","icon-right":"payment","no-caps":"",label:"Planilla",flat:"",dense:"",onClick:a=>n.verplanilla(e.row)},{default:Yt((()=>[(0,i.Wm)(g,null,{default:Yt((()=>[Xt])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{color:"warning","icon-right":"edit","no-caps":"",label:"Modificar",flat:"",dense:"",onClick:a=>n.updateval(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",label:"Eliminar",flat:"",dense:"",onClick:a=>n.deleteval(e.row)},{default:Yt((()=>[(0,i.Wm)(g,null,{default:Yt((()=>[eo])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{color:"info","icon-right":"list","no-caps":"",label:"Sueldos",flat:"",dense:"",onClick:a=>n.pagosval(e.row)},{default:Yt((()=>[(0,i.Wm)(g,null,{default:Yt((()=>[ao])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"]),(0,i.Wm)("div",to,[oo,(0,i.Wm)("div",lo,[(0,i.Wm)(r,{dense:"",type:"date",label:"Desde",modelValue:s.fecha1,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",io,[(0,i.Wm)(r,{dense:"",type:"date",label:"Hasta",modelValue:s.fecha2,"onUpdate:modelValue":a[10]||(a[10]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",so,[(0,i.Wm)(c,{color:"info",class:"full-width",label:"Consultar",icon:"search",type:"submit",onClick:n.missalarios},null,8,["onClick"])]),(0,i.Wm)("div",no,[(0,i.Wm)("div",ro,[(0,i.Wm)("table",co,[mo,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.salarios,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.adelanto),1),(0,i.Wm)("td",null,(0,R.zw)(a.descuento),1),(0,i.Wm)("td",null,(0,R.zw)(a.extra),1),(0,i.Wm)("td",null,[e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",dense:"",color:"accent",onClick:e=>n.genplanilla(a)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])])]),(0,i.Wm)(v,{modelValue:s.modempleado,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modempleado=e)},{default:Yt((()=>[(0,i.Wm)(b,{style:{"min-width":"350px"}},{default:Yt((()=>[uo,(0,i.Wm)("div",po,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.modificar,["prevent"])},{default:Yt((()=>[(0,i.Wm)("div",ho,[(0,i.Wm)(r,{outlined:"",label:"CI",modelValue:s.empleado2.ci,"onUpdate:modelValue":a[11]||(a[11]=e=>s.empleado2.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",go,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.empleado2.nombre,"onUpdate:modelValue":a[12]||(a[12]=e=>s.empleado2.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",fo,[(0,i.Wm)(d,{modelValue:s.empleado2.tipo,"onUpdate:modelValue":a[13]||(a[13]=e=>s.empleado2.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",bo,[(0,i.Wm)(r,{outlined:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado2.fechanac,"onUpdate:modelValue":a[14]||(a[14]=e=>s.empleado2.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",vo,[(0,i.Wm)(r,{outlined:"",label:"Fecha Ingreso",type:"date",modelValue:s.empleado2.fechaingreso,"onUpdate:modelValue":a[15]||(a[15]=e=>s.empleado2.fechaingreso=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wo,[(0,i.Wm)(r,{outlined:"",label:"Celular",modelValue:s.empleado2.celular,"onUpdate:modelValue":a[16]||(a[16]=e=>s.empleado2.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Wo,[(0,i.Wm)(r,{outlined:"",label:"Salario",modelValue:s.empleado2.salario,"onUpdate:modelValue":a[17]||(a[17]=e=>s.empleado2.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",yo,[(0,i.Wm)(c,{icon:"edit",label:"MODIFICAR",type:"submit",color:"warning"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.pagos,"onUpdate:modelValue":a[25]||(a[25]=e=>s.pagos=e),"full-width":""},{default:Yt((()=>[(0,i.Wm)(b,null,{default:Yt((()=>[(0,i.Wm)(w,null,{default:Yt((()=>[(0,i.Wm)("div",Vo,"Historial de "+(0,R.zw)(s.empleado2.nombre),1)])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:Yt((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK"},null,512),[[x]])])),_:1}),(0,i.Wm)(w,{class:"q-pt-none"},{default:Yt((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:Yt((()=>[(0,i.Wm)("div",xo,[(0,i.Wm)("div",Co,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[19]||(a[19]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",_o,[(0,i.Wm)(d,{outlined:"",dense:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[20]||(a[20]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",qo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha",modelValue:s.pago.fecha,"onUpdate:modelValue":a[21]||(a[21]=e=>s.pago.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Eo,[(0,i.Wm)(r,{outlined:"",dense:"",type:"text",label:"observacion",modelValue:s.pago.observacion,"onUpdate:modelValue":a[22]||(a[22]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Ao,[(0,i.Wm)(y,{modelValue:s.checkgasto,"onUpdate:modelValue":a[23]||(a[23]=e=>s.checkgasto=e),val:"CAJA GENERAL",label:"CAJA GENERAL"},null,8,["modelValue"]),(0,i.Wm)(y,{modelValue:s.checkgasto,"onUpdate:modelValue":a[24]||(a[24]=e=>s.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",ko,[(0,i.Wm)(c,{class:"full-with",label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),e.$store.state.login.reportepago?((0,i.wg)(),(0,i.j4)(f,{key:0,title:"Historial de pagos","rows-per-page-options":[0,50,100],columns:s.columns2,rows:s.empleadohistorial},{"body-cell-opcion":Yt((e=>[(0,i.Wm)(h,{props:e},{default:Yt((()=>["ANULADO"!=e.row.tipo?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delsueldo(e.row)},null,8,["onClick"])):(0,i.kq)("",!0),"ANULADO"!=e.row.tipo?((0,i.wg)(),(0,i.j4)(c,{key:1,dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-tipo":Yt((e=>[(0,i.Wm)(h,{props:e},{default:Yt((()=>[(0,i.Wm)(p,{color:"DESCUENTO"==e.row.tipo||"ANULADO"==e.row.tipo?"red":"green","text-color":"white"},{default:Yt((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-observacion":Yt((e=>[(0,i.Wm)(h,{props:e},{default:Yt((()=>[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:e.row.observacion,"onUpdate:modelValue":a=>e.row.observacion=a,type:"textarea"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,i.Wm)(v,{modelValue:s.dialoggenplanilla,"onUpdate:modelValue":a[35]||(a[35]=e=>s.dialoggenplanilla=e)},{default:Yt((()=>[(0,i.Wm)(b,null,{default:Yt((()=>[(0,i.Wm)(w,{class:"text-center text-bold q-pa-none q-ma-none"},{default:Yt((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(w,null,{default:Yt((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.creategenplanilla,["prevent"])},{default:Yt((()=>[(0,i.Wm)("div",Do,[(0,i.Wm)("div",Mo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechainicio",modelValue:s.planilla.fechainicio,"onUpdate:modelValue":a[26]||(a[26]=e=>s.planilla.fechainicio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Oo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechafin",modelValue:s.planilla.fechafin,"onUpdate:modelValue":a[27]||(a[27]=e=>s.planilla.fechafin=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",To,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechapago",modelValue:s.planilla.fechapago,"onUpdate:modelValue":a[28]||(a[28]=e=>s.planilla.fechapago=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",So,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Salario",modelValue:s.planilla.monto,"onUpdate:modelValue":[a[29]||(a[29]=e=>s.planilla.monto=e),n.actualizamonto]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",Ro,[(0,i.Wm)(r,{dense:"",outlined:"",label:"adelanto",modelValue:s.planilla.adelanto,"onUpdate:modelValue":a[30]||(a[30]=e=>s.planilla.adelanto=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Uo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"descuento",modelValue:s.planilla.descuento,"onUpdate:modelValue":a[31]||(a[31]=e=>s.planilla.descuento=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",$o,[(0,i.Wm)(r,{dense:"",outlined:"",label:"bono",modelValue:s.planilla.bono,"onUpdate:modelValue":a[32]||(a[32]=e=>s.planilla.bono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",No,[(0,i.Wm)(r,{dense:"",outlined:"",label:"total",modelValue:s.planilla.total,"onUpdate:modelValue":a[33]||(a[33]=e=>s.planilla.total=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"observacion",modelValue:s.planilla.observacion,"onUpdate:modelValue":a[34]||(a[34]=e=>s.planilla.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Io,[s.validarplan?((0,i.wg)(),(0,i.j4)(c,{key:0,class:"full-width\t",type:"submit",color:"primary",icon:"add_circle",label:"crear planilla"})):(0,i.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogver,"onUpdate:modelValue":a[36]||(a[36]=e=>s.dialogver=e)},{default:Yt((()=>[(0,i.Wm)(b,{style:{width:"800px","max-width":"80vw"}},{default:Yt((()=>[(0,i.Wm)(w,{class:"text-center text-bold q-pa-none q-ma-none"},{default:Yt((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(w,null,{default:Yt((()=>[(0,i.Wm)("div",Po,[(0,i.Wm)(f,{title:"PLANILLAS",rows:s.planillas,columns:s.colplan,"row-key":"name","rows-per-page-options":[0,50,100]},{"body-cell-opcion":Yt((e=>[(0,i.Wm)(h,{props:e},{default:Yt((()=>["ANULADO"!=e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>n.imprimirplanilla(e.row)},null,8,["onClick"])):(0,i.kq)("",!0),"ANULADO"!=e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:1,color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delplanilla(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var jo=t(47213),Fo=t(23377);t(69755);const zo=t(21694),Zo={name:"Venta",data(){return{dialoggenplanilla:!1,dialogver:!1,filter:"",pagos:!1,checkgasto:"GASTO",pago:{fecha:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],emp:{},empleados2:[],empleadohistorial:{},boolcrear:!0,salarios:[],planillas:[],planilla:{},validarplan:!0,modempleado:!1,empleado:{fechanac:"2000-01-01",fechaingreso:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleado2:{},dialog_plan:!1,fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocaja:0,montogeneral:0,columns:[{name:"ci",label:"CI",field:"ci"},{name:"nombre",label:"NOMBRE",field:"nombre",sortable:!0,align:"left"},{name:"fechaingreso",label:"FECHA INGRESO",field:"fechaingreso",sortable:!0,align:"left"},{name:"tipo",label:"TIPO",field:"tipo"},{name:"estado",label:"ESTADO",field:"estado"},{name:"action",label:"OPCION",field:"action"}],columns2:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"fecha",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"hora",label:"HORA",field:"hora"},{name:"tipo",label:"TIPO",field:"tipo",sortable:!0},{name:"monto",label:"MONTO",field:"monto",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name,sortable:!0},{name:"observacion",label:"observacion",field:"observacion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"extra"},{name:"pago",label:"Pago",field:"pago"},{name:"cancelar",label:"Cancelar",field:"cancelar"},{name:"opcion",label:"opcion",field:"opcion"}],colplan:[{name:"opcion",label:"opcion",field:"opcion"},{name:"Fecha",label:"Fecha In",field:e=>Se()(e.fechainicio).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha Fin",field:e=>Se()(e.fechafin).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha pago",field:e=>Se()(e.fechapago).format("DD/MM/YYYY")},{name:"salario",label:"Sueldo",field:"monto"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"bono"},{name:"pago",label:"Pago",field:"total"}]}},mounted(){ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,50,100],["All",50,100]]}),this.missalarios(),this.misempleados(),this.totalgeneral()},methods:{cambioEstado(e){this.$axios.post("https://bnaty.tuprogam.com/api/estadoEmpleado",e).then((e=>{this.missalarios(),this.misempleados()}))},printRow(e){this.$axios.get("https://bnaty.tuprogam.com/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delplanilla(e){console.log(e),this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/planilla/"+e.id).then((e=>{this.$q.notify({message:"Eliminado",icon:"info",color:"green"}),this.dialogver=!1,this.misempleados()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},delsueldo(e){this.$q.dialog({title:"Confirmar",message:"Ingrese el motivo por el cual esta eliminando?",prompt:{model:"",type:"text"},cancel:!0,persistent:!1}).onOk((a=>{this.$axios.delete("https://bnaty.tuprogam.com/api/sueldo/"+e.id,{params:{motivo:a}}).then((e=>{this.$q.notify({message:"Anulado",icon:"info",color:"green"}),this.pagos=!1,this.misempleados()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},genplanilla(e){this.dialoggenplanilla=!0,this.emp=e,this.planilla.fechainicio=this.fecha1,this.planilla.fechafin=this.fecha2,this.planilla.fechapago=X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.planilla.monto=null==e.salario?0:e.salario,this.planilla.adelanto=null==e.adelanto?0:e.adelanto,this.planilla.descuento=null==e.descuento?0:e.descuento,this.planilla.bono=null==e.extra?0:e.extra,this.planilla.total=this.totalmonto,this.planilla.empleado_id=e.id,this.planilla.restante=0,this.$axios.post("https://bnaty.tuprogam.com/api/valplanilla",this.planilla).then((e=>{e.data.length>0?this.validarplan=!1:this.validarplan=!0}))},actualizamonto(){this.planilla.total=this.totalmonto},creategenplanilla(){return this.checkgasto="GASTO","GASTO"==this.checkgasto&&this.planilla.total>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&this.planilla.total>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.planilla.tpago=this.checkgasto,void this.$axios.post("https://bnaty.tuprogam.com/api/planilla",this.planilla).then((e=>{this.$q.loading.hide(),this.$q.notify({message:"Planilla Creada",icon:"info",color:"green"}),this.imprimirplanilla(this.planilla),this.dialoggenplanilla=!1,this.planilla={},this.misempleados(),this.totalgeneral()})))},imprimirplanilla(e){function a(){var a=new Image;a.src="logo.png",t.addImage(a,"png",5,2,37,17),t.setFont(void 0,"bold"),t.setFontSize(8),t.text(170,5,"fecha de proceso: "+X.ZP.formatDate(Date.now(),"DD-MM-YYYY")),t.setFontSize(11),t.text("CHICHERIA DOÑA NATI",110,7,"center"),t.text("BOLETA DE PAGO",110,12,"center"),t.text("Correspondiente  "+Se()(e.fechainicio).format("DD/MM/YYYY")+" Al "+Se()(e.fechafin).format("DD/MM/YYYY"),100,17,"center"),t.text(" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":Se()(e.fechapago).format("DD/MM/YYYY")),170,17,"left"),t.line(5,20,210,20),t.setFont(void 0,"normal")}var t=new jo.kH("p",void 0,"letter");t.setFont("Times"),a(),t.setFontSize(10),t.setFont(void 0,"bold"),t.text(["CI:","Nombre:"],10,25),t.setFont(void 0,"normal"),t.text([this.emp.ci,this.emp.nombre],65,25,"center"),t.setFont(void 0,"bold"),t.text(["Tipo:"],130,25),t.setFont(void 0,"normal");var o=Se()(this.emp.fechanac),l=Se()();l.diff(o,"years");t.text([this.emp.tipo],170,25,"center"),t.line(5,35,210,35),t.setFont(void 0,"bold"),t.text("INGRESOS",45,39,"center"),t.text("DESCUENTOS",150,39,"center"),t.line(5,40,210,40),t.line(110,40,110,70),t.setFont(void 0,"bold"),t.text(["Salario:"],15,45),t.setFont(void 0,"normal"),t.text([e.monto+" Bs"],105,45,"right"),t.setFont(void 0,"bold"),t.text(["Adelanto:","Descuento:"],115,45),t.setFont(void 0,"normal"),t.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),t.line(5,65,210,65),t.setFont(void 0,"bold"),t.text("Total ganado:",35,69,"center"),t.text("Total descuento:",140,69,"center"),t.setFont(void 0,"normal"),t.text(parseInt(e.monto)+" Bs",105,69,"right"),t.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),t.line(5,70,210,70),t.setFont(void 0,"bold"),t.setFontSize(14),t.text("Liquido pagable: "+e.total+" Bs",110,75,"center"),t.setFontSize(9);let i=zo.conversorNumerosALetras,s=new i,n=s.convertToText(parseInt(e.total));t.setFont(void 0,"normal"),t.text("SON: "+n.toUpperCase()+" Bs",110,80,"center"),t.setFont(void 0,"bold"),""!=e.observacion&&null!=e.observacion&&(t.setFont(void 0,"bold"),t.text("Obs: ",2,85,"left"),t.setFont(void 0,"normal"),t.text(e.observacion.substring(0,95),10,85,"left"),t.text(e.observacion.substring(95,95),10,90,"left"),t.text(e.observacion.substring(190,95),10,90,"left"),t.setFont(void 0,"bold")),t.text(5,100,"____________________________                                                                   ______________________________"),t.text(10,105,"FIRMA EMPLEADO"),t.text(150,105,"FIRMA RESPONSABLE"),window.open(t.output("bloburl"),"_blank")},cancelar(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago,this.$axios.post("https://bnaty.tuprogam.com/api/cancelacion",{monto:a,fecha:this.fecha2,empleado_id:e.id,empleado_nombre:e.nombre}).then((e=>{this.missalarios(),this.$q.notify({message:"Registro correctamente",icon:"info",color:"positive"})}))},imprimirboleta(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago;let t="<div><img class='fondo' src='logo.png' style='height:20px'> Chicheria Doña Naty <span>"+Se()().format("DD/MM/YYYY")+"</span></div><br>";t+="<div style='text-align:center'>BOLETA DE PAGO "+X.ZP.formatDate(this.fecha1,"YYYY-MM")+"</div><hr>",t+="<div>Nombre: "+e.nombre+"</div><div>Salario Basico: "+e.salario+"</div>",t+="<div>CI: "+e.ci+"</div><div>Celular: "+e.celular+"</div><hr>",t+="<table style='width:100%'><thead><tr><th>INGRESOS</th><th>DESCUENTOS</th></tr></thead>",t+="<tbody><tr><td>Salario Basico:"+e.salario+"</td><td>Descuentos: "+e.descuento+"</td></tr>",t+="<tr><td>Extra:"+e.extra+"</td><td>Adelanto: "+e.adelanto+"</td></tr>",t+="<tr><td>Pago:"+e.pago+"</td><td> </td></tr>",t+="</tbody></table><hr>",t+="<div style='text-align:right'>Liquido Pagable: "+a+"</div>",t+="<div> "+e.obs+"</div>",t+="<br><br><div style='text-align:center; with:100%'>FIRMA</div>";let o=window.open("","Imprimir","width=1000,height=1000");o.document.write(t),o.document.close(),o.focus(),setTimeout((function(){o.print(),o.close()}),500)},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de prestmos Sueldos pagos Adelantos"),t.text(5,1.5,"DE "+e.fecha1),t.text(1,3,"Empleado"),t.text(7,3,"Sueldo"),t.text(9,3,"Extra"),t.text(11,3,"Adelanto"),t.text(13,3,"Descuento"),t.text(16,3,"Pago"),t.text(19,3,"Cancelar"),t.setFont(void 0,"normal")}var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0,l=0;this.salarios.forEach((e=>{let i=null==e.extra?0:e.extra,s=null==e.adelanto?0:e.adelanto,n=null==e.descuento?0:e.descuento,r=null==e.pago?0:e.pago,d=e.salario-s-n+r;o+=.5,t.text(1,o+3,""+e.nombre),t.text(7,o+3,""+e.salario),t.text(9,o+3,""+i),t.text(11,o+3,""+s),t.text(13,o+3,""+n),t.text(16,o+3,""+r),t.text(19,o+3,""+d),l+=d,o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,t.text(11,o+3,"TOTAL"),t.text(14,o+3,""+l),window.open(t.output("bloburl"),"_blank")},missalarios(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/missueldos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{this.salarios=e.data,ae()("#example").DataTable().destroy(),this.$nextTick((()=>{ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",ordering:!1,buttons:["excel","pdf"],lengthMenu:[[-1,50,100],["All",50,100]]})})),this.$q.loading.hide()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},totalgeneral(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{console.log(e.data.monto),this.montogeneral=parseFloat(e.data.monto)}))},agregarpago(){return"FIJO"==this.empleado2.tipo&&parseFloat(this.empleado2.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleado2.id,this.pago.empleado_nombre=this.empleado2.nombre,this.pago.checkbox=this.checkgasto,void this.$axios.post("https://bnaty.tuprogam.com/api/sueldo",this.pago).then((e=>{this.pago={fecha:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.totalgeneral();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagos=!1})))},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/empleado").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},valplanilla(){},modificar(){this.$axios.put("https://bnaty.tuprogam.com/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.misempleados(),this.boolcrear=!0,this.empleado2=[],this.modempleado=!1,this.$q.notify({message:"Modificado correctamente",icon:"info",color:"positive"})}))},agregar(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/empleado",this.empleado).then((e=>{this.$q.loading.hide(),this.misempleados(),this.empleado={fechanac:"2000-01-01"},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})}))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},verplanilla(e){this.emp=e,this.planillas=this.emp.planillas,this.dialogver=!0},updateval(e){this.empleado2=e,this.modempleado=!0},pagosval(e){this.$q.loading.show(),this.empleado2=e,this.$axios.get("https://bnaty.tuprogam.com/api/empleado/"+e.id).then((e=>{console.log(e.data),this.empleadohistorial=e.data,this.$q.loading.hide(),this.pagos=!0}))}},computed:{totalmonto(){let e=0;return e=parseFloat(this.planilla.monto)-parseFloat(null==this.planilla.adelanto?0:this.planilla.adelanto)-parseFloat(null==this.planilla.descuento?0:this.planilla.descuento),e},totaldescuento(){let e=0;return this.empleadohistorial.forEach((a=>{Se()(a.fecha).format("YYYY-MM")===Se()(this.pago.fecha).format("YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e}}};var Qo=t(77991);Zo.render=Lo,Zo.__scopeId="data-v-06edcffe";const Bo=Zo;T()(Zo,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QIcon:_.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QTr:de.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z,QRadio:Qo.Z}),T()(Zo,"directives",{ClosePopup:pe.Z});const Go=(0,i.HX)("data-v-b8966106");(0,i.dD)("data-v-b8966106");const Ho={class:"row"},Jo=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Ko={class:"col-12"},Xo={class:"row"},el={class:"col-6 col-sm-6 q-pa-xs"},al={class:"col-6 col-sm-6 q-pa-xs"},tl={class:"row"},ol={class:"col-6 col-sm-2 q-pa-xs"},ll={class:"col-6 col-sm-2 q-pa-xs"},il={class:"col-6 col-sm-2 q-pa-xs"},sl={class:"col-6 col-sm-1 q-pa-xs"},nl={class:"col-6 col-sm-2 q-pa-xs"},rl=(0,i.Wm)("div",{class:"col-6 col-sm-2 q-pa-xs flex flex-center"},null,-1),dl={class:"col-12"},cl={class:"row"},ml={class:"col-6 col-sm-2 q-pa-xs"},ul={class:"col-6 col-sm-2 q-pa-xs"},pl={class:"col-6 col-sm-2 q-pa-xs"},hl={class:"col-6 col-sm-2 q-pa-xs"},gl={class:"col-12"},fl={class:"row"},bl={class:"col-6 col-sm-2 q-pa-xs"},vl={class:"col-6 col-sm-2 q-pa-xs"},wl={class:"col-6 col-sm-2 q-pa-xs"},Wl={class:"col-6 col-sm-2 q-pa-xs"},yl={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Vl=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),xl={class:"col-6 col-sm-6 q-pa-xs"},Cl={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},_l={class:"col-12"};(0,i.Cn)();const ql=Go(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-table"),h=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(h,{class:"q-pa-xs"},{default:Go((()=>[(0,i.Wm)("div",Ho,[Jo,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Go((()=>[(0,i.Wm)("div",Ko,[(0,i.Wm)("div",Xo,[(0,i.Wm)("div",el,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",al,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",tl,[(0,i.Wm)("div",ol,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",ll,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",il,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",sl,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",nl,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),rl])]),(0,i.Wm)("div",dl,[(0,i.Wm)("div",cl,[(0,i.Wm)("div",ml,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",ul,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",pl,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",hl,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])])])]),(0,i.Wm)("div",gl,[(0,i.Wm)("div",fl,[(0,i.Wm)("div",bl,[(0,i.Wm)(r,{type:"number",min:"0",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[12]||(a[12]=e=>s.efectivo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",vl,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",wl,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:e.obervacion,"onUpdate:modelValue":a[14]||(a[14]=a=>e.obervacion=a),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wl,[(0,i.Wm)(r,{type:"text",label:"Estado material",modelValue:s.material,"onUpdate:modelValue":a[15]||(a[15]=e=>s.material=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",yl,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])])),_:1},8,["onSubmit"]),Vl,(0,i.Wm)("div",xl,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[16]||(a[16]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Cl,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",_l,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter,"hide-header":""},{"top-right":Go((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[17]||(a[17]=e=>s.filter=e),placeholder:"Search"},{append:Go((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),El={name:"Venta",data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,fisico:"",efectivo:0,observacion:"",material:"",detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("https://bnaty.tuprogam.com/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("https://bnaty.tuprogam.com/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("https://bnaty.tuprogam.com/api/misventas",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/misventas",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},guardar(){this.$q.loading.show(),this.detalles={nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal},this.garantias={efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,estado:this.material},this.$axios.post("https://bnaty.tuprogam.com/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles,garantias:this.garantias}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return e=this.subtotal,e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};El.render=ql,El.__scopeId="data-v-b8966106";T()(El,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QIcon:_.Z});const Al=(0,i.HX)("data-v-0857cd66");(0,i.dD)("data-v-0857cd66");const kl={class:"row"},Dl=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Ml={class:"col-12"},Ol={class:"row"},Tl={class:"col-6 col-sm-6 q-pa-xs"},Sl={class:"col-6 col-sm-6 q-pa-xs"},Rl={class:"row"},Ul={class:"col-6 col-sm-2 q-pa-xs"},$l={class:"col-6 col-sm-2 q-pa-xs"},Nl={class:"col-6 col-sm-1 q-pa-xs"},Yl={class:"col-6 col-sm-1 q-pa-xs"},Il={class:"col-6 col-sm-2 q-pa-xs"},Pl={class:"col-6 col-sm-1 q-pa-xs"},Ll=(0,i.Uk)("Subtotal "),jl=(0,i.Wm)("br",null,null,-1),Fl={class:"col-6 col-sm-1 q-pa-xs"},zl={class:"col-6 col-sm-1 q-pa-xs"},Zl=(0,i.Uk)("Subtotal "),Ql=(0,i.Wm)("br",null,null,-1),Bl={class:"col-6 col-sm-1 q-pa-xs"},Gl=(0,i.Uk)("Subtotal "),Hl=(0,i.Wm)("br",null,null,-1),Jl={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},Kl={class:"col-12"},Xl={class:"row"},ei={class:"col-12 col-sm-12"},ai={class:"row"},ti=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),oi={class:"col-6 col-sm-4 q-pa-xs"},li={class:"col-6 col-sm-4 q-pa-xs"},ii={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},si={class:"col-12"},ni={class:"col-12"};(0,i.Cn)();const ri=Al(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-badge"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),f=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(f,{class:"q-pa-xs"},{default:Al((()=>[(0,i.Wm)("div",kl,[Dl,(0,i.Wm)("div",Ml,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Al((()=>[(0,i.Wm)("div",Ol,[(0,i.Wm)("div",Tl,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Sl,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",Rl,[(0,i.Wm)("div",Ul,[(0,i.Wm)(d,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[3]||(a[3]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Selecionar local",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])]),(0,i.Wm)("div",$l,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Nl,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yl,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Il,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pl,[(0,i.Wm)(c,{class:"full-width full-height",color:"positive"},{default:Al((()=>[Ll,jl,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",Fl,[(0,i.Wm)(r,{type:"text",label:"A cuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[8]||(a[8]=e=>s.acuenta=e),step:"0.1",outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",zl,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Al((()=>[Zl,Ql,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",Bl,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Al((()=>[Gl,Hl,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",Jl,[(0,i.Wm)(m,{color:"accent",class:"",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Kl,[(0,i.Wm)("div",Xl,[(0,i.Wm)("div",ei,[(0,i.Wm)("div",ai,[ti,e.$store.state.login.historialventalocal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",oi,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",li,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[10]||(a[10]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ii,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",si,[(0,i.Wm)(g,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:Al((a=>[(0,i.Wm)(h,{props:a},{default:Al((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"local",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.local),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:Al((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:Al((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:Al((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:Al((()=>["ANULADO"!=a.row.estado&&e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"cancel",color:"red",onClick:e=>n.anular(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:1},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",ni,[(0,i.Wm)(m,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])])])),_:1})})),di={name:"Venta",data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.$axios.get("https://bnaty.tuprogam.com/api/listacliente").then((e=>{e.data.forEach((e=>{1==e.tipocliente&&this.clientes.push({label:e.local+" "+e.titular,id:e.id})}))})),this.$axios.get("https://bnaty.tuprogam.com/api/listaproducto").then((e=>{e.data.forEach((e=>{"LOCAL"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("https://bnaty.tuprogam.com/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{impruta(e){this.$axios.post("https://bnaty.tuprogam.com/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.tuprogam.com/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestmos "+e.model.label),t.text(5,1.5,"DE "+Se()(e.fecha4).format("DD/MM/YYYY")+" AL "+Se()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,e.fecha.toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+Se()(e.fecha2).format("DD/MM/YYYY")+" AL "+Se()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(9.5,3,"Local"),t.text(13.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;t.setFontSize(8),this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(13.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"LOCAL"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,observacion:e.observacion,user:e.user.name})})),console.log(this.ventas)}))},agregar(){},impboleta(e){console.log(e),this.$axios.post("https://bnaty.tuprogam.com/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},guardar(){return 0==this.model?(this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",html:!0,position:"center",icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,tipo:"LOCAL",observacion:this.observacion,cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500),this.misventas(),this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};di.render=ri,di.__scopeId="data-v-0857cd66";const ci=di;T()(di,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QBadge:ie.Z,QBtn:k.Z,QTable:re.Z,QTd:ce.Z,QIcon:_.Z,QTr:de.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z}),T()(di,"directives",{ClosePopup:pe.Z});const mi={class:"row"},ui={class:"col-12"},pi=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("h5",{style:{"text-align":"center"}},"Reporte de Ventas por Usuario")],-1),hi={class:"row"},gi={class:"col-3"},fi={class:"col-2"},bi={class:"col-2"},vi={class:"col-3"},wi={class:"col-2 flex flex-center"},Wi={class:"q-pa-md"},yi={class:" responsive"},Vi={id:"example",style:{width:"100%"},class:"cell-border"},xi=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado")])],-1),Ci=(0,i.Uk)("LOCAL"),_i=(0,i.Uk)("CLIENTE"),qi=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Ei=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1),Ai={class:"col-12"},ki={class:"row"},Di={class:"col-4 q-pa-md"},Mi={class:"col-4 q-pa-md"},Oi={class:"col-4 q-pa-md"},Ti={class:"q-pa-md",hidden:""};function Si(e,a,t,l,s,n){const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-badge"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-td"),W=(0,i.up)("q-icon"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",mi,[(0,i.Wm)("div",ui,[pi,(0,i.Wm)(u,{onSubmit:n.generar},{default:(0,i.w5)((()=>[(0,i.Wm)("div",hi,[(0,i.Wm)("div",gi,[(0,i.Wm)(r,{dense:"",modelValue:s.usuario,"onUpdate:modelValue":a[1]||(a[1]=e=>s.usuario=e),outlined:"",options:s.usuarios,"option-label":"name","option-value":"id",label:"Usuarios",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",fi,[(0,i.Wm)(d,{dense:"",outlined:"",type:"date",modelValue:s.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha=e),label:"Fecha ini",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",bi,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",outlined:"",type:"date",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=s.fecha||"Fecha debe ser mayor o igual"]},null,8,["modelValue","rules"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",vi,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",wi,[(0,i.Wm)(m,{label:"Generar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Wi,[(0,i.Wm)("div",yi,[(0,i.Wm)("table",Vi,[xi,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Ci])),_:1})):((0,i.wg)(),(0,i.j4)(p,{key:1,color:"teal"},{default:(0,i.w5)((()=>[_i])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(p,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])])])))),128))])])]),(0,i.Wm)(v,{modelValue:s.alert,"onUpdate:modelValue":a[5]||(a[5]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[qi])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{title:"Pagos",rows:s.pagos,columns:s.colrep,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(f,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(b,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[Ei])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(m,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",Ai,[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",ki,[(0,i.Wm)("div",Di,[(0,i.Wm)(d,{type:"text",label:"Venta total","label-color":"positive",modelValue:n.ventat,"onUpdate:modelValue":a[9]||(a[9]=e=>n.ventat=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Mi,[(0,i.Wm)(d,{type:"text",label:"Saldo caja","label-color":"info",modelValue:n.porc,"onUpdate:modelValue":a[10]||(a[10]=e=>n.porc=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Oi,[(0,i.Wm)(d,{type:"text",label:"Por cobrar","label-color":"negative",modelValue:n.saldoc,"onUpdate:modelValue":a[11]||(a[11]=e=>n.saldoc=e),outlined:""},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",Ti,[(0,i.Wm)(g,{title:"Reporte Deudores",rows:s.deudas,columns:s.columns2,"row-key":"local",filter:s.filter},{"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(w,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{icon:"segment",color:"green",onClick:a=>n.listpago(e.row)},null,8,["onClick"]),"POR COBRAR"==e.row.estado?((0,i.wg)(),(0,i.j4)(m,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[12]||(a[12]=e=>s.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(W,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])])])])}const Ri={data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),usuarios:[],filter:"",usuario:"",ventas:[],rango:"RANGO",deudas:[],regpago:{},pagos:{},dato:{},alert:!1,dialog_pago:!1,colrep:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns:[{name:"local",label:"local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"total",field:"total"},{name:"cuenta",align:"center",label:"cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"saldo",field:"saldo"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"Tipo",field:"tipo"},{name:"usuario",align:"center",label:"usuario",field:"name"}],columns2:[{name:"local",label:"Local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"Titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"Total",field:"total"},{name:"cuenta",align:"center",label:"Cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"Saldo",field:"saldo"},{name:"fecha",align:"center",label:"fecha",field:"fecha"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"tipo",field:"tipocliente"},{name:"usuario",align:"center",label:"usuario",field:"name"},{name:"opcion",align:"center",label:"opcion",field:"opcion"}]}},mounted(){ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})},created(){this.listado(),this.deudores()},methods:{onPago(){this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.$axios.post("https://bnaty.tuprogam.com/api/listuser").then((e=>{console.log(e.data),this.usuarios.push({id:"0",name:"Todos"}),e.data.forEach((e=>{this.usuarios.push(e)})),this.usuarios.length>0&&(this.usuario=e.data[0])}))},deudores(){this.deudas=[],this.$axios.post("https://bnaty.tuprogam.com/api/listadodeudores").then((e=>{console.log(e.data),e.data.forEach((e=>{let a="";a=1==e.cliente.tipocliente?"LOCAL":"DETALLE",this.deudas.push({id:e.id,local:e.cliente.local,titular:e.cliente.titular,total:e.total,cuenta:e.acuenta,saldo:e.saldo,tipocliente:a,fecha:e.fecha,estado:e.estado,name:e.user.name,pagos:e.pagos})}))}))},generar(){this.ventas=[],this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha),this.$axios.post("https://bnaty.tuprogam.com/api/listadoventa",{ini:this.fecha,fin:this.fecha2,id:this.usuario.id}).then((e=>{console.log(e.data),this.$q.loading.hide(),e.data.forEach((e=>{this.ventas.push({local:e.cliente.local,tipo:e.tipo,titular:e.cliente.titular,cuenta:e.acuenta,saldo:e.saldo,total:e.total,estado:e.estado,name:e.user.name})})),ae()("#example").DataTable().destroy(),this.$nextTick((()=>{ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0}},computed:{ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.cuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Ri.render=Si;const Ui=Ri;T()(Ri,"components",{QForm:q.Z,QSelect:Ue.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QTable:re.Z,QBadge:ie.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z,QTd:ce.Z,QIcon:_.Z}),T()(Ri,"directives",{ClosePopup:pe.Z});const $i={class:"q-pa-md"},Ni={class:"text-h7"},Yi=(0,i.Uk)(" REGISTRO DE NUEVO USUARIO "),Ii={class:"row"},Pi={class:"col-6"},Li={class:"col-6"},ji=(0,i.Wm)("div",{class:"text-5"},"Permisos",-1),Fi=(0,i.Uk)("Editar"),zi=(0,i.Uk)("Cambiar contraseña"),Zi=(0,i.Uk)("Permisos"),Qi=(0,i.Uk)("Eliminar"),Bi=(0,i.Wm)("br",null,null,-1),Gi={class:"row"},Hi={class:"col-4 q-pa-xs "},Ji={class:"col-4 q-pa-xs "},Ki={class:"col-4 q-pa-xs"},Xi={class:"col-12"},es={class:"text-h7"},as=(0,i.Uk)(" MODIFICAR DATOS DE USUARIO "),ts=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),os={class:"text-h7 text-white"},ls=(0,i.Uk)(" PERMISOS DE ACCESO "),is={class:"col-4"},ss={class:"col-6 text-bold"};function ns(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-icon"),c=(0,i.up)("q-card-section"),m=(0,i.up)("q-input"),u=(0,i.up)("q-checkbox"),p=(0,i.up)("q-form"),h=(0,i.up)("q-card"),g=(0,i.up)("q-dialog"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-tooltip"),w=(0,i.up)("q-table"),W=(0,i.up)("q-avatar"),y=(0,i.up)("q-card-actions"),V=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",$i,[(0,i.Wm)(r,{label:"Nuevo usuario",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(g,{modelValue:s.alert,"onUpdate:modelValue":a[6]||(a[6]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ni,[(0,i.Wm)(d,{name:"add_circle"}),Yi])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ii,[(0,i.Wm)("div",Pi,[(0,i.Wm)(m,{filled:"",modelValue:s.dato.name,"onUpdate:modelValue":a[2]||(a[2]=e=>s.dato.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.email,"onUpdate:modelValue":a[3]||(a[3]=e=>s.dato.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.password,"onUpdate:modelValue":a[4]||(a[4]=e=>s.dato.password=e),type:"password",label:"Contraseña",hint:"Contraseña","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",hint:"Fecha limite de acceso",modelValue:s.dato.fechalimite,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.fechalimite=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Li,[ji,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)(u,{style:{width:"100%"},key:a,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])))),128))])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[V]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{dense:"",filter:s.filter,title:"REGISTRO DE USUARIOS",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(m,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[7]||(a[7]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{color:"ACTIVO"==e.row.estado?"green":"red",label:e.row.estado,onClick:a=>n.cambioEstado(e.row)},null,8,["color","label","onClick"])])),_:2},1032,["props"])])),"body-cell-permisos":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"permisos",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.nombre),1)))),128))])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>n.editRow(e),icon:"edit"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[Fi])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"positive",onClick:a=>n.cambiopass(e),icon:"vpn_key"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[zi])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"green-10",onClick:a=>n.mispermisos(e),icon:"post_add"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[Zi])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e),icon:"o_delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[Qi])),_:1})])),_:2},1032,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"]),Bi,(0,i.Wm)("div",Gi,[(0,i.Wm)("div",Hi,[(0,i.Wm)(m,{dense:"",outlined:"",modelValue:s.ini,"onUpdate:modelValue":a[8]||(a[8]=e=>s.ini=e),type:"date",label:"Fecha Ini"},null,8,["modelValue"])]),(0,i.Wm)("div",Ji,[(0,i.Wm)(m,{dense:"",outlined:"",modelValue:s.fin,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fin=e),type:"date",label:"Fecha Fin"},null,8,["modelValue"])]),(0,i.Wm)("div",Ki,[(0,i.Wm)(r,{dense:"",outline:"",color:"info",icon:"search",onClick:a[10]||(a[10]=e=>n.getHistorial())})]),(0,i.Wm)("div",Xi,[(0,i.Wm)(w,{title:"LISTADO ACCESO",rows:s.logs,columns:s.colhist,"row-key":"name",dense:""},null,8,["rows","columns"])])]),(0,i.Wm)(g,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[14]||(a[14]=e=>s.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-warning text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",es,[(0,i.Wm)(d,{name:"edit"}),as])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{filled:"",modelValue:s.dato2.name,"onUpdate:modelValue":a[11]||(a[11]=e=>s.dato2.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato2.email,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dato2.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",modelValue:s.dato2.fechalimite,"onUpdate:modelValue":a[13]||(a[13]=e=>s.dato2.fechalimite=e)},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[V]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.dialog_del,"onUpdate:modelValue":a[15]||(a[15]=e=>s.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{icon:"clear",color:"red","text-color":"white"}),ts])),_:1}),(0,i.Wm)(y,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{flat:"",label:"Eliminar",color:"deep-orange",onClick:n.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"primary"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.modelpermiso,"onUpdate:modelValue":a[16]||(a[16]=e=>s.modelpermiso=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{width:"850px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-info q-py-none"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",os,[(0,i.Wm)(d,{name:"folder"}),ls])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:(0,o.iM)(n.updatepermisos,["prevent"])},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos2,((e,a)=>((0,i.wg)(),(0,i.j4)("div",{class:"row",key:a},[(0,i.Wm)("div",is,[(0,i.Wm)(u,{dense:"",label:`${e.id} ${e.nombre}`,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",ss,(0,R.zw)(e.grupo),1)])))),128)),(0,i.Wm)(r,{dense:"",class:"full-width","no-caps":"",type:"submit",color:"info",icon:"send",label:"Actualizar"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const{addToDate:rs}=X.ZP,ds={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{fechalimite:X.ZP.formatDate(rs(new Date,{days:7}),"YYYY-MM-DD")},ini:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fin:X.ZP.formatDate(new Date,"YYYY-MM-DD"),model:"",dato2:{},options:[],historial:[],props:[],unidades:[],permisos:[],permisos2:[],logs:[],modelpermiso:!1,uni:{},colhist:[{name:"fecha",label:"FECHA ",field:"fecha",sortable:!0},{name:"hora",label:"HORA",field:"hora",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name,sortable:!0}],columns:[{name:"name",align:"left",label:"NOMBRE ",field:"name",sortable:!0},{name:"estado",align:"left",label:"ESTADO ",field:"estado",sortable:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0},{name:"permisos",align:"left",label:"PERMISOS",field:"permisos",sortable:!0},{name:"fechalimite",align:"left",label:"FECHA LÍMITE",field:e=>X.ZP.formatDate(e.fechalimite,"DD/MM/YYYY"),sortable:!0},{name:"opcion",label:"OPCIÓN",field:"action",sortable:!1}],data:[]}},created(){this.misdatos(),this.permisosGet()},methods:{getHistorial(){if(void 0==this.ini||void 0==this.fin)return!1;this.$axios.post("https://bnaty.tuprogam.com/api/loginHistorial",{ini:this.ini,fin:this.fin}).then((e=>{console.log(e.data),this.logs=e.data}))},permisosGet(){this.permisos=[],this.permisos2=[],this.$axios.get("https://bnaty.tuprogam.com/api/permiso").then((e=>{e.data.forEach((e=>{this.permisos.push({id:e.id,nombre:e.nombre,estado:!1,descripcion:e.descripcion,grupo:e.grupo}),this.permisos2.push({id:e.id,nombre:e.nombre,estado:!1,descripcion:e.descripcion,grupo:e.grupo})}))}))},orden(e,a){console.log(e),this.$axios.post("https://bnaty.tuprogam.com/api/orden",{permiso_id:e.id,accion:a}).then((e=>{this.permisosGet()}))},cambioEstado(e){this.$axios.post("https://bnaty.tuprogam.com/api/cambioestado",e).then((e=>{this.misdatos()}))},updatepermisos(){this.$axios.put("https://bnaty.tuprogam.com/api/updatepermisos/"+this.dato2.id,{permisos:this.permisos2}).then((e=>{this.modelpermiso=!1,this.misdatos()})).catch((e=>{this.$q.notify({message:e.response.data.message,icon:"close",color:"red"})}))},mispermisos(e){let a;this.modelpermiso=!0,this.dato2=e.row,this.permisos2.forEach((e=>{a=this.dato2.permisos.find((a=>a.pivot.permiso_id==e.id)),e.estado=void 0!=a}))},misdatos(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/user").then((e=>{console.log(e.data),this.data=e.data,this.$q.loading.hide()}))},editRow(e){this.dato2=e.row,this.dato2.unid_id=e.row.unid,this.dialog_mod=!0},deleteRow(e){this.dato2=e.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/user",{name:this.dato.name,password:this.dato.password,email:this.dato.email,celular:this.dato.celular,carnet:this.dato.carnet,fechalimite:this.dato.fechalimite,permisos:this.permisos}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={fechalimite:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/user/"+this.dato2.id,{name:this.dato2.name,email:this.dato2.email,carnet:this.dato2.carnet,celular:this.dato2.celular,fechalimite:this.dato2.fechalimite}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/user/"+this.dato2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre=null,this.dato.inicio=0,this.dato.fin=0},cambiopass(e){this.$q.dialog({title:"CAMBIAR PASSWORD",message:"Ingresar nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/pass/"+e.row.id,{password:a}).then((e=>{this.$q.loading.hide()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}};var cs=t(65735),ms=t(36375);ds.render=ns;const us=ds;T()(ds,"components",{QBtn:k.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QSelect:Ue.Z,QCheckbox:cs.Z,QTable:re.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QAvatar:ue.Z,QCardActions:M.Z,QBtnGroup:ms.Z}),T()(ds,"directives",{ClosePopup:pe.Z});const ps=(0,i.HX)("data-v-0179dc8e");(0,i.dD)("data-v-0179dc8e");const hs={class:"row"},gs=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-red text-center text-white"},"CONTROL DE GASTOS")],-1),fs={class:"col-6 col-sm-2 q-pa-xs"},bs={key:0,class:"col-6 col-sm-2 q-pa-xs"},vs={class:"col-6 col-sm-2 q-pa-xs"},ws={key:1,class:"col-6 col-sm-3 q-pa-xs"},Ws={class:"col-6 col-sm-3 q-pa-xs flex flex-center"},ys=(0,i.Wm)("div",{class:"text-h6"},"REGISTRO DE GASTO",-1),Vs={class:"col-12"},xs={class:"row"},Cs={class:"col-12 q-pa-xs "},_s={class:"col-10 q-pa-xs "},qs=(0,i.Uk)(" No results "),Es={class:"col-2 q-pa-xs "},As={class:"col-12 q-pa-xs "},ks={class:"col-12 q-pa-xs "},Ds={class:"col-12 q-pa-xs  flex flex-center"},Ms={class:"col-12 q-pa-xs  flex flex-center"},Os={class:"col-3"},Ts={class:"col-12"},Ss=(0,i.Wm)("div",{class:"text-h5",align:"center"},"HISTORIAL DE CAJA DE VENTAS",-1),Rs={id:"example",style:{width:"100%"},class:"cell-border"},Us=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"precio"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"observacion"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"user"),(0,i.Wm)("th",null,"action")])],-1),$s=(0,i.Uk)("Modificar"),Ns=(0,i.Uk)("Eliminar"),Ys=(0,i.Uk)("Impresion"),Is=(0,i.Wm)("tfoot",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{colspan:"7",style:{"text-align":"right"}},"Total:"),(0,i.Wm)("th")])],-1),Ps=(0,i.Wm)("div",{class:"text-h5",align:"center"},"HISTORIAL DE GASTOS DE CAJA CHICA",-1),Ls={id:"example2",style:{width:"100%"},class:"cell-border"},js=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"usuario"),(0,i.Wm)("th",null,"opcion")])],-1),Fs=(0,i.Uk)("Impresion"),zs={class:"text-h6"},Zs={class:"row"},Qs={class:"col-3"},Bs={class:"col-3"},Gs={class:"col-3"},Hs={class:"col-3"},Js={key:0,class:"col-3"},Ks={class:"col-3 flex flex-center"},Xs={class:"text-h6"},en={class:"row"},an={class:"col-12"},tn=(0,i.Uk)(" No results "),on={class:"col-12"},ln={class:"col-12"},sn={class:"col-3 flex flex-center"},nn={class:"text-h6"},rn={class:"row"},dn={class:"col-12"},cn=(0,i.Uk)(" No results "),mn={class:"col-12"},un={class:"col-12"},pn={class:"col-3 flex flex-center"},hn=(0,i.Wm)("div",{class:"text-h6"},"Registro / Mod Glosa",-1),gn={class:"row"},fn={class:"col-6"},bn={class:"col-3"},vn={class:"col-3 "};(0,i.Cn)();const wn=ps(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-select"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-card-section"),p=(0,i.up)("q-item-section"),h=(0,i.up)("q-item"),g=(0,i.up)("q-form"),f=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-tooltip"),W=(0,i.up)("q-td"),y=(0,i.up)("q-space"),V=(0,i.up)("q-radio"),x=(0,i.up)("q-table"),C=(0,i.up)("q-page"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(C,{class:"q-pa-xs"},{default:ps((()=>[(0,i.Wm)("div",hs,[gs,(0,i.Wm)("div",fs,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",bs,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",vs,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA"},null,8,["modelValue","label"])]),e.$store.state.login.gastoreporteuser?((0,i.wg)(),(0,i.j4)("div",ws,[(0,i.Wm)(c,{dense:"",modelValue:s.user,"onUpdate:modelValue":a[4]||(a[4]=e=>s.user=e),options:s.users,label:"Usuarios",outlined:""},null,8,["modelValue","options"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Ws,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misgastos},null,8,["onClick"])]),(0,i.Wm)(v,{modelValue:s.dialogGasto,"onUpdate:modelValue":a[10]||(a[10]=e=>s.dialogGasto=e)},{default:ps((()=>[(0,i.Wm)(b,null,{default:ps((()=>[(0,i.Wm)(u,null,{default:ps((()=>[ys])),_:1}),(0,i.Wm)(u,null,{default:ps((()=>[(0,i.Wm)("div",Vs,[(0,i.Wm)(g,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:ps((()=>[(0,i.Wm)("div",xs,[(0,i.Wm)("div",Cs,[(0,i.Wm)(r,{dense:"",outlined:"",type:"number",step:"0.1",label:"Precio",modelValue:s.empleado.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.precio=e),required:"",rules:[e=>e>0&&e<=s.montogeneral||"No debe exceder el monto"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",_s,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[6]||(a[6]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":ps((()=>[(0,i.Wm)(h,null,{default:ps((()=>[(0,i.Wm)(p,{class:"text-grey"},{default:ps((()=>[qs])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",Es,[e.$store.state.login.editglosa?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"green",icon:"add_circle",onClick:a[7]||(a[7]=e=>s.dialogaddglosa=!0)})):(0,i.kq)("",!0)]),(0,i.Wm)("div",As,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Observacion",modelValue:s.empleado.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.empleado.observacion=e),style:{"text-transform":"uppercase"},required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ks,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Fecha ",type:"date",modelValue:s.empleado.fecha,"onUpdate:modelValue":a[9]||(a[9]=e=>s.empleado.fecha=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ds,[(0,i.Wm)(m,{icon:"send",label:s.boolcrear?"CREAR":"MODIFICAR",type:"submit",color:s.boolcrear?"positive":"warning"},null,8,["label","color"])])])])),_:1},8,["onSubmit"])])])),_:1}),(0,i.Wm)(f,{align:"right"},{default:ps((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"cerrar",color:"primary"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("div",Ms,[(0,i.Wm)(m,{icon:"price_change",label:"REGISTRO PAGO",type:"button",color:"cyan",onClick:a[11]||(a[11]=e=>s.dialogGasto=!0)}),(0,i.Wm)(m,{icon:"price_change",label:"Caja Chica",type:"button",color:"accent",onClick:a[12]||(a[12]=e=>s.cajachica=!0)})]),(0,i.Wm)("div",Os,[(0,i.Wm)(m,{label:"Imprimir mis ventas y gastos",icon:"print",color:"accent",class:"full-width",onClick:a[13]||(a[13]=e=>n.impresionventagasto(s.user)),dense:"","no-caps":""})]),(0,i.Wm)("div",Ts,[Ss,(0,i.Wm)("table",Rs,[Us,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.gastos,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.i},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.observacion),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(W,null,{default:ps((()=>[(0,i.Wm)(m,{hidden:"",color:"warning","icon-right":"edit","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.updateval(a)},{default:ps((()=>[(0,i.Wm)(w,null,{default:ps((()=>[$s])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.eliminargasto?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.deleteval(a)},{default:ps((()=>[(0,i.Wm)(w,null,{default:ps((()=>[Ns])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:1,color:"info","icon-right":"print","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.printgasto(a)},{default:ps((()=>[(0,i.Wm)(w,null,{default:ps((()=>[Ys])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1024)])])))),128))]),Is]),Ps,(0,i.Wm)("table",Ls,[js,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.chica,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.monto),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:0,size:"xs",onClick:e=>n.printcaja(a),color:"primary",icon:"print"},{default:ps((()=>[(0,i.Wm)(w,null,{default:ps((()=>[Fs])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])]),(0,i.Wm)(v,{modelValue:s.pagos,"onUpdate:modelValue":a[20]||(a[20]=e=>s.pagos=e),"full-width":""},{default:ps((()=>[(0,i.Wm)(b,null,{default:ps((()=>[(0,i.Wm)(u,{class:"row items-center q-pb-none"},{default:ps((()=>[(0,i.Wm)("div",zs,"Historial de "+(0,R.zw)(s.empleadopago.nombre),1),(0,i.Wm)(y),(0,i.wy)((0,i.Wm)(m,{icon:"close",flat:"",round:"",dense:""},null,512),[[_]])])),_:1}),(0,i.Wm)(u,{class:"q-pt-none"},{default:ps((()=>[(0,i.Wm)(g,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:ps((()=>[(0,i.Wm)("div",Zs,[(0,i.Wm)("div",Qs,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[14]||(a[14]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Bs,[(0,i.Wm)(c,{outlined:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[15]||(a[15]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",Gs,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.pago.observacion,"onUpdate:modelValue":a[16]||(a[16]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Hs,[(0,i.Wm)(r,{outlined:"",label:"Fecha",type:"date",modelValue:s.pago.fecha,"onUpdate:modelValue":a[17]||(a[17]=e=>s.pago.fecha=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Js,[(0,i.Wm)(V,{modelValue:s.checkgasto,"onUpdate:modelValue":a[18]||(a[18]=e=>s.checkgasto=e),val:"GASTO",label:"GASTO"},null,8,["modelValue"]),(0,i.Wm)(V,{modelValue:s.checkgasto,"onUpdate:modelValue":a[19]||(a[19]=e=>s.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Ks,[(0,i.Wm)(m,{label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),e.$store.state.login.reportepago?((0,i.wg)(),(0,i.j4)(x,{key:0,title:"Hitorial de pagos","rows-per-page-options":[50,100,0],columns:s.columns2,rows:s.listpagos},{"body-cell-opcion":ps((e=>[(0,i.Wm)(W,{key:"opcion",props:e},{default:ps((()=>[(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])):(0,i.kq)("",!0)])),_:1}),(0,i.Wm)(f,{align:"right",class:"bg-white text-teal"},{default:ps((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"OK"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.cajachica,"onUpdate:modelValue":a[24]||(a[24]=e=>s.cajachica=e)},{default:ps((()=>[(0,i.Wm)(b,null,{default:ps((()=>[(0,i.Wm)(u,null,{default:ps((()=>[(0,i.Wm)("div",Xs,"Registro Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(u,{class:"q-pt-none"},{default:ps((()=>[(0,i.Wm)(g,{onSubmit:(0,o.iM)(n.agregarcjchica,["prevent"])},{default:ps((()=>[(0,i.Wm)("div",en,[(0,i.Wm)("div",an,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[21]||(a[21]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":ps((()=>[(0,i.Wm)(h,null,{default:ps((()=>[(0,i.Wm)(p,{class:"text-grey"},{default:ps((()=>[tn])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",on,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica.precio,"onUpdate:modelValue":a[22]||(a[22]=e=>s.cchica.precio=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ln,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica.observacion,"onUpdate:modelValue":a[23]||(a[23]=e=>s.cchica.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",sn,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info",loading:s.loading},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(f,{align:"right",class:"bg-white text-teal"},{default:ps((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modifcajachica,"onUpdate:modelValue":a[28]||(a[28]=e=>s.modifcajachica=e)},{default:ps((()=>[(0,i.Wm)(b,null,{default:ps((()=>[(0,i.Wm)(u,null,{default:ps((()=>[(0,i.Wm)("div",nn,"Modificar Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(u,{class:"q-pt-none"},{default:ps((()=>[(0,i.Wm)(g,{onSubmit:(0,o.iM)(n.modificarcjchica,["prevent"])},{default:ps((()=>[(0,i.Wm)("div",rn,[(0,i.Wm)("div",dn,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[25]||(a[25]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":ps((()=>[(0,i.Wm)(h,null,{default:ps((()=>[(0,i.Wm)(p,{class:"text-grey"},{default:ps((()=>[cn])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",mn,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica2.monto,"onUpdate:modelValue":a[26]||(a[26]=e=>s.cchica2.monto=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",un,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica2.motivo,"onUpdate:modelValue":a[27]||(a[27]=e=>s.cchica2.motivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",pn,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(f,{align:"right",class:"bg-white text-teal"},{default:ps((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogaddglosa,"onUpdate:modelValue":a[31]||(a[31]=e=>s.dialogaddglosa=e)},{default:ps((()=>[(0,i.Wm)(b,null,{default:ps((()=>[(0,i.Wm)(u,null,{default:ps((()=>[hn])),_:1}),(0,i.Wm)(u,{class:"q-pt-none"},{default:ps((()=>[(0,i.Wm)(g,{onSubmit:(0,o.iM)(n.regglosa,["prevent"])},{default:ps((()=>[(0,i.Wm)("div",gn,[(0,i.Wm)("div",fn,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.glosa.nombre,"onUpdate:modelValue":a[29]||(a[29]=e=>s.glosa.nombre=e),rules:[e=>e.length>0||"INGRESE NOMBRE"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",bn,[(0,i.Wm)(r,{outlined:"",label:"N orden",modelValue:s.glosa.orden,"onUpdate:modelValue":a[30]||(a[30]=e=>s.glosa.orden=e),type:"number",rules:[e=>e>=0||"INGRESE nummero"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",vn,[(0,i.Wm)(m,{label:"Reg/Mod",type:"submit",icon:"send",color:"info",dense:""})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(f,{align:"right",class:"bg-white text-teal"},{default:ps((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})})),Wn={name:"Venta",data(){return{filter:"",loading:!1,filtercaja:"",cchica:{},cchica2:{},glosa:{},glosas:[],chica:[],checkgasto:"CAJA",dialogaddglosa:!1,pagos:!1,cajachica:!1,modifcajachica:!1,dialogGasto:!1,pago:{fecha:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],empleadohistorial:{},boolcrear:!0,gastos:[],anulados:[],rango:"RANGO",empleadopago:{},rpagos:[],reporteventa:[],prestamoventa:[],users:[],user:{},gl:[],filterglosa:[],listpagos:[],pageTotal:"",tot:"",resumenplanilla:0,empleado:{fecha:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocajachica:0,montogeneral:0,columns:[{name:"id",label:"Id",field:"id"},{name:"precio",label:"Precio",field:"precio"},{name:"glosa",label:"Glosa",field:e=>e.glosa.nombre},{name:"observacion",label:"Observacion",field:"observacion"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"action",label:"Action",field:"action"}],columns2:[{name:"opcion",label:"Opcion",field:"opcion"},{name:"fecha",label:"Fecha",field:"fecha",sortable:!0},{name:"hora",label:"Hora",field:"hora"},{name:"tipo",label:"Tipo",field:"tipo",sortable:!0},{name:"monto",label:"Monto",field:"monto"},{name:"observacion",label:"observacion",field:"observacion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"pago",label:"Pago",field:"pago"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"}],columns4:[{name:"id",label:"Id",field:"id"},{name:"monto",label:"Monto",field:"monto"},{name:"glosa",label:"Glosa",field:"glosa"},{name:"motivo",label:"Motivo",field:"motivo"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion"}],encabezado:{id:"id",Monto:"monto",Glosa:"glosa",Motivo:"glosa",Fecha:"fecha",Hora:"hora",Usuario:"user"}}},mounted(){console.log(this.$store.state.login.user),ae()("#example").DataTable(),ae()("#example2").DataTable(),this.misglosa(),this.listadog(),this.misempleados(),this.totalcaja(),this.totalgeneral(),this.misuser(),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.misgastos()},methods:{cargarPagos(){console.log(this.empleadopago),this.$axios.get("https://bnaty.tuprogam.com/api/empleado/"+this.empleadopago.id).then((e=>{console.log(e.data),this.listpagos=e.data,this.pagos=!0}))},modificarcjchica(){if(void 0==this.glosa.id)return!1;this.cchica2.glosa_id=this.glosa.id,this.$axios.put("https://bnaty.tuprogam.com/api/logcaja/"+this.cchica2.id,this.cchica2).then((e=>{console.log(e.data),this.modifcajachica=!1,this.glosa={label:""},this.misgastos(),this.totalcaja(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})}))},exportTable(){let e=[{sheet:"Caja Chica",columns:[{label:"id",value:"id"},{label:"Monto",value:"monto"},{label:"Glosa",value:"glosa"},{label:"Motivo",value:"motivo"},{label:"fecha",value:"fecha"},{label:"Hora",value:"hora"},{label:"Usuario",value:"user"}],content:this.chica}],a={fileName:"CajaChica",extraLength:7,writeOptions:{}};oe()(e,a)},totalgeneral(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},regglosa(){void 0==this.glosa.id?this.$axios.post("https://bnaty.tuprogam.com/api/glosa",{nombre:this.glosa.nombre,orden:void 0==this.glosa.orden?0:this.glosa.orden}).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})})):(void 0!=this.glosa.orden&&this.glosa.orden,this.$axios.put("https://bnaty.tuprogam.com/api/glosa/"+this.glosa.id,this.glosa).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})})))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.glosas=this.filterglosa.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.glosas=this.filterglosa})},printRow(e){this.$axios.get("https://bnaty.tuprogam.com/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},modifcaja(e){this.cchica2=e;let a=e.gl;a.label=a.nombre,this.glosa=a,this.modifcajachica=!0,console.log(this.cchica2)},printcaja(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO CAJA CHICA</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+Se()(e.fecha).format("DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.monto+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.motivo+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.print(),t.close()},agregarcjchica(){return void 0!=this.glosa.id&&(this.montocajachica<this.cchica.precio?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No Existe suficiente en Caja Chica"}),!1):(this.loading=!0,this.cchica.glosa_id=this.glosa.id,this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/gastocaja",this.cchica).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");this.$q.loading.hide(),a.document.write(e.data),a.document.close(),a.print(),a.close(),this.cchica.precio=0,this.cchica.observacion="",this.cajachica=!1,this.glosa={},this.misgastos(),this.totalcaja(),this.loading=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})}))))},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},listadog(){this.$axios.post("https://bnaty.tuprogam.com/api/listglosa").then((e=>{this.gl=e.data}))},misuser(){this.$axios.post("https://bnaty.tuprogam.com/api/listuser").then((e=>{this.users=[{label:"TODOS",id:0}],e.data.forEach((e=>{this.users.push({label:e.name,id:e.id})})),this.user=this.users[0]}))},misglosa(){this.glosas=[{label:""}],this.$axios.get("https://bnaty.tuprogam.com/api/glosa").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.glosas.push(e)})),this.filterglosa=this.glosas,this.glosa=this.glosas[0]}))},async impresionventagasto(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o=0,l=0,i=0,s=0,n=0,r=0,d="style='color:red'",c="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL DE INGRESOS Y GASTOS DE "+e.label+" "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";this.ventas.length>0&&(c+="<div>VENTAS DETALLE Y LOCAL</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>LOCAL</th><th>TITULAR</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(t+=e.acuenta,o+=e.total,l+=e.saldo,c+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{c+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.local+"</td><td>"+e.titular+"</td><td ","POR COBRAR"==e.estado&&(c+=d),c+=">"+e.estado+"</td></tr>")})),c+="</table><div><b>TOTAL VENTAS:</b>"+o+"</div><br>",this.totalruta&&(c+="<div>VENTAS CON RUTA</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>LOCAL</th><th>TITULAR</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(i+=e.acuenta,s+=e.total,n+=e.saldo,c+="<tr><td>R-"+e.id+"</td><td>",e.detalles.forEach((e=>{c+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.local+"</td><td>"+e.titular+"</td><td ","POR COBRAR"==e.estado&&(c+=d),c+=">"+e.estado+"</td></tr>")})),c+="</table><div><b>TOTAL VENTAS RUTA:</b>"+s+"</div><br>        "));let m=0;this.totalanulado>0&&(m+=this.totalanulado,c+="<div>INGRESOS DE ANULADOS PRESTAMOS</div>        <table>          <tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.anulados.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local.toString():"",c+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs</td>              <td>"+e.cliente.local+"</td><td>"+e.cliente.titular+"</td></tr>"})),c+="</table><div><b>TOTAL ANULADO:</b>"+this.totalanulado+"</div><br>");let u=0;if(this.totalpresventa>0&&(c+="<div>INGRESOS DE VENTA MATERIAL</div>        <table><tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.prestamoventa.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local:"",c+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs.</td><td>"+e.cliente.local+"</td><td>"+e.cliente.titular+"</td></tr>",u+=parseFloat(e.efectivo)})),c+="</table><div><b>TOTAL VENTA MATERIAL: </b> "+this.totalpresventa+" Bs</div><br>"),this.rpagos.length>0){let e="";c+="<div>INGRESOS DE PENDIENTES DE PAGO</div>        <table><tr><th>TIPO</th><th>DETALLE</th><th>MONTO</th><th>LOCAL</th><th>TITULAR</th></tr>",this.rpagos.forEach((a=>{r+=a.monto,e=null!=a.venta.fechaentrega&&""!=a.venta.fechaentrega?"R-"+a.venta.id:a.venta.tipo.substring(0,1)+"-"+a.venta.id,a.venta.cliente.local=null!=a.venta.cliente.local?a.venta.cliente.local.toString():"",c+="<tr><td>"+e+"</td><td>",a.venta.detalles.forEach((e=>{c+=e.cantidad+" - "+e.nombreproducto+"<br>"})),c+="</td><td>"+a.monto+" Bs </td><td>"+a.venta.cliente.local+"</td><td>"+a.venta.cliente.titular+"</td></tr>"})),c+="</table><div><b>T.V. Pago: </b>"+this.totalpagos+"</div><br>"}let p=0,h=0;this.gastos.length>0&&(c+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{c+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?p+=parseFloat(null!=e.precio?e.precio:0):h+=parseFloat(null!=e.precio?e.precio:0)})),c+="</table><div><b>TOTAL GASTOS: </b>"+h+" Bs</div><br>"),this.chica.length>0&&(c+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{c+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",p+=parseFloat(null!=e.monto?e.monto:0)})),c+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+p+" Bs</div><br>"),c+="<table><tr><td>",o>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTAS : </b>"+o+" Bs</div>"),s>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTAS RUTA: </b>"+s+" Bs</div>"),t+i>0&&(c+="<div style='font-size:16px'><b>TOTAL A CUENTA: </b>"+(t+i)+" Bs</div>"),u>0&&(c+="<div style='font-size:16px'><b>TOTAL VENTA MATERIAL: </b>"+u+" Bs</div>"),m>0&&(c+="<div style='font-size:16px'><b>TOTAL PRESTAMO ANULADOS: </b>"+m+" Bs</div>"),r>0&&(c+="<div style='font-size:16px'><b>TOTAL CXC PAGOS: </b>"+r+" Bs</div>"),c+="</td><td>",l+n>0&&(c+="<div style='font-size:16px'><b>TOTAL SALDO : </b>"+(l+n)+" Bs</div>"),h>0&&(c+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+h+" Bs</div>"),c+="</td><td>",p>0&&(c+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+p+" Bs</div>"),c+="</td></tr></table>",c+="<div style='font-size:16px'><b>TOTAL TOTAL ACUENTA-GASTO: </b>"+(t+i-h)+" Bs</div>",c+="<div style='font-size:16px'><b>TOTAL TOTAL GENERAL: </b>"+(t+i+u+r-h)+" Bs</div>";let g=window.open("_blank");g.document.write(c),g.document.close()},imprimirmisventasygastos(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"HISTORIAL DE INGRESOS Y GASTOS "+e.label),o.text(5,1.5,"DE "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"Tipo V"),o.text(2.5,3,"Cant"),o.text(3.5,3,"Producto"),o.text(7,3,"Total"),o.text(8.5,3,"Acuenta"),o.text(10,3,"Saldo"),o.text(11.5,3,"Titular"),o.text(15.5,3,"Local"),o.text(19,3,"Estado"),o.setFont(void 0,"normal")}this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);var o=new jo.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0,i=0,s=0,n=0;this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(l+=.5,o.setFontSize(6),o.text(1,l+3,e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),i+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T VENTA:"),o.text(3,l+3,i+" Bs."),l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------"),l+=.5,o.text(1,l+3,"REGISTRO DE VENTAS CON RUTA"),o.setFont(void 0,"normal"),this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(l+=.5,o.setFontSize(6),o.text(1,l+3,"R-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),s+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"TR VENTA:"),o.text(3,l+3,s+" Bs.");let r=0,d=0;i+=s,l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO"),o.setFont(void 0,"normal"),this.gastos.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.precio?e.precio+" Bs":"0 Bs."),"CAJA CHICA"==e.glosa?d+=parseFloat(null!=e.precio?e.precio:0):r+=parseFloat(null!=e.precio?e.precio:0),o.text(10,l+3,e.glosa+": "+e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T GASTO:"),o.text(3,l+3,r+"Bs."),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO CAJA CHICA"),o.setFont(void 0,"normal"),this.chica.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.monto?e.monto+" Bs":"0 Bs."),d+=parseFloat(null!=e.monto?e.monto:0),o.text(10,l+3,null==e.glosa?"GASTO":e.glosa+" : "+e.motivo),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"Gasto Caja Chica:"),o.text(6,l+3,d+"Bs."),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5;let c=0;o.setFont(void 0,"bold"),o.text(1,l+3,"INGRESOS DE ANULADOS PRESTAMOS"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.totalanulado>0&&(c+=this.totalanulado,this.anulados.forEach((e=>{l+=.5,o.text(2.5,l+3,e.cantidad+""),o.text(3.5,l+3,e.inventario.nombre),o.text(7,l+3,e.efectivo+" Bs"),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T. Anulado"),o.text(3,l+3,this.totalanulado+" Bs")),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE VENTA MATERIAL"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0);let m=0;this.prestamoventa.forEach((e=>{l+=.5,o.text(1,l+3,""),o.text(2.5,l+3,e.cantidad+""),o.setFontSize(6),o.text(3.5,l+3,e.inventario.nombre),o.setFontSize(9),o.text(7,l+3,e.efectivo+" Bs."),m+=parseFloat(e.efectivo),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T MATERIAL"),o.text(3,l+3,this.totalpresventa+" Bs."),this.totalpagos>0&&(l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE PENDIENTES DE PAGO"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.rpagos.forEach((e=>{l+=.5,o.setFontSize(6),o.text(1,l+3,null!=e.fechaentrega&&""!=e.fechaentrega?"R-"+e.id:e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(3.5,l+3,null!=e.nombreproducto?e.nombreproducto.toString():""),o.text(7,l+3,null!=e.monto?e.monto+" Bs":" 0 Bs."),n+=e.monto,o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,l+4>25&&(o.addPage(),t(),l=0),o.text(1,l+3,"T.V. Pago:"),o.text(3,l+3,this.totalpagos+" Bs.")),l+4>25&&(o.addPage(),t(),l=0),o.setFontSize(11),o.setFont(void 0,"normal"),o.text(2,l+4,"T Ing Venta: "),o.setFont(void 0,"bold"),o.text(5.5,l+4,i+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5,"T Prest A: "),o.setFont(void 0,"bold"),o.text(5.5,l+5,c+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5.5,"T Mat Vent: "),o.setFont(void 0,"bold"),o.text(5.5,l+5.5,m+"Bs"),o.setFont(void 0,"normal"),o.text(8,l+4,"Total gasto: "),o.setFont(void 0,"bold"),o.text(11,l+4,r+"Bs"),o.setFont(void 0,"normal"),o.text(14,l+4,"Total saldo: "),o.setFont(void 0,"bold"),o.text(17,l+4,i-r+" Bs"),o.setFont(void 0,"normal"),o.text(2,l+4.5,"T. CxC pagos: "),o.setFont(void 0,"bold"),o.text(5.5,l+4.5,n+"Bs"),1==this.$store.state.login.user.id&&(o.setFont(void 0,"normal"),o.text(8,l+4.5,"Salarios:"),o.setFont(void 0,"bold"),o.text(11,l+4.5,this.resumenplanilla+"Bs.")),window.open(o.output("bloburl"),"_blank")},imprimirmisventasdetalle(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA DETALLE DE "+e.label+" "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"DETALLE"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimirmisventaslocal(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA LOCAL DE "+e.label+" "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"LOCAL"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimir(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL GASTOS DE "+e.label+" "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")+"</div><br>",o=0,l=0;this.gastos.length>0&&(t+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{t+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?o+=parseFloat(null!=e.precio?e.precio:0):l+=parseFloat(null!=e.precio?e.precio:0)})),t+="</table><div><b>TOTAL GASTOS: </b>"+l+" Bs</div><br>"),this.chica.length>0&&(t+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{t+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",o+=parseFloat(null!=e.monto?e.monto:0)})),t+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+o+" Bs</div><br>"),t+="<table><tr><td>",t+="</td><td>",l>0&&(t+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+l+" Bs</div>"),t+="</td><td>",o>0&&(t+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+o+" Bs</div>"),t+="</td></tr></table>";let i=window.open("_blank");i.document.write(t),i.document.close()},misgastos(){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$q.loading.show(),this.gastos=[],this.chica=[],this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),ae()("#example").DataTable().destroy(),ae()("#example2").DataTable().destroy(),this.$axios.post("https://bnaty.tuprogam.com/api/misgastos",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{ae()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{this.gastos.push({id:e.id,observacion:e.observacion,glosa:e.glosa.nombre,precio:e.precio,fecha:Se()(e.fecha).format("DD-MM-YYYY"),fecha2:Se()(e.fecha).format("YYYY-MM-DD"),hora:e.hora,user:e.user.name,gl:e.glosa})})),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.tuprogam.com/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{console.log(e.data),ae()("#example2").DataTable().destroy(),e.data.forEach((e=>{"GASTO"==e.tipo&&this.chica.push({id:e.id,motivo:e.motivo,glosa:null==e.glosa?"GASTO":e.glosa.nombre,monto:e.monto,fecha:Se()(e.fecha).format("DD-MM-YYYY"),hora:e.hora,user:e.user.name,gl:null==e.glosa?"GASTO":e.glosa})})),this.$nextTick((()=>{ae()("#example2").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],buttons:["excel","pdf"],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),ae()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})})),this.$nextTick((()=>{ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],buttons:["excel","pdf"],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),ae()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})}))})),this.$axios.post("https://bnaty.tuprogam.com/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),this.resumenplanilla=null==e.data[0].total?0:e.data[0].total})),this.$store.state.login.gastoreporteuser||(this.user=this.users.find((e=>e.id==this.$store.state.login.user.id))),this.$axios.post("https://bnaty.tuprogam.com/api/reportSale",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:null==e.cliente.local?"":e.cliente.local,titular:e.cliente.titular,user:e.user.name,fechaentrega:e.fechaentrega,tipo:e.tipo,hora:e.hora,detalles:e.detalles})})),console.log(this.ventas),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.tuprogam.com/api/misanulados",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.anulados=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.tuprogam.com/api/reportepago",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.rpagos=[],this.rpagos=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("https://bnaty.tuprogam.com/api/reporteventa",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{this.prestamoventa=[],this.prestamoventa=e.data,this.$q.loading.hide()}))}))}))}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},agregarpago(){return"FIJO"==this.empleadopago.tipo&&parseFloat(this.empleadopago.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleadopago.id,this.pago.empleado_nombre=this.empleadopago.label,this.pago.checkbox=this.checkgasto,"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/sueldo",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagosval(),this.misgastos(),this.totalcaja(),this.totalgeneral(),this.$q.loading.hide(),this.pagos=!1,this.checkgasto="CAJA",this.pago.monto=0,this.pago.tipo="",this.pago.observacion="",this.pago.fecha=X.ZP.formatDate(Date.now(),"YYYY-MM-DD")}))))},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/listEmpleado").then((e=>{this.$q.loading.hide(),this.empleados=[],e.data.forEach((e=>{e.label=e.nombre,this.empleados.push(e)})),console.log(this.empleados),this.empleadopago=this.empleados[0]}))},agregar(){return void 0!=this.glosa.id&&(this.totalgeneral(),console.log(this.montogeneral),parseFloat(this.montogeneral)<parseFloat(this.empleado.precio)?(this.$q.notify({message:"No se Tiene Fondos",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.empleado.observacion=this.empleado.observacion.toUpperCase(),this.empleado.glosa=this.glosa.nombre,this.empleado.glosa_id=this.glosa.id,void(this.boolcrear?this.$axios.post("https://bnaty.tuprogam.com/api/gasto",this.empleado).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.loading.hide(),this.misgastos(),this.listadog(),this.totalgeneral(),this.empleado.precio=0,this.empleado.observacion="",this.empleado.glosa="",this.glosa={label:""},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})):this.$axios.put("https://bnaty.tuprogam.com/api/gasto/"+this.empleado.id,this.empleado).then((e=>{this.$q.loading.hide(),this.misgastos(),this.listadog(),this.boolcrear=!0,this.empleado={fecha:X.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})))))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},printgasto(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+X.ZP.formatDate(e.fecha,"DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.precio+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.observacion+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.focus(),t.print(),t.close()},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/gasto/"+e.id).then((e=>{this.$q.loading.hide(),this.misgastos(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},updateval(e){console.log(e),this.glosa=e.gl,this.glosa.label=this.glosa.nombre,this.empleado=e,this.empleado.fecha=e.fecha2,this.boolcrear=!1,this.dialogGasto=!0},pagosval(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/empleado/"+this.empleadopago.id).then((e=>{this.listpagos=e.data,this.$q.loading.hide()}))}},computed:{totalruta(){let e=0;return this.ventas.forEach((a=>{null!=a.fechaentrega&&""!=a.fechaentrega&&e++})),e},totaldescuento(){let e=0;return this.listpagos.forEach((a=>{X.ZP.formatDate(a.fecha,"YYYY-MM")==X.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e},totalanulado(){let e=0;return this.anulados.forEach((a=>{e+=parseFloat(a.efectivo)})),e},totalpagos(){let e=0;return this.rpagos.forEach((a=>{e+=parseFloat(a.monto)})),e},totalpresventa(){let e=0;return this.prestamoventa.forEach((a=>{e+=parseFloat(a.efectivo)})),e}}};var yn=t(62025);Wn.render=wn,Wn.__scopeId="data-v-0179dc8e";const Vn=Wn;T()(Wn,"components",{QPage:V.Z,QInput:E.Z,QToggle:A.Z,QSelect:Ue.Z,QBtn:k.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QItem:ea.Z,QItemSection:aa.Z,QCardActions:M.Z,QTable:re.Z,QIcon:_.Z,QTd:ce.Z,QTooltip:ne.Z,QTr:de.Z,QBadge:ie.Z,QSpace:yn.Z,QRadio:Qo.Z}),T()(Wn,"directives",{ClosePopup:pe.Z});const xn=(0,i.HX)("data-v-29807053");(0,i.dD)("data-v-29807053");const Cn={class:"row"},_n=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),qn={class:"col-12"},En={class:"row"},An={class:"col-6 col-sm-6 q-pa-xs"},kn={class:"col-6 col-sm-6 q-pa-xs"},Dn={class:"row"},Mn={class:"col-6 col-sm-2 q-pa-xs"},On={class:"row"},Tn={class:"col-2"},Sn={class:"col-10"},Rn={class:"col-6 col-sm-2 q-pa-xs"},Un={class:"col-6 col-sm-1 q-pa-xs"},$n={class:"col-4 col-sm-1 q-pa-xs"},Nn={class:"col-4 col-sm-2 q-pa-xs"},Yn={class:"col-6 col-sm-1 q-pa-xs"},In=(0,i.Uk)("Subtotal "),Pn=(0,i.Wm)("br",null,null,-1),Ln={class:"col-6 col-sm-1 q-pa-xs"},jn={class:"col-6 col-sm-1 q-pa-xs"},Fn=(0,i.Uk)("Subtotal "),zn=(0,i.Wm)("br",null,null,-1),Zn={class:"col-6 col-sm-1 q-pa-xs"},Qn=(0,i.Uk)("Subtotal "),Bn=(0,i.Wm)("br",null,null,-1),Gn={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},Hn={class:"col-12"},Jn={class:"row"},Kn={class:"col-12 col-sm-12"},Xn={class:"row"},er=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),ar={class:"col-6 col-sm-4 q-pa-xs"},tr={class:"col-6 col-sm-4 q-pa-xs"},or={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},lr={class:"col-12"},ir={class:"col-12"},sr=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),nr={class:"row"},rr={class:"col-12 col-md-6 q-pa-xs"},dr={class:"col-12 col-md-6 q-pa-xs"},cr={class:"col-12 col-md-6 q-pa-xs"},mr={class:"col-12 col-md-6 q-pa-xs"},ur={class:"col-12  q-pa-xs flex flex-center"},pr=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),hr=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),gr={class:"row"},fr={class:"col-12 col-md-4 q-pa-xs"},br={class:"col-12 col-md-4 q-pa-xs"},vr={class:"col-12 col-md-4 q-pa-xs"},wr={class:"col-12 col-md-4 q-pa-xs"},Wr={class:"col-12 col-md-4 q-pa-xs"},yr={class:"col-12 col-md-4 q-pa-xs"},Vr={class:"col-12 col-md-4 q-pa-xs"},xr={class:"col-12 col-md-4 q-pa-xs"},Cr={class:"col-12 col-md-4 q-pa-xs flex flex-center"},_r=(0,i.Wm)("b",null," EN PRESTAMO ",-1),qr=(0,i.Wm)("b",null," VENTA ",-1),Er={class:"col-12  q-pa-xs flex flex-center"},Ar={class:"text-h6"},kr={class:"row"},Dr={class:"col-12 col-md-6 q-pa-xs"},Mr={class:"col-12 col-md-6 q-pa-xs"},Or={class:"col-12 col-md-6 q-pa-xs"},Tr={class:"col-12 col-md-6 q-pa-xs"},Sr={class:"col-12 col-md-6 q-pa-xs"},Rr={class:"col-12 col-md-6 q-pa-xs"},Ur={class:"col-12 col-md-6 q-pa-xs"},$r={class:"col-12 col-md-6 q-pa-xs"},Nr={class:"col-12 col-md-6 q-pa-xs"},Yr={class:"col-12 col-md-6 q-pa-xs"},Ir={class:"col-12 col-md-6 q-pa-xs"},Pr={class:"col-12  q-pa-xs flex flex-center"};(0,i.Cn)();const Lr=xn(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-select"),m=(0,i.up)("q-badge"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-btn-group"),g=(0,i.up)("q-tr"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:xn((()=>[(0,i.Wm)("div",Cn,[_n,(0,i.Wm)("div",qn,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:xn((()=>[(0,i.Wm)("div",En,[(0,i.Wm)("div",An,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",kn,[(0,i.Wm)(r,{dense:"",type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",Dn,[(0,i.Wm)("div",Mn,[(0,i.Wm)("div",On,[(0,i.Wm)("div",Tn,[(0,i.Wm)(d,{onClick:a[3]||(a[3]=e=>s.modalregistro=!0),class:"full-width full-height",color:"green",icon:"add_circle",size:"xs"}),s.model?((0,i.wg)(),(0,i.j4)(d,{key:0,onClick:a[4]||(a[4]=e=>{s.modcliente=s.model,s.dialog_mod=!0}),class:"full-width full-height",color:"yellow",icon:"edit",size:"xs"})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Sn,[(0,i.Wm)(c,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[5]||(a[5]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Seleccionar Cliente",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])])])]),(0,i.Wm)("div",Rn,[(0,i.Wm)(c,{modelValue:s.producto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Un,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[7]||(a[7]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$n,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Nn,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[9]||(a[9]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yn,[(0,i.Wm)(m,{class:"full-width full-height",color:"positive"},{default:xn((()=>[In,Pn,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",Ln,[(0,i.Wm)(r,{type:"number",label:"A cuenta",step:"0.1",modelValue:s.acuenta,"onUpdate:modelValue":a[10]||(a[10]=e=>s.acuenta=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",jn,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:xn((()=>[Fn,zn,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",Zn,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:xn((()=>[Qn,Bn,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",Gn,[(0,i.Wm)(d,{color:"accent",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Hn,[(0,i.Wm)("div",Jn,[(0,i.Wm)("div",Kn,[(0,i.Wm)("div",Xn,[er,e.$store.state.login.historialventadetalle?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",ar,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[11]||(a[11]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",tr,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",or,[(0,i.Wm)(d,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",lr,[(0,i.Wm)(f,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:xn((a=>[(0,i.Wm)(g,{props:a},{default:xn((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"cantidad",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.cantidad),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"producto",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.producto),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:xn((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:xn((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:xn((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:xn((()=>["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:0},{default:xn((()=>[e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"delete",color:"red",onClick:e=>n.anular(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"local_shipping",color:"info",onClick:e=>n.clickhojaruta(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:2},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",ir,[(0,i.Wm)(d,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])]),(0,i.Wm)(w,{modelValue:s.modalregistro,"onUpdate:modelValue":a[17]||(a[17]=e=>s.modalregistro=e)},{default:xn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:xn((()=>[(0,i.Wm)(b,null,{default:xn((()=>[sr])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:xn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:xn((()=>[(0,i.Wm)("div",nr,[(0,i.Wm)("div",rr,[(0,i.Wm)(r,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[13]||(a[13]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",dr,[(0,i.Wm)(r,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[14]||(a[14]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",cr,[(0,i.Wm)(r,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[15]||(a[15]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",mr,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[16]||(a[16]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ur,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:xn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[23]||(a[23]=e=>s.dialog_mod=e)},{default:xn((()=>[(0,i.Wm)(v,null,{default:xn((()=>[(0,i.Wm)(b,{class:"bg-green-14 text-white"},{default:xn((()=>[pr])),_:1}),(0,i.Wm)(b,{class:"q-pt-xs"},{default:xn((()=>[(0,i.Wm)(u,{onSubmit:n.onMod,class:"q-gutter-md"},{default:xn((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.ci,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modcliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.titular,"onUpdate:modelValue":a[19]||(a[19]=e=>s.modcliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.telefono,"onUpdate:modelValue":a[20]||(a[20]=e=>s.modcliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:s.modcliente.direccion,"onUpdate:modelValue":a[21]||(a[21]=e=>s.modcliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.observacion,"onUpdate:modelValue":a[22]||(a[22]=e=>s.modcliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[34]||(a[34]=e=>s.modalgarantia=e)},{default:xn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:xn((()=>[(0,i.Wm)(b,null,{default:xn((()=>[hr])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:xn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:xn((()=>[(0,i.Wm)("div",gr,[(0,i.Wm)("div",fr,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.model.label,"onUpdate:modelValue":a[24]||(a[24]=e=>s.model.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",br,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.model.telefono,"onUpdate:modelValue":a[25]||(a[25]=e=>s.model.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",vr,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.model.direccion,"onUpdate:modelValue":a[26]||(a[26]=e=>s.model.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",wr,[(0,i.Wm)(c,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":a[27]||(a[27]=e=>s.inventario=e),options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Wr,[(0,i.Wm)(r,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":a[28]||(a[28]=e=>s.newgarantia.cantidad=e)},null,8,["modelValue"])]),(0,i.Wm)("div",yr,[(0,i.Wm)(r,{outlined:"",type:"number",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[29]||(a[29]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vr,[(0,i.Wm)(r,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[30]||(a[30]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",xr,[(0,i.Wm)(r,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[31]||(a[31]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Cr,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[32]||(a[32]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),_r,(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[33]||(a[33]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),qr]),(0,i.Wm)("div",Er,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:xn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[46]||(a[46]=e=>s.modalhojaruta=e)},{default:xn((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:xn((()=>[(0,i.Wm)(b,null,{default:xn((()=>[(0,i.Wm)("div",Ar,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:xn((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:xn((()=>[(0,i.Wm)("div",kr,[(0,i.Wm)("div",Dr,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[35]||(a[35]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Mr,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[36]||(a[36]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Or,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[37]||(a[37]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Tr,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[38]||(a[38]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Sr,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[39]||(a[39]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Rr,[(0,i.Wm)(r,{required:"",outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[40]||(a[40]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Ur,[(0,i.Wm)(r,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[41]||(a[41]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",$r,[(0,i.Wm)(r,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[42]||(a[42]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Nr,[(0,i.Wm)(r,{required:"",outlined:"",label:"precio",modelValue:s.venta.precio,"onUpdate:modelValue":a[43]||(a[43]=e=>s.venta.precio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yr,[(0,i.Wm)(r,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[44]||(a[44]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ir,[(0,i.Wm)(r,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[45]||(a[45]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pr,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:xn((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),jr={name:"Venta",data(){return{modalregistro:!1,dialog_mod:!1,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",newgarantia:{tipo:"EN PRESTAMO"},newcliente:{},clientes:[],clientes2:[],modcliente:{},cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},modalgarantia:!1,modalhojaruta:!1,columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"titular",label:"Cliente",field:"titular"},{name:"cantidad",label:"cantidad",field:"cantidad"},{name:"producto",label:"Producto",field:"producto"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],respuesta:{},venta:{},prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.misclientes(),this.$axios.get("https://bnaty.tuprogam.com/api/listaproducto").then((e=>{e.data.forEach((e=>{"DETALLE"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("https://bnaty.tuprogam.com/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.get("https://bnaty.tuprogam.com/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.misclientes()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},misclientes(){this.$axios.get("https://bnaty.tuprogam.com/api/listacliente").then((e=>{this.clientes=[],e.data.forEach((e=>{2==e.tipocliente&&(e.label=e.ci+" "+e.titular,this.clientes.push(e))}))}))},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("https://bnaty.tuprogam.com/api/agregarcliente",this.newcliente).then((()=>{this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))},actualizarventa(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/venta/"+this.venta.id,{turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misventas(),this.modalhojaruta=!1}))},agregargarantia(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("https://bnaty.tuprogam.com/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.model.id,tipo:this.newgarantia.tipo,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={},this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.modalgarantia=!1,this.respuesta={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message.error,color:"red",position:"center",icon:"error"})}))},impboleta(e){console.log(e),this.$axios.post("https://bnaty.tuprogam.com/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},impruta(e){this.$axios.post("https://bnaty.tuprogam.com/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.tuprogam.com/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",position:"center",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",icon:"error",html:!0}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestamos "+e.model.label),t.text(5,1.5,"DE "+Se()(e.fecha4).format("DD/MM/YYYY")+" AL "+Se()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,X.ZP.formatDate(e.fecha,"DD/MM/YYYY").toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+Se()(e.fecha2).format("DD/MM/YYYY")+" AL "+Se()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(11.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(11.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"DETALLE"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,precio:e.total,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,direccion:e.direccion,envase:e.envase,telefono1:e.cliente.telefono,fechaentrega:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),telefono2:e.telefono2,user:e.user.name,turno:e.turno,hora:e.hora,observacion:e.observacion,producto:e.detalle.nombreproducto,cantidad:e.detalle.cantidad})})),console.log(this.ventas)}))},agregar(){},guardar(){return 0==this.model?(this.$q.notify({position:"center",message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",spinnerSize:"100px",icon:"error",html:!0}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,observacion:this.observacion,tipo:"DETALLE",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.notify({message:"Venta exitosa",color:"green",position:"center",icon:"info"}),this.misventas(),this.$q.dialog({message:"Deseas registrar garantia?",title:"Garantia?",cancel:!0}).onOk((()=>{this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.modalgarantia=!0})).onCancel((()=>{this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0,this.respuesta={}}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",position:"center",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};jr.render=Lr,jr.__scopeId="data-v-29807053";const Fr=jr;T()(jr,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QBtn:k.Z,QSelect:Ue.Z,QBadge:ie.Z,QTable:re.Z,QTd:ce.Z,QIcon:_.Z,QTr:de.Z,QBtnGroup:ms.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z}),T()(jr,"directives",{ClosePopup:pe.Z});const zr=(0,i.HX)("data-v-6c737c82");(0,i.dD)("data-v-6c737c82");const Zr=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"PRESTAMOS DETALLE")],-1),Qr={class:"row"},Br={class:"col-md-4 col-sm-6 q-pa-xs"},Gr={class:"col-md-4 col-sm-2 q-pa-xs"},Hr={class:"col-md-4 col-sm-2 q-pa-xs"},Jr=(0,i.Wm)("div",{class:"text-h6"},"REGISTRAR PRESTAMO",-1),Kr={class:"row"},Xr={class:"col-12 col-sm-4 q-pa-xs"},ed={class:"col-12 col-sm-2 q-pa-xs"},ad={class:"col-12 col-sm-2 q-pa-xs"},td={class:"col-12 col-sm-4 q-pa-xs"},od={class:"col-12 col-sm-6 q-pa-xs"},ld={class:"col-12 col-sm-6 q-pa-xs flex flex-center"},id={class:"col-12 col-sm-12 q-pa-xs ",style:{"text-align":"right"}},sd={class:"col-12"},nd={class:"col-12 q-pa-xs ",style:{"text-align":"right"}},rd=(0,i.Wm)("div",{class:"row"},null,-1),dd=(0,i.Wm)("span",{class:"q-ml-sm"},"You are currently not connected to any network.",-1),cd={class:"col-12 flex flex-center"},md=(0,i.Uk)(" BAJA "),ud={style:{margin:"0px",padding:"0px",border:"0px"}},pd=(0,i.Wm)("b",null,"Cant:",-1),hd=(0,i.Wm)("b",null,"Fecha:",-1),gd=(0,i.Uk)(" Imprimir "),fd=(0,i.Uk)(" Devolver "),bd=(0,i.Uk)(" Listado "),vd=(0,i.Uk)(" Modificar "),wd=(0,i.Uk)(" Baja "),Wd=(0,i.Uk)(" Eliminar "),yd=(0,i.Wm)("hr",null,null,-1),Vd={key:1},xd=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"Monto")])],-1),Cd=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),_d=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion",-1);(0,i.Cn)();const qd=zr(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-card-section"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-form"),g=(0,i.up)("q-card"),f=(0,i.up)("q-dialog"),b=(0,i.up)("q-avatar"),v=(0,i.up)("q-card-actions"),w=(0,i.up)("q-badge"),W=(0,i.up)("q-pagination"),y=(0,i.up)("q-icon"),V=(0,i.up)("q-item-section"),x=(0,i.up)("q-item"),C=(0,i.up)("q-list"),_=(0,i.up)("q-btn-dropdown"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:zr((()=>[Zr,(0,i.Wm)("div",Qr,[(0,i.Wm)("div",Br,[(0,i.Wm)(r,{dense:"","use-input":"",onFilter:n.filterFn,outlined:"",label:"Seleccionar Cliente",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos},null,8,["onFilter","modelValue","options"])]),(0,i.Wm)("div",Gr,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Hr,[(0,i.Wm)(c,{color:"green",dense:"",label:"REGISTRAR",onClick:n.validarReg},null,8,["onClick"])])]),(0,i.Wm)(f,{modelValue:s.dialogReg,"onUpdate:modelValue":a[11]||(a[11]=e=>s.dialogReg=e),persistent:""},{default:zr((()=>[(0,i.Wm)(g,{style:{width:"700px","max-width":"80vw"}},{default:zr((()=>[(0,i.Wm)(m,null,{default:zr((()=>[Jr])),_:1}),(0,i.Wm)(m,null,{default:zr((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:zr((()=>[(0,i.Wm)("div",Kr,[(0,i.Wm)("div",Xr,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",ed,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.cantidad=e),n.calcular],type:"number",rules:[e=>e>0||"Ingrese valor"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,i.Wm)("div",ad,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[5]||(a[5]=e=>s.efectivo=e),type:"number",step:"0.01"},null,8,["modelValue"])]),(0,i.Wm)("div",td,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[6]||(a[6]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",od,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",ld,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[8]||(a[8]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)]),(0,i.Wm)("div",id,[s.boolmod?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",label:"agregar",icon:"send",color:"positive",type:"submit"}))]),(0,i.Wm)("div",sd,[(0,i.Wm)(p,{dense:"",rows:s.listPrestamo,columns:s.colregistro,"row-key":"name"},{"body-cell-op":zr((e=>[(0,i.Wm)(u,{key:"op",props:e},{default:zr((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delListPres(e)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,i.Wm)("div",nd,[0==s.listPrestamo.length?(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",label:"CANCELAR",color:"red"},null,512)),[[E]]):(0,i.kq)("",!0),s.listPrestamo.length>=1?((0,i.wg)(),(0,i.j4)(c,{key:1,dense:"",label:"FINALIZAR",color:"info",onClick:a[10]||(a[10]=e=>n.impresionList())})):(0,i.kq)("",!0),s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:2,dense:"",label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):(0,i.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),rd,(0,i.Wm)(f,{modelValue:s.dialogAdd,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dialogAdd=e),persistent:""},{default:zr((()=>[(0,i.Wm)(g,null,{default:zr((()=>[(0,i.Wm)(m,{class:"row items-center"},{default:zr((()=>[(0,i.Wm)(b,{icon:"signal_wifi_off",color:"primary","text-color":"white"}),dd])),_:1}),(0,i.Wm)(v,{align:"right"},{default:zr((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancel",color:"primary"},null,512),[[E]]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Turn on Wifi",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),2==s.tab?((0,i.wg)(),(0,i.j4)(w,{key:0,class:"full-width text-h6 flex flex-center text-black text-bold",color:"red"},{default:zr((()=>[(0,i.Uk)(" TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs. ",1)])),_:1})):(0,i.kq)("",!0),(0,i.Wm)("div",cd,[(0,i.Wm)(W,{modelValue:s.pagination.page,"onUpdate:modelValue":a[13]||(a[13]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[14]||(a[14]=e=>n.listadoprestamo()),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{color:"green",icon:"save",label:"Exportar Excel",onClick:n.exportarExcel,"no-caps":"",dense:"",size:"10px"},null,8,["onClick"])]),(0,i.Wm)(p,{title:"Lista de prestamo en detalle",rows:s.listadop,columns:s.colprestamo,filter:s.filter,flat:"",dense:"",bordered:"",pagination:s.pagination,"onUpdate:pagination":a[17]||(a[17]=e=>s.pagination=e),"rows-per-page-options":[0],"row-key":"name","wrap-cells":"","hide-bottom":""},{"top-right":zr((()=>[(0,i.Wm)(r,{modelValue:s.estado,"onUpdate:modelValue":[a[15]||(a[15]=e=>s.estado=e),n.listadoprestamo],options:s.estados,label:"ESTADO",outlined:"",dense:""},null,8,["modelValue","options","onUpdate:modelValue"]),(0,i.Wm)(d,{outlined:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[16]||(a[16]=e=>s.filter=e),n.listadoprestamo],placeholder:"Buscar"},{append:zr((()=>[(0,i.Wm)(y,{name:"search"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),"body-cell-prestado":zr((e=>[(0,i.Wm)(u,{key:"prestado",props:e,style:e.row.prestado>0?"color:green;font-size:20px; font-weight: bold;":"color:red;font-size:20px; font-weight: bold;"},{default:zr((()=>[(0,i.Uk)((0,R.zw)(e.row.prestado),1)])),_:2},1032,["props","style"])])),"body-cell-observacion":zr((e=>[(0,i.Wm)(u,{key:"observacion",props:e},{default:zr((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":zr((e=>[(0,i.Wm)(u,{key:"estado",props:e},{default:zr((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:0,color:"negative"},{default:zr((()=>[md])),_:1})):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:1,color:"amber"},{default:zr((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:2,color:"positive"},{default:zr((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:3,color:"blue"},{default:zr((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":zr((e=>[(0,i.Wm)(u,{key:"logprestamos",props:e},{default:zr((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",ud,[pd,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),hd,(0,i.Uk)((0,R.zw)(e.fecha),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":zr((e=>[(0,i.Wm)(u,{key:"telfono",props:e},{default:zr((()=>[""!=e.row.telefono?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-motivoanulacion":zr((e=>[(0,i.Wm)(u,{key:"motivoanulacion",props:e},{default:zr((()=>[""!=e.row.motivoAnulacion&&null!=e.row.motivoAnulacion?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verAnulacion(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-fisico":zr((e=>[(0,i.Wm)(u,{key:"fisico",props:e},{default:zr((()=>[""!=e.row.fisico?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verFisico(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":zr((a=>[(0,i.Wm)(u,{key:"opcion",props:a},{default:zr((()=>[(0,i.Wm)(_,{color:"primary",label:"Opciones",dense:"",size:"10px","no-caps":""},{default:zr((()=>[(0,i.Wm)(C,null,{default:zr((()=>["EN PRESTAMO"==a.row.estado||"DEVUELTO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:0,clickable:"",onClick:e=>n.onPrint(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"print",color:"info","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[gd])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:1,clickable:"",onClick:e=>n.onDev(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"refresh",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[fd])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(x,{clickable:"",onClick:e=>n.onList(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"list",color:"green","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[bd])),_:1})])),_:2},1032,["onClick"]),[[E]]),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:2,clickable:"",onClick:e=>n.onMod(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"edit",color:"yellow","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[vd])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:3,clickable:"",onClick:e=>n.onEliminar(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"delete",color:"red-12","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[wd])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:4,clickable:"",onClick:e=>n.ondelete(a.row),dense:""},{default:zr((()=>[(0,i.Wm)(V,{avatar:""},{default:zr((()=>[(0,i.Wm)(b,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(V,null,{default:zr((()=>[Wd])),_:1})])),_:2},1032,["onClick"])),[[E]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination"]),yd,1==s.tab?((0,i.wg)(),(0,i.j4)("table",Vd,[xd,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(f,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[20]||(a[20]=e=>s.dialog_dev=e)},{default:zr((()=>[(0,i.Wm)(g,{style:{"min-width":"350px"}},{default:zr((()=>[(0,i.Wm)(m,null,{default:zr((()=>[Cd])),_:1}),(0,i.Wm)(h,{onSubmit:n.devolver,class:"q-gutter-md"},{default:zr((()=>[(0,i.Wm)(m,{class:"q-pt-none"},{default:zr((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[18]||(a[18]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[19]||(a[19]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(f,{modelValue:s.dialog_list,"onUpdate:modelValue":a[21]||(a[21]=e=>s.dialog_list=e)},{default:zr((()=>[(0,i.Wm)(g,{style:{"min-width":"350px"}},{default:zr((()=>[(0,i.Wm)(m,null,{default:zr((()=>[_d])),_:1}),(0,i.Wm)(m,{class:"q-pt-none"},{default:zr((()=>[(0,i.Wm)(p,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name","rows-per-page-options":[0]},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:zr((e=>[(0,i.Wm)(u,{key:"op",props:e},{default:zr((()=>[(0,i.Wm)(c,{color:"info",icon:"print",dense:"",onClick:a=>n.printDevuelto(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delDevuelto(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));class Ed{static export(e,a){const t={fileName:a};oe()(e,t)}}const Ad={name:"Venta",data(){return{colregistro:[{label:"OP",name:"op",field:"op"},{label:"CANT",name:"cantidad",field:"cantidad"},{label:"TIPO",name:"tipo",field:"tipo"},{label:"MAT",name:"inventario",field:"inventario"},{label:"OBS",name:"obs",field:"observacion"}],tab:2,dialogReg:!1,dialogAdd:!1,estados:["TODO","EN PRESTAMO","DEVUELTO","ANULADO","VENTA"],estado:"TODO",prestamos:[],cliente:{label:""},inventarios:[],inventario:"",cantidades:[],cantidad:1,fisico:"",efectivo:0,observacion:"",tipo:"EN PRESTAMO",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},prestamo_id:"",listado:[],listadop:[],dev:{},reportepres:[],options:[],boolmod:!1,filter:"",listPrestamo:[],fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),colum:[{name:"op",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"fecha",field:e=>X.ZP.formatDate(e.fecha,"DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id",sortable:!0},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY")+" "+Se()(e.created_at).format("LT"),sortable:!0},{name:"fechaAnulacion",label:"FECHA ANULACION",field:e=>Se()(e.fechaAnulacion).format("DD/MM/YYYY"),sortable:!0},{name:"motivoanulacion",label:"MOTIVO ANULACION",field:e=>e.motivoAnulacion,sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"fisico",label:"FISICO",field:"fisico",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}],pagination:{page:1,rowsPerPage:20,rowsNumber:0,last_page:0}}},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("https://bnaty.tuprogam.com/api/listInv").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0],console.log(this.inventario),this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{exportarExcel(){let e=[{columns:[{label:"Id",value:"id"},{label:"Fecha",value:"fecha"},{label:"Cliente",value:"cliente"},{label:"Telefono",value:"telefono"},{label:"Inventario",value:"inventario"},{label:"Cantidad",value:"cantidad"},{label:"Efectivo",value:"efectivo"},{label:"Estado",value:"estado"},{label:"Observacion",value:"observacion"},{label:"Fisico",value:"fisico"},{label:"Motivo Anulacion",value:"motivoAnulacion"},{label:"Fecha Anulacion",value:"fechaAnulacion"},{label:"Prestado",value:"prestado"},{label:"User",value:"user"}],content:this.listadop.map((e=>({id:e.id,fecha:Se()(e.fecha).format("DD/MM/YYYY"),cliente:e.cliente.titular,telefono:e.cliente.telefono,inventario:e.inventario.nombre,cantidad:e.cantidad,efectivo:e.efectivo,estado:e.estado,observacion:e.observacion,fisico:e.fisico,motivoAnulacion:e.motivoAnulacion,fechaAnulacion:Se()(e.fechaAnulacion).format("DD/MM/YYYY"),prestado:e.prestado,user:e.user.name})))}];Ed.export(e,"prestamos")},validarReg(){if(""==this.cliente||null==this.cliente)return this.$q.notify({message:"Debe Selecionar Cliente",color:"red",icon:"info"}),!1;void 0!=this.cliente.id?this.dialogReg=!0:this.$q.notify({message:"Debe Selecionar Cliente",color:"red",icon:"info"})},delListPres(e){console.log(e.rowIndex),e.rowIndex>-1&&this.listPrestamo.splice(e.rowIndex,1)},impresionList(){this.$axios.post("https://bnaty.tuprogam.com/api/regprestamo",{listado:this.listPrestamo}).then((e=>{console.log(e.data);let a=e.data[0].cliente,t=e.data[0].user,o=e.data[0].fecha,l=!1,i="";e.data.forEach((e=>{"EN PRESTAMO"==e.estado&&(e.estado="PRESTAMO",l=!0),i+="<tr>\n                  <td>"+e.cantidad+"</td>\n                  <td>"+e.inventario.nombre+"</td>\n                  <td>"+e.efectivo+"</td>\n                  <td>"+e.estado+"</td>\n                  </tr>\n        "}));let s="\n        <style>\n        .textc{text-align:center}\n        .leyenda{text-align:justify;\n        size-font 6px;}\n        </style>\n        <div style=\"padding:5px\">\n        <div style='text-align:center; font-size:10px;'>Detalle de Prestamo o <br> Venta de Envases</div>\n        <div style='text-align:right'>"+o+"</div>\n        <div><b>Nombre:</b> "+a.titular+"</div>\n        <div><b>Usuario: </b>"+t.name+'</div>\n        <table style="width: 100%;">\n        <tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>'+i+'</table>\n        <hr style=" border: 4px dashed;"/>';l&&(s+="<div style='text-align:right'>"+o+"</div>\n        <div><b>NOMBRE</b> "+a.titular+'</div>\n        <table style="width: 100%; ">\n        <tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>'+i+'</table>\n        <br>\n        <br>\n        <div class="textc">Firma</div>\n        <br>\n        <div class="leyenda"><b>*  Accepto todas las condiciones y terminos de prestamo de envases</b></div></div>'),console.log(s);let n=window.open("","Imprimir","width=1000,height=1000");n.document.write(s),n.document.close(),n.print(),n.close(),this.dialogReg=!1,this.listPrestamo=[],this.filtrarlista(),this.cajaprestamo()}))},onPrint(e){this.$axios.post("https://bnaty.tuprogam.com/api/impresion/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},printDevuelto(e){this.$axios.post("https://bnaty.tuprogam.com/api/impdevolucion/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delDevuelto(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Devolucion"}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/logprestamo/"+e.id).then((e=>{this.dialog_list=!1,this.$axios.get("https://bnaty.tuprogam.com/api/listInv").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0],this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:"<h6>"+e.cliente.telefono+"</h6>",html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verFisico(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.fisico}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verAnulacion(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.motivoAnulacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.options.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fecha:this.fecha,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.boolmod=!1,this.dialogReg=!1,this.cantidad=1,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.cliente={label:""},this.inventario=this.inventarios[0],this.efectivo=0,this.observacion="",this.listadoprestamo(),this.listclientes(),this.cajaprestamo(),this.reporte(),this.$q.loading.hide()}))},reporte(){this.$axios.post("https://bnaty.tuprogam.com/api/reportecliente").then((e=>{this.reportepres=[],e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&this.reportepres.push(e),2==this.tab&&2==e.tipocliente&&this.reportepres.push(e)}))}))},listadoprestamo(){this.$axios.post("https://bnaty.tuprogam.com/api/listPag",{estado:this.estado,tipo:this.tab,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.listadop=[],this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){this.$q.dialog({title:"Dar de Baja",message:"Motivo de Baja",prompt:{model:"",type:"textarea"}}).onOk((a=>{e.motivo=a,this.$axios.post("https://bnaty.tuprogam.com/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("https://bnaty.tuprogam.com/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},onMod(e){console.log(e),this.boolmod=!0,this.dialogReg=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fecha=e.fecha,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.cliente.label=this.cliente.ci+" "+this.cliente.titular,this.inventario=e.inventario},cajaprestamo(){this.$axios.post("https://bnaty.tuprogam.com/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},listclientes(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/listacliente").then((e=>{this.prestamos=[],console.log(e.data),e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&(e.titular=e.local,e.label=e.ci+" "+e.titular,this.prestamos.push(e)),2==this.tab&&2==e.tipocliente&&(e.label=e.ci+" "+e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.cliente={label:""},this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/cliente").then((e=>{this.prestamos=[],e.data.forEach((e=>{e.label=e.ci+" "+e.titular})),this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):void 0==this.cliente.id?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.listPrestamo.push({fecha:this.fecha,cliente_id:this.cliente.id,efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,tipo:this.tipo,inventario_id:this.inventario.id,inventario:this.inventario.nombre}),this.cantidad=1,this.efectivo=0,this.fisico="",this.observacion="",this.inventario=this.inventario[0],void this.calcular)},devolver(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/logprestamo",{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.listadoprestamo(),this.cajaprestamo(),this.dialog_dev=!1,this.dev={},this.$q.loading.hide(),this.filtrarlista()}))},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new jo.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto&&"ANULADO"!=l.estado?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};var kd=t(87300);Ad.render=qd,Ad.__scopeId="data-v-6c737c82";const Dd=Ad;T()(Ad,"components",{QPage:V.Z,QSelect:Ue.Z,QInput:E.Z,QBtn:k.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QTable:re.Z,QTd:ce.Z,QAvatar:ue.Z,QCardActions:M.Z,QBadge:ie.Z,QPagination:kd.Z,QIcon:_.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z}),T()(Ad,"directives",{ClosePopup:pe.Z});const Md=(0,i.HX)("data-v-c75a4fea");(0,i.dD)("data-v-c75a4fea");const Od=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"PRESTAMOS LOCAL")],-1),Td={class:"row"},Sd={class:"col-12 col-sm-3 q-pa-xs"},Rd={class:"col-md-4 col-sm-3 q-pa-xs"},Ud={class:"col-md-4 col-sm-3 q-pa-xs"},$d=(0,i.Wm)("div",{class:"text-h6"},"REGISTRAR PRESTAMO",-1),Nd={class:"row"},Yd={class:"col-12 col-sm-4 q-pa-xs"},Id={class:"col-12 col-sm-2 q-pa-xs"},Pd={class:"col-12 col-sm-2 q-pa-xs"},Ld={class:"col-12 col-sm-4 q-pa-xs"},jd={class:"col-12 col-sm-6 q-pa-xs"},Fd={class:"col-12 col-sm-6 q-pa-xs flex flex-center"},zd={class:"col-12 col-sm-12 q-pa-xs ",style:{"text-align":"right"}},Zd={class:"col-12"},Qd={class:"col-12  q-pa-xs ",style:{"text-align":"right"}},Bd={key:0,class:"text-h5"},Gd={class:"col-12 flex flex-center"},Hd=(0,i.Uk)(" BAJA "),Jd={style:{margin:"0px",padding:"0px",border:"0px"}},Kd=(0,i.Wm)("b",null,"Cant:",-1),Xd=(0,i.Wm)("b",null,"Fecha: ",-1),ec=(0,i.Uk)("Devolver"),ac=(0,i.Uk)("Listar"),tc=(0,i.Uk)("Dar Baja"),oc=(0,i.Uk)("Eliminar"),lc=(0,i.Wm)("hr",null,null,-1),ic={key:1,id:"example",style:{width:"100%"},class:"cell-border"},sc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"Monto")])],-1),nc=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),rc=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion",-1);(0,i.Cn)();const dc=Md(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-card-section"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-form"),g=(0,i.up)("q-card"),f=(0,i.up)("q-dialog"),b=(0,i.up)("q-pagination"),v=(0,i.up)("q-icon"),w=(0,i.up)("q-badge"),W=(0,i.up)("q-avatar"),y=(0,i.up)("q-item-section"),V=(0,i.up)("q-item-label"),x=(0,i.up)("q-item"),C=(0,i.up)("q-list"),_=(0,i.up)("q-btn-dropdown"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:Md((()=>[Od,(0,i.Wm)("div",Td,[(0,i.Wm)("div",Sd,[(0,i.Wm)(r,{"input-debounce":"0",dense:"","use-input":"",outlined:"",label:"Seleccionar local",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos,onFilter:n.filterFn},null,8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",Rd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ud,[(0,i.Wm)(c,{color:"green",dense:"",label:"REGISTRAR",onClick:a[3]||(a[3]=e=>n.validarReg())})])]),(0,i.Wm)(f,{modelValue:s.dialogReg,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dialogReg=e),persistent:""},{default:Md((()=>[(0,i.Wm)(g,{style:{width:"700px","max-width":"80vw"}},{default:Md((()=>[(0,i.Wm)(m,null,{default:Md((()=>[$d])),_:1}),(0,i.Wm)(m,null,{default:Md((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Md((()=>[(0,i.Wm)("div",Nd,[(0,i.Wm)("div",Yd,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Id,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[5]||(a[5]=e=>s.cantidad=e),n.calcular],type:"number",rules:[e=>e>0||"Ingrese valor"]},null,8,["modelValue","onUpdate:modelValue","rules"])]),(0,i.Wm)("div",Pd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.efectivo=e),type:"number",step:"0.01"},null,8,["modelValue"])]),(0,i.Wm)("div",Ld,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[7]||(a[7]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",jd,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Fd,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[10]||(a[10]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)]),(0,i.Wm)("div",zd,[s.boolmod?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",label:"agregar",icon:"send",color:"positive",type:"submit"}))]),(0,i.Wm)("div",Zd,[(0,i.Wm)(p,{dense:"",rows:s.listPrestamo,columns:s.colregistro,"row-key":"name"},{"body-cell-op":Md((e=>[(0,i.Wm)(u,{key:"op",props:e},{default:Md((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delListPres(e)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])]),(0,i.Wm)("div",Qd,[0==s.listPrestamo.length?(0,i.wy)(((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",label:"CANCELAR",color:"red"},null,512)),[[E]]):(0,i.kq)("",!0),s.listPrestamo.length>=1?((0,i.wg)(),(0,i.j4)(c,{key:1,dense:"",label:"FINALIZAR",color:"info",onClick:a[11]||(a[11]=e=>n.impresionList())})):(0,i.kq)("",!0),s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:2,dense:"",label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):(0,i.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),2==s.tab?((0,i.wg)(),(0,i.j4)("div",Bd,"TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs.",1)):(0,i.kq)("",!0),(0,i.Wm)("div",Gd,[(0,i.Wm)(b,{modelValue:s.pagination.page,"onUpdate:modelValue":a[13]||(a[13]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[14]||(a[14]=e=>n.listadoprestamo()),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])]),(0,i.Wm)(p,{title:"Lista de prestamos local",rows:s.listadop,flat:"",bordered:"",columns:s.colprestamo,pagination:s.pagination,"onUpdate:pagination":a[17]||(a[17]=e=>s.pagination=e),filter:s.filter,"rows-per-page-options":[0],"row-key":"name","hide-bottom":""},{"top-right":Md((()=>[(0,i.Wm)(r,{modelValue:s.estado,"onUpdate:modelValue":[a[15]||(a[15]=e=>s.estado=e),n.listadoprestamo],options:s.estados,label:"ESTADO",outlined:"",dense:""},null,8,["modelValue","options","onUpdate:modelValue"]),(0,i.Wm)(d,{borderless:"",dense:"",outlined:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[16]||(a[16]=e=>s.filter=e),n.listadoprestamo],placeholder:"Buscar"},{append:Md((()=>[(0,i.Wm)(v,{name:"search"})])),_:1},8,["modelValue","onUpdate:modelValue"])])),"body-cell-prestado":Md((e=>[(0,i.Wm)(u,{key:"prestado",props:e,style:e.row.prestado>0?"color:red;font-size:20px; font-weight: bold;":"color:green;font-size:20px; font-weight: bold;"},{default:Md((()=>[(0,i.Uk)((0,R.zw)(e.row.prestado),1)])),_:2},1032,["props","style"])])),"body-cell-observacion":Md((e=>[(0,i.Wm)(u,{key:"observacion",props:e},{default:Md((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":Md((e=>[(0,i.Wm)(u,{key:"estado",props:e},{default:Md((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:0,color:"red"},{default:Md((()=>[Hd])),_:1})):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:1,color:"amber"},{default:Md((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:2,color:"positive"},{default:Md((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(w,{key:3,color:"blue"},{default:Md((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":Md((e=>[(0,i.Wm)(u,{key:"logprestamos",props:e},{default:Md((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",Jd,[Kd,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),Xd,(0,i.Uk)((0,R.zw)(n.cambiofecha(e.fecha)),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":Md((e=>[(0,i.Wm)(u,{key:"telfono",props:e},{default:Md((()=>[(0,i.Wm)(c,{icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-fisico":Md((e=>[(0,i.Wm)(u,{key:"fisico",props:e},{default:Md((()=>[""!=e.row.fisico?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",color:"accent",onClick:a=>n.verFisico(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":Md((a=>[(0,i.Wm)(u,{key:"opcion",props:a},{default:Md((()=>[(0,i.Wm)(_,{color:"primary",label:"Opcion","no-caps":"",dense:""},{default:Md((()=>[(0,i.Wm)(C,null,{default:Md((()=>["EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:0,clickable:"",onClick:e=>n.onDev(a.row)},{default:Md((()=>[(0,i.Wm)(y,{avatar:""},{default:Md((()=>[(0,i.Wm)(W,{icon:"refresh",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(y,null,{default:Md((()=>[(0,i.Wm)(V,null,{default:Md((()=>[ec])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(x,{clickable:"",onClick:e=>n.onList(a.row)},{default:Md((()=>[(0,i.Wm)(y,{avatar:""},{default:Md((()=>[(0,i.Wm)(W,{icon:"list",color:"green","text-color":"white"})])),_:1}),(0,i.Wm)(y,null,{default:Md((()=>[(0,i.Wm)(V,null,{default:Md((()=>[ac])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[E]]),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:1,clickable:"",onClick:e=>n.onEliminar(a.row)},{default:Md((()=>[(0,i.Wm)(y,{avatar:""},{default:Md((()=>[(0,i.Wm)(W,{icon:"stop",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(y,null,{default:Md((()=>[(0,i.Wm)(V,null,{default:Md((()=>[tc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(x,{key:2,clickable:"",onClick:e=>n.ondelete(a.row)},{default:Md((()=>[(0,i.Wm)(y,{avatar:""},{default:Md((()=>[(0,i.Wm)(W,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(y,null,{default:Md((()=>[(0,i.Wm)(V,null,{default:Md((()=>[oc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[E]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","filter"]),lc,1==s.tab?((0,i.wg)(),(0,i.j4)("table",ic,[sc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(f,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[20]||(a[20]=e=>s.dialog_dev=e)},{default:Md((()=>[(0,i.Wm)(g,{style:{"min-width":"350px"}},{default:Md((()=>[(0,i.Wm)(m,null,{default:Md((()=>[nc])),_:1}),(0,i.Wm)(h,{onSubmit:n.devolver,class:"q-gutter-md"},{default:Md((()=>[(0,i.Wm)(m,{class:"q-pt-none"},{default:Md((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[18]||(a[18]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[19]||(a[19]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(f,{modelValue:s.dialog_list,"onUpdate:modelValue":a[21]||(a[21]=e=>s.dialog_list=e)},{default:Md((()=>[(0,i.Wm)(g,{style:{"min-width":"350px"}},{default:Md((()=>[(0,i.Wm)(m,null,{default:Md((()=>[rc])),_:1}),(0,i.Wm)(m,{class:"q-pt-none"},{default:Md((()=>[(0,i.Wm)(p,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name","rows-per-page-options":[0]},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:Md((e=>[(0,i.Wm)(u,{key:"op",props:e},{default:Md((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delDevuelto(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),cc={name:"Venta",data(){return{colregistro:[{label:"OP",name:"op",field:"op"},{label:"CANT",name:"cantidad",field:"cantidad"},{label:"TIPO",name:"tipo",field:"tipo"},{label:"MAT",name:"inventario",field:"inventario"},{label:"OBS",name:"obs",field:"observacion"}],dialogReg:!1,listPrestamo:[],tab:1,estados:["TODO","EN PRESTAMO","DEVUELTO","ANULADO","VENTA"],estado:"TODO",prestamos:[],cliente:{label:""},inventarios:[],inventario:"",cantidades:[],cantidad:1,fisico:"",efectivo:0,observacion:"",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},listado:[],listadop:[],dev:{},tipo:"EN PRESTAMO",reportepres:[],options:[],fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),boolmod:!1,filter:"",pagination:{page:1,rowsPerPage:20,rowsNumber:0,last_page:0},colum:[{name:"op",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"fecha",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"id",label:"ID",field:"id",sortable:!0},{name:"local",label:"LOCAL",field:e=>e.cliente.local,sortable:!0,align:"left"},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY")+" "+Se()(e.created_at).format("LT"),sortable:!0},{name:"fechaAnulacion",label:"FECHA ANULACION",field:e=>Se()(e.fechaAnulacion).format("DD/MM/YYYY"),sortable:!0},{name:"motivoanulacion",label:"MOTIVO ANULACION",field:e=>e.motivoAnulacion,sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}]}},mounted(){ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("https://bnaty.tuprogam.com/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0]})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{validarReg(){if(""==this.cliente||null==this.cliente)return this.$q.notify({message:"Debe Selecionar Cliente",color:"red",icon:"info"}),!1;void 0!=this.cliente.id?this.dialogReg=!0:this.$q.notify({message:"Debe Selecionar Cliente",color:"red",icon:"info"})},delListPres(e){console.log(e.rowIndex),e.rowIndex>-1&&this.listPrestamo.splice(e.rowIndex,1)},impresionList(){this.$axios.post("https://bnaty.tuprogam.com/api/regprestamo",{listado:this.listPrestamo}).then((e=>{console.log(e.data);let a=e.data[0].cliente,t=e.data[0].user,o=e.data[0].fecha,l=!1,i="";e.data.forEach((e=>{"EN PRESTAMO"==e.estado&&(e.estado="PRESTAMO",l=!0),i+="<tr>\n                  <td>"+e.cantidad+"</td>\n                  <td>"+e.inventario.nombre+"</td>\n                  <td>"+e.efectivo+"</td>\n                  <td>"+e.estado+"</td>\n                  </tr>\n        "}));let s="\n        <style>\n        .textc{text-align:center}\n        .leyenda{text-align:justify;\n        size-font 6px;}\n        </style>\n        <div style=\"padding:5px\">\n         <div style='text-align:center; font-size:10px;'>Detalle de Prestamo o <br> Venta de Envases</div>\n        <div style='text-align:right'>"+o+"</div>\n        <div><b>Nombre:</b> "+a.titular+"</div>\n        <div><b>Usuario: </b>"+t.name+'</div>\n        <table style="width: 100%;">\n        <tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>'+i+'</table>\n        <hr style=" border: 4px dashed;"/>';l&&(s+="<div style='text-align:right'>"+o+"</div>\n        <div><b>NOMBRE</b> "+a.titular+'</div>\n        <table style="width: 100%; ">\n        <tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>'+i+'</table>\n        <br>\n        <br>\n        <div class="textc">Firma</div>\n        <br>\n        <div class="leyenda"><b>*  Accepto todas las condiciones y terminos de prestamo de envases </b></div></div>'),console.log(s);let n=window.open("","Imprimir","width=1000,height=1000");n.document.write(s),n.document.close(),n.print(),n.close(),this.dialogReg=!1,this.listPrestamo=[],this.filtrarlista(),this.cajaprestamo()}))},delDevuelto(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Devolucion"}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/logprestamo/"+e.id).then((e=>{this.dialog_list=!1,this.$axios.get("https://bnaty.tuprogam.com/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0]})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:"<h6>"+e.cliente.telefono+"</h6>",html:!0}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},verFisico(e){this.$q.dialog({title:" Cliente: "+e.cliente.titular,message:e.fisico}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.options.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},reporte(){this.$axios.post("https://bnaty.tuprogam.com/api/reportecliente").then((e=>{this.reportepres=[],ae()("#example").DataTable().destroy(),e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&this.reportepres.push(e),2==this.tab&&2==e.tipocliente&&this.reportepres.push(e)})),this.$nextTick((()=>{ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},listadoprestamo(){this.$axios.post("https://bnaty.tuprogam.com/api/listPag",{estado:this.estado,tipo:this.tab,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.listadop=[],this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){this.$q.dialog({title:"Dar de Baja",message:"Motivo de Baja",prompt:{model:"",type:"textarea"}}).onOk((a=>{e.motivo=a,this.$axios.post("https://bnaty.tuprogam.com/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))})).onCancel((()=>{})).onDismiss((()=>{}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("https://bnaty.tuprogam.com/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},cajaprestamo(){this.$axios.post("https://bnaty.tuprogam.com/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fisico:this.fisico,fecha:this.fecha,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.listadoprestamo(),this.boolmod=!1,this.dialogReg=!1,this.$q.loading.hide(),this.cantidad=1,this.cliente={label:""},this.inventario=this.inventarios[0],this.efectivo=0,this.observacion=""})),this.filtrarlista(),this.cajaprestamo()},listclientes(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/listacliente").then((e=>{console.log(e.data),this.prestamos=[],e.data.forEach((e=>{1==this.tab&&1==e.tipocliente&&(e.label=e.ci+" "+e.local+" "+e.titular,this.prestamos.push(e)),2==this.tab&&2==e.tipocliente&&(e.label=e.ci+" "+e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.cliente={label:""},this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/cliente").then((e=>{this.prestamos=[],e.data.forEach((e=>{e.label=e.ci+" "+e.local+" "+e.titular,this.prestamos.push(e)})),this.options=this.prestamos,this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):void 0==this.cliente.id?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.listPrestamo.push({fecha:this.fecha,cliente_id:this.cliente.id,efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,tipo:this.tipo,inventario_id:this.inventario.id,inventario:this.inventario.nombre}),this.cantidad=1,this.efectivo=0,this.fisico="",this.observacion="",this.inventario=this.inventario[0],void this.calcular)},onMod(e){console.log(e),this.boolmod=!0,this.dialogReg=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.cliente.label=this.cliente.ci+" "+this.cliente.local+" "+this.cliente.titular,this.inventario=e.inventario,this.fecha=e.fecha},devolver(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/logprestamo",{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{console.log(e.data);let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.dialog_dev=!1,this.listadoprestamo(),this.cajaprestamo(),this.dev={},this.$q.loading.hide()}))},cambiofecha(e){return Se()(e).format("DD/MM/YYYY")},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new jo.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};var mc=t(2350);cc.render=dc,cc.__scopeId="data-v-c75a4fea";const uc=cc;T()(cc,"components",{QPage:V.Z,QSelect:Ue.Z,QInput:E.Z,QBtn:k.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QTable:re.Z,QTd:ce.Z,QPagination:kd.Z,QIcon:_.Z,QBadge:ie.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z,QAvatar:ue.Z,QItemLabel:mc.Z}),T()(cc,"directives",{ClosePopup:pe.Z});const pc=(0,i.HX)("data-v-5bdac183");(0,i.dD)("data-v-5bdac183");const hc=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL DE VENTAS")],-1),gc=(0,i.Wm)("div",{class:"col-12"},null,-1),fc={class:"row"},bc={class:"col-3  q-pa-xs"},vc={key:0,class:"col-3  q-pa-xs"},wc={class:"col-3"},Wc={class:"col-3  q-pa-xs flex flex-center"},yc={class:"col-12"},Vc={class:" responsive"},xc={id:"example",style:{width:"100%"},class:"cell-border"},Cc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Observacion"),(0,i.Wm)("th",null,"Opcion")])],-1),_c={class:"hidden"},qc=(0,i.Uk)("LOCAL"),Ec=(0,i.Uk)("CLIENTE"),Ac=(0,i.Uk)("Listado Pago"),kc=(0,i.Uk)("Detalle Venta"),Dc=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),Mc=(0,i.Wm)("b",null,"Obs:",-1),Oc={style:{width:"100%"}},Tc=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1),Sc=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Rc=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Uc=pc(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-table"),w=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:pc((()=>[hc,gc,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:pc((()=>[(0,i.Wm)("div",fc,[(0,i.Wm)("div",bc,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",vc,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",wc,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Wc,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",yc,[(0,i.Wm)("div",Vc,[(0,i.Wm)("table",xc,[Cc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",_c,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.id),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:pc((()=>[qc])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:pc((()=>[Ec])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:pc((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[""!=e.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",color:"purple",icon:"list",onClick:a=>n.verObs(e.observacion)},null,8,["onClick"])):(0,i.kq)("",!0)]),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:pc((()=>[(0,i.Wm)(p,null,{default:pc((()=>[Ac])),_:1})])),_:2},1032,["onClick"]),(0,i.Wm)(c,{icon:"shopping_cart",color:"accent",onClick:a=>{s.venta=e,s.modalDialog=!0},dense:""},{default:pc((()=>[(0,i.Wm)(p,null,{default:pc((()=>[kc])),_:1})])),_:2},1032,["onClick"])])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.modalDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>s.modalDialog=e)},{default:pc((()=>[(0,i.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:pc((()=>[(0,i.Wm)(h,null,{default:pc((()=>[Dc])),_:1}),(0,i.Wm)(h,null,{default:pc((()=>[(0,i.Wm)("div",null,[Mc,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",Oc,[Tc,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:pc((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[5]||(a[5]=e=>s.alert=e)},{default:pc((()=>[(0,i.Wm)(f,null,{default:pc((()=>[(0,i.Wm)(h,null,{default:pc((()=>[Sc])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:pc((()=>[(0,i.Wm)(v,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:pc((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:pc((()=>[(0,i.Wm)(f,null,{default:pc((()=>[(0,i.Wm)(h,null,{default:pc((()=>[Rc])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:pc((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:pc((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));t(79720);var $c=t(7167),Nc=t.n($c),Yc=t(90182),Ic=t.n(Yc),Pc=t(17033),Lc=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),Ic().vfs=Pc.I.vfs,window.JSZip=Nc();const jc={name:"Venta",data(){return{valcobrar:!1,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],rango:"RANGO",inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,modalDialog:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},venta:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"observacion",label:"Obs",field:"observacion"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){Lc("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{verObs(e){this.$q.dialog({title:"Observacion",message:e}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),Lc("#example").DataTable().destroy(),this.$axios.post("https://bnaty.tuprogam.com/api/listadoventa",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],Lc("#example").DataTable().destroy(),e.data.forEach((e=>{console.log(e),this.ventas.push({id:e.id,fechaord:e.fecha,fecha:Se()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,observacion:e.observacion,detalles:e.detalles})})),this.$nextTick((()=>{Lc("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};jc.render=Uc,jc.__scopeId="data-v-5bdac183";const Fc=jc;T()(jc,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QTable:re.Z,QIcon:_.Z,QTr:de.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z}),T()(jc,"directives",{ClosePopup:pe.Z});const zc=(0,i.HX)("data-v-2a3ccdce");(0,i.dD)("data-v-2a3ccdce");const Zc={class:"col-12"},Qc=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR DETALLE",-1),Bc=(0,i.Wm)("div",{class:"col-12"},null,-1),Gc={class:"row q-pa-xs"},Hc={class:"col-2"},Jc={class:"col-2"},Kc={class:"col-2"},Xc={class:"col-2"},em={class:"col-12"},am={class:" responsive"},tm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),om={class:"hidden"},lm={style:{"font-weight":"bold","font-size":"16px"}},im=(0,i.Uk)("LOCAL"),sm=(0,i.Uk)("CLIENTE"),nm=(0,i.Uk)("Listado Pago"),rm=(0,i.Uk)("Realizar Pago"),dm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),cm=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const mm=zc(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-markup-table"),g=(0,i.up)("q-card-section"),f=(0,i.up)("q-td"),b=(0,i.up)("q-table"),v=(0,i.up)("q-card-actions"),w=(0,i.up)("q-card"),W=(0,i.up)("q-dialog"),y=(0,i.up)("q-page"),V=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(y,{class:"q-pa-xs"},{default:zc((()=>[(0,i.Wm)("div",Zc,[Qc,Bc,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:zc((()=>[(0,i.Wm)("div",Gc,[(0,i.Wm)("div",Hc,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:"",dense:""},null,8,["modelValue"])]),(0,i.Wm)("div",Jc,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(r,{key:0,type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:"",dense:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Kc,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",dense:""},null,8,["modelValue","label"])]),(0,i.Wm)("div",Xc,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",dense:"","no-caps":""})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",em,[(0,i.Wm)("div",am,[(0,i.Wm)(c,{color:"red",icon:"picture_as_pdf",label:"Exportar PDF",onClick:a[4]||(a[4]=e=>n.exportPdf()),class:"q-mb-md",dense:"","no-caps":""}),(0,i.Wm)(c,{color:"green",icon:"description",label:"Exportar Excel",onClick:a[5]||(a[5]=e=>n.exportExcel()),class:"q-mb-md",dense:"","no-caps":""}),(0,i.Wm)(h,{flat:"",bordered:"",dense:"",id:"example",style:{width:"100%"},class:"cell-border"},{default:zc((()=>[tm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",om,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.id),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",lm,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:zc((()=>[im])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:zc((()=>[sm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:zc((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:zc((()=>[(0,i.Wm)(p,null,{default:zc((()=>[nm])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:zc((()=>[(0,i.Wm)(p,null,{default:zc((()=>[rm])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])),_:1})]),(0,i.Wm)(W,{modelValue:s.alert,"onUpdate:modelValue":a[6]||(a[6]=e=>s.alert=e)},{default:zc((()=>[(0,i.Wm)(w,null,{default:zc((()=>[(0,i.Wm)(g,null,{default:zc((()=>[dm])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:zc((()=>[(0,i.Wm)(b,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:zc((e=>[(0,i.Wm)(f,{key:"op",props:e},{default:zc((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(v,{align:"right"},{default:zc((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[10]||(a[10]=e=>s.dialog_pago=e)},{default:zc((()=>[(0,i.Wm)(w,null,{default:zc((()=>[(0,i.Wm)(g,null,{default:zc((()=>[cm])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:zc((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:zc((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[8]||(a[8]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number",step:"0.1","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[9]||(a[9]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[V]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})})),um={name:"Venta",data(){return{loading:!1,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),rango:"RANGO",alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>Se()(e.fecha).format("DD/MM/YYYY")+" "+Se()(e.created_at).format("HH:mm")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{exportPdf(){const e="https://bnaty.tuprogam.com/api/cuentasCobrarDetalle?fechaInicio="+this.fecha2+"&fechaFin="+this.fecha3;window.open(e,"_blank")},exportExcel(){let e=[{sheet:"Cuentas por cobrar detalle",columns:[{label:"Fecha",value:"fecha"},{label:"Local",value:"local"},{label:"Titular",value:"titular"},{label:"Total",value:"total"},{label:"A cuenta",value:"acuenta"},{label:"Saldo",value:"saldo"},{label:"Tipo cliente",value:"tipocliente"},{label:"Estado",value:"estado"},{label:"Usuario",value:"user"}],content:this.ventas.map((e=>({fecha:e.fecha,local:e.local,titular:e.titular,total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:1==e.tipocliente?"LOCAL":"CLIENTE",estado:"CANCELADO"==e.estado?"CANCELADO":"POR COBRAR",user:e.user})))}];Ed.export(e,"Cuentas por cobrar detalle")},delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{console.log(e.data),this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.$q.loading.hide(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),this.$axios.post("https://bnaty.tuprogam.com/api/listventdetalle",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:Se()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};um.render=mm,um.__scopeId="data-v-2a3ccdce";const pm=um;T()(um,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QMarkupTable:se.Z,QBadge:ie.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QTable:re.Z,QTd:ce.Z,QCardActions:M.Z}),T()(um,"directives",{ClosePopup:pe.Z});const hm=(0,i.HX)("data-v-a0e3dd3e");(0,i.dD)("data-v-a0e3dd3e");const gm={class:"col-12"},fm=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR LOCAL",-1),bm={class:"col-12 col-sm-12"},vm=(0,i.Wm)("div",{class:"col-12"},null,-1),wm={class:"row q-pa-xs"},Wm={class:"col-2"},ym={class:"col-2"},Vm={class:"col-2"},xm={class:"col-2"},Cm={class:"col-12"},_m={class:" responsive"},qm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Em={class:"hidden"},Am={style:{"font-weight":"bold","font-size":"20px"}},km=(0,i.Uk)("LOCAL"),Dm=(0,i.Uk)("CLIENTE"),Mm=(0,i.Uk)("Listado Pago"),Om=(0,i.Uk)("Realizar Pago"),Tm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Sm=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Rm=hm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-markup-table"),g=(0,i.up)("q-card-section"),f=(0,i.up)("q-td"),b=(0,i.up)("q-table"),v=(0,i.up)("q-card-actions"),w=(0,i.up)("q-card"),W=(0,i.up)("q-dialog"),y=(0,i.up)("q-page"),V=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(y,{class:"q-pa-xs"},{default:hm((()=>[(0,i.Wm)("div",gm,[fm,(0,i.Wm)("div",bm,[vm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:hm((()=>[(0,i.Wm)("div",wm,[(0,i.Wm)("div",Wm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:"",dense:""},null,8,["modelValue"])]),(0,i.Wm)("div",ym,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(r,{key:0,type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:"",dense:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Vm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",dense:""},null,8,["modelValue","label"])]),(0,i.Wm)("div",xm,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",dense:"","no-caps":""})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Cm,[(0,i.Wm)("div",_m,[(0,i.Wm)(c,{color:"red",icon:"picture_as_pdf",label:"Exportar PDF",onClick:a[4]||(a[4]=e=>n.exportPdf()),class:"q-mb-md",dense:"","no-caps":""}),(0,i.Wm)(c,{color:"green",icon:"description",label:"Exportar Excel",onClick:a[5]||(a[5]=e=>n.exportExcel()),class:"q-mb-md",dense:"","no-caps":""}),(0,i.Wm)(h,{id:"example",style:{width:"100%"},class:"cell-border",dense:"",flat:"",bordered:""},{default:hm((()=>[qm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.i},[(0,i.Wm)("td",Em,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.id),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",Am,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:hm((()=>[km])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:hm((()=>[Dm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:hm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:hm((()=>[(0,i.Wm)(p,null,{default:hm((()=>[Mm])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:hm((()=>[(0,i.Wm)(p,null,{default:hm((()=>[Om])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])),_:1})]),(0,i.Wm)(W,{modelValue:s.alert,"onUpdate:modelValue":a[6]||(a[6]=e=>s.alert=e)},{default:hm((()=>[(0,i.Wm)(w,null,{default:hm((()=>[(0,i.Wm)(g,null,{default:hm((()=>[Tm])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:hm((()=>[(0,i.Wm)(b,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:hm((e=>[(0,i.Wm)(f,{key:"op",props:e},{default:hm((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(v,{align:"right"},{default:hm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[V]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[10]||(a[10]=e=>s.dialog_pago=e)},{default:hm((()=>[(0,i.Wm)(w,null,{default:hm((()=>[(0,i.Wm)(g,null,{default:hm((()=>[Sm])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:hm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:hm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[8]||(a[8]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number",step:"0.1","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[9]||(a[9]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[V]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})})),Um={name:"Venta",data(){return{loading:!1,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>Se()(e.fecha).format("DD/MM/YYYY")+" "+Se()(e.created_at).format("HH:mm")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:"",tot:"",pageTotal:"",ttotal:"",tacuenta:"",tsaldo:""}},mounted(){this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{exportPdf(){const e="https://bnaty.tuprogam.com/api/cuentasCobrarLocal?fechaInicio="+this.fecha2+"&fechaFin="+this.fecha3;window.open(e,"_blank")},exportExcel(){let e=[{sheet:"Cuentas por cobrar detalle",columns:[{label:"Fecha",value:"fecha"},{label:"Local",value:"local"},{label:"Titular",value:"titular"},{label:"Total",value:"total"},{label:"A cuenta",value:"acuenta"},{label:"Saldo",value:"saldo"},{label:"Tipo cliente",value:"tipocliente"},{label:"Estado",value:"estado"},{label:"Usuario",value:"user"}],content:this.ventas.map((e=>({fecha:e.fecha,local:e.local,titular:e.titular,total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:1==e.tipocliente?"LOCAL":"CLIENTE",estado:"CANCELADO"==e.estado?"CANCELADO":"POR COBRAR",user:e.user})))}];Ed.export(e,"Cuentas por cobrar detalle")},delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.$q.loading.hide(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),this.$axios.post("https://bnaty.tuprogam.com/api/listventlocal",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:Se()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Um.render=Rm,Um.__scopeId="data-v-a0e3dd3e";const $m=Um;T()(Um,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QMarkupTable:se.Z,QBadge:ie.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QTable:re.Z,QTd:ce.Z,QCardActions:M.Z}),T()(Um,"directives",{ClosePopup:pe.Z});const Nm=(0,i.HX)("data-v-d0ad0322");(0,i.dD)("data-v-d0ad0322");const Ym=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"HISTORIAL CUENTAS POR COBRAR RUTA")],-1),Im=(0,i.Wm)("div",{class:"col-12"},null,-1),Pm={class:"row"},Lm={class:"col-3  q-pa-xs"},jm={key:0,class:"col-3  q-pa-xs"},Fm={class:"col-3"},zm={class:"col-3  q-pa-xs flex flex-center"},Zm={class:"col-12"},Qm={class:" responsive"},Bm={id:"example",style:{width:"100%"},class:"cell-border"},Gm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"hidden"},"FechaOrd"),(0,i.Wm)("th",null,"Id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Hm={class:"hidden"},Jm={style:{"font-weight":"bold","font-size":"16px"}},Km=(0,i.Uk)("LOCAL"),Xm=(0,i.Uk)("CLIENTE"),eu=(0,i.Uk)("Listado Pago"),au=(0,i.Uk)("Realizar Pago"),tu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),ou=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const lu=Nm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-td"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-actions"),v=(0,i.up)("q-card"),w=(0,i.up)("q-dialog"),W=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(W,{class:"q-pa-xs"},{default:Nm((()=>[Ym,Im,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Nm((()=>[(0,i.Wm)("div",Pm,[(0,i.Wm)("div",Lm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",jm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Fm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",zm,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Zm,[(0,i.Wm)("div",Qm,[(0,i.Wm)("table",Bm,[Gm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",Hm,(0,R.zw)(e.fechaord),1),(0,i.Wm)("td",null,(0,R.zw)(e.id),1),(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",Jm,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Nm((()=>[Km])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Nm((()=>[Xm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:Nm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e),dense:""},{default:Nm((()=>[(0,i.Wm)(p,null,{default:Nm((()=>[eu])),_:1})])),_:2},1032,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e),dense:""},{default:Nm((()=>[(0,i.Wm)(p,null,{default:Nm((()=>[au])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(w,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:Nm((()=>[(0,i.Wm)(v,null,{default:Nm((()=>[(0,i.Wm)(h,null,{default:Nm((()=>[tu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Nm((()=>[(0,i.Wm)(f,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},(0,i.Nv)({_:2},[e.$store.state.login.delpago?{name:"body-cell-op",fn:Nm((e=>[(0,i.Wm)(g,{key:"op",props:e},{default:Nm((()=>[(0,i.Wm)(c,{color:"red",icon:"delete",dense:"",onClick:a=>n.delPago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])]))}:void 0]),1032,["rows","columns"])])),_:1}),(0,i.Wm)(b,{align:"right"},{default:Nm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(w,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:Nm((()=>[(0,i.Wm)(v,null,{default:Nm((()=>[(0,i.Wm)(h,null,{default:Nm((()=>[ou])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:Nm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Nm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number",step:"0.1","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})})),iu={name:"Venta",data(){return{loading:!1,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],rango:"RANGO",cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"op",label:"OP",field:"op"},{name:"fecha",label:"Fecha",field:e=>Se()(e.fecha).format("DD/MM/YYYY")+" "+Se()(e.created_at).format("HH:mm")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{delPago(e){this.$q.dialog({title:"Eliminar",message:"Esta seguro de Eliminar Pago"}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/pago/"+e.id).then((e=>{this.alert=!1,this.misventas(),this.$q.notify({message:"Eliminado",color:"red",icon:"info"})}))})).onCancel((()=>{})).onDismiss((()=>{}))},onPago(){this.loading=!0,this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.$q.loading.hide(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),ae()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.tuprogam.com/api/listventruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],ae()("#example").DataTable().destroy(),e.data.forEach((e=>{this.ventas.push({id:e.id,fechaord:e.fecha,fecha:Se()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),this.$nextTick((()=>{ae()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};iu.render=lu,iu.__scopeId="data-v-d0ad0322";const su=iu;T()(iu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QTable:re.Z,QIcon:_.Z,QTr:de.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z}),T()(iu,"directives",{ClosePopup:pe.Z});const nu=(0,i.HX)("data-v-77a51671");(0,i.dD)("data-v-77a51671");const ru=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas con Rutas")],-1),du={class:"row"},cu={class:"col-2  q-pa-xs"},mu={class:"col-2  q-pa-xs"},uu={class:"col-2"},pu={class:"col-2  q-pa-xs flex flex-center"},hu={class:"col-12"},gu={class:" responsive"},fu={id:"example",style:{width:"100%"},class:"cell-border"},bu=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Observacion"),(0,i.Wm)("th",null,"Opcion")])],-1),vu=(0,i.Uk)("LOCAL"),wu=(0,i.Uk)("CLIENTE"),Wu=(0,i.Uk)("Listado Pago"),yu=(0,i.Uk)("Impresion"),Vu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),xu=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Cu=nu(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-tooltip"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:nu((()=>[ru,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:nu((()=>[(0,i.Wm)("div",du,[(0,i.Wm)("div",cu,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",mu,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",uu,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA"},null,8,["modelValue","label"])]),(0,i.Wm)("div",pu,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit","no-caps":"",dense:""})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",hu,[(0,i.Wm)("div",gu,[(0,i.Wm)("table",fu,[bu,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.local),1),(0,i.Wm)("td",null,(0,R.zw)(a.titular),1),(0,i.Wm)("td",null,(0,R.zw)(a.total),1),(0,i.Wm)("td",null,(0,R.zw)(a.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(a.saldo),1),(0,i.Wm)("td",null,[1==a.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:nu((()=>[vu])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:nu((()=>[wu])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==a.estado?"positive":"negative"},{default:nu((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[""!=a.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",color:"purple",icon:"list",onClick:e=>n.verObs(a.observacion)},null,8,["onClick"])):(0,i.kq)("",!0)]),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:e=>n.listpago(a),dense:""},{default:nu((()=>[(0,i.Wm)(p,null,{default:nu((()=>[Wu])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"info",icon:"print",dense:"",onClick:e=>n.printRuta(a)},{default:nu((()=>[(0,i.Wm)(p,null,{default:nu((()=>[yu])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(v,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:nu((()=>[(0,i.Wm)(b,null,{default:nu((()=>[(0,i.Wm)(h,null,{default:nu((()=>[Vu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:nu((()=>[(0,i.Wm)(g,{dense:"",flat:"",bordered:"",title:"",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(f,{align:"right"},{default:nu((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dialog_pago=e)},{default:nu((()=>[(0,i.Wm)(b,null,{default:nu((()=>[(0,i.Wm)(h,null,{default:nu((()=>[xu])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:nu((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:nu((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));var _u=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),Ic().vfs=Pc.I.vfs,window.JSZip=Nc();const qu={name:"Venta",data(){return{fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:X.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"id",label:"Id",field:"id"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"direccion",label:"Direccion",field:"direccion"},{name:"fechaentrega",label:"Fecha Entrega",field:"fechaentrega"},{name:"telefono1",label:"Telefono 1",field:"telefono1"},{name:"telefono2",label:"Telefono 2",field:"telefono2"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){_u("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]}),this.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{this.responsable=e.data.name}))},methods:{verObs(e){this.$q.dialog({title:"Observacion",message:e}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},printRuta(e){console.log(e),this.$axios.post("https://bnaty.tuprogam.com/api/impresionruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},onPago(){this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),_u("#example").DataTable().destroy(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),this.$axios.post("https://bnaty.tuprogam.com/api/listadoventaruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:Se()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,direccion:e.direccion,observacion:e.observacion,fechaentrega:e.fechaentrega,telefono1:e.telefono1,telefono2:e.telefono2})})),this.$nextTick((()=>{_u("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["excel","pdf"],lengthMenu:[[-1,10,25,50],["All",10,25,50]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=X.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("https://bnaty.tuprogam.com/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("https://bnaty.tuprogam.com/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("https://bnaty.tuprogam.com/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};qu.render=Cu,qu.__scopeId="data-v-77a51671";const Eu=qu;T()(qu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:k.Z,QTable:re.Z,QIcon:_.Z,QTr:de.Z,QTd:ce.Z,QBadge:ie.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:M.Z}),T()(qu,"directives",{ClosePopup:pe.Z});const Au={class:"q-pa-md"},ku={class:"row"},Du={class:"col-3  q-pa-xs"},Mu={class:"col-3  q-pa-xs"},Ou={class:"col-2"},Tu={class:"col-3  q-pa-xs flex flex-center"},Su={class:"text-h6"},Ru=(0,i.Uk)(" Caja Chica"),Uu={class:"row"},$u={class:"col-12"},Nu=(0,i.Uk)("Eliminar"),Yu={class:"text-h6"},Iu={class:"row"},Pu={class:"col-12"},Lu=(0,i.Uk)(" No results "),ju={class:"col-12"},Fu={class:"col-12"},zu={class:"col-3 flex flex-center"};function Zu(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-td"),w=(0,i.up)("q-tooltip"),W=(0,i.up)("q-table"),y=(0,i.up)("q-item-section"),V=(0,i.up)("q-item"),x=(0,i.up)("q-card-actions"),C=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Au,[this.$store.state.login.editcajachica?((0,i.wg)(),(0,i.j4)(r,{key:0,label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"})):(0,i.kq)("",!0),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ku,[(0,i.Wm)("div",Du,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:"",dense:""},null,8,["modelValue"])]),(0,i.Wm)("div",Mu,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:"",dense:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Ou,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Tu,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit",dense:""}),(0,i.Wm)(r,{color:"teal",label:"Gasto Cja Chica",icon:"edit",onClick:a[5]||(a[5]=e=>s.dialogcajachica=!0),dense:""})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA CHICA: "+(0,R.zw)(s.cajachica.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[9]||(a[9]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Su,[(0,i.Wm)(p,{name:"add_circle"}),Ru])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Uu,[(0,i.Wm)("div",$u,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGA","RETIRA"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[C]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{filter:s.filter,title:"Caja Chica",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[0,50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[10]||(a[10]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-motivo":(0,i.w5)((e=>[(0,i.Wm)(v,{key:"motivo",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"accent",onClick:a=>n.viewRow(e.row),icon:"list"},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(v,{key:"opcion",props:e},{default:(0,i.w5)((()=>[this.$store.state.login.editcajachica?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e.row),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,null,{default:(0,i.w5)((()=>[Nu])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"]),(0,i.Wm)(b,{modelValue:s.dialogcajachica,"onUpdate:modelValue":a[14]||(a[14]=e=>s.dialogcajachica=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",Yu,"Registro Gasto de Caja Chica "+(0,R.zw)(s.cajachica.monto)+" Bs",1)])),_:1}),(0,i.Wm)(h,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregarcjchica,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Iu,[(0,i.Wm)("div",Pu,[(0,i.Wm)(g,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[11]||(a[11]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(V,null,{default:(0,i.w5)((()=>[(0,i.Wm)(y,{class:"text-grey"},{default:(0,i.w5)((()=>[Lu])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",ju,[(0,i.Wm)(d,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica.precio,"onUpdate:modelValue":a[12]||(a[12]=e=>s.cchica.precio=e),rules:[e=>e>0&&e<=s.cajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Fu,[(0,i.Wm)(d,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica.observacion,"onUpdate:modelValue":a[13]||(a[13]=e=>s.cchica.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",zu,[(0,i.Wm)(r,{label:"Registrar",type:"submit",icon:"send",color:"info",loading:s.loading,dense:""},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(x,{align:"right",class:"bg-white text-teal"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cerrar"},null,512),[[C]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const Qu={data(){return{glosa:{},loading:!1,cchica:{},dialogcajachica:!1,alert:!1,filter:"",fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",rango:"RANGO",dato:{},options:[],props:[],cajachica:0,montogeneral:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[],glosas:[],filterglosa:[]}},created(){this.misdatos(),this.totalcaja(),this.totalgeneral(),this.misglosa()},methods:{agregarcjchica(){return void 0!=this.glosa.id&&(this.montocajachica<this.cchica.precio?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No Existe suficiente en Caja Chica"}),!1):(this.loading=!0,this.cchica.glosa_id=this.glosa.id,this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/gastocaja",this.cchica).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");this.$q.loading.hide(),a.document.write(e.data),a.document.close(),a.print(),a.close(),this.cchica.precio=0,this.cchica.observacion="",this.dialogcajachica=!1,this.glosa={label:""},this.misdatos(),this.totalcaja(),this.loading=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})}))))},misglosa(){this.glosas=[{label:""}],this.$axios.get("https://bnaty.tuprogam.com/api/glosa").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.glosas.push(e)})),this.filterglosa=this.glosas,this.glosa=this.glosas[0]}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.glosas=this.filterglosa.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.glosas=this.filterglosa})},totalgeneral(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{console.log(e.data),this.montogeneral=parseFloat(e.data.monto)}))},deleteRow(e){this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/logcaja/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.cajachica=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$axios.post("https://bnaty.tuprogam.com/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:0}).then((e=>{console.log(e.data),this.data=e.data,this.totalcaja(),this.$q.loading.hide()}))},viewRow(e){this.$q.dialog({title:"MOTIVO ",message:e.motivo}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},onSubmit(){return"RETIRA"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajachica.monto)?(this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1):"AGREGA"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.montogeneral)?(this.$q.notify({message:"No debe ser Mayor a lo q esta en caja General",icon:"close",color:"red"}),!1):(this.$q.loading.show(),void this.$axios.post("https://bnaty.tuprogam.com/api/logcaja",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos(),this.totalgeneral()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()})))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGA"}}};Qu.render=Zu;const Bu=Qu;T()(Qu,"components",{QBtn:k.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:ie.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QSelect:Ue.Z,QTable:re.Z,QTd:ce.Z,QTooltip:ne.Z,QItem:ea.Z,QItemSection:aa.Z,QCardActions:M.Z}),T()(Qu,"directives",{ClosePopup:pe.Z});const Gu={class:"q-pa-md"},Hu={class:"row"},Ju={class:"col-3  q-pa-xs"},Ku={class:"col-3  q-pa-xs"},Xu={class:"col-3"},ep={class:"col-3  q-pa-xs flex flex-center"},ap={class:"text-h6"},tp=(0,i.Uk)(" Caja General"),op={class:"row"},lp={class:"col-12"},ip={id:"example",class:"display"},sp=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"Detalle"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"Glosa"),(0,i.Wm)("th",null,"Tipo"),(0,i.Wm)("th",null,"Opcion")])],-1),np=(0,i.Uk)("Eliminar"),rp=(0,i.Wm)("td",null,null,-1);function dp(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-tooltip"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Gu,[(0,i.Wm)(r,{label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Hu,[(0,i.Wm)("div",Ju,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ku,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Xu,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",ep,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA GENERAL: "+(0,R.zw)(s.cajageneral.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[8]||(a[8]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ap,[(0,i.Wm)(p,{name:"add_circle"}),tp])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",op,[(0,i.Wm)("div",lp,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGAR","RETIRAR"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("table",ip,[sp,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.data,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.monto),1),(0,i.Wm)("td",null,(0,R.zw)(a.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(a.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(null==a.glosa?"":a.glosa.nombre),1),(0,i.Wm)("td",null,["INGRESO"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"EGRESO"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"AGREGAR"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:2,color:"blue"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"RETIRAR"==a.tipo?((0,i.wg)(),(0,i.j4)(u,{key:3,color:"purple"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.tipo),1)])),_:2},1024)):(0,i.kq)("",!0)]),1!=e.$store.state.login.user.id||"AGREGAR"!=a.tipo&&"RETIRAR"!=a.tipo?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"red",onClick:e=>n.deleteRow(a),icon:"delete"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[np])),_:1})])),_:2},1032,["onClick"])),rp])))),128))])])])}const cp={data(){return{alert:!1,filter:"",fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",dato:{},options:[],props:[],pageTotal:"",rango:"RANGO",tot:"",cajageneral:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"detalle",align:"left",label:"DETALLE",field:"detalle",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[]}},created(){ae()("#example").DataTable(),this.misdatos(),this.totalcaja()},methods:{deleteRow(e){console.log(e),this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/loggeneral/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{this.cajageneral=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),ae()("#example").DataTable().destroy(),this.$axios.post("https://bnaty.tuprogam.com/api/listgeneral",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{ae()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{e.fechaord=e.fecha,e.fecha=Se()(e.fecha).format("DD/MM/YYYY")})),this.data=e.data,this.totalcaja(),this.$nextTick((()=>{ae()("#example").DataTable({order:[[0,"desc"]],language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[-1,20,50,100],["All",20,50,100]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),ae()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}}),this.$q.loading.hide()}))}))},onSubmit(){if("RETIRAR"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajageneral.monto))return this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1;this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/loggeneral",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGAR"}}};cp.render=dp;const mp=cp;T()(cp,"components",{QBtn:k.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:ie.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QSelect:Ue.Z,QTooltip:ne.Z,QTable:re.Z,QTd:ce.Z}),T()(cp,"directives",{ClosePopup:pe.Z});const up={class:"row"},pp=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-h5 text-center text-bold"},"INVENTARIO DE MATERIAL")],-1),hp={class:"col-3 flex flex-center"},gp=(0,i.Uk)("REGISTRO"),fp=(0,i.Uk)("MODIFICAR"),bp=(0,i.Uk)("ELIMINAR"),vp={class:"col-6"},wp={class:"col-3 flex flex-center"},Wp={class:"col-12"},yp={class:"q-pa-none"},Vp={class:"absolute-full flex flex-center"},xp={class:"row"},Cp={class:"col-3"},_p={class:"col-3"},qp={class:"col-3"},Ep={class:"col-3"},Ap={class:"q-pa-none"},kp={class:"q-pa-none"},Dp=(0,i.Wm)("div",{class:"text-h7"},"Compra MATERIAL ",-1),Mp={class:"text-h7"},Op={class:"row"},Tp={class:"col-12"},Sp={class:"col-2"},Rp={class:"col-2"},Up={class:"col-2"},$p={class:"col-3"},Np={class:"col-3"},Yp={class:"col-3"},Ip={class:"col-1"},Pp={style:{width:"100%","border-collapse":"collapse"}},Lp=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"NRO"),(0,i.Wm)("th",null,"MATERIAL"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"COSTO"),(0,i.Wm)("th",null,"SUBTOTAL"),(0,i.Wm)("th",null,"LOTE"),(0,i.Wm)("th",null,"FEC VEN"),(0,i.Wm)("th",null,"OBS"),(0,i.Wm)("th",null,"OPCION")])],-1),jp=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL ",-1),Fp={class:"text-h7"},zp={class:"text-h7"},Zp={class:"text-h7"},Qp=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO PROVEEDOR",-1),Bp=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO MATERIAL",-1),Gp=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR MATERIAL",-1),Hp=(0,i.Wm)("div",{class:"text-h7"},"PAGAR POR LA COMPRA",-1),Jp=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR PROVEEDOR",-1),Kp=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),Xp=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function eh(e,a,t,o,l,s){const n=(0,i.up)("q-item-label"),r=(0,i.up)("q-item-section"),d=(0,i.up)("q-item"),c=(0,i.up)("q-list"),m=(0,i.up)("q-btn-dropdown"),u=(0,i.up)("q-select"),p=(0,i.up)("q-btn"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-input"),f=(0,i.up)("q-td"),b=(0,i.up)("q-badge"),v=(0,i.up)("q-linear-progress"),w=(0,i.up)("q-table"),W=(0,i.up)("q-card-section"),y=(0,i.up)("q-card"),V=(0,i.up)("q-dialog"),x=(0,i.up)("q-form"),C=(0,i.up)("q-card-actions"),_=(0,i.up)("q-avatar"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",up,[pp,(0,i.Wm)("div",hp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(m,{key:0,icon:"list",class:"full-width",color:"accent",label:"PROVEEDOR"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:a[1]||(a[1]=e=>{l.dialog_prov=!0,l.proveedor={}})},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[gp])),_:1})])),_:1})])),_:1},512),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.modif_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[fp])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.del_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[bp])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]])])),_:1})])),_:1})):(0,i.kq)("",!0)]),(0,i.Wm)("div",vp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(u,{key:0,dense:"",outlined:"",modelValue:l.proveedor,"onUpdate:modelValue":a[2]||(a[2]=e=>l.proveedor=e),options:l.proveedores,label:"Provedores"},null,8,["modelValue","options"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",wp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,icon:"engineering",color:"teal",class:"full-width",label:"Registrar Material",onClick:a[3]||(a[3]=e=>{l.dialog_mat=!0,l.material={}})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Wp,[(0,i.Wm)("div",yp,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE MATERIALES ",rows:l.materiales,columns:l.columns,filter:l.filter,"row-key":"name"},{"top-right":(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"amber-8",icon:"shopping_cart",label:"COMPRAS",onClick:a[4]||(a[4]=e=>{l.dialog_add=!0,l.compras=[]})})):(0,i.kq)("",!0),(0,i.Wm)(g,{dense:"",outlined:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.retirarRow(a),icon:"download"},null,8,["onClick"]),(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"cyan",onClick:e=>s.reporte(a),icon:"poll"},null,8,["onClick"]),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-stock":(0,i.w5)((e=>[(0,i.Wm)(f,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"25px",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",class:"full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Vp,[(0,i.Wm)(b,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",xp,[(0,i.Wm)("div",Cp,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[6]||(a[6]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",_p,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[7]||(a[7]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",qp,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material3,"onUpdate:modelValue":a[8]||(a[8]=e=>l.material3=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ep,[(0,i.Wm)(p,{color:"info",label:"Consultar",onClick:s.consultmaterial},null,8,["onClick"])])]),(0,i.Wm)("div",Ap,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,"row-key":"name"},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(f,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{color:"POR PAGAR"==e.row.estado?"red":"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda>0?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listpago(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:2,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",kp,[(0,i.Wm)(w,{dense:"","rows-per-page-options":[0,10,20,50,100],title:"LISTA DE RETIROS ",rows:l.recutodo,columns:l.colrecuento,filter:l.filter,"row-key":"name"},{"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:e=>s.modrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(V,{modelValue:l.dialog_add,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{width:"800px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Dp,(0,i.Wm)("div",Mp,"Proveedor: "+(0,R.zw)(l.proveedor.razon),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Op,[(0,i.Wm)("div",Tp,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[9]||(a[9]=e=>l.material=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Sp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[10]||(a[10]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Rp,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(g,{key:0,dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[11]||(a[11]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Up,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)(" Subtotal: "+(0,R.zw)(l.compra.costo*l.compra.cantidad),1)],64)):(0,i.kq)("",!0)]),(0,i.Wm)("div",$p,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[12]||(a[12]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Np,[(0,i.Wm)(g,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[13]||(a[13]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),(0,i.Wm)("div",Yp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[14]||(a[14]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Ip,[(0,i.Wm)(p,{dense:"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])]),(0,i.Wm)("table",Pp,[Lp,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",null,(0,R.zw)(a+1),1),(0,i.Wm)("td",null,(0,R.zw)(e.material),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",null,(0,R.zw)(e.lote),1),(0,i.Wm)("td",null,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",null,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",null,[(0,i.Wm)(p,{color:"red",icon:"delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dialog_remove=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[jp,(0,i.Wm)("div",Fp,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[16]||(a[16]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[17]||(a[17]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modcompra,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dialog_modcompra=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",zp,"Modificar Compra material : "+(0,R.zw)(l.compra2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.updatecompra,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[19]||(a[19]=e=>l.compra2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"number",modelValue:l.compra2.costo,"onUpdate:modelValue":a[20]||(a[20]=e=>l.compra2.costo=e),label:"Costo U"},null,8,["modelValue"]),(0,i.Uk)(" Subtotal: "+(0,R.zw)(l.compra2.costo*l.compra2.cantidad)+" ",1),(0,i.Wm)(g,{outlined:"",type:"date",modelValue:l.compra2.fechaven,"onUpdate:modelValue":a[21]||(a[21]=e=>l.compra2.fechaven=e),label:"fecha Ven"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.lote,"onUpdate:modelValue":a[22]||(a[22]=e=>l.compra2.lote=e),label:"Lote"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.observacion,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[27]||(a[27]=e=>l.dialog_modret=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Zp,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[25]||(a[25]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[26]||(a[26]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_prov,"onUpdate:modelValue":a[33]||(a[33]=e=>l.dialog_prov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Qp])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.razon,"onUpdate:modelValue":a[28]||(a[28]=e=>l.proveedor.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.nit,"onUpdate:modelValue":a[29]||(a[29]=e=>l.proveedor.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.direccion,"onUpdate:modelValue":a[30]||(a[30]=e=>l.proveedor.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.email,"onUpdate:modelValue":a[31]||(a[31]=e=>l.proveedor.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.telefono,"onUpdate:modelValue":a[32]||(a[32]=e=>l.proveedor.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_mat,"onUpdate:modelValue":a[37]||(a[37]=e=>l.dialog_mat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Bp])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onRegmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.nombre,"onUpdate:modelValue":a[34]||(a[34]=e=>l.material.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.unid,"onUpdate:modelValue":a[35]||(a[35]=e=>l.material.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.min,"onUpdate:modelValue":a[36]||(a[36]=e=>l.material.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modmat,"onUpdate:modelValue":a[41]||(a[41]=e=>l.dialog_modmat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Gp])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onModmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.nombre,"onUpdate:modelValue":a[38]||(a[38]=e=>l.material2.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.unid,"onUpdate:modelValue":a[39]||(a[39]=e=>l.material2.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.min,"onUpdate:modelValue":a[40]||(a[40]=e=>l.material2.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[44]||(a[44]=e=>l.dialogpagar=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Hp])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.regpago,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.monto,"onUpdate:modelValue":a[42]||(a[42]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[43]||(a[43]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modprov,"onUpdate:modelValue":a[50]||(a[50]=e=>l.dialog_modprov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-yellow-14 text-white"},{default:(0,i.w5)((()=>[Jp])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.razon,"onUpdate:modelValue":a[45]||(a[45]=e=>l.proveedor2.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.nit,"onUpdate:modelValue":a[46]||(a[46]=e=>l.proveedor2.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.direccion,"onUpdate:modelValue":a[47]||(a[47]=e=>l.proveedor2.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.email,"onUpdate:modelValue":a[48]||(a[48]=e=>l.proveedor2.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.telefono,"onUpdate:modelValue":a[49]||(a[49]=e=>l.proveedor2.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[53]||(a[53]=e=>l.dialog_reporte=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:(0,i.w5)((()=>[Kp])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[51]||(a[51]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[52]||(a[52]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_del,"onUpdate:modelValue":a[54]||(a[54]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"clear",color:"red","text-color":"white"}),Xp])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[55]||(a[55]=e=>l.dialoglistpagos=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}const ah={data(){return{proveedor:{},proveedor2:{},dialog_prov:!1,dialog_modprov:!1,dialog_mat:!1,dialog_modmat:!1,dialog_reporte:!1,dialog_modcompra:!1,dialog_modret:!1,checkgasto:"CAJA",material:{},materiales:[],material2:{},material3:{},proveedores:[],compras:[],comptodo:[],compra:{},compra2:{},recutodo:[],crear:!1,recuento:{},recuento2:{},filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_remove:!1,dialog_log:!1,dialogpagar:!1,dialoglistpagos:!1,pago:{},agregar:0,disminuir:0,producto:{},color:"",dato:{},fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha3:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha4:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),columns:[{name:"nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"unid",align:"center",label:"unidad",field:"unid",sortable:!0},{name:"min",align:"center",label:"Minimo",field:"min",sortable:!0},{name:"stock",align:"center",label:"stock",field:"stock",sortable:!0},{name:"opcion",label:"OPCIONES",field:"opcion"}],colcompra:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"deuda",align:"center",label:"DEUDA",field:"deuda",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:"fechaven",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colpagos:[{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],rows:[],montogeneral:0,totalcompra:0,montocaja:0,pagos:[]}},created(){this.misproveedores(),this.mismateriales(),this.totalgeneral(),this.totalcaja()},methods:{listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.montocaja=e.data.monto}))},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$axios.post("https://bnaty.tuprogam.com/api/logcompra",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "}),this.checkgasto="CAJA",this.consultmaterial()})))},totalgeneral(){this.$axios.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},updatecompra(){this.$axios.put("https://bnaty.tuprogam.com/api/compra/"+this.compra2.id,this.compra2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modcompra=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("https://bnaty.tuprogam.com/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modcompra(e){this.compra2=e,this.dialog_modcompra=!0},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/compra/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/recuento/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultmaterial(){this.$axios.post("https://bnaty.tuprogam.com/api/consultar",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{console.log(e.data),this.comptodo=e.data})),this.$axios.post("https://bnaty.tuprogam.com/api/consulrecuento",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},genreporte(){console.log(X.ZP.formatDate(new Date,"DD/MM/YYYY HH:mm:ss")),this.$axios.post("https://bnaty.tuprogam.com/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=this;function t(){var e=new Image;e.src="logo.png",o.addImage(e,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"INVENTARIO MATERIAL : "+a.material2.nombre),o.text(5,1.5,"DE "+Se()(a.fecha1).format("DD/MM/YYYY")+" AL "+Se()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"TIPO"),o.text(2.5,3,"PROVEEDOR"),o.text(5,3,"MATERIAL"),o.text(7,3,"FECHA"),o.text(9.5,3,"COSTO"),o.text(11,3,"CANTIDAD"),o.text(13,3,"FECHA VEN"),o.text(15,3,"OBSERVACION"),o.setFont(void 0,"normal")}var o=new jo.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0;e.data.forEach((e=>{l+=.5,o.text(1,l+3,e.tipo),o.text(2.5,l+3,e.razon),o.text(5,l+3,e.nombre),o.text(7,l+3,X.ZP.formatDate(new Date(e.fecha),"DD/MM/YYYY")),o.text(9.5,l+3,null==e.costo?"":e.costo+""),o.text(11,l+3,e.cantidad+""),o.text(13,l+3,null==e.fechaven?"":e.fechaven),o.text(15,l+3,null==e.observacion?"":e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),window.open(o.output("bloburl"),"_blank")}))},reporte(e){this.material2=e.row,this.dialog_reporte=!0},regcompra(){return 0==this.compras.length?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1):(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra)?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1):void this.$axios.post("https://bnaty.tuprogam.com/api/compra",{provider_id:this.proveedor.id,user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.mismateriales()})))},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){return""!=this.compra.cantidad&&0!=this.compra.cantidad&&void 0!=this.compra.cantidad&&(void 0!=this.compra.costo&&""!=this.compra.costo&&0!=this.compra.costo&&(void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,this.compras.push(this.compra),void(this.compra={})))},onRegRecuento(){this.recuento.material_id=this.material2.id,this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("https://bnaty.tuprogam.com/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_add=!1,this.mismateriales()}))},onRegRecuento2(){if(this.material2.stock<this.recuento.cantidad)return!1;this.recuento.material_id=this.material2.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("https://bnaty.tuprogam.com/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.mismateriales()}))},agregarRow(e){this.material2=e.row,this.dialog_add=!0},retirarRow(e){this.material2=e.row,this.dialog_remove=!0},modif_prov(){this.proveedor2=this.proveedor,this.dialog_modprov=!0},onReg(){this.$axios.post("https://bnaty.tuprogam.com/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},onRegmat(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/material",this.material).then((e=>{this.$q.loading.hide(),this.dialog_mat=!1,this.mismateriales(),this.material={}}))},onModmat(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/material/"+this.material2.id,this.material2).then((e=>{this.$q.loading.hide(),this.dialog_modmat=!1,this.mismateriales(),this.material={}}))},misproveedores(){this.proveedores=[],this.$axios.get("https://bnaty.tuprogam.com/api/provider").then((e=>{e.data.forEach((e=>{e.label=e.razon,this.proveedores.push(e)})),this.proveedor=this.proveedores[0]}))},mismateriales(){this.materiales=[],this.$axios.get("https://bnaty.tuprogam.com/api/material").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.materiales.push(e)})),this.material=this.materiales[0],this.material3=this.materiales[0]}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("https://bnaty.tuprogam.com/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("https://bnaty.tuprogam.com/api/activarprod",this.dato).then((e=>{this.listado()}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},editRow(e){this.material2=e.row,this.dialog_modmat=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.material2=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onDel(){this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/material/"+this.material2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.mismateriales()})),this.$q.loading.hide()},del_prov(){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/provider/"+this.proveedor.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.misproveedores()})),this.$q.loading.hide()}))},onReset(){this.producto={}},computed:{}}};var th=t(51598);ah.render=eh;const oh=ah;T()(ah,"components",{QPage:V.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z,QItemLabel:mc.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QInput:E.Z,QIcon:_.Z,QTd:ce.Z,QLinearProgress:th.Z,QBadge:ie.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QCardActions:M.Z,QAvatar:ue.Z}),T()(ah,"directives",{ClosePopup:pe.Z});const lh={class:"row"},ih=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-center text-bold"},"RESUMEN DE INGRESOS Y EGRESOS")],-1),sh={class:"col-12"},nh={class:"row"},rh={class:"col-4"},dh={class:"col-4"},ch={class:"col-4 flex "},mh={class:"col-12"},uh={class:" responsive"},ph={class:"col-12"},hh={class:"row"},gh={class:"col-3 q-pa-md"},fh={class:"col-3 q-pa-md"},bh={class:"col-3 q-pa-md"},vh={class:"col-3 q-pa-md"},wh={class:"col-3 q-pa-md"},Wh={class:"col-12"};function yh(e,a,t,o,l,s){const n=(0,i.up)("q-input"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-form"),c=(0,i.up)("q-table");return(0,i.wg)(),(0,i.j4)("div",lh,[ih,(0,i.Wm)("div",sh,[(0,i.Wm)(d,{onSubmit:s.listado},{default:(0,i.w5)((()=>[(0,i.Wm)("div",nh,[(0,i.Wm)("div",rh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>l.fecha1=e),label:"Fecha ini",required:"",hint:"Porfavor ingresar fecha inicio",counter:""},null,8,["modelValue"])]),(0,i.Wm)("div",dh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=l.fecha1||"Fecha debe ser mayor o igual"],hint:"Porfavor ingresar fecha fin",counter:""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ch,[(0,i.Wm)(r,{label:"Generar",class:"full-width ",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",mh,[(0,i.Wm)("div",uh,[(0,i.Wm)(c,{dense:"",title:"Ingresos",rows:l.ingreso,columns:l.columns,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Egresos",rows:l.egreso,columns:l.columns2,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Caja Chica",rows:l.cchica,columns:l.columns3,"row-key":"name","rows-per-page-options":[0,50,100]},null,8,["rows","columns"])])]),(0,i.Wm)("div",ph,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",hh,[(0,i.Wm)("div",gh,[(0,i.Wm)(n,{type:"text",label:"Ingreso total","label-color":"positive",modelValue:s.totalingreso,"onUpdate:modelValue":a[3]||(a[3]=e=>s.totalingreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",fh,[(0,i.Wm)(n,{type:"text",label:"Egreso Total","label-color":"info",modelValue:s.totalegreso,"onUpdate:modelValue":a[4]||(a[4]=e=>s.totalegreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",bh,[(0,i.Wm)(n,{type:"text",label:"Caja Chica Total","label-color":"info",modelValue:s.totalchica,"onUpdate:modelValue":a[5]||(a[5]=e=>s.totalchica=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",vh,[(0,i.Wm)(n,{type:"text",label:"SALDO C CHICA","label-color":"warning",modelValue:l.montocajachica,"onUpdate:modelValue":a[6]||(a[6]=e=>l.montocajachica=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",wh,[(0,i.Wm)(n,{type:"text",label:"Balance","label-color":"teal",outlined:"",modelValue:s.balance,"onUpdate:modelValue":a[7]||(a[7]=e=>s.balance=e)},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",Wh,[(0,i.Wm)(r,{label:"Imprimir",icon:"print",color:"accent",class:"full-width",onClick:a[8]||(a[8]=e=>s.impresion2())})])])])}const Vh={data(){return{montocajachica:0,totalch:0,fecha1:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),resumen:[],usuarios:[],filter:"",usuario:"",ventas:[],deudas:[],ingreso:[],egreso:[],cchica:[],regpago:{},pagos:{},final:0,dato:{},alert:!1,dialog_pago:!1,columns:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns2:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns3:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}]}},mounted(){},created(){ae()("#example1").DataTable(),ae()("#example2").DataTable(),ae()("#example3").DataTable(),this.listado()},methods:{totalcaja(){this.$axios.post("https://bnaty.tuprogam.com/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},getSaldoCh(){this.$axios.post("https://bnaty.tuprogam.com/api/totalCajaIng",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{this.totalch=e.data,console.log(e.data)}))},onPago(){this.$axios.post("https://bnaty.tuprogam.com/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.ingreso=[],this.egreso=[],this.cchica=[],this.totalcaja(),this.$axios.post("https://bnaty.tuprogam.com/api/repventa",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Venta "+e.tipo,total:e.total,ingreso:e.total,egreso:0})})),this.$axios.post("https://bnaty.tuprogam.com/api/repventpago",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{if(e.data[0].total>0){let a=e.data[0];this.ingreso.push({detalle:"CxC pagos",total:a.total,ingreso:a.total,egreso:0})}this.$axios.post("https://bnaty.tuprogam.com/api/repingprestamo",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Anulacion Prestamo/ Venta "+e.estado,total:e.total,ingreso:e.total,egreso:0})}))}))}))})),this.$axios.post("https://bnaty.tuprogam.com/api/repgastos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.egreso.push({detalle:e.glosa,total:e.total,egreso:e.total,ingreso:0})})),this.$axios.post("https://bnaty.tuprogam.com/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"SALARIOS",total:a.total,egreso:a.total,ingreso:0}),this.$axios.post("https://bnaty.tuprogam.com/api/repcompra",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"COMPRA ALMACEN",total:a.total,egreso:a.total,ingreso:0})}))}))})),this.$axios.post("https://bnaty.tuprogam.com/api/repcaja",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),e.data.forEach((e=>{this.cchica.push({detalle:e.glosa,total:e.total,egreso:e.total,ingreso:0})})),this.$axios.post("https://bnaty.tuprogam.com/api/repcaja2",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),this.cchica.push({detalle:"RETIRO SALDO TOTAL",total:-1*e.data[0].total,egreso:-1*e.data[0].total,ingreso:0})}))}))},impresion2(){this.resumen=[],this.ingreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:e.total,egreso:0})})),this.egreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:0,egreso:e.total})}));let e=this,a=0,t=0,o=0,l="<style>        *{font-size:14px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>RESUMEN DE BALANCE DE <br>"+Se()(e.fecha1).format("DD/MM/YYYY")+" AL "+Se()(e.fecha2).format("DD/MM/YYYY")+"</div><br>        <div>INGRESOS</div><table><tr><th style='width:50%'>DETALLE</th> <th>INGRESO</th> </tr>";this.ingreso.forEach((e=>{a+=e.ingreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.ingreso+"</td></tr>"})),l+="</table><br><div>EGRESOS</div><table><tr><th style='width:50%'>DETALLE</th>  <th>EGRESO</th></tr>",this.egreso.forEach((e=>{t+=e.egreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.egreso+"</td></tr>"})),l+="</table><br><div>CAJA CHICA</div><table><tr><th style='width:50%'>DETALLE</th> <th>EGRESO</th></tr>",this.cchica.forEach((e=>{e.egreso,parseFloat(e.egreso),o+=e.egreso,l+="<tr><td>"+e.detalle+"</td><td>"+e.egreso+"</td></tr>"}));var i=a-t-o+parseFloat(this.montocajachica);l+="</table><div><b>TOTAL INGRESO: </b> "+a+" Bs</div>        <div><b>TOTAL EGRESO: </b> "+t+" Bs</div>        <div><b>T. CJA CHICA: </b> "+o+" Bs</div>        <div><b>SALDO CJA CHICA: </b> "+this.montocajachica+" Bs</div>        <div><b>BALANCE: </b> "+i+" Bs</div>";let s=window.open("_blank");s.document.write(l),s.document.close()},impresion(){this.resumen=[],this.ingreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:e.total,egreso:0})})),this.egreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:0,egreso:e.total})}));let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"RESUMEN DE BALANCE "),t.text(5,1.5,"DE "+Se()(e.fecha1).format("DD/MM/YYYY")+" AL "+Se()(e.fecha2).format("DD/MM/YYYY")),t.text(1,3,"DETALLE"),t.text(10,3,"INGRESO"),t.text(14,3,"EGRESO"),t.setFont(void 0,"normal")}var t=new jo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(12),a();let o=0,l=0,i=0,s=0;this.ingreso.forEach((e=>{l+=e.ingreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.egreso.forEach((e=>{i+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.cchica.forEach((e=>{s+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(1,o+4,"TOTAL INGRESO: "),t.setFont(void 0,"normal"),t.text(4,o+4,l+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"TOTAL EGRESO: "),t.setFont(void 0,"normal"),t.text(10,o+4,i+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4.5,"T. CJA CHICA: "),t.setFont(void 0,"normal"),t.text(10,o+4.5,s+" Bs");var n=l-i-s;t.setFont(void 0,"bold"),t.text(14,o+4,"BALANCE: "),t.setFont(void 0,"normal"),t.text(18,o+4,n+"Bs"),window.open(t.output("bloburl"),"_blank")}},computed:{totalingreso(){let e=0;return this.ingreso.forEach((a=>{e+=parseFloat(a.ingreso)})),e},totalegreso(){let e=0;return this.egreso.forEach((a=>{e+=parseFloat(a.egreso)})),e},totalchica(){let e=0;return this.cchica.forEach((a=>{e+=parseFloat(a.total)})),e},balance(){var e=this.totalingreso-this.totalegreso-this.totalchica;return e}}};Vh.render=yh;const xh=Vh;T()(Vh,"components",{QForm:q.Z,QInput:E.Z,QBtn:k.Z,QTable:re.Z});const Ch=(0,i.HX)("data-v-6c558d38");(0,i.dD)("data-v-6c558d38");const _h={class:"row"},qh={class:"col-12"},Eh={class:"col-2"},Ah={class:"col-1 flex flex-center"},kh={class:"col-5"},Dh=(0,i.Uk)(" No results "),Mh={class:"col-4"},Oh={class:"col-12"},Th={class:"col-7"},Sh={class:"row"},Rh={class:"text-bold text-grey-9"},Uh={key:0},$h={class:"text-subtitle2 flex-center flex text-center"},Nh={class:"col-5"},Yh=(0,i.Wm)("div",{class:"text-subtitle2 flex-center flex text-center bg-primary text-white"},"PRODUCTOS",-1),Ih=(0,i.Wm)("div",{class:"row items-center bg-primary text-white"},[(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Cantidad"),(0,i.Wm)("div",{class:"col-5 text-center text-bold"},"Nombre"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Precio"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Subtotal"),(0,i.Wm)("div",{class:"col-1 text-center text-bold"},"Op")],-1),Ph={class:"col-2 text-center text-bold"},Lh={class:"col-5 text-grey"},jh={class:"col-2 text-right text-grey"},Fh=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),zh={class:"col-2 text-right q-pr-xs text-bold"},Zh={class:"col-1"},Qh={class:"row"},Bh={class:"col-3"},Gh=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),Hh={class:"col-3"},Jh={class:"text-bold text-grey"},Kh=(0,i.Uk)("Total: "),Xh={class:"text-black text-h5"},eg={class:"col-3"},ag={class:"text-bold text-grey"},tg=(0,i.Uk)("Saldo: "),og={class:"col-3"},lg={class:"col-12",align:"center"},ig=(0,i.Wm)("div",{class:"col-12"},null,-1),sg=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),ng={class:"row"},rg={class:"col-12 col-md-6 q-pa-xs"},dg={class:"col-12 col-md-6 q-pa-xs"},cg={class:"col-12 col-md-6 q-pa-xs"},mg={class:"col-12 col-md-6 q-pa-xs"},ug={class:"col-12 col-md-6 q-pa-xs"},pg={class:"col-12 col-md-6 q-pa-xs"},hg={class:"col-12 col-md-6 q-pa-xs"},gg={class:"col-12 col-md-6 q-pa-xs"},fg={class:"col-12 col-md-6 q-pa-xs"},bg={class:"col-12 col-md-6 q-pa-xs"},vg={class:"col-12 col-md-6 q-pa-xs"},wg={class:"col-12  q-pa-xs flex flex-center"},Wg=(0,i.Wm)("div",{class:"text-h6"},"Garantia?",-1),yg=(0,i.Uk)(" Desea registrar préstamo o venta de material? "),Vg=(0,i.Wm)("div",{class:"text-h6"},"Garantia?",-1),xg=(0,i.Uk)(" Desea registrar préstamo o venta de material? "),Cg=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),_g={class:"col-12"},qg={class:"row"},Eg={class:"col-3"},Ag={class:"col-3"},kg={class:"col-1"},Dg={class:"col-3"},Mg={class:"col-12 flex flex-center"},Og={class:"col-12"},Tg=(0,i.Uk)("Anular"),Sg=(0,i.Uk)("Imprimir Ruta"),Rg=(0,i.Uk)("Hoja de Ruta"),Ug=(0,i.Uk)("Detalle Venta"),$g=(0,i.Uk)("Imprimir Boleta"),Ng=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),Yg={class:"row"},Ig={class:"col-12 col-md-4 q-pa-xs"},Pg={class:"col-12 col-md-4 q-pa-xs"},Lg={class:"col-12 col-md-4 q-pa-xs"},jg={class:"col-12 col-md-4 q-pa-xs"},Fg={class:"col-12 col-md-4 q-pa-xs"},zg={class:"col-12 col-md-4 q-pa-xs"},Zg={class:"col-12 col-md-4 q-pa-xs"},Qg={class:"col-12 col-md-4 q-pa-xs"},Bg={class:"col-12 col-md-4 q-pa-xs flex flex-center"},Gg=(0,i.Wm)("b",null," EN PRESTAMO ",-1),Hg=(0,i.Wm)("b",null," VENTA ",-1),Jg={class:"col-12  q-pa-xs flex flex-center "},Kg={class:"col-6"},Xg={class:"col-6"},ef={class:"text-h6"},af={class:"row"},tf={class:"col-12  q-pa-xs"},of={class:"col-12 col-md-6 q-pa-xs"},lf={class:"col-12 col-md-6 q-pa-xs"},sf={class:"col-12 col-md-6 q-pa-xs"},nf={class:"col-12 col-md-6 q-pa-xs"},rf={class:"col-12 col-md-6 q-pa-xs"},df={class:"col-12 col-md-6 q-pa-xs"},cf={class:"col-12 col-md-6 q-pa-xs"},mf={class:"col-12 col-md-6 q-pa-xs"},uf={class:"col-12  q-pa-xs"},pf={class:"col-12  q-pa-xs flex flex-center"},hf=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),gf=(0,i.Wm)("b",null,"Obs:",-1),ff={style:{width:"100%"}},bf=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1);(0,i.Cn)();const vf=Ch(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),u=(0,i.up)("q-select"),p=(0,i.up)("q-space"),h=(0,i.up)("q-chip"),g=(0,i.up)("q-card-section"),f=(0,i.up)("q-card"),b=(0,i.up)("q-form"),v=(0,i.up)("q-dialog"),w=(0,i.up)("q-card-actions"),W=(0,i.up)("q-toggle"),y=(0,i.up)("q-pagination"),V=(0,i.up)("q-icon"),x=(0,i.up)("q-td"),C=(0,i.up)("q-badge"),_=(0,i.up)("q-tooltip"),q=(0,i.up)("q-btn-group"),E=(0,i.up)("q-table"),A=(0,i.up)("q-page"),k=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(A,null,{default:Ch((()=>[(0,i.Wm)("div",_h,[(0,i.Wm)("div",qh,[(0,i.Wm)("div",{class:`q-pa-xs bg-${"detalle"==s.type?"red":"green"} text-center text-bold text-white`},(0,R.zw)("detalle"==s.type?"VENTA POR DETALLE":"VENTA POR LOCAL"),3)]),(0,i.Wm)("div",Eh,[(0,i.Wm)(r,{type:"date",outlined:"",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),dense:"",label:"Fecha"},null,8,["modelValue"])]),(0,i.Wm)("div",Ah,[(0,i.Wm)(d,{dense:"",color:"green",icon:"add_circle",onClick:a[2]||(a[2]=e=>{s.modalregistro=!0,s.newcliente={fechanac:"2000-01-01"}})}),s.client?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",color:"yellow",icon:"edit",onClick:a[3]||(a[3]=a=>{e.modcliente=s.client,s.dialog_mod=!0})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",kh,[(0,i.Wm)(u,{outlined:"",dense:"",modelValue:s.client,"onUpdate:modelValue":a[4]||(a[4]=e=>s.client=e),"use-input":"","input-debounce":"0",label:"Cliente",options:s.clients,onFilter:n.filterFn,behavior:"menu"},{"no-option":Ch((()=>[(0,i.Wm)(m,null,{default:Ch((()=>[(0,i.Wm)(c,{class:"text-grey"},{default:Ch((()=>[Dh])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",Mh,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:s.obs,"onUpdate:modelValue":a[5]||(a[5]=e=>s.obs=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Oh,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.$gruposProductos,((e,a)=>((0,i.wg)(),(0,i.j4)(d,{key:a,label:e,color:"indigo",class:"q-ma-xs",onClick:a=>n.getProductsFilter(e),"no-caps":"",icon:"check_circle",size:"10px"},null,8,["label","onClick"])))),128)),(0,i.Wm)(d,{label:"Todo",color:"indigo",class:"q-ma-xs",onClick:a[6]||(a[6]=e=>n.getProductsFilter("Todo")),"no-caps":"",icon:"check_circle",size:"10px"})]),(0,i.Wm)("div",Th,[(0,i.Wm)("div",Sh,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.products,(e=>((0,i.wg)(),(0,i.j4)("div",{class:"col-2",key:e.id,style:{padding:"5px"}},[(0,i.Wm)(f,{style:[{height:"80px"},"background-color: "+e.color],onClick:a=>n.saleAdd(e),class:"no_selection"},{default:Ch((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"},{default:Ch((()=>[(0,i.Wm)("div",Rh,(0,R.zw)(e.precio)+"Bs.",1),(0,i.Wm)(p),e.cantidad>0?((0,i.wg)(),(0,i.j4)("div",Uh,[(0,i.Wm)(h,{color:"primary",class:" q-ma-none text-bold text-white",dense:"",label:e.cantidad},null,8,["label"])])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ch((()=>[(0,i.Wm)("div",$h,(0,R.zw)(e.nombre),1)])),_:2},1024)])),_:2},1032,["onClick","style"])])))),128))])]),(0,i.Wm)("div",Nh,[(0,i.Wm)(f,null,{default:Ch((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ch((()=>[Yh])),_:1}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ch((()=>[Ih,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.productSales,((e,a)=>((0,i.wg)(),(0,i.j4)("div",{class:"row items-center",key:e.id},[(0,i.Wm)("div",Ph,[(0,i.Wm)(r,{modelValue:e.cantidad,"onUpdate:modelValue":a=>e.cantidad=a,dense:"",type:"number",step:"0.25"},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",Lh,(0,R.zw)(e.nombre),1),(0,i.Wm)("div",jh,[(0,i.Wm)(r,{modelValue:e.precio,"onUpdate:modelValue":a=>e.precio=a,dense:"",type:"number",step:"0.1"},{append:Ch((()=>[Fh])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",zh,(0,R.zw)(e.precio*e.cantidad)+"Bs.",1),(0,i.Wm)("div",Zh,[(0,i.Wm)(d,{color:"red",icon:"delete",dense:"",onClick:t=>n.delProduct(a,e.id)},null,8,["onClick"])])])))),128))])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:Ch((()=>[(0,i.Wm)("div",Qh,[(0,i.Wm)("div",Bh,[(0,i.Wm)(r,{modelValue:s.monto,"onUpdate:modelValue":a[7]||(a[7]=e=>s.monto=e),dense:"",outlined:"",label:"Monto",type:"number",step:"0.1"},{append:Ch((()=>[Gh])),_:1},8,["modelValue"])]),(0,i.Wm)("div",Hh,[(0,i.Wm)("div",Jh,[Kh,(0,i.Wm)("span",Xh,(0,R.zw)(n.total)+"Bs.",1)])]),(0,i.Wm)("div",eg,[(0,i.Wm)("div",ag,[tg,(0,i.Wm)("span",{class:n.porCobrar>0?"text-red text-h5":"text-green text-h5"},(0,R.zw)(n.porCobrar)+"Bs.",3)])]),(0,i.Wm)("div",og,[(0,i.Wm)("div",{class:`bg-${n.porCobrar>0?"red":"green"}-3 text-${n.porCobrar>0?"red":"green"}-8 text-bold q-ma-xs q-pa-xs`,style:`border: 1px solid ${n.porCobrar>0?"red":"green"};border-radius: 5px`},(0,R.zw)(n.porCobrar>0?"POR COBRAR":"CANCELADO"),7)]),(0,i.Wm)("div",lg,[(0,i.Wm)(d,{color:"green",icon:"check_circle",label:"Generar Venta",onClick:n.saleSave},null,8,["onClick"])]),ig])])),_:1})]),(0,i.Wm)(v,{modelValue:s.modalregistro,"onUpdate:modelValue":a[19]||(a[19]=e=>s.modalregistro=e)},{default:Ch((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[sg])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ch((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:Ch((()=>[(0,i.Wm)("div",ng,[(0,i.Wm)("div",rg,[(0,i.Wm)(r,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[8]||(a[8]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",dg,[(0,i.Wm)(r,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[9]||(a[9]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",cg,[(0,i.Wm)(r,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",mg,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[11]||(a[11]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),"local"==s.type?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",ug,[(0,i.Wm)(r,{outlined:"",label:"Local",modelValue:s.newcliente.local,"onUpdate:modelValue":a[12]||(a[12]=e=>s.newcliente.local=e)},null,8,["modelValue"])]),(0,i.Wm)("div",pg,[(0,i.Wm)(r,{outlined:"",label:"Fecha Nac",type:"date",modelValue:s.newcliente.fechanac,"onUpdate:modelValue":a[13]||(a[13]=e=>s.newcliente.fechanac=e)},null,8,["modelValue"])]),(0,i.Wm)("div",hg,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.tipo,"onUpdate:modelValue":a[14]||(a[14]=e=>s.newcliente.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",gg,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.legalidad,"onUpdate:modelValue":a[15]||(a[15]=e=>s.newcliente.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"])]),(0,i.Wm)("div",fg,[(0,i.Wm)(u,{outlined:"",modelValue:s.newcliente.categoria,"onUpdate:modelValue":a[16]||(a[16]=e=>s.newcliente.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"])]),(0,i.Wm)("div",bg,[(0,i.Wm)(r,{outlined:"",label:"Razon Social",modelValue:s.newcliente.razon,"onUpdate:modelValue":a[17]||(a[17]=e=>s.newcliente.razon=e)},null,8,["modelValue"])]),(0,i.Wm)("div",vg,[(0,i.Wm)(r,{outlined:"",label:"NIT",modelValue:s.newcliente.nit,"onUpdate:modelValue":a[18]||(a[18]=e=>s.newcliente.nit=e)},null,8,["modelValue"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",wg,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Ch((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogGarantia,"onUpdate:modelValue":a[20]||(a[20]=e=>s.dialogGarantia=e)},{default:Ch((()=>[(0,i.Wm)(f,null,{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[Wg])),_:1}),(0,i.Wm)(g,null,{default:Ch((()=>[yg])),_:1}),(0,i.Wm)(w,{align:"center"},{default:Ch((()=>[(0,i.Wm)(d,{flat:"",label:"Cerrar",color:"red",onClick:n.garantiaFin},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"No",color:"accent",onClick:n.garantiaCancel},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"SI",color:"green",onClick:n.garantiaOk},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialogGarantia2,"onUpdate:modelValue":a[21]||(a[21]=e=>s.dialogGarantia2=e),persistent:""},{default:Ch((()=>[(0,i.Wm)(f,null,{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[Vg])),_:1}),(0,i.Wm)(g,null,{default:Ch((()=>[xg])),_:1}),(0,i.Wm)(w,{align:"center"},{default:Ch((()=>[(0,i.Wm)(d,{flat:"",label:"FINALIZAR",color:"accent",onClick:n.garantiaFin2},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"OK",color:"green",onClick:n.garantiaOk2},null,8,["onClick"]),(0,i.Wm)(d,{flat:"",label:"IMPRIMIR",color:"red",onClick:n.garantiaCancel2},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[34]||(a[34]=e=>s.dialog_mod=e)},{default:Ch((()=>[(0,i.Wm)(f,null,{default:Ch((()=>[(0,i.Wm)(g,{class:"bg-green-14 text-white"},{default:Ch((()=>[Cg])),_:1}),(0,i.Wm)(g,{class:"q-pt-xs"},{default:Ch((()=>[(0,i.Wm)(b,{onSubmit:n.onMod,class:"q-gutter-md"},{default:Ch((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:e.modcliente.ci,"onUpdate:modelValue":a[22]||(a[22]=a=>e.modcliente.ci=a),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:e.modcliente.titular,"onUpdate:modelValue":a[23]||(a[23]=a=>e.modcliente.titular=a),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:e.modcliente.telefono,"onUpdate:modelValue":a[24]||(a[24]=a=>e.modcliente.telefono=a),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:e.modcliente.direccion,"onUpdate:modelValue":a[25]||(a[25]=a=>e.modcliente.direccion=a),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:e.modcliente.observacion,"onUpdate:modelValue":a[26]||(a[26]=a=>e.modcliente.observacion=a),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,["local"==s.type?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)(r,{outlined:"",label:"Local",modelValue:e.modcliente.local,"onUpdate:modelValue":a[27]||(a[27]=a=>e.modcliente.local=a)},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"Fecha Nac",type:"date",modelValue:e.modcliente.fechanac,"onUpdate:modelValue":a[28]||(a[28]=a=>e.modcliente.fechanac=a)},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.tipo,"onUpdate:modelValue":a[29]||(a[29]=a=>e.modcliente.tipo=a),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.legalidad,"onUpdate:modelValue":a[30]||(a[30]=a=>e.modcliente.legalidad=a),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.categoria,"onUpdate:modelValue":a[31]||(a[31]=a=>e.modcliente.categoria=a),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"Razon Social",modelValue:e.modcliente.razon,"onUpdate:modelValue":a[32]||(a[32]=a=>e.modcliente.razon=a)},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",label:"NIT",modelValue:e.modcliente.nit,"onUpdate:modelValue":a[33]||(a[33]=a=>e.modcliente.nit=a)},null,8,["modelValue"])],64)):(0,i.kq)("",!0),(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[k]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("div",_g,[(0,i.Wm)("div",qg,[(0,i.Wm)("div",Eg,[(0,i.Wm)(r,{outlined:"",modelValue:s.fecha1,"onUpdate:modelValue":a[35]||(a[35]=e=>s.fecha1=e),label:"Fecha Inicial",dense:"",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ag,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(r,{key:0,outlined:"",modelValue:s.fecha2,"onUpdate:modelValue":a[36]||(a[36]=e=>s.fecha2=e),label:"Fecha Final",dense:"",type:"date"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",kg,[(0,i.Wm)(W,{modelValue:s.rango,"onUpdate:modelValue":a[37]||(a[37]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Dg,[(0,i.Wm)(d,{color:"info",label:"CONSULTAR",icon:"search",dense:"",onClick:a[38]||(a[38]=e=>n.consultaVenta(s.type))})]),(0,i.Wm)("div",Mg,[(0,i.Wm)(y,{modelValue:s.pagination.page,"onUpdate:modelValue":a[39]||(a[39]=e=>s.pagination.page=e),max:s.pagination.last_page,min:1,"total-pages":Math.ceil(s.pagination.rowsNumber/s.pagination.rowsPerPage),onClick:a[40]||(a[40]=e=>n.consultaVenta(s.type)),"max-pages":6,"boundary-numbers":""},null,8,["modelValue","max","total-pages"])])]),(0,i.Wm)("div",Og,[(0,i.Wm)(E,{pagination:s.pagination,"onUpdate:pagination":a[43]||(a[43]=e=>s.pagination=e),title:"Ventas",rows:s.ventas,columns:s.columnas,"row-key":"name",filter:s.filter,"rows-per-page-options":[0]},{"top-right":Ch((()=>[(0,i.Wm)(r,{outlined:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":[a[41]||(a[41]=e=>s.filter=e),a[42]||(a[42]=e=>n.consultaVenta(s.type))],placeholder:"Search"},{append:Ch((()=>[(0,i.Wm)(V,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-cliente":Ch((e=>[(0,i.Wm)(x,{key:"cliente",props:e},{default:Ch((()=>[(0,i.Uk)((0,R.zw)(e.row.cliente.local)+" "+(0,R.zw)(e.row.cliente.titular),1)])),_:2},1032,["props"])])),"body-cell-observacion":Ch((e=>[(0,i.Wm)(x,{key:"cliente",props:e},{default:Ch((()=>[""!=e.row.observacion?((0,i.wg)(),(0,i.j4)(d,{key:0,color:"purple",icon:"subject",onClick:a=>n.verObs(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-user":Ch((e=>[(0,i.Wm)(x,{key:"user",props:e},{default:Ch((()=>[(0,i.Uk)((0,R.zw)(e.row.user.name),1)])),_:2},1032,["props"])])),"body-cell-estado":Ch((e=>[(0,i.Wm)(x,{key:"estado",props:e},{default:Ch((()=>[(0,i.Wm)(C,{color:"POR COBRAR"==e.row.estado||"ANULADO"==e.row.estado?"red":"green",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":Ch((a=>[(0,i.Wm)(x,{key:"opcion",props:a},{default:Ch((()=>[(0,i.Wm)(q,null,{default:Ch((()=>[e.$store.state.login.anularventa&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"delete",color:"red",onClick:e=>n.anular(a.row),size:"xs"},{default:Ch((()=>[(0,i.Wm)(_,null,{default:Ch((()=>[Tg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),null!=a.row.fechaentrega&&""!=a.row.fechaentrega&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"local_shipping",color:"indigo-3",onClick:e=>n.printruta(a.row),size:"xs"},{default:Ch((()=>[(0,i.Wm)(_,null,{default:Ch((()=>[Sg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:2,icon:"local_shipping",color:"accent",onClick:e=>n.clickhojaruta(a.row),size:"xs"},{default:Ch((()=>[(0,i.Wm)(_,null,{default:Ch((()=>[Rg])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(d,{icon:"shopping_cart",color:"orange",onClick:e=>n.clickcompra(a.row),size:"xs"},{default:Ch((()=>[(0,i.Wm)(_,null,{default:Ch((()=>[Ug])),_:1})])),_:2},1032,["onClick"]),e.$store.state.login.reimpresion&&"ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(i.HY,{key:3},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},{default:Ch((()=>[(0,i.Wm)(_,null,{default:Ch((()=>[$g])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["pagination","rows","columns","filter"])])]),(0,i.Wm)(v,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[54]||(a[54]=e=>s.modalgarantia=e),persistent:""},{default:Ch((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[Ng])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ch((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:Ch((()=>[(0,i.Wm)("div",Yg,[(0,i.Wm)("div",Ig,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.client.label,"onUpdate:modelValue":a[44]||(a[44]=e=>s.client.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pg,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.client.telefono,"onUpdate:modelValue":a[45]||(a[45]=e=>s.client.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Lg,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.client.direccion,"onUpdate:modelValue":a[46]||(a[46]=e=>s.client.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",jg,[(0,i.Wm)(u,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[47]||(a[47]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Fg,[(0,i.Wm)(r,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":[a[48]||(a[48]=e=>s.newgarantia.cantidad=e),n.calcular]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",zg,[(0,i.Wm)(r,{outlined:"",type:"number",step:"0.01",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[49]||(a[49]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Zg,[(0,i.Wm)(r,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[50]||(a[50]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Qg,[(0,i.Wm)(r,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[51]||(a[51]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Bg,[(0,i.wy)((0,i.Wm)("input",{style:{"margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[52]||(a[52]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Gg,(0,i.wy)((0,i.Wm)("input",{style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"VENTA","onUpdate:modelValue":a[53]||(a[53]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Hg]),(0,i.Wm)("div",Jg,[(0,i.Wm)("div",Kg,[(0,i.Wm)(d,{type:"submit",color:"primary",icon:"add_circle",label:"Registrar"})]),(0,i.Wm)("div",Xg,[(0,i.Wm)(d,{color:"red",icon:"cancel",label:"Cancelar",onClick:n.cancelarGarantia},null,8,["onClick"])])])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[65]||(a[65]=e=>s.modalhojaruta=e)},{default:Ch((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[(0,i.Wm)("div",ef,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ch((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:Ch((()=>[(0,i.Wm)("div",af,[(0,i.Wm)("div",tf,[(0,i.Wm)(r,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[55]||(a[55]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",of,[(0,i.Wm)(u,{required:"",options:["MAÑANA","TARDE","NOCHE"],outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[56]||(a[56]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",lf,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[57]||(a[57]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",sf,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[58]||(a[58]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",nf,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[59]||(a[59]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",rf,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[60]||(a[60]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",df,[(0,i.Wm)(r,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[61]||(a[61]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",cf,[(0,i.Wm)(r,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[62]||(a[62]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",mf,[(0,i.Wm)(r,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[63]||(a[63]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",uf,[(0,i.Wm)(r,{outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[64]||(a[64]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",pf,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Ch((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalDialog,"onUpdate:modelValue":a[66]||(a[66]=e=>s.modalDialog=e)},{default:Ch((()=>[(0,i.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:Ch((()=>[(0,i.Wm)(g,null,{default:Ch((()=>[hf])),_:1}),(0,i.Wm)(g,null,{default:Ch((()=>[(0,i.Wm)("div",null,[gf,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",ff,[bf,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(w,{align:"right"},{default:Ch((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"OK",color:"primary"},null,512),[[k]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})})),wf={name:"Sale",data(){return{monto:0,dialogGarantia:!1,dialogGarantia2:!1,printboleta:"",prestamolista:[],fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha1:X.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:X.ZP.formatDate(new Date,"YYYY-MM-DD"),products:[],productsAll:[],modalregistro:!1,newcliente:{fechanac:"2000-01-01"},filter:"",product:{},clients2:[],clients:[],client:"",productSales:[],sale:{},ventas:[],obs:"",inventarios:[],inventario:{},newgarantia:{},modalgarantia:!1,modalhojaruta:!1,modalDialog:!1,dialog_mod:!1,rango:"RANGO",venta:{},type:this.$route.params.type,pagination:{page:1,rowsPerPage:15,rowsNumber:0,last_page:0},columnas:[{label:"opcion",name:"opcion",field:"opcion"},{label:"id",name:"id",field:"id"},{label:"fecha",name:"fecha",field:e=>Se()(e.fecha).format("DD/MM/YYYY")},{label:"hora",name:"hora",field:e=>Se()(e.created_at).format("HH:mm")},{label:"cliente",name:"cliente",field:e=>e.cliente.local+" "+e.cliente.titular,align:"left"},{label:"total",name:"total",field:"total"},{label:"acuenta",name:"acuenta",field:"acuenta"},{label:"saldo",name:"saldo",field:"saldo"},{label:"estado",name:"estado",field:"estado"},{label:"user",name:"user",field:"user"},{label:"observacion",name:"observacion",field:"observacion"}]}},created(){console.log(this.type),this.$watch((()=>this.$route.params),(e=>{if(console.log(e),console.log(e),void 0==e)return!1;this.type=e.type,this.datosGet(e.type),this.consultaVenta(e.type),this.calcular(),this.$axios.get("https://bnaty.tuprogam.com/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]}))})),this.datosGet(this.type),this.consultaVenta(this.type),this.calcular(),this.$axios.get("https://bnaty.tuprogam.com/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]}))},methods:{getProductsFilter(e){if("Todo"==e)return this.products=this.productsAll,!1;this.products=this.productsAll.filter((a=>a.grupo==e))},cancelarGarantia(){this.modalgarantia=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}},onRequest(e){this.datosGet(this.type,e.pagination.page)},delProduct(e,a){console.log(e),this.productSales.splice(e,1),find=this.products.find((e=>e.id==a)),find.cantidad=0},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.newgarantia.efectivo=parseFloat(this.newgarantia.cantidad)*parseFloat(this.inventario.precio)},onMod(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.datosGet(this.type)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,"local"==this.type?this.newcliente.tipocliente=1:this.newcliente.fechanac=null,this.$axios.post("https://bnaty.tuprogam.com/api/agregarcliente",this.newcliente).then((()=>{this.$q.notify({message:"Cliente Registrado",color:"green",position:"top",icon:"info"}),this.$q.loading.hide(),this.datosGet(this.type),this.modalregistro=!1,this.newcliente={fechanac:"2000-01-01"}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"top",icon:"error"})}))},impresion(){if(0==this.ventas.length)return!1;let e=0,a=0,t=0,o="<style>\n      *{\n      }\n      table{width:100%;border-collapse: collapse;}\n      table, th, td {\n        //border: 1px solid;\n      }\n      </style>\n      <div style='padding:5px'>\n      <div style='text-align:center'>HISTORIAL DE VENTAS DE "+this.fecha1+" AL "+this.fecha2+"</div>\n      <hr>\n      <table>\n        <tr><th>TOTAL</th><th>A CUENTA</th><th>SALDO</th><th>TITULAR</th><th>USUARIO</th><tr>";this.ventas.forEach((l=>{e+=l.total,a+=l.acuenta,t+=l.saldo,o+="<tr><td>"+l.total+"</td><td>"+l.acuenta+"</td><td>"+l.saldo+"</td><td>"+l.cliente.titular+"</td><td>"+l.user.name+"</td></tr>"})),o+="</table>      <div><b>Total Venta </b>"+e+"</div>      <div><b>Total A Cuenta </b>"+a+"</div>      <div><b>Total Saldo </b>"+t+"</div>      </div>";let l=window.open("","Imprimir","width=1000,height=1000");l.document.write(o),l.document.close(),l.focus(),setTimeout((function(){l.print(),l.close()}),500)},impboleta(e){this.$axios.post("https://bnaty.tuprogam.com/api/impresionVenta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickcompra(e){console.log(e),this.venta=e,this.modalDialog=!0},actualizarventa(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/updateRuta",{id:this.venta.id,turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{this.modalhojaruta=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.$q.loading.hide(),this.consultaVenta(this.type)}))},printruta(e){this.$axios.post("https://bnaty.tuprogam.com/api/impresionruta/"+e.id).then((e=>{let a=window.open("_blank");a.document.write(e.data),a.document.close()}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("https://bnaty.tuprogam.com/api/anular",{id:e.id,observacion:a}).then((e=>{this.consultaVenta(this.type),this.$q.notify({message:"Venta Anulado ",color:"green",position:"top",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultaVenta(e){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$api.post("listSale",{tipo:"detalle"==e?"DETALLE":"LOCAL",ini:this.fecha1,fin:this.fecha2,page:this.pagination.page,filter:this.filter}).then((e=>{console.log(e.data),this.pagination.rowsNumber=e.data.total,this.pagination.page=e.data.current_page,this.pagination.last_page=e.data.last_page,e.data.data.forEach((e=>{e.telefono1=e.cliente.telefono})),this.ventas=e.data.data}))},saleSave(){return""==this.fecha||void 0==this.fecha?(this.$q.notify({message:"Ingrese la fecha",color:"red",position:"top",icon:"error"}),!1):0==this.productSales.length?(console.log("sin prod"),this.$q.notify({message:"Seleccione Productos",color:"red",position:"top",icon:"error"}),!1):void 0==this.client.id||""==this.client.id?(console.log("sin cliente"),this.$q.notify({message:"Debe Seleccionar Cliente",color:"red",position:"top",icon:"error"}),!1):this.monto<0||this.monto>this.total||void 0==this.monto?(console.log("sin monto"),this.$q.notify({message:"Verifique el monto",color:"red",position:"top",icon:"error"}),!1):(console.log(this.client.id),this.$q.loading.show(),this.productSales.forEach((e=>{e.subtotal=e.precio*e.cantidad})),this.sale.tipo="detalle"==this.type?"DETALLE":"LOCAL",this.sale.fecha=this.fecha,this.sale.cliente_id=this.client.id,this.sale.total=this.total,this.sale.acuenta=this.monto,this.sale.saldo=this.porCobrar,this.sale.estado=this.porCobrar>0?"POR COBRAR":"CANCELADO",this.sale.detalles=this.productSales,this.sale.observacion=this.obs,console.log(this.sale),this.printboleta="",void this.$api.post("sale",this.sale).then((e=>{this.printboleta=e.data,this.dialogGarantia=!0,this.$q.loading.hide(),this.consultaVenta(this.type),this.saleClear(),this.$q.notify({message:"Venta exitosa",color:"green",position:"top",icon:"info"})})))},garantiaOk(){this.prestamolista=[],this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.dialogGarantia=!1,this.calcular,this.modalgarantia=!0},garantiaFin(){this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""},this.client={label:""},this.dialogGarantia=!1},garantiaCancel(){this.dialogGarantia=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""};let e=window.open("","Imprimir","width=1000,height=1000");e.document.write(this.printboleta),e.document.close(),e.focus(),e.print(),e.close()},datosGet(e,a=1){this.products=[],this.productsAll=[],this.$q.loading.show(),this.$api.get(`/listaproducto/${e}`).then((a=>{a.data.forEach((e=>{e.cantidad=0,this.products.push(e),this.productsAll.push(e)})),this.clients=[],this.$api.get(`/listacliente2/${e}`).then((e=>{e.data.forEach((e=>{e.label=e.ci+" "+e.local+" "+e.titular,this.clients.push(e)})),this.clients2=this.clients})),this.$q.loading.hide()}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.clients=this.clients2.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.clients=this.clients2})},saleClear(){this.productSales=[],this.products.forEach((e=>{e.cantidad=0}))},saleAdd(e){e.cantidad++;let a=this.productSales.find((a=>a.id==e.id));a?a.cantidad++:this.productSales.push({id:e.id,nombre:e.nombre,precio:e.precio,cantidad:1})},agregargarantia(){this.monto=0,this.obs="",this.sale={},this.productSales=[],this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.client.id,tipo:this.newgarantia.tipo,fecha:X.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.prestamolista.push({cantidad:this.newgarantia.cantidad,nombre:this.inventario.nombre,efectivo:this.newgarantia.efectivo,tipo:this.newgarantia.tipo}),this.$q.loading.hide(),this.producto="",this.cantidad=1,this.newgarantia={},this.calcular,this.modalgarantia=!1,this.dialogGarantia2=!0})).catch((e=>{this.$q.loading.hide(),console.log(e),this.$q.notify({message:e.message.error,color:"red",position:"top",icon:"error"})}))},garantiaOk2(){this.dialogGarantia2=!1,this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.modalgarantia=!0},garantiaCancel2(){this.dialogGarantia2=!1;let e=!1;this.printboleta+="<hr style=' border: 4px dashed;'><div style='text-align:center'>Detalle de Prestamo o venta de material</div><div><b>Cliente </b>"+this.client.local+" - "+this.client.titular+"</div><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((a=>{"EN PRESTAMO"==a.tipo&&(a.tipo="PRESTAMO",e=!0),this.printboleta+="<tr><td>"+a.cantidad+"</td><td>"+a.nombre+"</td><td>"+a.efectivo+"</td><td>"+a.tipo+"</td></tr>"})),this.printboleta+="</table></div>",e&&(this.printboleta+="<br><hr style=' border: 4px dashed;'><div style='text-align:center'>copia para archivo</div><div><b>Cliente </b>"+this.client.local+" - "+this.client.titular+"</div><div><b>Fecha: </b>"+this.fecha+"</div><div><b>Usuario: </b>"+this.$store.state.login.user.name+"</div><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((e=>{"EN PRESTAMO"==e.tipo&&(e.tipo="PRESTAMO"),this.printboleta+="<tr><td>"+e.cantidad+"</td><td>"+e.nombre+"</td><td>"+e.efectivo+"</td><td>"+e.tipo+"</td></tr>"})),this.printboleta+="</table></div><br><br><div class='leyenda' style='text-align:center'><b>FIRMA</div><div class='leyenda'>* Accepto todas las condiciones y terminos de prestamo de envases <b></div>");let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(this.printboleta),a.document.close(),a.focus(),a.print(),a.close(),this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}},garantiaFin2(){this.dialogGarantia2=!1,this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}}},computed:{total(){let e=0;return this.productSales.forEach((a=>{e+=a.precio*a.cantidad})),e},porCobrar(){return this.total-this.monto}}};var Wf=t(67030);wf.render=vf,wf.__scopeId="data-v-6c558d38";const yf=wf;T()(wf,"components",{QPage:V.Z,QInput:E.Z,QBtn:k.Z,QSelect:Ue.Z,QItem:ea.Z,QItemSection:aa.Z,QCard:x.Z,QCardSection:C.Z,QSpace:yn.Z,QChip:Wf.Z,QForm:q.Z,QDialog:me.Z,QCardActions:M.Z,QToggle:A.Z,QPagination:kd.Z,QTable:re.Z,QIcon:_.Z,QTd:ce.Z,QBadge:ie.Z,QBtnGroup:ms.Z,QTooltip:ne.Z}),T()(wf,"directives",{ClosePopup:pe.Z});const Vf=(0,i.HX)("data-v-72766643");(0,i.dD)("data-v-72766643");const xf={class:"row"},Cf={class:"col-4 flex flex-center"},_f={class:"col-4 flex flex-center"},qf={class:"col-4 flex flex-center"},Ef={class:"col-12"},Af=(0,i.Uk)("Editar"),kf=(0,i.Uk)("Eliminar"),Df=(0,i.Uk)("Reporte"),Mf={class:"absolute-full flex flex-center"},Of={class:"col-3"},Tf={class:"col-3"},Sf={class:"col-3 flex flex-center"},Rf={class:"col-3 flex flex-center"},Uf={class:"col-12"},$f=(0,i.Uk)("Realizar Pago"),Nf=(0,i.Uk)("Ver Pagos"),Yf=(0,i.Uk)("Realizar retiro"),If=(0,i.Uk)("Ver Retiros"),Pf=(0,i.Uk)("Editar"),Lf=(0,i.Uk)("Eliminar"),jf=(0,i.Uk)("Comentario admin"),Ff={class:"text-h6"},zf={class:"row"},Zf={class:"col-5"},Qf={class:"col-4"},Bf={class:"col-3"},Gf={class:"col-12"},Hf={class:"col-6"},Jf={class:"col-6"},Kf={class:"text-h6"},Xf={class:"row"},eb={class:"col-12"},ab={class:"col-6"},tb={class:"col-6"},ob=(0,i.Uk)(" Cantidad minima de material en almacen "),lb=(0,i.Wm)("div",{class:"text-bold text-center"},"INGRESO DE MATERIA PRIMA",-1),ib={class:"row"},sb={class:"col-6"},nb={class:"col-6"},rb={class:"col-2"},db={class:"col-2"},cb={key:0,class:"col-1 flex-center flex text-bold text-center"},mb={class:"col-2"},ub={class:"col-3"},pb={key:1,class:"col-3"},hb={class:"col-3"},gb={class:"col-12 text-right"},fb={key:2,class:"col-12"},bb=(0,i.Wm)("th",{class:"text-left"},"NRO",-1),vb=(0,i.Wm)("th",{class:"text-left"},"MATERIAL",-1),wb=(0,i.Wm)("th",{class:"text-center"},"CANTIDAD",-1),Wb={key:0},yb={key:1},Vb=(0,i.Wm)("th",{class:"text-center"},"LOTE",-1),xb=(0,i.Wm)("th",{class:"text-left"},"FEC VEN",-1),Cb=(0,i.Wm)("th",{class:"text-left"},"OBS",-1),_b=(0,i.Wm)("th",{class:"text-right"},"OPCION",-1),qb={class:"text-left"},Eb={class:"text-left"},Ab={class:"text-center"},kb={class:"text-center"},Db={class:"text-left"},Mb={class:"text-left"},Ob={class:"text-right"},Tb=(0,i.Wm)("div",null,null,-1),Sb=(0,i.Wm)("div",{class:"text-h7 text-bold text-center"},"PAGAR POR LA COMPRA",-1),Rb={class:"row"},Ub={key:0},$b={class:"col-5"},Nb={class:"col-5"},Yb={class:"col-2"},Ib={class:"col-4"},Pb={class:"col-4"},Lb={class:"col-4"},jb={class:"col-6"},Fb={class:"col-6"},zb={class:"col-12"},Zb=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),Qb=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL ",-1),Bb={class:"text-h7"},Gb={class:"text-h7"};(0,i.Cn)();const Hb=Vf(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-btn"),r=(0,i.up)("q-icon"),d=(0,i.up)("q-input"),c=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),u=(0,i.up)("q-list"),p=(0,i.up)("q-btn-dropdown"),h=(0,i.up)("q-td"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-linear-progress"),b=(0,i.up)("q-table"),v=(0,i.up)("q-tooltip"),w=(0,i.up)("q-space"),W=(0,i.up)("q-card-section"),y=(0,i.up)("q-form"),V=(0,i.up)("q-card"),x=(0,i.up)("q-dialog"),C=(0,i.up)("q-select"),_=(0,i.up)("q-markup-table"),q=(0,i.up)("q-card-actions"),E=(0,i.up)("q-page"),A=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(E,{class:"q-pa-xs"},{default:Vf((()=>[(0,i.Wm)("div",xf,[(0,i.Wm)("div",Cf,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.providerList,loading:l.loading,label:"Registro de Provedor",color:"blue-7","no-caps":"",icon:"o_assignment_ind"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",_f,[e.$store.state.login.almacenCrearMateriaPrima?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.materialAdd,loading:l.loading,label:"Registro de materia prima",color:"green-7","no-caps":"",icon:"o_shopping_bag"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",qf,[e.$store.state.login.ingresoMaterial?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.compraAdd,loading:l.loading,label:"Ingreso de Material Prima",color:"cyan-7","no-caps":"",icon:"add_circle_outline"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Ef,[(0,i.Wm)(b,{dense:"",title:"Lista de Materiales",rows:l.materials,columns:l.materialColumns,loading:l.loading,"rows-per-page-options":[0],filter:l.almacenFilter,flat:"","row-class":"cursor-pointer"},{"top-right":Vf((()=>[(0,i.Wm)(n,{dense:"",color:"green",label:"EXCEL",onClick:s.exportTable},null,8,["onClick"]),(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.almacenFilter,"onUpdate:modelValue":a[1]||(a[1]=e=>l.almacenFilter=e),debounce:"300",placeholder:"Buscar..."},{append:Vf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":Vf((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:Vf((()=>[(0,i.Wm)(p,{icon:"more_vert","no-caps":"",dense:"",color:"primary",label:"Opciones"},{default:Vf((()=>[(0,i.Wm)(u,null,{default:Vf((()=>[(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialEdit(e.row)},{default:Vf((()=>[(0,i.Wm)(c,null,{default:Vf((()=>[Af])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialDelete(e.row)},{default:Vf((()=>[(0,i.Wm)(c,null,{default:Vf((()=>[kf])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.reporte(e.row)},{default:Vf((()=>[(0,i.Wm)(c,null,{default:Vf((()=>[Df])),_:1})])),_:2},1032,["onClick"]),[[A]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-stock":Vf((e=>[(0,i.Wm)(h,{props:e},{default:Vf((()=>[(0,i.Wm)(f,{size:"18px",rounded:"",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",class:"full-width"},{default:Vf((()=>[(0,i.Wm)("div",Mf,[(0,i.Wm)(g,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","filter"])]),(0,i.Wm)("div",Of,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Tf,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[3]||(a[3]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Sf,[(0,i.Wm)(n,{color:"info",label:"Consultar",onClick:s.consultmaterial,"no-caps":""},null,8,["onClick"])]),(0,i.Wm)("div",Rf,[(0,i.Wm)(n,{color:"green",label:"EXCEL",onClick:s.exportTable2,"no-caps":""},null,8,["onClick"])]),(0,i.Wm)("div",Uf,[(0,i.Wm)(b,{dense:"","rows-per-page-options":[0],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,flat:"","row-key":"name"},{"body-cell-estado":Vf((a=>[(0,i.Wm)(h,{key:"estado",props:a},{default:Vf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(g,{key:0,color:"POR PAGAR"==a.row.estado?"red":"green"},{default:Vf((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":Vf((()=>[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[4]||(a[4]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Vf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-costo":Vf((a=>[(0,i.Wm)(h,{props:a},{default:Vf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(g,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Vf((()=>[(0,i.Uk)((0,R.zw)(a.row.costo),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldocant":Vf((e=>[(0,i.Wm)(h,{props:e,style:e.row.saldocant>=1?"font-weight: bold; font-size: 18px;":"",color:e.row.saldocant>=1?"black":"red"},{default:Vf((()=>[(0,i.Uk)((0,R.zw)(e.row.saldocant),1)])),_:2},1032,["props","style","color"])])),"body-cell-material":Vf((e=>[(0,i.Wm)(h,{props:e,style:{"font-weight":"bold"}},{default:Vf((()=>[(0,i.Uk)((0,R.zw)(e.row.material.nombre),1)])),_:2},1032,["props"])])),"body-cell-subtotal":Vf((a=>[(0,i.Wm)(h,{props:a},{default:Vf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(g,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Vf((()=>[(0,i.Uk)((0,R.zw)(a.row.subtotal),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldopago":Vf((a=>[(0,i.Wm)(h,{props:a},{default:Vf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.saldopago),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-deuda":Vf((a=>[(0,i.Wm)(h,{props:a},{default:Vf((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.deuda),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-comentario":Vf((a=>[(0,i.Wm)(h,{props:a},{default:Vf((()=>[null!=a.row.comentario&&1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"list",color:"indigo",dense:"",onClick:e=>s.verObs(a.row.comentario)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-observacion":Vf((e=>[(0,i.Wm)(h,{props:e},{default:Vf((()=>[null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(n,{key:0,icon:"list",color:"purple",dense:"",onClick:a=>s.verObs(e.row.observacion)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":Vf((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:Vf((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda<a.row.subtotal?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[$f])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.almacenHistorialPago&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(n,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"point_of_sale",onClick:e=>s.listpago(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[Nf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.retiro<a.row.cantidad?((0,i.wg)(),(0,i.j4)(n,{key:2,dense:"",round:"",flat:"",color:"teal",icon:"o_download",onClick:e=>s.retirarRow(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[Yf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.recuentos.length>0?((0,i.wg)(),(0,i.j4)(n,{key:3,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listrecuento(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[If])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:4,dense:"",round:"",flat:"",color:"yellow-9",icon:"o_edit",onClick:e=>s.editcompra(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[Pf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&"POR PAGAR"==a.row.estado?((0,i.wg)(),(0,i.j4)(n,{key:5,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[Lf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(n,{key:6,dense:"",round:"",flat:"",color:"indigo",icon:"info",onClick:e=>s.comentarioAdmin(a.row)},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[jf])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(x,{modelValue:l.providerDialog,"onUpdate:modelValue":a[15]||(a[15]=e=>l.providerDialog=e)},{default:Vf((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Vf((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Vf((()=>[(0,i.Wm)("div",Ff,(0,R.zw)("create"===l.providerOptions?"Registro de Provedor":"list"===l.providerOptions?"Lista de Provedores":"Editar Provedor"),1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Vf((()=>["create"==l.providerOptions||"edit"==l.providerOptions?((0,i.wg)(),(0,i.j4)(y,{key:0,onSubmit:a[12]||(a[12]=e=>"create"===l.providerOptions?s.providerCreate():s.providerUpdate())},{default:Vf((()=>[(0,i.Wm)("div",zf,[(0,i.Wm)("div",Zf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.nombre,"onUpdate:modelValue":a[5]||(a[5]=e=>l.provider.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Qf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.razon,"onUpdate:modelValue":a[6]||(a[6]=e=>l.provider.razon=e),label:"Razón Social","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Bf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.nit,"onUpdate:modelValue":a[7]||(a[7]=e=>l.provider.nit=e),label:"CI/NIT",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.direccion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.provider.direccion=e),label:"Dirección",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Hf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.email,"onUpdate:modelValue":a[9]||(a[9]=e=>l.provider.email=e),label:"Email",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Jf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>l.provider.telefono=e),label:"Teléfono",hint:""},null,8,["modelValue"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Vf((()=>[(0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:"",onClick:a[11]||(a[11]=e=>l.providerOptions="list")},null,8,["loading"]),(0,i.Wm)(n,{loading:l.loading,"no-caps":"",icon:"o_save",dense:"",type:"submit",label:"create"===l.providerOptions?"Guardar":"Actualizar",color:"create"===l.providerOptions?"green":"yellow-7"},null,8,["loading","label","color"])])),_:1})])),_:1})):(0,i.kq)("",!0),"list"===l.providerOptions?((0,i.wg)(),(0,i.j4)(b,{key:1,loading:l.loading,"rows-per-page-options":[0],dense:"",rows:l.providers,columns:l.providerColumns,"row-key":"name"},{"top-right":Vf((()=>[(0,i.Wm)(n,{color:"green",icon:"add_circle_outline",label:"Nuevo","no-caps":"",onClick:a[13]||(a[13]=e=>{l.providerOptions="create",l.provider={}})}),(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Vf((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":Vf((e=>[(0,i.Wm)(h,{key:"opcion",props:e},{default:Vf((()=>[(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:a=>{l.providerOptions="edit",l.provider=e.row}},null,8,["onClick"]),(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.delprovider(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.materialDialog,"onUpdate:modelValue":a[20]||(a[20]=e=>l.materialDialog=e)},{default:Vf((()=>[(0,i.Wm)(V,{style:{width:"500px","max-width":"90vw"}},{default:Vf((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Vf((()=>[(0,i.Wm)("div",Kf,(0,R.zw)("create"===l.materialOptions?"Registro de ":"Editar ")+" de materia prima",1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Vf((()=>[(0,i.Wm)(y,{onSubmit:a[19]||(a[19]=e=>"create"===l.materialOptions?s.materialCreate():s.materialUpdate())},{default:Vf((()=>[(0,i.Wm)("div",Xf,[(0,i.Wm)("div",eb,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.material.nombre,"onUpdate:modelValue":a[16]||(a[16]=e=>l.material.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",ab,[(0,i.Wm)(C,{outlined:"",dense:"",modelValue:l.material.unid,"onUpdate:modelValue":a[17]||(a[17]=e=>l.material.unid=e),label:"Unidad",options:l.unidades,"lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),(0,i.Wm)("div",tb,[(0,i.Wm)(d,{outlined:"",type:"number",dense:"",modelValue:l.material.min,"onUpdate:modelValue":a[18]||(a[18]=e=>l.material.min=e),label:"Minimo",hint:"",rules:[e=>!!e||"Campo requerido"]},{default:Vf((()=>[(0,i.Wm)(v,null,{default:Vf((()=>[ob])),_:1})])),_:1},8,["modelValue","rules"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Vf((()=>[(0,i.wy)((0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:""},null,8,["loading"]),[[A]]),(0,i.Wm)(n,{loading:l.loading,color:"green","no-caps":"",icon:"o_save",label:"Guardar",dense:"",type:"submit"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_add,"onUpdate:modelValue":a[29]||(a[29]=e=>l.dialog_add=e)},{default:Vf((()=>[(0,i.Wm)(V,{style:{width:"800px","max-width":"80vw"}},{default:Vf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white q-pb-none"},{default:Vf((()=>[lb])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Vf((()=>[(0,i.Wm)("div",ib,[(0,i.Wm)("div",sb,[(0,i.Wm)(C,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[21]||(a[21]=e=>l.material=e),options:l.materials,label:"Material","option-label":"nombre","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",nb,[(0,i.Wm)(C,{dense:"",outlined:"",modelValue:l.provider,"onUpdate:modelValue":a[22]||(a[22]=e=>l.provider=e),options:l.providers,label:"Proveedor","option-label":"razon","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",rb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",db,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[24]||(a[24]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)]),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("div",cb,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)(" Subtotal: "+(0,R.zw)(s.subTotalNumber(l.compra.costo,l.compra.cantidad)),1)],64)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)("div",mb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[25]||(a[25]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",ub,[(0,i.Wm)(d,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[26]||(a[26]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",pb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.comentario,"onUpdate:modelValue":a[27]||(a[27]=e=>l.compra.comentario=e),label:"Comentario"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",hb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[28]||(a[28]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",gb,["create"===l.compraOptions?((0,i.wg)(),(0,i.j4)(n,{key:0,label:"Añadir","no-caps":"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])):(0,i.kq)("",!0)]),"create"===l.compraOptions?((0,i.wg)(),(0,i.j4)("div",fb,[(0,i.Wm)(_,null,{default:Vf((()=>[(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[bb,vb,wb,e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",Wb,"COSTO")):(0,i.kq)("",!0),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",yb,"SUBTOTAL")):(0,i.kq)("",!0),Vb,xb,Cb,_b])]),(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",qb,(0,R.zw)(a+1),1),(0,i.Wm)("td",Eb,(0,R.zw)(e.material),1),(0,i.Wm)("td",Ab,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",kb,(0,R.zw)(e.lote),1),(0,i.Wm)("td",Db,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",Mb,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",Ob,[(0,i.Wm)(n,{flat:"",dense:"",color:"red",icon:"o_delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])),_:1})])):(0,i.kq)("",!0),Tb]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{loading:l.loading,label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["loading","onClick"]),(0,i.wy)((0,i.Wm)(n,{loading:l.loading,label:"Cancelar",icon:"delete",color:"negative"},null,8,["loading"]),[[A]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[30]||(a[30]=e=>l.dialoglistpagos=e)},{default:Vf((()=>[(0,i.Wm)(V,null,{default:Vf((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Vf((()=>[(0,i.Wm)(b,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name","rows-per-page-options":[0],dense:""},{"body-cell-op":Vf((e=>[(0,i.Wm)(h,{key:"op",props:e},{default:Vf((()=>[(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>s.printpago(e.row)},null,8,["onClick"]),(0,i.Wm)(n,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.anularpago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Vf((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialoglistretiros,"onUpdate:modelValue":a[31]||(a[31]=e=>l.dialoglistretiros=e),"full-width":""},{default:Vf((()=>[(0,i.Wm)(V,null,{default:Vf((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Vf((()=>[(0,i.Wm)(b,{title:"RETIROS TOTAL: "+s.totalRetiro,rows:l.retiros,columns:l.colretiros,"row-key":"name",flat:"","rows-per-page-options":[0]},{"body-cell-op":Vf((a=>[(0,i.Wm)(h,{key:"op",props:a},{default:Vf((()=>[e.$store.state.login.almacenHistorialPago?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["title","rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Vf((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[40]||(a[40]=e=>l.dialogpagar=e)},{default:Vf((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Vf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Vf((()=>[Sb])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Vf((()=>[(0,i.Wm)(y,{onSubmit:s.regpago,class:"q-gutter-md"},{default:Vf((()=>[(0,i.Wm)("div",Rb,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",Ub,[(0,i.Wm)("div",$b,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.provider.razon,"onUpdate:modelValue":a[32]||(a[32]=e=>l.compra2.provider.razon=e),readonly:"",label:"proveedor"},null,8,["modelValue"])]),(0,i.Wm)("div",Nb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.material.nombre,"onUpdate:modelValue":a[33]||(a[33]=e=>l.compra2.material.nombre=e),readonly:"",label:"material"},null,8,["modelValue"])]),(0,i.Wm)("div",Yb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.lote,"onUpdate:modelValue":a[34]||(a[34]=e=>l.compra2.lote=e),readonly:"",label:"lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Ib,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[35]||(a[35]=e=>l.compra2.cantidad=e),readonly:"",label:"cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Pb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.costo,"onUpdate:modelValue":a[36]||(a[36]=e=>l.compra2.costo=e),readonly:"",label:"costo"},null,8,["modelValue"])]),(0,i.Wm)("div",Lb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.subtotal,"onUpdate:modelValue":a[37]||(a[37]=e=>l.compra2.subtotal=e),readonly:"",label:"subtotal"},null,8,["modelValue"])])])):(0,i.kq)("",!0),(0,i.Wm)("div",jb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"number",modelValue:l.pago.monto,"onUpdate:modelValue":a[38]||(a[38]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.subtotal-l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Fb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[39]||(a[39]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"])])]),(0,i.Wm)("div",zb,[(0,i.Wm)(n,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[43]||(a[43]=e=>l.dialog_reporte=e)},{default:Vf((()=>[(0,i.Wm)(V,null,{default:Vf((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:Vf((()=>[Zb])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:Vf((()=>[(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[41]||(a[41]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[42]||(a[42]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Vf((()=>[(0,i.Wm)(n,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[46]||(a[46]=e=>l.dialog_remove=e)},{default:Vf((()=>[(0,i.Wm)(V,{style:{width:"350px","max-width":"90vw"}},{default:Vf((()=>[(0,i.Wm)(W,{class:"bg-green-8 text-white text-bold"},{default:Vf((()=>[Qb,(0,i.Wm)("div",Bb,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Vf((()=>[(0,i.Wm)(y,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:Vf((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[44]||(a[44]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[45]||(a[45]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[49]||(a[49]=e=>l.dialog_modret=e)},{default:Vf((()=>[(0,i.Wm)(V,null,{default:Vf((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Vf((()=>[(0,i.Wm)("div",Gb,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Vf((()=>[(0,i.Wm)(y,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:Vf((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[47]||(a[47]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[48]||(a[48]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),Jb={data(){return{providerColumns:[{name:"razon",label:"Razon Social",field:"razon",align:"left",sortable:!0},{name:"nombre",label:"Nombre",field:"nombre",align:"left",sortable:!0},{name:"nit",label:"NIT",field:"nit",align:"left",sortable:!0},{name:"telefono",label:"Telefono",field:"telefono",align:"left",sortable:!0},{name:"direccion",label:"Direccion",field:"direccion",align:"left",sortable:!0},{name:"email",label:"Email",field:"email",align:"left",sortable:!0},{name:"actions",label:"Acciones",field:"actions",align:"center"}],dialog_modret:!1,dialog_remove:!1,providers:[],provider:{},dialogpagar:!1,dialog_reporte:!1,filter:"",compraOptions:"create",pago:{},recuento:{},recuento2:{},pagos:[],compra2:{},providerOptions:"create",providerDialog:!1,loading:!1,almacenFilter:"",materials:[],material:"",dialog_add:!1,fecha3:Se()().startOf("year").format("YYYY-MM-DD"),fecha4:Se()().endOf("year").format("YYYY-MM-DD"),fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),unidades:["Kilogramos","Litros","Unidad","Metros","Metros Cuadrados","Metros Cubicos","Caja","Bolsa","Paquete","Quintal","Lata","Otro"],materialDialog:!1,compra:{cantidad:0,costo:0,lote:"",fechaven:"",observacion:""},comp:{},comptodo:[],excelcompra:[],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colcompra:[],colpagos:[{name:"op",align:"center",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colretiros:[{name:"op",align:"center",label:"OP",field:"op"},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],recutodo:[],compras:[],retiros:[],material2:{},materialOptions:"create",materialColumns:[{name:"nombre",label:"Material",align:"left",field:"nombre",sortable:!0},{name:"unid",label:"Unidad",align:"left",field:"unid",sortable:!0},{name:"stock",label:"Stock",align:"center",field:"stock",sortable:!0},{name:"actions",label:"Acciones",align:"center",field:"actions",sortable:!0},{name:"min",label:"Minimo",align:"center",field:"min",sortable:!0}],dialoglistpagos:!1,dialoglistretiros:!1}},created(){const e=JSON.parse(localStorage.getItem("userchi"));this.colcompra=[{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:e=>e.cantidad+" - "+e.tretiro,sortable:!0},{name:"saldocant",align:"center",label:"SALDO CANT",field:"saldocant",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"saldopago",align:"center",label:"SALDO PAGO",field:"saldopago",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:e=>Se()(e.fechaven).format("DD/MM/YYYY"),sortable:!0},{name:"comentario",align:"center",label:"COMENTARIO",field:"comentario",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],1==e.id&&this.colcompra.push({name:"observacionAdmin",align:"center",label:"OBSERVACION ADMIN",field:"observacionAdmin",sortable:!0}),this.providersGet(),this.materialsGet(),this.consultmaterial()},methods:{verObs(e){this.$q.dialog({title:"Observacion",message:e}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},exportTable(){let e=[{sheet:"Almacen",columns:[{label:"Material",value:"nombre"},{label:"Cantidad",value:"stock"}],content:this.materials}],a={fileName:"Almacen",extraLength:7,writeOptions:{}};oe()(e,a)},exportTable2(){let e=[{sheet:"Compras",columns:[{label:"id",value:"id"},{label:"Material",value:e=>e.material.nombre},{label:"Proveedor",value:e=>e.provider.razon},{label:"Lote",value:"lote"},{label:"Cantidad",value:"cantidad"},{label:"Saldo",value:"saldocant"}],content:this.excelcompra}],a={fileName:"Compras",extraLength:7,writeOptions:{}};oe()(e,a)},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/recuento/"+e.id).then((e=>{this.dialoglistretiros=!1,this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado ",position:"top"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("https://bnaty.tuprogam.com/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.materialsGet(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado ",position:"top"})}))},onRegRecuento2(){if(this.comp.cantidad-this.comp.retiro<this.recuento.cantidad)return this.$q.notify({color:"negative",textColor:"white",icon:"report_problem",message:"No se puede retirar mas de lo que hay en registro",position:"top"}),!1;this.$q.loading.show(),this.recuento.material_id=this.material2.id,this.recuento.compra_id=this.comp.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,console.log(this.recuento),this.$api.post("https://bnaty.tuprogam.com/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.materialsGet(),this.consultmaterial(),this.$q.loading.hide()}))},principioMesYmd(){let e=Se()().startOf("month").format("YYYY-MM-DD");return e},reporte(e){this.material2=e,this.recuento.material_id=e.id,this.recuento.cantidad="",this.recuento.observacion="",this.dialog_reporte=!0},genreporte(){this.$api.post("https://bnaty.tuprogam.com/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=this,t=a.fecha1,o=a.fecha2;this.fecha1=X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.fecha2=X.ZP.formatDate(Date.now(),"YYYY-MM-DD");let l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>INVENTARIO MATERIAL :  "+a.material2.nombre+"<br>DE "+Se()(t).format("DD/MM/YYYY")+" AL "+Se()(o).format("DD/MM/YYYY")+"</div><br>        <table>        <tr><th>TIPO</th><th>PROVEEDOR</th><th>MATERIAL</th><th>FECHA</th><th>COSTO</th><th>CANTIDAD</th><th>FECHA VEN</th><th>OBSERVACION</th></tr>";e.data.forEach((e=>{l+="<tr><td>"+e.tipo+"</td><td>"+e.razon+"</td><td>"+e.nombre+"</td><td>"+Se()(e.fecha).format("DD/MM/YYYY")+"</td><td>"+e.costo+"</td><td>"+e.cantidad+"</td><td>"+e.fechaven+"</td><td>"+e.observacion+"</td></tr>"}));let i=window.open("_blank");i.document.write(l),i.document.close()}))},editcompra(e){this.dialog_add=!0,this.compra=e,this.material=e.material,this.provider=e.provider,this.compraOptions="edit"},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.$q.loading.show(),this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$api.post("https://bnaty.tuprogam.com/api/logcompra",this.pago).then((e=>{console.log(e.data),this.$q.loading.hide();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.consultmaterial(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "})})))},onReg(){this.$api.post("https://bnaty.tuprogam.com/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},listrecuento(e){this.retiros=e.recuentos,console.log(this.retiros),this.dialoglistretiros=!0},retirarRow(e){console.log(e.material),this.material2=e.material,this.comp=e,this.dialog_remove=!0},comentarioAdmin(e){this.$q.dialog({title:"Observacion Admin",prompt:{model:e.observacionAdmin,type:"text"}}).onOk((a=>{this.$api.post("https://bnaty.tuprogam.com/api/observacionAdmin",{id:e.id,observacionAdmin:a}).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))}))},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("https://bnaty.tuprogam.com/api/compra/"+e.id).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})})).catch((e=>{console.log(e.response),this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.error})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},consultmaterial(){this.comptodo=[],this.excelcompra=[],this.$api.post("https://bnaty.tuprogam.com/api/consultar2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{e.data.forEach((e=>{e.saldocant=e.cantidad-e.retiro,e.saldopago=e.subtotal-e.deuda,e.tretiro=this.calculoRetiro(e.recuentos),this.comptodo.push(e),e.saldocant>0&&this.excelcompra.push(e)}))})),this.$api.post("https://bnaty.tuprogam.com/api/consulrecuento2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},calculoRetiro(e){let a=0;return e.forEach((e=>{a+=parseInt(e.cantidad)})),a},subTotalNumber(e,a){return void 0==e||""==e||0==e||void 0==a||""==a||0==a?0:parseFloat(e)*parseFloat(a)},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){return""==this.compra.cantidad||0==this.compra.cantidad||void 0==this.compra.cantidad?(this.$q.notify({color:"red-4",textColor:"white",icon:"warning",message:"Ingrese la cantidad",position:"top"}),!1):(void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.costo=""==this.compra.costo||void 0==this.compra.costo?0:this.compra.costo,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,void 0==this.provider.id||""==this.provider.id||0==this.provider.id?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe seleccionar proveedor"}),!1):(this.compra.provider_id=this.provider.id,this.compras.push(this.compra),void(this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""})))},regcompra(){if("create"==this.compraOptions){if(0==this.compras.length)return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1;if(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1;this.loading=!0,this.$api.post("https://bnaty.tuprogam.com/api/compra2",{user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.materialsGet(),this.consultmaterial(),this.loading=!1}))}else{if(parseFloat(this.compra.cantidad)<parseFloat(this.compra.retiro))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la cantidad No puede ser menor al retiro"}),!1;if(parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo)<parseFloat(this.compra.deuda))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la subtotal No puede ser menor a lo pagado"}),!1;this.loading=!0,this.compra.material_id=this.material.id,this.compra.provider_id=this.provider.id,this.$q.dialog({dark:!0,title:"Confirmar",message:"Esta seguro de Modificar?",cancel:!0,persistent:!0}).onOk((()=>{this.$api.post("https://bnaty.tuprogam.com/api/compraModificar",this.compra).then((e=>{this.dialog_add=!1,this.materialsGet(),this.consultmaterial(),this.loading=!1}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}},totalgeneral(){this.$api.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},compraAdd(){this.compraOptions="create",this.dialog_add=!0,this.compras=[],this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""},this.material="",this.provider=""},materialAdd(){this.material={},this.materialDialog=!0,this.materialOptions="create"},providerList(){this.providerDialog=!0,this.providerOptions="list"},providerAdd(){this.provider={},this.providerDialog=!0,this.providerOptions="create"},providersGet(){this.$api.get("provider").then((e=>{this.providers=e.data})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},providerUpdate(){this.loading=!0,this.$api.put("provider/"+this.provider.id,this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},providerCreate(){this.loading=!0,this.$api.post("provider",this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},materialUpdate(){this.loading=!0,this.$api.put("material/"+this.material.id,this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},delprovider(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el proveedor?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("provider/"+e.id).then((e=>{this.providersGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"warning",message:"No se puede eliminar el proveedor, tiene registros asociados",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialCreate(){this.loading=!0,this.$api.post("material",this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialEdit(e){this.material=e,this.materialDialog=!0,this.materialOptions="update"},materialDelete(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el material?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("material/"+e.id).then((e=>{this.materialsGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialsGet(){this.loading=!0,this.$api.get("material").then((e=>{this.materials=e.data,console.log(this.materials)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},printpago(e){this.$api.get("impPagoAlmacen/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},anularpago(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el pago?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.post("anularLogcompra",e).then((e=>{this.dialoglistpagos=!1,this.consultmaterial()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))}},computed:{totalRetiro(){let e=0;return this.retiros.forEach((a=>{e+=parseInt(a.cantidad)})),e}}};Jb.render=Hb,Jb.__scopeId="data-v-72766643";const Kb=Jb;T()(Jb,"components",{QPage:V.Z,QBtn:k.Z,QTable:re.Z,QInput:E.Z,QIcon:_.Z,QTd:ce.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z,QLinearProgress:th.Z,QBadge:ie.Z,QSelect:Ue.Z,QTooltip:ne.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QSpace:yn.Z,QForm:q.Z,QMarkupTable:se.Z,QCardActions:M.Z}),T()(Jb,"directives",{ClosePopup:pe.Z});const Xb=(0,i.HX)("data-v-31f03f24");(0,i.dD)("data-v-31f03f24");const ev={class:"row"},av={class:"col-2"},tv={class:"col-2"},ov={class:"col-2"},lv={class:"col-2 flex flex-center"},iv={class:"col-2 flex flex-center"},sv={class:"col-12"},nv=(0,i.Uk)("Realizar Pago"),rv=(0,i.Uk)("Ver Pagos"),dv=(0,i.Uk)("Realizar retiro"),cv=(0,i.Uk)("Ver Retiros"),mv=(0,i.Uk)("Editar"),uv=(0,i.Uk)("Eliminar"),pv=(0,i.Uk)("Comentario admin"),hv={class:"text-h6"},gv={class:"row"},fv={class:"col-5"},bv={class:"col-4"},vv={class:"col-3"},wv={class:"col-12"},Wv={class:"col-6"},yv={class:"col-6"},Vv={class:"text-h6"},xv={class:"row"},Cv={class:"col-12"},_v={class:"col-6"},qv={class:"col-6"},Ev=(0,i.Uk)(" Cantidad minima de material en almacen "),Av=(0,i.Wm)("div",{class:"text-bold text-center"},"INGRESO DE MATERIA PRIMA",-1),kv={class:"row"},Dv={class:"col-6"},Mv={class:"col-6"},Ov={class:"col-2"},Tv={class:"col-2"},Sv={key:0,class:"col-1 flex-center flex text-bold text-center"},Rv={class:"col-2"},Uv={class:"col-3"},$v={key:1,class:"col-3"},Nv={class:"col-3"},Yv={class:"col-12 text-right"},Iv={key:2,class:"col-12"},Pv=(0,i.Wm)("th",{class:"text-left"},"NRO",-1),Lv=(0,i.Wm)("th",{class:"text-left"},"MATERIAL",-1),jv=(0,i.Wm)("th",{class:"text-center"},"CANTIDAD",-1),Fv={key:0},zv={key:1},Zv=(0,i.Wm)("th",{class:"text-center"},"LOTE",-1),Qv=(0,i.Wm)("th",{class:"text-left"},"FEC VEN",-1),Bv=(0,i.Wm)("th",{class:"text-left"},"OBS",-1),Gv=(0,i.Wm)("th",{class:"text-right"},"OPCION",-1),Hv={class:"text-left"},Jv={class:"text-left"},Kv={class:"text-center"},Xv={class:"text-center"},ew={class:"text-left"},aw={class:"text-left"},tw={class:"text-right"},ow=(0,i.Wm)("div",null,null,-1),lw=(0,i.Wm)("div",{class:"text-h7 text-bold text-center"},"PAGAR POR LA COMPRA",-1),iw={class:"row"},sw={key:0},nw={class:"col-5"},rw={class:"col-5"},dw={class:"col-2"},cw={class:"col-4"},mw={class:"col-4"},uw={class:"col-4"},pw={class:"col-6"},hw={class:"col-6"},gw={class:"col-12"},fw=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),bw=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL",-1),vw={class:"text-h7"},ww={class:"text-h7"};(0,i.Cn)();const Ww=Xb(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-input"),r=(0,i.up)("q-select"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-badge"),m=(0,i.up)("q-td"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-item-section"),h=(0,i.up)("q-item"),g=(0,i.up)("q-separator"),f=(0,i.up)("q-list"),b=(0,i.up)("q-btn-dropdown"),v=(0,i.up)("q-table"),w=(0,i.up)("q-space"),W=(0,i.up)("q-card-section"),y=(0,i.up)("q-form"),V=(0,i.up)("q-card"),x=(0,i.up)("q-dialog"),C=(0,i.up)("q-tooltip"),_=(0,i.up)("q-markup-table"),q=(0,i.up)("q-card-actions"),E=(0,i.up)("q-page"),A=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(E,{class:"q-pa-xs"},{default:Xb((()=>[(0,i.Wm)("div",ev,[(0,i.Wm)("div",av,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[1]||(a[1]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",tv,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",ov,[(0,i.Wm)(r,{modelValue:l.materialSelect,"onUpdate:modelValue":[a[3]||(a[3]=e=>l.materialSelect=e),s.getMaterialSelect],dense:"",outlined:"",label:"Material",options:s.materialsSelect,"option-label":"nombre","option-value":"id"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",lv,[(0,i.Wm)(d,{color:"info",label:"Consultar",onClick:s.consultmaterial,"no-caps":"",loading:l.loading},null,8,["onClick","loading"])]),(0,i.Wm)("div",iv,[(0,i.Wm)(d,{color:"green",label:"EXCEL",onClick:s.exportTable2,"no-caps":"",loading:l.loading},null,8,["onClick","loading"])]),(0,i.Wm)("div",sv,[(0,i.Wm)(v,{dense:"","rows-per-page-options":[0],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,flat:"","row-key":"name"},{"body-cell-estado":Xb((a=>[(0,i.Wm)(m,{key:"estado",props:a},{default:Xb((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"POR PAGAR"==a.row.estado?"red":"green"},{default:Xb((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":Xb((()=>[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[4]||(a[4]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Xb((()=>[(0,i.Wm)(u,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-costo":Xb((a=>[(0,i.Wm)(m,{props:a},{default:Xb((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(c,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Xb((()=>[(0,i.Uk)((0,R.zw)(a.row.costo),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldocant":Xb((e=>[(0,i.Wm)(m,{props:e,style:e.row.saldocant>=1?"font-weight: bold; font-size: 18px;":"",color:e.row.saldocant>=1?"black":"red"},{default:Xb((()=>[(0,i.Uk)((0,R.zw)(e.row.saldocant),1)])),_:2},1032,["props","style","color"])])),"body-cell-material":Xb((e=>[(0,i.Wm)(m,{props:e,style:{"font-weight":"bold"}},{default:Xb((()=>[(0,i.Uk)((0,R.zw)(e.row.material.nombre),1)])),_:2},1032,["props"])])),"body-cell-subtotal":Xb((a=>[(0,i.Wm)(m,{props:a},{default:Xb((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(c,{key:0,color:a.row.subtotal>a.row.deuda?"red":"green"},{default:Xb((()=>[(0,i.Uk)((0,R.zw)(a.row.subtotal),1)])),_:2},1032,["color"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-saldopago":Xb((a=>[(0,i.Wm)(m,{props:a},{default:Xb((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.saldopago),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-deuda":Xb((a=>[(0,i.Wm)(m,{props:a},{default:Xb((()=>[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)((0,R.zw)(a.row.deuda),1)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-comentario":Xb((a=>[(0,i.Wm)(m,{props:a},{default:Xb((()=>[null!=a.row.comentario&&1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"list",color:"indigo",dense:"",onClick:e=>s.verObs(a.row.comentario)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-observacion":Xb((e=>[(0,i.Wm)(m,{props:e},{default:Xb((()=>[null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"list",color:"purple",dense:"",onClick:a=>s.verObs(e.row.observacion)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-opcion":Xb((a=>[(0,i.Wm)(m,{key:"opcion",props:a},{default:Xb((()=>[(0,i.Wm)(b,{label:"Opciones",color:"grey-3","text-color":"black","no-caps":"",size:"10px",dense:""},{default:Xb((()=>[(0,i.Wm)(f,null,{default:Xb((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda<a.row.subtotal?((0,i.wg)(),(0,i.j4)(h,{key:0,clickable:"",onClick:e=>s.pagarcompra(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"paid",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[nv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.almacenHistorialPago&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(h,{key:1,clickable:"",onClick:e=>s.listpago(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"point_of_sale",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[rv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.retiro<a.row.cantidad?((0,i.wg)(),(0,i.j4)(h,{key:2,clickable:"",onClick:e=>s.retirarRow(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"o_download",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[dv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.egresoMaterial&&a.row.recuentos.length>0?((0,i.wg)(),(0,i.j4)(h,{key:3,clickable:"",onClick:e=>s.listrecuento(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"list",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[cv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(h,{key:4,clickable:"",onClick:e=>s.editcompra(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"o_edit",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[mv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&"POR PAGAR"==a.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:5,clickable:"",onClick:e=>s.delcompra(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"delete",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[uv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(g),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(h,{key:6,clickable:"",onClick:e=>s.comentarioAdmin(a.row)},{default:Xb((()=>[(0,i.Wm)(p,{avatar:""},{default:Xb((()=>[(0,i.Wm)(u,{name:"info",size:"20px"})])),_:1}),(0,i.Wm)(p,null,{default:Xb((()=>[pv])),_:1})])),_:2},1032,["onClick"])):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(x,{modelValue:l.providerDialog,"onUpdate:modelValue":a[15]||(a[15]=e=>l.providerDialog=e)},{default:Xb((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Xb((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Xb((()=>[(0,i.Wm)("div",hv,(0,R.zw)("create"===l.providerOptions?"Registro de Provedor":"list"===l.providerOptions?"Lista de Provedores":"Editar Provedor"),1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Xb((()=>["create"==l.providerOptions||"edit"==l.providerOptions?((0,i.wg)(),(0,i.j4)(y,{key:0,onSubmit:a[12]||(a[12]=e=>"create"===l.providerOptions?s.providerCreate():s.providerUpdate())},{default:Xb((()=>[(0,i.Wm)("div",gv,[(0,i.Wm)("div",fv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.nombre,"onUpdate:modelValue":a[5]||(a[5]=e=>l.provider.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",bv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.razon,"onUpdate:modelValue":a[6]||(a[6]=e=>l.provider.razon=e),label:"Razón Social","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",vv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.nit,"onUpdate:modelValue":a[7]||(a[7]=e=>l.provider.nit=e),label:"CI/NIT",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",wv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.direccion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.provider.direccion=e),label:"Dirección",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.email,"onUpdate:modelValue":a[9]||(a[9]=e=>l.provider.email=e),label:"Email",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",yv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.provider.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>l.provider.telefono=e),label:"Teléfono",hint:""},null,8,["modelValue"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Xb((()=>[(0,i.Wm)(d,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:"",onClick:a[11]||(a[11]=e=>l.providerOptions="list")},null,8,["loading"]),(0,i.Wm)(d,{loading:l.loading,"no-caps":"",icon:"o_save",dense:"",type:"submit",label:"create"===l.providerOptions?"Guardar":"Actualizar",color:"create"===l.providerOptions?"green":"yellow-7"},null,8,["loading","label","color"])])),_:1})])),_:1})):(0,i.kq)("",!0),"list"===l.providerOptions?((0,i.wg)(),(0,i.j4)(v,{key:1,loading:l.loading,"rows-per-page-options":[0],dense:"",rows:l.providers,columns:l.providerColumns,"row-key":"name"},{"top-right":Xb((()=>[(0,i.Wm)(d,{color:"green",icon:"add_circle_outline",label:"Nuevo","no-caps":"",onClick:a[13]||(a[13]=e=>{l.providerOptions="create",l.provider={}})}),(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:Xb((()=>[(0,i.Wm)(u,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":Xb((e=>[(0,i.Wm)(m,{key:"opcion",props:e},{default:Xb((()=>[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:a=>{l.providerOptions="edit",l.provider=e.row}},null,8,["onClick"]),(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.delprovider(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["loading","rows","columns"])):(0,i.kq)("",!0)])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.materialDialog,"onUpdate:modelValue":a[20]||(a[20]=e=>l.materialDialog=e)},{default:Xb((()=>[(0,i.Wm)(V,{style:{width:"500px","max-width":"90vw"}},{default:Xb((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:Xb((()=>[(0,i.Wm)("div",Vv,(0,R.zw)("create"===l.materialOptions?"Registro de ":"Editar ")+" de materia prima",1),(0,i.Wm)(w),(0,i.wy)((0,i.Wm)(d,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:Xb((()=>[(0,i.Wm)(y,{onSubmit:a[19]||(a[19]=e=>"create"===l.materialOptions?s.materialCreate():s.materialUpdate())},{default:Xb((()=>[(0,i.Wm)("div",xv,[(0,i.Wm)("div",Cv,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.material.nombre,"onUpdate:modelValue":a[16]||(a[16]=e=>l.material.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",_v,[(0,i.Wm)(r,{outlined:"",dense:"",modelValue:l.material.unid,"onUpdate:modelValue":a[17]||(a[17]=e=>l.material.unid=e),label:"Unidad",options:l.unidades,"lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),(0,i.Wm)("div",qv,[(0,i.Wm)(n,{outlined:"",type:"number",dense:"",modelValue:l.material.min,"onUpdate:modelValue":a[18]||(a[18]=e=>l.material.min=e),label:"Minimo",hint:"",rules:[e=>!!e||"Campo requerido"]},{default:Xb((()=>[(0,i.Wm)(C,null,{default:Xb((()=>[Ev])),_:1})])),_:1},8,["modelValue","rules"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:Xb((()=>[(0,i.wy)((0,i.Wm)(d,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:""},null,8,["loading"]),[[A]]),(0,i.Wm)(d,{loading:l.loading,color:"green","no-caps":"",icon:"o_save",label:"Guardar",dense:"",type:"submit"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_add,"onUpdate:modelValue":a[29]||(a[29]=e=>l.dialog_add=e)},{default:Xb((()=>[(0,i.Wm)(V,{style:{width:"800px","max-width":"80vw"}},{default:Xb((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white q-pb-none"},{default:Xb((()=>[Av])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Xb((()=>[(0,i.Wm)("div",kv,[(0,i.Wm)("div",Dv,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[21]||(a[21]=e=>l.material=e),options:l.materials,label:"Material","option-label":"nombre","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Mv,[(0,i.Wm)(r,{dense:"",outlined:"",modelValue:l.provider,"onUpdate:modelValue":a[22]||(a[22]=e=>l.provider=e),options:l.providers,label:"Proveedor","option-label":"razon","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ov,[(0,i.Wm)(n,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Tv,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[24]||(a[24]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)]),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("div",Sv,[e.$store.state.login.almacenCostoSubtotal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Uk)(" Subtotal: "+(0,R.zw)(s.subTotalNumber(l.compra.costo,l.compra.cantidad)),1)],64)):(0,i.kq)("",!0)])):(0,i.kq)("",!0),(0,i.Wm)("div",Rv,[(0,i.Wm)(n,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[25]||(a[25]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Uv,[(0,i.Wm)(n,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[26]||(a[26]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",$v,[(0,i.Wm)(n,{dense:"",outlined:"",type:"text",modelValue:l.compra.comentario,"onUpdate:modelValue":a[27]||(a[27]=e=>l.compra.comentario=e),label:"Comentario"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Nv,[(0,i.Wm)(n,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[28]||(a[28]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Yv,["create"===l.compraOptions?((0,i.wg)(),(0,i.j4)(d,{key:0,label:"Añadir","no-caps":"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])):(0,i.kq)("",!0)]),"create"===l.compraOptions?((0,i.wg)(),(0,i.j4)("div",Iv,[(0,i.Wm)(_,null,{default:Xb((()=>[(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[Pv,Lv,jv,e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",Fv,"COSTO")):(0,i.kq)("",!0),e.$store.state.login.preciounitario?((0,i.wg)(),(0,i.j4)("th",zv,"SUBTOTAL")):(0,i.kq)("",!0),Zv,Qv,Bv,Gv])]),(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",Hv,(0,R.zw)(a+1),1),(0,i.Wm)("td",Jv,(0,R.zw)(e.material),1),(0,i.Wm)("td",Kv,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",Xv,(0,R.zw)(e.lote),1),(0,i.Wm)("td",ew,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",aw,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",tw,[(0,i.Wm)(d,{flat:"",dense:"",color:"red",icon:"o_delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])),_:1})])):(0,i.kq)("",!0),ow]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{loading:l.loading,label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["loading","onClick"]),(0,i.wy)((0,i.Wm)(d,{loading:l.loading,label:"Cancelar",icon:"delete",color:"negative"},null,8,["loading"]),[[A]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[30]||(a[30]=e=>l.dialoglistpagos=e)},{default:Xb((()=>[(0,i.Wm)(V,null,{default:Xb((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Xb((()=>[(0,i.Wm)(v,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name","rows-per-page-options":[0],dense:""},{"body-cell-op":Xb((e=>[(0,i.Wm)(m,{key:"op",props:e},{default:Xb((()=>[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>s.printpago(e.row)},null,8,["onClick"]),(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:a=>s.anularpago(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Xb((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialoglistretiros,"onUpdate:modelValue":a[31]||(a[31]=e=>l.dialoglistretiros=e),"full-width":""},{default:Xb((()=>[(0,i.Wm)(V,null,{default:Xb((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:Xb((()=>[(0,i.Wm)(v,{title:"RETIROS TOTAL: "+s.totalRetiro,rows:l.retiros,columns:l.colretiros,"row-key":"name",flat:"","rows-per-page-options":[0]},{"body-cell-op":Xb((a=>[(0,i.Wm)(m,{key:"op",props:a},{default:Xb((()=>[e.$store.state.login.almacenHistorialPago?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["title","rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Xb((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[40]||(a[40]=e=>l.dialogpagar=e)},{default:Xb((()=>[(0,i.Wm)(V,{style:{width:"700px","max-width":"90vw"}},{default:Xb((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Xb((()=>[lw])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Xb((()=>[(0,i.Wm)(y,{onSubmit:s.regpago,class:"q-gutter-md"},{default:Xb((()=>[(0,i.Wm)("div",iw,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",sw,[(0,i.Wm)("div",nw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.provider.razon,"onUpdate:modelValue":a[32]||(a[32]=e=>l.compra2.provider.razon=e),readonly:"",label:"proveedor"},null,8,["modelValue"])]),(0,i.Wm)("div",rw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.material.nombre,"onUpdate:modelValue":a[33]||(a[33]=e=>l.compra2.material.nombre=e),readonly:"",label:"material"},null,8,["modelValue"])]),(0,i.Wm)("div",dw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.lote,"onUpdate:modelValue":a[34]||(a[34]=e=>l.compra2.lote=e),readonly:"",label:"lote"},null,8,["modelValue"])]),(0,i.Wm)("div",cw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[35]||(a[35]=e=>l.compra2.cantidad=e),readonly:"",label:"cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",mw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.costo,"onUpdate:modelValue":a[36]||(a[36]=e=>l.compra2.costo=e),readonly:"",label:"costo"},null,8,["modelValue"])]),(0,i.Wm)("div",uw,[(0,i.Wm)(n,{dense:"",outlined:"",modelValue:l.compra2.subtotal,"onUpdate:modelValue":a[37]||(a[37]=e=>l.compra2.subtotal=e),readonly:"",label:"subtotal"},null,8,["modelValue"])])])):(0,i.kq)("",!0),(0,i.Wm)("div",pw,[(0,i.Wm)(n,{dense:"",outlined:"",type:"number",modelValue:l.pago.monto,"onUpdate:modelValue":a[38]||(a[38]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.subtotal-l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",hw,[(0,i.Wm)(n,{dense:"",outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[39]||(a[39]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"])])]),(0,i.Wm)("div",gw,[(0,i.Wm)(d,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[43]||(a[43]=e=>l.dialog_reporte=e)},{default:Xb((()=>[(0,i.Wm)(V,null,{default:Xb((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:Xb((()=>[fw])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:Xb((()=>[(0,i.Wm)(n,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[41]||(a[41]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(n,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[42]||(a[42]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:Xb((()=>[(0,i.Wm)(d,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[46]||(a[46]=e=>l.dialog_remove=e)},{default:Xb((()=>[(0,i.Wm)(V,{style:{width:"350px","max-width":"90vw"}},{default:Xb((()=>[(0,i.Wm)(W,{class:"bg-green-8 text-white text-bold"},{default:Xb((()=>[bw,(0,i.Wm)("div",vw,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Xb((()=>[(0,i.Wm)(y,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:Xb((()=>[(0,i.Wm)(n,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[44]||(a[44]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(n,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[45]||(a[45]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(x,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[49]||(a[49]=e=>l.dialog_modret=e)},{default:Xb((()=>[(0,i.Wm)(V,null,{default:Xb((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:Xb((()=>[(0,i.Wm)("div",ww,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:Xb((()=>[(0,i.Wm)(y,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:Xb((()=>[(0,i.Wm)(n,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[47]||(a[47]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(n,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[48]||(a[48]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),yw={name:"Almacen3",data(){return{materialSelect:"",providerColumns:[{name:"razon",label:"Razon Social",field:"razon",align:"left",sortable:!0},{name:"nombre",label:"Nombre",field:"nombre",align:"left",sortable:!0},{name:"nit",label:"NIT",field:"nit",align:"left",sortable:!0},{name:"telefono",label:"Telefono",field:"telefono",align:"left",sortable:!0},{name:"direccion",label:"Direccion",field:"direccion",align:"left",sortable:!0},{name:"email",label:"Email",field:"email",align:"left",sortable:!0},{name:"actions",label:"Acciones",field:"actions",align:"center"}],dialog_modret:!1,dialog_remove:!1,providers:[],provider:{},dialogpagar:!1,dialog_reporte:!1,filter:"",compraOptions:"create",pago:{},recuento:{},recuento2:{},pagos:[],compra2:{},providerOptions:"create",providerDialog:!1,loading:!1,almacenFilter:"",materials:[],material:"",dialog_add:!1,fecha3:Se()().subtract(18,"months").format("YYYY-MM-DD"),fecha4:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha1:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),unidades:["Kilogramos","Litros","Unidad","Metros","Metros Cuadrados","Metros Cubicos","Caja","Bolsa","Paquete","Quintal","Lata","Otro"],materialDialog:!1,compra:{cantidad:0,costo:0,lote:"",fechaven:"",observacion:""},comp:{},comptodo:[],comptodoAll:[],excelcompra:[],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colcompra:[],colpagos:[{name:"op",align:"center",label:"OP",field:"op",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colretiros:[{name:"op",align:"center",label:"OP",field:"op"},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],recutodo:[],compras:[],retiros:[],material2:{},materialOptions:"create",materialColumns:[{name:"nombre",label:"Material",align:"left",field:"nombre",sortable:!0},{name:"unid",label:"Unidad",align:"left",field:"unid",sortable:!0},{name:"stock",label:"Stock",align:"center",field:"stock",sortable:!0},{name:"actions",label:"Acciones",align:"center",field:"actions",sortable:!0},{name:"min",label:"Minimo",align:"center",field:"min",sortable:!0}],dialoglistpagos:!1,dialoglistretiros:!1}},created(){const e=JSON.parse(localStorage.getItem("userchi"));this.colcompra=[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado",sortable:!0},{name:"fecha",align:"center",label:"FECHA",field:e=>Se()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:e=>e.cantidad+" - "+e.tretiro,sortable:!0},{name:"saldocant",align:"center",label:"SALDO CANT",field:"saldocant",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"saldopago",align:"center",label:"SALDO PAGO",field:"saldopago",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:e=>Se()(e.fechaven).format("DD/MM/YYYY"),sortable:!0},{name:"comentario",align:"center",label:"COMENTARIO",field:"comentario",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],1==e.id&&this.colcompra.push({name:"observacionAdmin",align:"center",label:"OBSERVACION ADMIN",field:"observacionAdmin",sortable:!0}),this.providersGet(),this.materialsGet(),this.consultmaterial()},methods:{getMaterialSelect(){if(console.log(this.materialSelect.id),0==this.materialSelect.id)return this.comptodo=this.comptodoAll,!1;this.comptodo=this.comptodoAll.filter((e=>e.material_id==this.materialSelect.id))},verObs(e){this.$q.dialog({title:"Observacion",message:e}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},exportTable(){let e=[{sheet:"Almacen",columns:[{label:"Material",value:"nombre"},{label:"Cantidad",value:"stock"}],content:this.materials}],a={fileName:"Almacen",extraLength:7,writeOptions:{}};oe()(e,a)},exportTable2(){let e=[{sheet:"Compras",columns:[{label:"id",value:"id"},{label:"Material",value:e=>e.material.nombre},{label:"Proveedor",value:e=>e.provider.razon},{label:"Lote",value:"lote"},{label:"Cantidad",value:"cantidad"},{label:"Saldo",value:"saldocant"}],content:this.excelcompra}],a={fileName:"Compras",extraLength:7,writeOptions:{}};oe()(e,a)},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("https://bnaty.tuprogam.com/api/recuento/"+e.id).then((e=>{this.dialoglistretiros=!1,this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado ",position:"top"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("https://bnaty.tuprogam.com/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.materialsGet(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado ",position:"top"})}))},onRegRecuento2(){if(this.comp.cantidad-this.comp.retiro<this.recuento.cantidad)return this.$q.notify({color:"negative",textColor:"white",icon:"report_problem",message:"No se puede retirar mas de lo que hay en registro",position:"top"}),!1;this.$q.loading.show(),this.recuento.material_id=this.material2.id,this.recuento.compra_id=this.comp.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,console.log(this.recuento),this.$api.post("https://bnaty.tuprogam.com/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.materialsGet(),this.consultmaterial(),this.$q.loading.hide()}))},principioMesYmd(){let e=Se()().startOf("month").format("YYYY-MM-DD");return e},reporte(e){this.material2=e,this.recuento.material_id=e.id,this.recuento.cantidad="",this.recuento.observacion="",this.dialog_reporte=!0},genreporte(){this.$api.post("https://bnaty.tuprogam.com/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=this,t=a.fecha1,o=a.fecha2;this.fecha1=X.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.fecha2=X.ZP.formatDate(Date.now(),"YYYY-MM-DD");let l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>INVENTARIO MATERIAL :  "+a.material2.nombre+"<br>DE "+Se()(t).format("DD/MM/YYYY")+" AL "+Se()(o).format("DD/MM/YYYY")+"</div><br>        <table>        <tr><th>TIPO</th><th>PROVEEDOR</th><th>MATERIAL</th><th>FECHA</th><th>COSTO</th><th>CANTIDAD</th><th>FECHA VEN</th><th>OBSERVACION</th></tr>";e.data.forEach((e=>{l+="<tr><td>"+e.tipo+"</td><td>"+e.razon+"</td><td>"+e.nombre+"</td><td>"+Se()(e.fecha).format("DD/MM/YYYY")+"</td><td>"+e.costo+"</td><td>"+e.cantidad+"</td><td>"+e.fechaven+"</td><td>"+e.observacion+"</td></tr>"}));let i=window.open("_blank");i.document.write(l),i.document.close()}))},editcompra(e){this.dialog_add=!0,this.compra=e,this.material=e.material,this.provider=e.provider,this.compraOptions="edit"},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.$q.loading.show(),this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$api.post("https://bnaty.tuprogam.com/api/logcompra",this.pago).then((e=>{console.log(e.data),this.$q.loading.hide();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.consultmaterial(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "})})))},onReg(){this.$api.post("https://bnaty.tuprogam.com/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},listrecuento(e){this.retiros=e.recuentos,console.log(this.retiros),this.dialoglistretiros=!0},retirarRow(e){console.log(e.material),this.material2=e.material,this.comp=e,this.dialog_remove=!0},comentarioAdmin(e){this.$q.dialog({title:"Observacion Admin",prompt:{model:e.observacionAdmin,type:"text"}}).onOk((a=>{this.$api.post("https://bnaty.tuprogam.com/api/observacionAdmin",{id:e.id,observacionAdmin:a}).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))}))},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$api.delete("https://bnaty.tuprogam.com/api/compra/"+e.id).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})})).catch((e=>{console.log(e.response),this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.error})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},consultmaterial(){this.comptodo=[],this.comptodoAll=[],this.excelcompra=[],this.loading=!0,this.$api.post("https://bnaty.tuprogam.com/api/consultar2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{e.data.forEach((e=>{e.saldocant=e.cantidad-e.retiro,e.saldopago=e.subtotal-e.deuda,e.tretiro=this.calculoRetiro(e.recuentos),this.comptodo.push(e),this.comptodoAll.push(e),e.saldocant>0&&this.excelcompra.push(e)}))})).finally((()=>{this.loading=!1})),this.$api.post("https://bnaty.tuprogam.com/api/consulrecuento2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},calculoRetiro(e){let a=0;return e.forEach((e=>{a+=parseInt(e.cantidad)})),a},subTotalNumber(e,a){return void 0==e||""==e||0==e||void 0==a||""==a||0==a?0:parseFloat(e)*parseFloat(a)},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){return""==this.compra.cantidad||0==this.compra.cantidad||void 0==this.compra.cantidad?(this.$q.notify({color:"red-4",textColor:"white",icon:"warning",message:"Ingrese la cantidad",position:"top"}),!1):(void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.costo=""==this.compra.costo||void 0==this.compra.costo?0:this.compra.costo,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,void 0==this.provider.id||""==this.provider.id||0==this.provider.id?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe seleccionar proveedor"}),!1):(this.compra.provider_id=this.provider.id,this.compras.push(this.compra),void(this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""})))},regcompra(){if("create"==this.compraOptions){if(0==this.compras.length)return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1;if(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1;this.loading=!0,this.$api.post("https://bnaty.tuprogam.com/api/compra2",{user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.materialsGet(),this.consultmaterial(),this.loading=!1}))}else{if(parseFloat(this.compra.cantidad)<parseFloat(this.compra.retiro))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la cantidad No puede ser menor al retiro"}),!1;if(parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo)<parseFloat(this.compra.deuda))return this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"la subtotal No puede ser menor a lo pagado"}),!1;this.loading=!0,this.compra.material_id=this.material.id,this.compra.provider_id=this.provider.id,this.$q.dialog({dark:!0,title:"Confirmar",message:"Esta seguro de Modificar?",cancel:!0,persistent:!0}).onOk((()=>{this.$api.post("https://bnaty.tuprogam.com/api/compraModificar",this.compra).then((e=>{this.dialog_add=!1,this.materialsGet(),this.consultmaterial(),this.loading=!1}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))}},totalgeneral(){this.$api.post("https://bnaty.tuprogam.com/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},compraAdd(){this.compraOptions="create",this.dialog_add=!0,this.compras=[],this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""},this.material="",this.provider=""},materialAdd(){this.material={},this.materialDialog=!0,this.materialOptions="create"},providerList(){this.providerDialog=!0,this.providerOptions="list"},providerAdd(){this.provider={},this.providerDialog=!0,this.providerOptions="create"},providersGet(){this.$api.get("provider").then((e=>{this.providers=e.data})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},providerUpdate(){this.loading=!0,this.$api.put("provider/"+this.provider.id,this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},providerCreate(){this.loading=!0,this.$api.post("provider",this.provider).then((e=>{this.providerOptions="list",this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{}))},materialUpdate(){this.loading=!0,this.$api.put("material/"+this.material.id,this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},delprovider(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el proveedor?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("provider/"+e.id).then((e=>{this.providersGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"warning",message:"No se puede eliminar el proveedor, tiene registros asociados",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialCreate(){this.loading=!0,this.$api.post("material",this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialEdit(e){this.material=e,this.materialDialog=!0,this.materialOptions="update"},materialDelete(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el material?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.delete("material/"+e.id).then((e=>{this.materialsGet()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))},materialsGet(){this.loading=!0,this.$api.get("material").then((e=>{this.materials=e.data,console.log(this.materials)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},printpago(e){this.$api.get("impPagoAlmacen/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},anularpago(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el pago?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$api.post("anularLogcompra",e).then((e=>{this.dialoglistpagos=!1,this.consultmaterial()})).catch((e=>{this.$q.notify({color:"red",textColor:"white",icon:"info",message:"No se puede eliminar el material, ya que esta siendo utilizado",position:"top"})})).finally((()=>{this.loading=!1}))}))}},computed:{materialsSelect(){return[{id:0,nombre:"Todos"},...this.materials]},totalRetiro(){let e=0;return this.retiros.forEach((a=>{e+=parseInt(a.cantidad)})),e}}};yw.render=Ww,yw.__scopeId="data-v-31f03f24";const Vw=yw;T()(yw,"components",{QPage:V.Z,QInput:E.Z,QSelect:Ue.Z,QBtn:k.Z,QTable:re.Z,QTd:ce.Z,QBadge:ie.Z,QIcon:_.Z,QTooltip:ne.Z,QBtnDropdown:Ke.Z,QList:Xe.Z,QItem:ea.Z,QItemSection:aa.Z,QSeparator:D.Z,QDialog:me.Z,QCard:x.Z,QCardSection:C.Z,QSpace:yn.Z,QForm:q.Z,QMarkupTable:se.Z,QCardActions:M.Z}),T()(yw,"directives",{ClosePopup:pe.Z});const xw=[{path:"/",component:()=>Promise.all([t.e(736),t.e(894)]).then(t.bind(t,15894)),children:[{path:"",component:()=>t.e(552).then(t.bind(t,94552))},{path:"login",component:S},{path:"cliente",component:he,meta:{requiresAuth:!0}},{path:"clientelocal",component:$e,meta:{requiresAuth:!0}},{path:"producto",component:ta,meta:{requiresAuth:!0}},{path:"venta",component:Fr,meta:{requiresAuth:!0}},{path:"ventalocal",component:ci,meta:{requiresAuth:!0}},{path:"garantia",component:ot,meta:{requiresAuth:!0}},{path:"inventario",component:Nt,meta:{requiresAuth:!0}},{path:"empleado",component:Bo,meta:{requiresAuth:!0}},{path:"empleadosueldo",component:()=>t.e(585).then(t.bind(t,33585)),meta:{requiresAuth:!0}},{path:"reporteuser",component:Ui,meta:{requiresAuth:!0}},{path:"user",component:us,meta:{requiresAuth:!0}},{path:"gasto",component:Vn,meta:{requiresAuth:!0}},{path:"prestamos",component:Dd,meta:{requiresAuth:!0}},{path:"prestamoslocal",component:uc,meta:{requiresAuth:!0}},{path:"historial",component:Fc,meta:{requiresAuth:!0}},{path:"cxcdetalle",component:pm,meta:{requiresAuth:!0}},{path:"cxclocal",component:$m,meta:{requiresAuth:!0}},{path:"cxcruta",component:su,meta:{requiresAuth:!0}},{path:"historialruta",component:Eu,meta:{requiresAuth:!0}},{path:"caja",component:Bu,meta:{requiresAuth:!0}},{path:"cajageneral",component:mp,meta:{requiresAuth:!0}},{path:"planillas",component:Fo.Z,meta:{requiresAuth:!0}},{path:"almacen",component:oh,meta:{requiresAuth:!0}},{path:"almacen2",component:Kb,meta:{requiresAuth:!0}},{path:"almacen3",component:Vw,meta:{requiresAuth:!0}},{path:"contable",component:xh,meta:{requiresAuth:!0}},{path:"sale/:type",component:yf,meta:{requiresAuth:!0}}]},{path:"/:catchAll(.*)*",component:()=>t.e(193).then(t.bind(t,32193))}],Cw=xw,_w=(0,c.BC)((function(){const e=m.r5,a=(0,m.p7)({scrollBehavior:()=>({left:0,top:0}),routes:Cw,history:e("")});return a.beforeEach(((e,a,t)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if((0,d.default)().getters["login/isLoggedIn"])return void t();t("/login")}else t()})),a}));async function qw(e,a){const o="function"===typeof d.default?await(0,d.default)({}):d.default,{storeKey:i}=await Promise.resolve().then(t.bind(t,60214)),s="function"===typeof _w?await _w({store:o}):_w;o.$router=s;const n=e(r);return n.use(l.Z,a),{app:n,store:o,storeKey:i,router:s}}var Ew=t(40729),Aw=t(16249),kw=t(64434),Dw=t(48508);const Mw={config:{},lang:Ew.Z,plugins:{Loading:Aw.Z,Notify:kw.Z,Dialog:Dw.Z}};var Ow=t(91413);(0,Ow.z)("service-worker.js",{ready(){},registered(){},cached(){},updatefound(){},updated(){},offline(){},error(){}}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.navigator.standalone&&t.e(736).then(t.t.bind(t,49501,23));const Tw="";async function Sw({app:e,router:a,store:t,storeKey:o},l){let i=!1;const s=e=>{i=!0;const t=Object(e)===e?a.resolve(e).fullPath:e;window.location.href=t},n=window.location.href.replace(window.location.origin,"");for(let d=0;!1===i&&d<l.length;d++)try{await l[d]({app:e,router:a,store:t,ssrContext:null,redirect:s,urlPath:n,publicPath:Tw})}catch(r){return r&&r.url?void(window.location.href=r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(a),e.use(t,o),e.mount("#q-app"))}qw(o.ri,Mw).then((e=>Promise.all([Promise.resolve().then(t.bind(t,5474))]).then((a=>{const t=a.map((e=>e.default)).filter((e=>"function"===typeof e));Sw(e,t)}))))},5474:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,axios:()=>i.a,api:()=>s});var o=t(47083),l=t(30052),i=t.n(l);const s=i().create({baseURL:"https://bnaty.tuprogam.com/api"}),n=(0,o.xr)((({app:e,router:a,store:t})=>{e.config.globalProperties.$axios=i(),e.config.globalProperties.$version="28.9.5",e.config.globalProperties.$url="https://bnaty.tuprogam.com/api",e.config.globalProperties.$gruposProductos=["CHICHA","GARAPIÑA"],e.config.globalProperties.$api=s;const o=localStorage.getItem("tokenchi");o&&(e.config.globalProperties.$axios.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$api.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$axios.post("https://bnaty.tuprogam.com/api/me").then((e=>{t.commit("login/auth_success",{token:o,user:e.data})})).catch((e=>{t.commit("login/salir"),localStorage.removeItem("tokenchi"),localStorage.removeItem("userchi")}))),e.config.globalProperties.$api=s,e.config.globalProperties.$axios=i()}))},60214:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>W});var o={};t.r(o),t.d(o,{authStatus:()=>c,isLoggedIn:()=>d,user:()=>m});var l={};t.r(l),t.d(l,{auth_error:()=>h,auth_request:()=>u,auth_success:()=>p,salir:()=>g});var i={};t.r(i),t.d(i,{login:()=>b,logout:()=>v});var s=t(47083),n=t(87874);function r(){return{status:"",token:localStorage.getItem("tokenchi")||"",user:{},pedido:[],usuarios:!1,clientes:!1,productos:!1,inventario:!1,ventadetalle:!1,historialventadetalle:!1,ventalocal:!1,historialventalocal:!1,empleados:!1,reportes:!1,gastos:!1,historialprestamo:!1,anularventa:!1,ruta:!1,anularprestamo:!1,reimpresion:!1,eliminargasto:!1,cobrardetalle:!1,cobrarlocal:!1,cobrarruta:!1,cajachica:!1,editalmacen:!1,editproducto:!1,editinventario:!1,editglosa:!1,delprestamo:!1,veralmacen:!1,pagoalmacen:!1,cajageneral:!1,gastoreporteuser:!1,reportepago:!1,resumencontable:!1,delpago:!1,preciounitario:!1,registroMateriaPrima:!1,registroProveedor:!1,registroProducto:!1,almacenCostoSubtotal:!1,almacenCrearMateriaPrima:!1,almacenHistorialPago:!1,empleadoSueldo:!1,editcajachica:!1,editcliente:!1}}function d(e){return!!e.token}function c(e){return e.status}function m(e){return e.user}function u(e){e.status="loading"}function p(e,a){e.status="success",e.token=a.token,e.user=a.user,e.usuarios=void 0!=a.user.permisos.find((e=>1===e.id)),e.clientes=void 0!=a.user.permisos.find((e=>2===e.id)),e.productos=void 0!=a.user.permisos.find((e=>3===e.id)),e.inventario=void 0!=a.user.permisos.find((e=>4===e.id)),e.ventadetalle=void 0!=a.user.permisos.find((e=>5===e.id)),e.historialventadetalle=void 0!=a.user.permisos.find((e=>6===e.id)),e.ventalocal=void 0!=a.user.permisos.find((e=>7===e.id)),e.historialventalocal=void 0!=a.user.permisos.find((e=>8===e.id)),e.empleados=void 0!=a.user.permisos.find((e=>9===e.id)),e.reportes=void 0!=a.user.permisos.find((e=>10===e.id)),e.gastos=void 0!=a.user.permisos.find((e=>11===e.id)),e.historialprestamo=void 0!=a.user.permisos.find((e=>12===e.id)),e.historialventa=void 0!=a.user.permisos.find((e=>13===e.id)),e.anularventa=void 0!=a.user.permisos.find((e=>14===e.id)),e.ruta=void 0!=a.user.permisos.find((e=>15===e.id)),e.anularprestamo=void 0!=a.user.permisos.find((e=>16===e.id)),e.reimpresion=void 0!=a.user.permisos.find((e=>17===e.id)),e.eliminargasto=void 0!=a.user.permisos.find((e=>18===e.id)),e.cobrardetalle=void 0!=a.user.permisos.find((e=>19===e.id)),e.cobrarlocal=void 0!=a.user.permisos.find((e=>20===e.id)),e.cobrarruta=void 0!=a.user.permisos.find((e=>21===e.id)),e.cajachica=void 0!=a.user.permisos.find((e=>22===e.id)),e.editalmacen=void 0!=a.user.permisos.find((e=>23===e.id)),e.editproducto=void 0!=a.user.permisos.find((e=>24===e.id)),e.editinventario=void 0!=a.user.permisos.find((e=>25===e.id)),e.editglosa=void 0!=a.user.permisos.find((e=>26===e.id)),e.delprestamo=void 0!=a.user.permisos.find((e=>27===e.id)),e.veralmacen=void 0!=a.user.permisos.find((e=>28===e.id)),e.pagoalmacen=void 0!=a.user.permisos.find((e=>29===e.id)),e.cajageneral=void 0!=a.user.permisos.find((e=>30===e.id)),e.gastoreporteuser=void 0!=a.user.permisos.find((e=>31===e.id)),e.reportepago=void 0!=a.user.permisos.find((e=>32===e.id)),e.resumencontable=void 0!=a.user.permisos.find((e=>33===e.id)),e.delpago=void 0!=a.user.permisos.find((e=>34===e.id)),e.preciounitario=void 0!=a.user.permisos.find((e=>35===e.id)),e.ingresoMaterial=void 0!=a.user.permisos.find((e=>36===e.id)),e.egresoMaterial=void 0!=a.user.permisos.find((e=>37===e.id)),e.registroMateriaPrima=void 0!=a.user.permisos.find((e=>38===e.id)),e.registroProveedor=void 0!=a.user.permisos.find((e=>39===e.id)),e.registroProducto=void 0!=a.user.permisos.find((e=>40===e.id)),e.almacenCostoSubtotal=void 0!=a.user.permisos.find((e=>41===e.id)),e.almacenCrearMateriaPrima=void 0!=a.user.permisos.find((e=>42===e.id)),e.almacenHistorialPago=void 0!=a.user.permisos.find((e=>43===e.id)),e.empleadoSueldo=void 0!=a.user.permisos.find((e=>44===e.id)),e.editcajachica=void 0!=a.user.permisos.find((e=>45===e.id)),e.editcliente=void 0!=a.user.permisos.find((e=>46===e.id))}function h(e){e.status="error"}function g(e){e.status="",e.token="",e.usuarios=!1,e.clientes=!1,e.productos=!1,e.inventario=!1,e.ventadetalle=!1,e.historialventadetalle=!1,e.ventalocal=!1,e.historialventalocal=!1,e.empleados=!1,e.reportes=!1,e.gastos=!1,e.historialprestamo=!1,e.historialventa=!1,e.anularventa=!1,e.ruta=!1,e.anularprestamo=!1,e.reimpresion=!1,e.eliminargasto=!1,e.cobrardetalle=!1,e.cobrarlocal=!1,e.cobrarruta=!1,e.cajachica=!1,e.editalmacen=!1,e.editproducto=!1,e.editinventario=!1,e.editglosa=!1,e.delprestamo=!1,e.veralmacen=!1,e.pagoalmacen=!1,e.cajageneral=!1,e.gastoreporteuser=!1,e.reportepago=!1,e.resumencontable=!1,e.delpago=!1,e.preciounitario=!1,e.ingresoMaterial=!1,e.egresoMaterial=!1,e.registroMateriaPrima=!1,e.registroProveedor=!1,e.registroProducto=!1,e.almacenCostoSubtotal=!1,e.almacenCrearMateriaPrima=!1,e.almacenHistorialPago=!1,e.empleadoSueldo=!1,e.editcajachica=!1}var f=t(5474);function b({commit:e},a){return new Promise(((t,o)=>{e("auth_request"),f.axios.post("https://bnaty.tuprogam.com/api/login",a).then((a=>{const o=a.data.token,l=a.data.user;localStorage.setItem("tokenchi",o),localStorage.setItem("userchi",JSON.stringify(l)),f.axios.defaults.headers.common.Authorization="Bearer "+o,f.api.defaults.headers.common.Authorization="Bearer "+o,e("auth_success",{token:o,user:l}),t(a)})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),o(a)}))}))}function v({commit:e}){return new Promise(((a,t)=>{f.axios.post("https://bnaty.tuprogam.com/api/logout").then((t=>{e("salir"),localStorage.removeItem("tokenchi"),localStorage.removeItem("userchi"),delete f.axios.defaults.headers.common.Authorization,a()})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),localStorage.removeItem("userchi"),t(a)}))}))}const w={namespaced:!0,state:r,getters:o,mutations:l,actions:i},W=(0,s.h)((function(){const e=(0,n.MT)({modules:{login:w},strict:!1});return e}))},23377:(e,a,t)=>{"use strict";t.d(a,{Z:()=>Ke});var o=t(83673),l=t(62323),i=t(98880);const s=(0,o.HX)("data-v-14ebe980");(0,o.dD)("data-v-14ebe980");const n=(0,o.Uk)("Modificar empleado"),r=(0,o.Uk)("Modificar empleado"),d=(0,o.Uk)("Eliminar empleado"),c=(0,o.Uk)("Eliminar empleado"),m=(0,o.Uk)("Generar planilla"),u=(0,o.Uk)("Generar planilla"),p=(0,o.Uk)("Crear Empleado"),h={class:"row"},g={class:"col-12"},f={class:"col-12"},b={class:"col-12"},v={class:"col-12"},w={class:"col-12"},W={class:"col-12"},y={class:"col-12"},V=(0,o.Uk)("Modificar Empleado"),x={class:"row"},C={class:"col-12"},_={class:"col-12"},q={class:"col-12"},E={class:"col-12"},A={class:"col-12"},k={class:"col-12"},D={class:"col-12"},M={class:"row"},O={class:"col-12"},T={class:"row"},S={class:"col-3"},R={class:"col-3"},U={class:"col-3"},$={class:"col-3 flex flex-center"},N={class:"col-12"},Y=(0,o.Uk)("Modificar planilla"),I=(0,o.Uk)("Modificar planilla"),P=(0,o.Uk)("Eliminar planilla"),L=(0,o.Uk)("Eliminar planilla"),j=(0,o.Uk)("Imprimir planilla"),F=(0,o.Uk)("Imprimir planilla"),z=(0,o.Uk)("Adelanto y decuento"),Z=(0,o.Uk)("Adelanto y decuento"),Q=(0,o.Uk)("Dar por cancelado"),B=(0,o.Uk)("Dar por cancelado"),G={class:"row"},H={class:"col-12"},J={class:"col-12"},K={class:"col-12"},X={class:"col-12"},ee={class:"col-12"},ae={class:"col-12"},te={class:"col-12 flex flex-center"},oe=(0,o.Uk)(),le={class:"row"},ie={class:"col-12"},se={class:"col-12"},ne={class:"col-12"},re={class:"col-12 flex flex-center"},de=(0,o.Uk)(),ce={class:"row"},me={class:"col-12"},ue={class:"row"},pe={class:"col-3"},he={class:"col-3"},ge={class:"col-3"},fe={class:"col-3 flex flex-center"},be={class:"col-12"},ve=(0,o.Uk)("Modificar planilla"),we=(0,o.Uk)("Modificar planilla"),We=(0,o.Uk)("Eliminar planilla"),ye=(0,o.Uk)("Eliminar planilla");(0,o.Cn)();const Ve=s(((e,a,t,Ve,xe,Ce)=>{const _e=(0,o.up)("q-avatar"),qe=(0,o.up)("q-item-section"),Ee=(0,o.up)("q-item-label"),Ae=(0,o.up)("q-item"),ke=(0,o.up)("q-list"),De=(0,o.up)("q-btn-dropdown"),Me=(0,o.up)("q-td"),Oe=(0,o.up)("q-badge"),Te=(0,o.up)("q-btn"),Se=(0,o.up)("q-input"),Re=(0,o.up)("q-table"),Ue=(0,o.up)("q-card-section"),$e=(0,o.up)("q-separator"),Ne=(0,o.up)("q-select"),Ye=(0,o.up)("q-form"),Ie=(0,o.up)("q-card"),Pe=(0,o.up)("q-dialog"),Le=(0,o.up)("q-page"),je=(0,o.Q2)("close-popup"),Fe=(0,o.Q2)("ripple");return(0,o.wg)(),(0,o.j4)(Le,{class:"q-pa-xs"},{default:s((()=>[(0,o.Wm)(Re,{dense:"",flat:"",bordered:"",rows:xe.empleados,"rows-per-page-options":[0],columns:xe.columsempleado},{"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(De,{color:"primary",label:"Opciones"},{default:s((()=>[(0,o.Wm)(ke,null,{default:s((()=>[(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.clickmod(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit",color:"warning","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[n])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[r])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.deleteval(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[d])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[c])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.clickplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"add_task",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[m])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[u])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-tipo":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(Oe,{color:"CONTRATO"==e.row.tipo?"green":"EVENTUAL"},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-nombre":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.nombre),1)])),_:2},1032,["props"])])),"body-cell-planillas":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(ke,{dense:"",bordered:"",padding:"",class:"rounded-borders"},{default:s((()=>[((0,o.wg)(!0),(0,o.j4)(o.HY,null,(0,o.Ko)(e.row.planillas,(e=>(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:e.id,clickable:""},{default:s((()=>[(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Uk)((0,l.zw)(e.fechainicio)+" "+(0,l.zw)(e.fechafin)+" "+(0,l.zw)(e.monto),1)])),_:2},1024)])),_:2},1536)),[[Fe]]))),128))])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-celular":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.celular),1)])),_:2},1032,["props"])])),"top-right":s((()=>[(0,o.Wm)(Te,{onClick:Ce.clickcreateempleado,color:"positive",icon:"add_circle",label:"Crear Empleado"},null,8,["onClick"]),(0,o.Wm)(Se,{dense:"",outlined:"",placeholder:"Buscar"})])),_:1},8,["rows","columns"]),(0,o.Wm)(Pe,{modelValue:xe.dialogcreateempleado,"onUpdate:modelValue":a[7]||(a[7]=e=>xe.dialogcreateempleado=e)},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-subtitle2"},{default:s((()=>[p])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)(Ye,{onSubmit:Ce.createempleado},{default:s((()=>[(0,o.Wm)("div",h,[(0,o.Wm)("div",g,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"ci",modelValue:xe.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>xe.empleado.ci=e)},null,8,["modelValue"])]),(0,o.Wm)("div",f,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"nombre",modelValue:xe.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>xe.empleado.nombre=e)},null,8,["modelValue"])]),(0,o.Wm)("div",b,[(0,o.Wm)(Se,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:xe.empleado.fechanac,"onUpdate:modelValue":a[3]||(a[3]=e=>xe.empleado.fechanac=e)},null,8,["modelValue"])]),(0,o.Wm)("div",v,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"celular",modelValue:xe.empleado.celular,"onUpdate:modelValue":a[4]||(a[4]=e=>xe.empleado.celular=e)},null,8,["modelValue"])]),(0,o.Wm)("div",w,[(0,o.Wm)(Ne,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:xe.empleado.tipo,"onUpdate:modelValue":a[5]||(a[5]=e=>xe.empleado.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",W,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"salario",type:"number",modelValue:xe.empleado.salario,"onUpdate:modelValue":a[6]||(a[6]=e=>xe.empleado.salario=e)},null,8,["modelValue"])]),(0,o.Wm)("div",y,[(0,o.Wm)(Te,{label:"Crear empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{modelValue:xe.dialogmodempleado,"onUpdate:modelValue":a[14]||(a[14]=e=>xe.dialogmodempleado=e)},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-subtitle2"},{default:s((()=>[V])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)(Ye,{onSubmit:Ce.modempleado},{default:s((()=>[(0,o.Wm)("div",x,[(0,o.Wm)("div",C,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"ci",modelValue:xe.empleado2.ci,"onUpdate:modelValue":a[8]||(a[8]=e=>xe.empleado2.ci=e)},null,8,["modelValue"])]),(0,o.Wm)("div",_,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"nombre",modelValue:xe.empleado2.nombre,"onUpdate:modelValue":a[9]||(a[9]=e=>xe.empleado2.nombre=e)},null,8,["modelValue"])]),(0,o.Wm)("div",q,[(0,o.Wm)(Se,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:xe.empleado2.fechanac,"onUpdate:modelValue":a[10]||(a[10]=e=>xe.empleado2.fechanac=e)},null,8,["modelValue"])]),(0,o.Wm)("div",E,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"celular",modelValue:xe.empleado2.celular,"onUpdate:modelValue":a[11]||(a[11]=e=>xe.empleado2.celular=e)},null,8,["modelValue"])]),(0,o.Wm)("div",A,[(0,o.Wm)(Ne,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:xe.empleado2.tipo,"onUpdate:modelValue":a[12]||(a[12]=e=>xe.empleado2.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",k,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"salario",type:"number",modelValue:xe.empleado2.salario,"onUpdate:modelValue":a[13]||(a[13]=e=>xe.empleado2.salario=e)},null,8,["modelValue"])]),(0,o.Wm)("div",D,[(0,o.Wm)(Te,{label:"Modificar empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{modelValue:xe.dialogcreateplanilla,"onUpdate:modelValue":a[18]||(a[18]=e=>xe.dialogcreateplanilla=e),"full-width":"","full-height":""},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-subtitle2"},{default:s((()=>[(0,o.Uk)("Crear Planilla "+(0,l.zw)(xe.empleado.nombre)+" "+(0,l.zw)(xe.empleado.tipo),1)])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)("div",M,[(0,o.Wm)("div",O,[(0,o.Wm)(Ye,{onSubmit:Ce.createplanilla},{default:s((()=>[(0,o.Wm)("div",T,[(0,o.Wm)("div",S,[(0,o.Wm)(Se,{dense:"",type:"date",outlined:"",label:"fechainicio",modelValue:xe.fechainicio,"onUpdate:modelValue":a[15]||(a[15]=e=>xe.fechainicio=e)},null,8,["modelValue"])]),(0,o.Wm)("div",R,[(0,o.Wm)(Se,{dense:"",type:"date",outlined:"",label:"fechafin",modelValue:xe.fechafin,"onUpdate:modelValue":a[16]||(a[16]=e=>xe.fechafin=e)},null,8,["modelValue"])]),(0,o.Wm)("div",U,[(0,o.Wm)(Se,{dense:"",outlined:"",label:"monto",modelValue:xe.monto,"onUpdate:modelValue":a[17]||(a[17]=e=>xe.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",$,[(0,o.Wm)(Te,{label:"Crear planilla",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,o.Wm)("div",N,[(0,o.Wm)(Re,{columns:xe.columsmisplanillaempleado,title:"Historial de planillas","rows-per-page-options":[0],rows:xe.misplanillaempleado},{"body-cell-estado":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Wm)(Oe,{color:"CREADO"==e.row.estado?"positive":"negative",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(De,{color:"CREADO"==e.row.estado?"positive":"negative",label:"Opciones"},{default:s((()=>[(0,o.Wm)(ke,null,{default:s((()=>["CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:0,clickable:"",onClick:a=>Ce.clickupdateplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[Y])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[I])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[je]]):(0,o.kq)("",!0),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:1,clickable:"",onClick:a=>Ce.eliminarplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[P])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[L])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[je]]):(0,o.kq)("",!0),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.imprimirplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"print",color:"primary","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[j])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[F])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]]),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:2,clickable:"",onClick:a=>Ce.adelantodescuento(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"paid",color:"positive","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[z])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[Z])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[je]]):(0,o.kq)("",!0),"CREADO"==e.row.estado?(0,o.wy)(((0,o.wg)(),(0,o.j4)(Ae,{key:3,clickable:"",onClick:a=>Ce.darcancelado(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"logout",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[Q])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[B])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[je]]):(0,o.kq)("",!0)])),_:2},1024)])),_:2},1032,["color"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{modelValue:xe.dialogplanilla,"onUpdate:modelValue":a[25]||(a[25]=e=>xe.dialogplanilla=e)},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-bold"},{default:s((()=>[(0,o.Uk)("Planilla "+(0,l.zw)(xe.empleado.nombre)+" "+(0,l.zw)(xe.empleado.tipo),1)])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)(Ye,{onSubmit:(0,i.iM)(Ce.updateplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",G,[(0,o.Wm)("div",H,[(0,o.Wm)(Se,{label:"fechainicio",type:"date",dense:"",outlined:"",modelValue:xe.planilla.fechainicio,"onUpdate:modelValue":a[19]||(a[19]=e=>xe.planilla.fechainicio=e)},null,8,["modelValue"])]),(0,o.Wm)("div",J,[(0,o.Wm)(Se,{label:"fechafin",type:"date",dense:"",outlined:"",modelValue:xe.planilla.fechafin,"onUpdate:modelValue":a[20]||(a[20]=e=>xe.planilla.fechafin=e)},null,8,["modelValue"])]),(0,o.Wm)("div",K,[(0,o.Wm)(Se,{label:"monto",dense:"",outlined:"",modelValue:xe.planilla.monto,"onUpdate:modelValue":a[21]||(a[21]=e=>xe.planilla.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",X,[(0,o.Wm)(Se,{label:"adelanto",dense:"",outlined:"",modelValue:xe.planilla.adelanto,"onUpdate:modelValue":a[22]||(a[22]=e=>xe.planilla.adelanto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ee,[(0,o.Wm)(Se,{label:"bono",dense:"",outlined:"",modelValue:xe.planilla.bono,"onUpdate:modelValue":a[23]||(a[23]=e=>xe.planilla.bono=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ae,[(0,o.Wm)(Se,{label:"total",dense:"",outlined:"",modelValue:xe.planilla.total,"onUpdate:modelValue":a[24]||(a[24]=e=>xe.planilla.total=e)},null,8,["modelValue"])]),(0,o.Wm)("div",te,[(0,o.Wm)(Te,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{modelValue:xe.dialoglogplanillaupdate,"onUpdate:modelValue":a[29]||(a[29]=e=>xe.dialoglogplanillaupdate=e)},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-bold"},{default:s((()=>[(0,o.Wm)("div",null,"Planilla "+(0,l.zw)(xe.empleado.nombre)+" "+(0,l.zw)(xe.empleado.tipo),1),oe,(0,o.Wm)("div",null,"Del: "+(0,l.zw)(xe.planilla.fechainicio)+" Al "+(0,l.zw)(xe.planilla.fechafin),1)])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)(Ye,{onSubmit:(0,i.iM)(Ce.updatelogplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",le,[(0,o.Wm)("div",ie,[(0,o.Wm)(Se,{label:"tipo",dense:"",outlined:"",modelValue:xe.logplanillaupdate.tipo,"onUpdate:modelValue":a[26]||(a[26]=e=>xe.logplanillaupdate.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",se,[(0,o.Wm)(Se,{label:"monto",type:"number",dense:"",outlined:"",modelValue:xe.logplanillaupdate.monto,"onUpdate:modelValue":a[27]||(a[27]=e=>xe.logplanillaupdate.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ne,[(0,o.Wm)(Se,{label:"motivo",dense:"",outlined:"",modelValue:xe.logplanillaupdate.motivo,"onUpdate:modelValue":a[28]||(a[28]=e=>xe.logplanillaupdate.motivo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",re,[(0,o.Wm)(Te,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(Pe,{modelValue:xe.dialoglogplanilla,"onUpdate:modelValue":a[33]||(a[33]=e=>xe.dialoglogplanilla=e)},{default:s((()=>[(0,o.Wm)(Ie,null,{default:s((()=>[(0,o.Wm)(Ue,{class:"text-center text-bold"},{default:s((()=>[(0,o.Wm)("div",null,"Historial de adelantos y descuentos "+(0,l.zw)(xe.empleado.nombre)+" "+(0,l.zw)(xe.empleado.tipo),1),de,(0,o.Wm)("div",null,"Del: "+(0,l.zw)(xe.planilla.fechainicio)+" Al "+(0,l.zw)(xe.planilla.fechafin),1)])),_:1}),(0,o.Wm)($e),(0,o.Wm)(Ue,null,{default:s((()=>[(0,o.Wm)("div",ce,[(0,o.Wm)("div",me,[(0,o.Wm)(Ye,{onSubmit:(0,i.iM)(Ce.createlogplanilla,["prevent"])},{default:s((()=>[(0,o.Wm)("div",ue,[(0,o.Wm)("div",pe,[(0,o.Wm)(Ne,{options:["BONO","ADELANTO","DESCUENTO"],label:"Tipo",dense:"",outlined:"",modelValue:xe.logplanilla.tipo,"onUpdate:modelValue":a[30]||(a[30]=e=>xe.logplanilla.tipo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",he,[(0,o.Wm)(Se,{label:"Monto",type:"number",dense:"",outlined:"",modelValue:xe.logplanilla.monto,"onUpdate:modelValue":a[31]||(a[31]=e=>xe.logplanilla.monto=e)},null,8,["modelValue"])]),(0,o.Wm)("div",ge,[(0,o.Wm)(Se,{label:"Motivo",type:"text",dense:"",outlined:"",modelValue:xe.logplanilla.motivo,"onUpdate:modelValue":a[32]||(a[32]=e=>xe.logplanilla.motivo=e)},null,8,["modelValue"])]),(0,o.Wm)("div",fe,[(0,o.Wm)(Te,{type:"submit",class:"full-width",color:"positive",icon:"add_circle",label:"Crear"})])])])),_:1},8,["onSubmit"])]),(0,o.Wm)("div",be,[(0,o.Wm)(Re,{rows:xe.logplanillas,title:"Historial de planillas",columns:xe.columslogplanillas,"rows-per-page-options":[0]},{"body-cell-tipo":s((e=>[(0,o.Wm)(Me,{props:e},{default:s((()=>[(0,o.Wm)(Oe,{color:"ADELANTO"==e.row.tipo||"DESCUENTO"==e.row.tipo?"negative":"BONO"==e.row.tipo?"positive":""},{default:s((()=>[(0,o.Uk)((0,l.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":s((e=>[(0,o.Wm)(Me,{props:e,"auto-width":""},{default:s((()=>[(0,o.Wm)(De,{color:"primary",label:"Opciones"},{default:s((()=>[(0,o.Wm)(ke,null,{default:s((()=>[(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.clickupdatelogplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[ve])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[we])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]]),(0,o.wy)((0,o.Wm)(Ae,{clickable:"",onClick:a=>Ce.eliminarlogplanilla(e.row)},{default:s((()=>[(0,o.Wm)(qe,{avatar:""},{default:s((()=>[(0,o.Wm)(_e,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,o.Wm)(qe,null,{default:s((()=>[(0,o.Wm)(Ee,null,{default:s((()=>[We])),_:1}),(0,o.Wm)(Ee,{caption:""},{default:s((()=>[ye])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[je]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var xe=t(21082),Ce=(t(47345),t(47213)),_e=t(11488),qe=t.n(_e);const Ee=t(21694),Ae={name:"Planillas",data(){return{dialoglogplanilla:!1,logplanilla:{},dialoglogplanillaupdate:!1,logplanillaupdate:{},logplanillas:[],dialogplanilla:!1,dialogcreateempleado:!1,dialogmodempleado:!1,dialogcreateplanilla:!1,fechainicio:xe.ZP.formatDate(new Date,"YYYY-MM-DD"),fechafin:xe.ZP.formatDate(new Date,"YYYY-MM-DD"),fechahoy:xe.ZP.formatDate(new Date,"YYYY-MM-DD"),monto:0,empleado:{tipo:"CONTRATO",fechanac:xe.ZP.formatDate(new Date,"YYYY-MM-DD")},empleado2:{},empleados:[],columsempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"ci",name:"ci",field:"ci",align:"left"},{label:"nombre",name:"nombre",field:"nombre",align:"left"},{label:"fechanac",name:"fechanac",field:"fechanac",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"celular",name:"celular",field:"celular",align:"left"},{label:"salario",name:"salario",field:"salario",align:"left"}],columslogplanillas:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"motivo",name:"motivo",field:"motivo",align:"left"},{label:"fecha",name:"fecha",field:"fecha",align:"left"},{label:"hora",name:"hora",field:"hora",align:"left"}],misplanillaempleado:[],columsmisplanillaempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"fechainicio",name:"fechainicio",field:"fechainicio",align:"left"},{label:"fechafin",name:"fechafin",field:"fechafin",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"adelanto",name:"adelanto",field:"adelanto",align:"left"},{label:"descuento",name:"descuento",field:"descuento",align:"left"},{label:"bono",name:"bono",field:"bono",align:"left"},{label:"total",name:"total",field:"total",align:"left"},{label:"estado",name:"estado",field:"estado",align:"left"}],planilla:{}}},created(){this.misempleados()},mounted(){},methods:{createlogplanilla(){this.$q.loading.show(),this.logplanilla.fecha=xe.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanilla.hora=xe.ZP.formatDate(new Date,"HH:mm:ss"),this.logplanilla.planilla_id=this.planilla.id,this.$axios.post("https://bnaty.tuprogam.com/api/logplanilla",this.logplanilla).then((e=>{"BONO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.tuprogam.com/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:this.planilla.descuento,bono:parseInt(this.planilla.bono)+parseInt(this.logplanilla.monto),total:parseInt(this.planilla.total)+parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"DESCUENTO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.tuprogam.com/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:parseInt(this.planilla.descuento)+parseInt(this.logplanilla.monto),bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"ADELANTO"==this.logplanilla.tipo&&this.$axios.put("https://bnaty.tuprogam.com/api/planilla/"+this.planilla.id,{adelanto:parseInt(this.planilla.adelanto)+parseInt(this.logplanilla.monto),descuento:this.planilla.descuento,bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),this.milogplanillas(),this.logplanilla={}}))},clickmod(e){this.empleado2=e,this.dialogmodempleado=!0},clickplanilla(e){this.empleado=e,this.monto=this.empleado.salario,this.dialogcreateplanilla=!0,this.mihistorialplanilla()},mihistorialplanilla(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/planilla/"+this.empleado.id).then((e=>{this.$q.loading.hide(),this.misplanillaempleado=e.data}))},clickcreateempleado(){this.dialogcreateempleado=!0,this.empleado={tipo:"CONTRATO",fechanac:xe.ZP.formatDate(new Date,"YYYY-MM-DD")}},misempleados(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/empleado/1/edit").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},createplanilla(){this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/planilla",{fechainicio:this.fechainicio,fechafin:this.fechafin,fechapago:null,monto:this.monto,adelanto:0,descuento:0,bono:0,restante:this.monto,total:this.monto,estado:"CREADO",empleado_id:this.empleado.id}).then((e=>{this.mihistorialplanilla()}))},updateplanilla(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/planilla/"+this.planilla.id,this.planilla).then((e=>{this.mihistorialplanilla(),this.dialogplanilla=!1}))},updatelogplanilla(){this.$q.loading.show(),this.logplanillaupdate.fecha=xe.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanillaupdate.hora=xe.ZP.formatDate(new Date,"HH:mm:ss"),this.$axios.put("https://bnaty.tuprogam.com/api/logplanilla/"+this.logplanillaupdate.id,this.logplanillaupdate).then((e=>{this.dialoglogplanillaupdate=!1,this.milogplanillas()}))},clickupdatelogplanilla(e){this.logplanillaupdate=e,this.dialoglogplanillaupdate=!0},eliminarplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/planilla/"+e.id).then((e=>{this.mihistorialplanilla()}))}))},eliminarlogplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/logplanilla/"+e.id).then((e=>{this.milogplanillas()}))}))},darcancelado(e){this.$q.dialog({title:"Seguro dar por cacelado?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/planilla/"+e.id,{estado:"CANCELADO",fechapago:xe.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.mihistorialplanilla()}))}))},adelantodescuento(e){this.planilla=e,this.dialoglogplanilla=!0,this.milogplanillas()},milogplanillas(){this.$q.loading.show(),this.$axios.get("https://bnaty.tuprogam.com/api/logplanilla/"+this.planilla.id).then((e=>{this.logplanillas=e.data,this.$q.loading.hide()}))},imprimirplanilla(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"png",5,2,37,17),o.setFont(void 0,"bold"),o.setFontSize(8),o.text(170,5,"fecha de proceso: "+a.fechahoy,"DD/MM/YYYY"),o.setFontSize(11),o.text("CHICHERIA DOÑA NATI",110,7,"center"),o.text("BOLETA DE PAGO",110,12,"center"),o.text("Correspondiente  "+qe()(e.fechainicio).format("DD/MM/YYYY")+" Al "+qe()(e.fechafin).format("DD/MM/YYYY")+" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":qe()(e.fechapago).format("DD/MM/YYYY")),110,17,"center"),o.line(5,20,210,20),o.setFont(void 0,"normal")}var o=new Ce.kH("p",void 0,"letter");o.setFont("Times"),t(),o.setFontSize(10),o.setFont(void 0,"bold"),o.text(["CI:","Nombre:","Fecha nac:"],10,25),o.setFont(void 0,"normal"),o.text([this.empleado.ci,this.empleado.nombre,this.empleado.fechanac],65,25,"center"),o.setFont(void 0,"bold"),o.text(["Tipo:","Celular","Edad:"],130,25),o.setFont(void 0,"normal");var l=qe()(this.empleado.fechanac),i=qe()(),s=i.diff(l,"years");o.text([this.empleado.tipo,this.empleado.celular.toString(),s.toString()],170,25,"center"),o.line(5,35,210,35),o.setFont(void 0,"bold"),o.text("INGRESOS",45,39,"center"),o.text("DESCUENTOS",150,39,"center"),o.line(5,40,210,40),o.line(110,40,110,70),o.setFont(void 0,"bold"),o.text(["Monto:","Bono:"],15,45),o.setFont(void 0,"normal"),o.text([e.monto+" Bs",e.bono+" Bs"],105,45,"right"),o.setFont(void 0,"bold"),o.text(["Adelanto:","Descuento:"],115,45),o.setFont(void 0,"normal"),o.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),o.line(5,65,210,65),o.setFont(void 0,"bold"),o.text("Total ganado:",35,69,"center"),o.text("Total descuento:",140,69,"center"),o.setFont(void 0,"normal"),o.text(parseInt(e.monto)+parseInt(e.bono)+" Bs",105,69,"right"),o.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),o.line(5,70,210,70),o.setFont(void 0,"bold"),o.text("Liquido pagable: "+e.total+" Bs",110,75,"center");let n=Ee.conversorNumerosALetras,r=new n,d=r.convertToText(e.total);o.setFont(void 0,"normal"),o.text("SON: "+d.toUpperCase()+" Bs",110,80,"center"),o.setFont(void 0,"bold"),o.text(5,90,"____________________________                     _____________________________________           ______________________________"),o.text(10,95,"FIRMA SELLO CAJERO"),o.text(75,95,"FIRMA SELLO CONTROL INTERNO"),o.text(150,95,"FIRMA SELLO LIQUIDADOR"),window.open(o.output("bloburl"),"_blank")},clickupdateplanilla(e){this.planilla=e,this.dialogplanilla=!0},createempleado(){console.log(this.empleado),this.$q.loading.show(),this.$axios.post("https://bnaty.tuprogam.com/api/empleado",this.empleado).then((e=>{this.empleado={tipo:"CONTRATO",fechanac:xe.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialogcreateempleado=!1,this.misempleados()}))},modempleado(){this.$q.loading.show(),this.$axios.put("https://bnaty.tuprogam.com/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.dialogmodempleado=!1,this.misempleados()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("https://bnaty.tuprogam.com/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))}}};var ke=t(24379),De=t(55242),Me=t(83884),Oe=t(82226),Te=t(27011),Se=t(83414),Re=t(52035),Ue=t(75096),$e=t(2350),Ne=t(24554),Ye=t(69721),Ie=t(2165),Pe=t(34842),Le=t(46778),je=t(10151),Fe=t(25589),ze=t(65869),Ze=t(68689),Qe=t(63314),Be=t(60677),Ge=t(80860),He=t(7518),Je=t.n(He);Ae.render=Ve,Ae.__scopeId="data-v-14ebe980";const Ke=Ae;Je()(Ae,"components",{QPage:ke.Z,QTable:De.Z,QTd:Me.Z,QBtnDropdown:Oe.Z,QList:Te.Z,QItem:Se.Z,QItemSection:Re.Z,QAvatar:Ue.Z,QItemLabel:$e.Z,QIcon:Ne.Z,QBadge:Ye.Z,QBtn:Ie.Z,QInput:Pe.Z,QDialog:Le.Z,QCard:je.Z,QCardSection:Fe.Z,QSeparator:ze.Z,QForm:Ze.Z,QSelect:Qe.Z}),Je()(Ae,"directives",{ClosePopup:Be.Z,Ripple:Ge.Z})},46700:(e,a,t)=>{var o={"./af":5809,"./af.js":5809,"./ar":46069,"./ar-dz":70481,"./ar-dz.js":70481,"./ar-kw":93994,"./ar-kw.js":93994,"./ar-ly":33312,"./ar-ly.js":33312,"./ar-ma":90239,"./ar-ma.js":90239,"./ar-sa":31863,"./ar-sa.js":31863,"./ar-tn":19607,"./ar-tn.js":19607,"./ar.js":46069,"./az":69281,"./az.js":69281,"./be":29945,"./be.js":29945,"./bg":59384,"./bg.js":59384,"./bm":21476,"./bm.js":21476,"./bn":43345,"./bn-bd":70216,"./bn-bd.js":70216,"./bn.js":43345,"./bo":81713,"./bo.js":81713,"./br":19655,"./br.js":19655,"./bs":87296,"./bs.js":87296,"./ca":43049,"./ca.js":43049,"./cs":62722,"./cs.js":62722,"./cv":98039,"./cv.js":98039,"./cy":95563,"./cy.js":95563,"./da":31960,"./da.js":31960,"./de":67533,"./de-at":76674,"./de-at.js":76674,"./de-ch":17732,"./de-ch.js":17732,"./de.js":67533,"./dv":78343,"./dv.js":78343,"./el":37004,"./el.js":37004,"./en-au":32517,"./en-au.js":32517,"./en-ca":84929,"./en-ca.js":84929,"./en-gb":99722,"./en-gb.js":99722,"./en-ie":96923,"./en-ie.js":96923,"./en-il":68050,"./en-il.js":68050,"./en-in":99624,"./en-in.js":99624,"./en-nz":70540,"./en-nz.js":70540,"./en-sg":14375,"./en-sg.js":14375,"./eo":10040,"./eo.js":10040,"./es":99720,"./es-do":25595,"./es-do.js":25595,"./es-mx":10180,"./es-mx.js":10180,"./es-us":61563,"./es-us.js":61563,"./es.js":99720,"./et":9217,"./et.js":9217,"./eu":39474,"./eu.js":39474,"./fa":85243,"./fa.js":85243,"./fi":57645,"./fi.js":57645,"./fil":55350,"./fil.js":55350,"./fo":75622,"./fo.js":75622,"./fr":91467,"./fr-ca":53439,"./fr-ca.js":53439,"./fr-ch":14335,"./fr-ch.js":14335,"./fr.js":91467,"./fy":86026,"./fy.js":86026,"./ga":32969,"./ga.js":32969,"./gd":21347,"./gd.js":21347,"./gl":11085,"./gl.js":11085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":69597,"./gom-latn.js":69597,"./gu":28705,"./gu.js":28705,"./he":69128,"./he.js":69128,"./hi":92821,"./hi.js":92821,"./hr":9002,"./hr.js":9002,"./hu":94814,"./hu.js":94814,"./hy-am":30658,"./hy-am.js":30658,"./id":29344,"./id.js":29344,"./is":28204,"./is.js":28204,"./it":70376,"./it-ch":81549,"./it-ch.js":81549,"./it.js":70376,"./ja":69293,"./ja.js":69293,"./jv":96401,"./jv.js":96401,"./ka":60482,"./ka.js":60482,"./kk":87329,"./kk.js":87329,"./km":44241,"./km.js":44241,"./kn":23566,"./kn.js":23566,"./ko":52742,"./ko.js":52742,"./ku":92915,"./ku.js":92915,"./ky":86846,"./ky.js":86846,"./lb":44959,"./lb.js":44959,"./lo":82188,"./lo.js":82188,"./lt":58967,"./lt.js":58967,"./lv":41245,"./lv.js":41245,"./me":90751,"./me.js":90751,"./mi":57501,"./mi.js":57501,"./mk":11643,"./mk.js":11643,"./ml":15597,"./ml.js":15597,"./mn":67612,"./mn.js":67612,"./mr":19065,"./mr.js":19065,"./ms":84703,"./ms-my":84645,"./ms-my.js":84645,"./ms.js":84703,"./mt":64365,"./mt.js":64365,"./my":83788,"./my.js":83788,"./nb":57357,"./nb.js":57357,"./ne":99109,"./ne.js":99109,"./nl":63746,"./nl-be":31985,"./nl-be.js":31985,"./nl.js":63746,"./nn":27175,"./nn.js":27175,"./oc-lnc":70566,"./oc-lnc.js":70566,"./pa-in":32733,"./pa-in.js":32733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":17839,"./pt-br.js":17839,"./pt.js":505,"./ro":39578,"./ro.js":39578,"./ru":32328,"./ru.js":32328,"./sd":641,"./sd.js":641,"./se":51758,"./se.js":51758,"./si":36680,"./si.js":36680,"./sk":25016,"./sk.js":25016,"./sl":7424,"./sl.js":7424,"./sq":88635,"./sq.js":88635,"./sr":49038,"./sr-cyrl":73716,"./sr-cyrl.js":73716,"./sr.js":49038,"./ss":64771,"./ss.js":64771,"./sv":3517,"./sv.js":3517,"./sw":39419,"./sw.js":39419,"./ta":55959,"./ta.js":55959,"./te":21739,"./te.js":21739,"./tet":22264,"./tet.js":22264,"./tg":94792,"./tg.js":94792,"./th":88328,"./th.js":88328,"./tk":60702,"./tk.js":60702,"./tl-ph":57814,"./tl-ph.js":57814,"./tlh":10797,"./tlh.js":10797,"./tr":16691,"./tr.js":16691,"./tzl":76891,"./tzl.js":76891,"./tzm":16362,"./tzm-latn":37855,"./tzm-latn.js":37855,"./tzm.js":16362,"./ug-cn":77606,"./ug-cn.js":77606,"./uk":30513,"./uk.js":30513,"./ur":43803,"./ur.js":43803,"./uz":60344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":60344,"./vi":70003,"./vi.js":70003,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":62083,"./yo.js":62083,"./zh-cn":84536,"./zh-cn.js":84536,"./zh-hk":92475,"./zh-hk.js":92475,"./zh-mo":67593,"./zh-mo.js":67593,"./zh-tw":4746,"./zh-tw.js":4746};function l(e){var a=i(e);return t(a)}function i(e){if(!t.o(o,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=46700},13924:()=>{},66490:()=>{}},a={};function t(o){var l=a[o];if(void 0!==l)return l.exports;var i=a[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,(()=>{var e=[];t.O=(a,o,l,i)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,l,i]=e[c],n=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(t.O).every((e=>t.O[e](o[r])))?o.splice(r--,1):(n=!1,i<s&&(s=i));if(n){e.splice(c--,1);var d=l();void 0!==d&&(a=d)}}return a}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,l,i]}})(),(()=>{t.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(a,{a}),a}})(),(()=>{var e,a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var i=Object.create(null);t.r(i);var s={};e=e||[null,a({}),a([]),a(a)];for(var n=2&l&&o;"object"==typeof n&&!~e.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((e=>s[e]=()=>o[e]));return s["default"]=()=>o,t.d(i,s),i}})(),(()=>{t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((a,o)=>(t.f[o](e,a),a)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{193:"58b85f33",552:"e6f00287",585:"a9f5e8a4",894:"617a4ca5"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+(736===e?"vendor":e)+"."+{736:"8c101867",894:"05389cc0"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={},a="Chicheria:";t.l=(o,l,i,s)=>{if(e[o])e[o].push(l);else{var n,r;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==a+i){n=m;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",a+i),n.src=o),e[o]=[l];var u=(a,t)=>{n.onerror=n.onload=null,clearTimeout(p);var l=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),l&&l.forEach((e=>e(t))),a)return a(t)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{t.p=""})(),(()=>{var e=(e,a,t,o)=>{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var i=i=>{if(l.onerror=l.onload=null,"load"===i.type)t();else{var s=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.href||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=s,r.request=n,l.parentNode.removeChild(l),o(r)}};return l.onerror=l.onload=i,l.href=a,document.head.appendChild(l),l},a=(e,a)=>{for(var t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var l=t[o],i=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(i===e||i===a))return l}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){l=s[o],i=l.getAttribute("data-href");if(i===e||i===a)return l}},o=o=>new Promise(((l,i)=>{var s=t.miniCssF(o),n=t.p+s;if(a(s,n))return l();e(o,n,l,i)})),l={143:0};t.f.miniCss=(e,a)=>{var t={894:1};l[e]?a.push(l[e]):0!==l[e]&&t[e]&&a.push(l[e]=o(e).then((()=>{l[e]=0}),(a=>{throw delete l[e],a})))}})(),(()=>{var e={143:0};t.f.j=(a,o)=>{var l=t.o(e,a)?e[a]:void 0;if(0!==l)if(l)o.push(l[2]);else{var i=new Promise(((t,o)=>l=e[a]=[t,o]));o.push(l[2]=i);var s=t.p+t.u(a),n=new Error,r=o=>{if(t.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;n.message="Loading chunk "+a+" failed.\n("+i+": "+s+")",n.name="ChunkLoadError",n.type=i,n.request=s,l[1](n)}};t.l(s,r,"chunk-"+a,a)}},t.O.j=a=>0===e[a];var a=(a,o)=>{var l,i,[s,n,r]=o,d=0;for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(r)var c=r(t);for(a&&a(o);d<s.length;d++)i=s[d],t.o(e,i)&&e[i]&&e[i][0](),e[s[d]]=0;return t.O(c)},o=self["webpackChunkChicheria"]=self["webpackChunkChicheria"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))})();var o=t.O(void 0,[736],(()=>t(67999)));o=t.O(o)})();
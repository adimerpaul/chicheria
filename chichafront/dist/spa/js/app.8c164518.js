(()=>{var e={28562:(e,a,t)=>{"use strict";t(67280),t(65363),t(10071);var o=t(98880),l=t(99592),i=t(83673);function s(e,a,t,o,l,s){const n=(0,i.up)("router-view");return(0,i.wg)(),(0,i.j4)(n)}const n=(0,i.aZ)({name:"App"});n.render=s;const r=n;var d=t(60214),c=t(47083),m=t(79582);const u=(0,i.HX)("data-v-146e0b55");(0,i.dD)("data-v-146e0b55");const p={class:"row"},h=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1),g={class:"col-12 col-md-8"},f={class:"text-h6"},b=(0,i.Uk)(" Ingreso al sistemas "),v=(0,i.Wm)("div",{class:"text-subtitle2"},"ingresar nombre y contraseña",-1),W=(0,i.Wm)("div",{class:"col-12 col-md-2"},null,-1);(0,i.Cn)();const w=u(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-icon"),r=(0,i.up)("q-card-section"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),w=(0,i.up)("q-separator"),y=(0,i.up)("q-card"),V=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-md"},{default:u((()=>[(0,i.Wm)("div",p,[h,(0,i.Wm)("div",g,[(0,i.Wm)(y,{class:""},{default:u((()=>[(0,i.Wm)(r,{class:"bg-secondary text-white"},{default:u((()=>[(0,i.Wm)("div",f,[(0,i.Wm)(n,{name:"login"}),b]),v])),_:1}),(0,i.Wm)(r,null,{default:u((()=>[(0,i.Wm)(m,{onSubmit:s.login,onReset:s.onReset,class:"q-gutter-md"},{default:u((()=>[(0,i.Wm)(d,{filled:"",modelValue:l.email,"onUpdate:modelValue":a[1]||(a[1]=e=>l.email=e),label:"Ingresa tu email *",hint:"Email de ingreso","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{autocomplete:"on",type:"password",filled:"",modelValue:l.password,"onUpdate:modelValue":a[2]||(a[2]=e=>l.password=e),label:"Password *",hint:"Contraseña ","lazy-rules":"",rules:[e=>e&&e.length>0||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Ingresar",type:"submit",icon:"login",color:"positive"}),(0,i.Wm)(c,{label:"Reset",type:"reset",icon:"restart_alt",color:"negative",class:"q-ml-sm"})])])),_:1},8,["onSubmit","onReset"])])),_:1}),(0,i.Wm)(w,{dark:""})])),_:1})]),W])])),_:1})})),y={data(){return{email:"",password:""}},methods:{login(){this.$q.loading.show(),this.$store.dispatch("login/login",{email:this.email,password:this.password}).then((()=>{this.$q.loading.hide(),this.$router.push("/")})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e,color:"red",icon:"error"})}))},onReset(){this.email="",this.password=""}}};var V=t(24379),x=t(10151),C=t(25589),_=t(24554),q=t(68689),E=t(34842),A=t(28886),D=t(2165),M=t(65869),T=t(99367),S=t(7518),k=t.n(S);y.render=w,y.__scopeId="data-v-146e0b55";const O=y;k()(y,"components",{QPage:V.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QSeparator:M.Z,QCardActions:T.Z});var R=t(62323);const N={class:"row"},U={class:"col-12"},Y={class:"col-12"},I={class:"row"},P={class:"col-12 col-sm-2"},$={class:"col-12 col-sm-2"},F={class:"col-12 col-sm-2"},L={class:"col-12 col-sm-2"},z={class:"col-12 col-sm-2"},Z={class:"col-12 flex flex-center"},j=(0,i.Wm)("div",null,null,-1),B={class:"col-12"},Q={class:"q-pa-md"},G={class:" responsive"},H={id:"example",class:"display",style:{width:"100%"}},J=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"CI"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Telefono"),(0,i.Wm)("th",null,"Direccion"),(0,i.Wm)("th",null,"Observacion"),(0,i.Wm)("th",null,"Tipo Cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Opcion")])],-1),K=(0,i.Uk)("LOCAL"),X=(0,i.Uk)("CLIENTE"),ee=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),ae={key:0},te=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function oe(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-form"),m=(0,i.up)("q-card"),u=(0,i.up)("q-card-section"),p=(0,i.up)("q-dialog"),h=(0,i.up)("q-avatar"),g=(0,i.up)("q-card-actions"),f=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",N,[(0,i.Wm)("div",U,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS CLIENTES",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",Y,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:a[6]||(a[6]=e=>s.registrar(2)),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",I,[(0,i.Wm)("div",P,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.cliente.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>l.cliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",$,[(0,i.Wm)(r,{outlined:"",modelValue:l.cliente.titular,"onUpdate:modelValue":a[2]||(a[2]=e=>l.cliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",F,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.cliente.telefono,"onUpdate:modelValue":a[3]||(a[3]=e=>l.cliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",L,[(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.cliente.direccion,"onUpdate:modelValue":a[4]||(a[4]=e=>l.cliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",z,[(0,i.Wm)(r,{outlined:"",modelValue:l.cliente.observacion,"onUpdate:modelValue":a[5]||(a[5]=e=>l.cliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Z,[(0,i.Wm)(d,{label:"Registrar",icon:"send",type:"submit",color:"primary",class:"full-width"})])]),j])),_:1})])),_:1})]),(0,i.Wm)("div",B,[(0,i.Wm)("div",Q,[(0,i.Wm)("div",G,[(0,i.Wm)("table",H,[J,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.rows,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.ci),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.telefono),1),(0,i.Wm)("td",null,(0,R.zw)(e.direccion),1),(0,i.Wm)("td",null,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[K])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"teal"},{default:(0,i.w5)((()=>[X])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(n,{color:"ACTIVO"==e.estado?"positive":"negative",onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)("ACTIVO"==e.estado?"HABILITADO":"INACTIVO"),1)])),_:2},1032,["color","onClick"])]),(0,i.Wm)("td",null,[(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>s.editRow(e),icon:"edit"},null,8,["onClick"]),(0,i.Wm)(d,{dense:"",round:"",flat:"",color:"red",onClick:a=>s.delRow(e),icon:"delete"},null,8,["onClick"])])])))),128))])])])]),(0,i.Wm)(p,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[ee])),_:1}),(0,i.Wm)(u,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",ae,[(0,i.Wm)(r,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[f]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(p,{modelValue:l.dialog_del,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(u,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{icon:"clear",color:"red","text-color":"white"}),te])),_:1}),(0,i.Wm)(g,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cancelar",color:"primary"},null,512),[[f]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}var le=t(21082),ie=t(47345),se=t.n(ie);const ne={data(){return{tab:"cliente",days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"direccion",label:"DIRECCIÓN",field:"direccion"},{name:"observacion",label:"OBSERVACIÓN",field:"observacion"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){se()("#example").DataTable(),this.listado(2),console.log(this.days)},methods:{listado(e){this.$q.loading.show(),this.rows=[],this.days=[],se()("#example").DataTable().destroy(),this.$axios.get("http://192.168.100.8:81/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=le.ZP.extractDate(a.fechanac,"YYYY-MM-DD");this.days.push(le.ZP.formatDate(Date.now(),"YYYY")+"/"+le.ZP.formatDate(e,"MM")+"/"+le.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,this.rows.push(this.clientes)}})),this.$axios.get("http://192.168.100.8:81/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=le.ZP.extractDate(a.fechanac,"YYYY-MM-DD");this.days.push(le.ZP.formatDate(Date.now(),"YYYY")+"/"+le.ZP.formatDate(e,"MM")+"/"+le.ZP.formatDate(e,"DD")),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=a.fechanac,this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,this.rows.push(this.clientes)}})),this.$q.loading.hide(),se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))}))},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("http://192.168.100.8:81/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("http://192.168.100.8:81/api/activar",this.dato).then((e=>{this.listado(2)}))},editRow(e){this.dato=e,console.log(this.dato),this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado(2)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado(2)})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var re=t(69721),de=t(55242),ce=t(18186),me=t(83884),ue=t(46778),pe=t(75096),he=t(60677);ne.render=oe;const ge=ne;k()(ne,"components",{QBadge:re.Z,QCard:x.Z,QForm:q.Z,QInput:E.Z,QBtn:D.Z,QTable:de.Z,QTr:ce.Z,QTd:me.Z,QIcon:_.Z,QDialog:ue.Z,QCardSection:C.Z,QAvatar:pe.Z,QCardActions:T.Z}),k()(ne,"directives",{ClosePopup:he.Z});const fe={class:"row"},be={class:"col-12"},ve={class:"col-12"},We={class:"row"},we={class:"col-12 col-sm-2"},ye={class:"col-12 col-sm-2"},Ve={class:"col-12 col-sm-2"},xe={class:"col-12 col-sm-2"},Ce={class:"col-12 col-sm-2"},_e={class:"col-12 col-sm-2"},qe={class:"col-12 col-sm-2"},Ee={class:"col-12 col-sm-2"},Ae={class:"col-12 col-sm-2"},De={class:"col-12 col-sm-2"},Me={class:"col-12 col-sm-2"},Te={class:"col-12 col-sm-2"},Se={class:"col-12 flex flex-center"},ke=(0,i.Wm)("div",null,null,-1),Oe={class:"col-12"},Re={class:"q-pa-md"},Ne={class:" responsive"},Ue={id:"example",class:"display",style:{width:"100%"}},Ye=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"CI"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Tipo"),(0,i.Wm)("th",null,"Telefono"),(0,i.Wm)("th",null,"Fecha Nac "),(0,i.Wm)("th",null,"Direccion"),(0,i.Wm)("th",null,"Legalidad"),(0,i.Wm)("th",null,"Categoria NIT"),(0,i.Wm)("th",null,"Razon Social"),(0,i.Wm)("th",null,"Numero NIT"),(0,i.Wm)("th",null,"Observacion"),(0,i.Wm)("th",null,"Tipo Cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Opcion")])],-1),Ie=(0,i.Uk)("LOCAL"),Pe=(0,i.Uk)("CLIENTE"),$e=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),Fe={key:0},Le=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),ze={class:"col-12"};function Ze(e,a,t,o,l,s){const n=(0,i.up)("q-badge"),r=(0,i.up)("q-separator"),d=(0,i.up)("q-input"),c=(0,i.up)("q-select"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-card"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-dialog"),f=(0,i.up)("q-avatar"),b=(0,i.up)("q-card-actions"),v=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",fe,[(0,i.Wm)("div",be,[(0,i.Wm)(n,{label:"REGISTRO DE NUEVOS LOCALES ",color:"teal",class:"full-width text-h6"})]),(0,i.Wm)("div",ve,[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(r),(0,i.Wm)(u,{onSubmit:a[13]||(a[13]=e=>s.registrar(1)),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",We,[(0,i.Wm)("div",we,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.local,"onUpdate:modelValue":a[1]||(a[1]=e=>l.cliente.local=e),label:"Local",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",ye,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.ci,"onUpdate:modelValue":a[2]||(a[2]=e=>l.cliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Ve,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.titular,"onUpdate:modelValue":a[3]||(a[3]=e=>l.cliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",xe,[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.cliente.telefono,"onUpdate:modelValue":a[4]||(a[4]=e=>l.cliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Ce,[(0,i.Wm)(d,{type:"date",outlined:"",modelValue:l.cliente.fechanac,"onUpdate:modelValue":a[5]||(a[5]=e=>l.cliente.fechanac=e),label:"Fecha Nac"},null,8,["modelValue"])]),(0,i.Wm)("div",_e,[(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.cliente.direccion,"onUpdate:modelValue":a[6]||(a[6]=e=>l.cliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",qe,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>l.cliente.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",Ee,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.legalidad,"onUpdate:modelValue":a[8]||(a[8]=e=>l.cliente.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Ae,[(0,i.Wm)(c,{outlined:"",modelValue:l.cliente.categoria,"onUpdate:modelValue":a[9]||(a[9]=e=>l.cliente.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"])]),(0,i.Wm)("div",De,[(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.cliente.razon,"onUpdate:modelValue":a[10]||(a[10]=e=>l.cliente.razon=e),label:"Razon Social",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Me,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.nit,"onUpdate:modelValue":a[11]||(a[11]=e=>l.cliente.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Te,[(0,i.Wm)(d,{outlined:"",modelValue:l.cliente.observacion,"onUpdate:modelValue":a[12]||(a[12]=e=>l.cliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Se,[(0,i.Wm)(m,{label:"Registrar",icon:"send",type:"submit",color:"primary",class:"full-width"})])]),ke])),_:1})])),_:1})]),(0,i.Wm)("div",Oe,[(0,i.Wm)("div",Re,[(0,i.Wm)("div",Ne,[(0,i.Wm)("table",Ue,[Ye,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.rows,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.ci),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.tipo),1),(0,i.Wm)("td",null,(0,R.zw)(e.telefono),1),(0,i.Wm)("td",null,(0,R.zw)(e.fechanac),1),(0,i.Wm)("td",null,(0,R.zw)(e.direccion),1),(0,i.Wm)("td",null,(0,R.zw)(e.legalidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.categoria),1),(0,i.Wm)("td",null,(0,R.zw)(e.razon),1),(0,i.Wm)("td",null,(0,R.zw)(e.nit),1),(0,i.Wm)("td",null,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(n,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Ie])),_:1})):((0,i.wg)(),(0,i.j4)(n,{key:1,color:"teal"},{default:(0,i.w5)((()=>[Pe])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(n,{color:"ACTIVO"==e.estado?"positive":"negative",onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)("ACTIVO"==e.estado?"HABILITADO":"INACTIVO"),1)])),_:2},1032,["color","onClick"])]),(0,i.Wm)("td",null,[(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>s.editRow(e),icon:"edit"},null,8,["onClick"]),(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"red",onClick:a=>s.delRow(e),icon:"delete"},null,8,["onClick"])])])))),128))])])])]),(0,i.Wm)(g,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[26]||(a[26]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[$e])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(u,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.local,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.local=e),label:"Local",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.ci,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dato.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.titular,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dato.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{outlined:"",type:"text",modelValue:l.dato.telefono,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{type:"date",outlined:"",modelValue:l.dato.fechanac,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.fechanac=e),label:"Fecha Nac"},null,8,["modelValue"]),(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.dato.direccion,"onUpdate:modelValue":a[19]||(a[19]=e=>l.dato.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.observacion,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dato.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),"1"==l.dato.tipocliente?((0,i.wg)(),(0,i.j4)("div",Fe,[(0,i.Wm)(c,{modelValue:l.dato.tipo,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dato.tipo=e),options:["PROPIETARIO","INQUILINO"],label:"Tipo"},null,8,["modelValue"]),(0,i.Wm)(c,{outlined:"",modelValue:l.dato.legalidad,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dato.legalidad=e),options:["CON LICENCIA","SIN LICENCIA"],label:"Legalidad Tributaria"},null,8,["modelValue"]),(0,i.Wm)(c,{outlined:"",modelValue:l.dato.categoria,"onUpdate:modelValue":a[23]||(a[23]=e=>l.dato.categoria=e),options:["GENERAL","SIMPLIFICADO","SIN NIT"],label:"Categoria"},null,8,["modelValue"]),(0,i.Wm)(d,{type:"text",outlined:"",modelValue:l.dato.razon,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dato.razon=e),label:"Razon Social",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.nit,"onUpdate:modelValue":a[25]||(a[25]=e=>l.dato.nit=e),label:"NIT",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",null,[(0,i.Wm)(m,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(m,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[v]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:l.dialog_del,"onUpdate:modelValue":a[27]||(a[27]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{icon:"clear",color:"red","text-color":"white"}),Le])),_:1}),(0,i.Wm)(b,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cancelar",color:"primary"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",ze,[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.days,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.cumple)+" "+(0,R.zw)(e.local)+" "+(0,R.zw)(e.titular),1)))),128))])])])}var je=t(11488),Be=t.n(je);const Qe={data(){return{tab:"local",days:[],filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,tipocliente:1,cliente:{fechanac:"2000-01-01"},clientes:{},color:"",dato:{},columns:[{name:"local",label:"CODIGO",align:"center",field:"local",sortable:!0},{name:"ci",align:"center",label:"CI",field:"ci",sortable:!0},{name:"titular",align:"center",label:"TITULAR",field:"titular",sortable:!0},{name:"tipo",label:"TIPO",field:"tipo"},{name:"telefono",label:"TELÉFONO",field:"telefono"},{name:"fecha nac",label:"FECHA NAC",field:"fechanac"},{name:"direccion",label:"DIRECCIÓN",field:"direccion"},{name:"legalidad",label:"LEGALIDAD",field:"legalidad"},{name:"categoria",label:"CATEGORIA NIT",field:"categoria"},{name:"razon",label:"RAZON SOCIAL",field:"razon"},{name:"nit",label:"NÚMERO NIT",field:"nit"},{name:"observacion",label:"OBSERVACIÓN",field:"observacion"},{name:"tipocliente",label:"TIPO CLIENTE",field:"tipocliente"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){},mounted(){se()("#example").DataTable(),this.filtrarlista(),console.log(this.days)},methods:{listado(e){this.$q.loading.show(),this.rows=[],this.days=[],se()("#example").DataTable().destroy(),this.$axios.get("http://192.168.100.8:81/api/cumple").then((a=>{console.log(a.data),a.data.forEach((a=>{if(console.log(a.tipocliente),e==a.tipocliente){const e=le.ZP.extractDate(a.fechanac,"YYYY-MM-DD");this.days.push({cumple:le.ZP.formatDate(Date.now(),"YYYY")+"/"+le.ZP.formatDate(e,"MM")+"/"+le.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=Be()(a.fechanac).format("DD/MM/YYYY"),this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,this.rows.push(this.clientes)}})),this.$axios.get("http://192.168.100.8:81/api/cumple2").then((a=>{console.log(a.data),a.data.forEach((a=>{if(e==a.tipocliente){const e=le.ZP.extractDate(a.fechanac,"YYYY-MM-DD");this.days.push({cumple:le.ZP.formatDate(Date.now(),"YYYY")+"/"+le.ZP.formatDate(e,"MM")+"/"+le.ZP.formatDate(e,"DD"),titular:a.titular,local:a.local}),this.clientes={},this.clientes.id=a.id,this.clientes.local=a.local,this.clientes.ci=a.ci,this.clientes.titular=a.titular,this.clientes.tipo=a.tipo,this.clientes.telefono=a.telefono,this.clientes.fechanac=Be()(a.fechanac).format("DD/MM/YYYY"),this.clientes.direccion=a.direccion,this.clientes.legalidad=a.legalidad,this.clientes.categoria=a.categoria,this.clientes.razon=a.razon,this.clientes.nit=a.nit,this.clientes.observacion=a.observacion,this.clientes.tipocliente=a.tipocliente,this.clientes.estado=a.estado,this.rows.push(this.clientes)}})),this.$q.loading.hide(),se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))}))},filtrarlista(){"local"==this.tab?this.listado(1):this.listado(2)},registrar(e){this.cliente.tipocliente=e,"2"==e&&(this.cliente.fechanac=null),this.$axios.post("http://192.168.100.8:81/api/cliente",this.cliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:e.response.data.message})}))},activar(e){this.dato=e,this.$axios.post("http://192.168.100.8:81/api/activar",this.dato).then((e=>{this.filtrarlista()}))},editRow(e){this.dato=e,console.log(this.dato),this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/cliente/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.filtrarlista()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/cliente/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.filtrarlista()})),this.$q.loading.hide()},onReset(){this.cliente={fechanac:"2000-01-01"},console.log(this.tipocliente)}}};var Ge=t(63314);Qe.render=Ze;const He=Qe;k()(Qe,"components",{QBadge:re.Z,QCard:x.Z,QSeparator:M.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QTr:ce.Z,QTd:me.Z,QIcon:_.Z,QDialog:ue.Z,QCardSection:C.Z,QAvatar:pe.Z,QCardActions:T.Z}),k()(Qe,"directives",{ClosePopup:he.Z});const Je={class:"row"},Ke={class:"col-12"},Xe=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("h5",{style:{"text-align":"center"}},"INFORMACIÓN DE PRODUCTOS")],-1),ea=(0,i.Wm)("div",{class:"text-h6"},"REGISTRO NUEVO PRODUCTO",-1),aa={class:"row"},ta={class:"col-2"},oa={class:"col-2"},la={class:"col-2"},ia={class:"col-2"},sa={class:"col-2 flex flex-center"},na={class:"q-pa-md"},ra=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO PRODUCTO",-1),da=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),ca=(0,i.Wm)("div",{class:"text-h6"},"Agregar Cantidad Producto",-1),ma=(0,i.Wm)("div",{class:"text-h6"},"Retirar cantidad Producto ",-1),ua=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function pa(e,a,t,o,l,s){const n=(0,i.up)("q-card-section"),r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-card"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-badge"),g=(0,i.up)("q-td"),f=(0,i.up)("q-table"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-avatar"),W=(0,i.up)("q-card-actions"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Je,[(0,i.Wm)("div",Ke,[Xe,(0,i.Wm)(u,{style:{width:"100%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[ea])),_:1}),(0,i.Wm)(n,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:s.registrar,onReset:s.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",aa,[(0,i.Wm)("div",ta,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.producto.nombre,"onUpdate:modelValue":a[1]||(a[1]=e=>l.producto.nombre=e),label:"Nombre",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",oa,[(0,i.Wm)(r,{outlined:"",type:"number",step:"0.1",modelValue:l.producto.precio,"onUpdate:modelValue":a[2]||(a[2]=e=>l.producto.precio=e),label:"PRECIO"},null,8,["modelValue"])]),(0,i.Wm)("div",la,[(0,i.Wm)(d,{outlined:"",modelValue:l.producto.tipo,"onUpdate:modelValue":a[3]||(a[3]=e=>l.producto.tipo=e),options:["LOCAL","DETALLE"],label:"TIPO"},null,8,["modelValue"])]),(0,i.Wm)("div",ia,[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.producto.observacion,"onUpdate:modelValue":a[4]||(a[4]=e=>l.producto.observacion=e),label:"Observacion",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",sa,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1}),(0,i.Wm)("div",na,[(0,i.Wm)(f,{title:"LISTA DE PRODUCTOS REGISTRADOS",rows:l.rows,columns:l.columns,filter:l.filter,"row-key":"name"},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(g,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>["ACTIVO"==e.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(h,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024))])),_:2},1032,["props","onClick"])])),"body-cell-tipo":(0,i.w5)((e=>[(0,i.Wm)(g,{key:"estado",props:e},{default:(0,i.w5)((()=>["LOCAL"==e.row.tipo?((0,i.wg)(),(0,i.j4)(h,{key:0,color:"primary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024)):((0,i.wg)(),(0,i.j4)(h,{key:1,color:"secondary"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1024))])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(g,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(c,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editproducto?((0,i.wg)(),(0,i.j4)(c,{key:1,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a),icon:"delete"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)(b,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[ra])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[6]||(a[6]=e=>l.dato.nombre=e),label:"Nombre"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.precio=e),label:"Precio"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:l.dato.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)(d,{outlined:"",modelValue:l.dato.tipo,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.tipo=e),options:["LOCAL","DETALLE"],label:"TIPO"},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.orden=e),label:"N° Orden"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:l.dialog_del,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{icon:"clear",color:"red","text-color":"white"}),da])),_:1}),(0,i.Wm)(W,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:l.dialog_add,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[ca])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(r,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[15]||(a[15]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[ma])),_:1}),(0,i.Wm)(n,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(r,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[19]||(a[19]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<500||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"})])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:l.dialog_del,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(u,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{icon:"clear",color:"red","text-color":"white"}),ua])),_:1}),(0,i.Wm)(W,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const ha={data(){return{crear:!1,filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:0,disminuir:0,producto:{},color:"",dato:{},columns:[{name:"nombre",label:"NOMBRE",align:"center",field:"nombre",sortable:!0},{name:"precio",align:"center",label:"PRECIO",field:"precio",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACIÓN",field:"observacion",sortable:!0},{name:"tipo",align:"center",label:"TIPO",field:"tipo",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"orden",align:"center",label:"ORDEN",field:"orden"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[]}},created(){this.listado()},methods:{listado(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/producto").then((e=>{console.log(e.data),this.rows=e.data,this.$q.loading.hide()}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("http://192.168.100.8:81/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("http://192.168.100.8:81/api/activarprod",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e.row,this.dialog_mod=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.dato=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/producto/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/producto/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("http://192.168.100.8:81/api/inventarioadd",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar=0,this.listado()}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("http://192.168.100.8:81/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir=0,this.listado()}))},onReset(){this.producto={}}}};ha.render=pa;const ga=ha;k()(ha,"components",{QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTr:ce.Z,QTd:me.Z,QBadge:re.Z,QDialog:ue.Z,QAvatar:pe.Z,QCardActions:T.Z}),k()(ha,"directives",{ClosePopup:he.Z});const fa=(0,i.HX)("data-v-57bd675b");(0,i.dD)("data-v-57bd675b");const ba={class:"row"},va=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Wa={class:"col-12"},wa={class:"row"},ya={class:"col-6 col-sm-6 q-pa-xs"},Va={class:"col-6 col-sm-6 q-pa-xs"},xa={class:"row"},Ca={class:"col-6 col-sm-2 q-pa-xs"},_a={class:"col-6 col-sm-2 q-pa-xs"},qa={class:"col-6 col-sm-2 q-pa-xs"},Ea={class:"col-6 col-sm-2 q-pa-xs"},Aa={class:"col-6 col-sm-2 q-pa-xs"},Da={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Ma={class:"col-12"},Ta={class:"col-12"},Sa={class:"row"},ka={class:"col-6 col-sm-2 q-pa-xs"},Oa={class:"col-6 col-sm-2 q-pa-xs"},Ra={class:"col-6 col-sm-2 q-pa-xs"},Na={class:"col-6 col-sm-2 q-pa-xs"},Ua={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},Ya=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Ia={class:"col-6 col-sm-4 q-pa-xs"},Pa={class:"col-6 col-sm-4 q-pa-xs"},$a={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},Fa={class:"col-12"};(0,i.Cn)();const La=fa(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:fa((()=>[(0,i.Wm)("div",ba,[va,(0,i.Wm)("div",Wa,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:fa((()=>[(0,i.Wm)("div",wa,[(0,i.Wm)("div",ya,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Va,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",xa,[(0,i.Wm)("div",Ca,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",_a,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",qa,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ea,[(0,i.Wm)(r,{type:"number",label:"Cantidad",step:"0.1",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Aa,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Da,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Ma,[(0,i.Wm)(p,{dense:"",columns:s.columns,rows:s.detalles},{"body-cell-action":fa((e=>[(0,i.Wm)(u,{props:e},{default:fa((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",Ta,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:fa((()=>[(0,i.Wm)("div",Sa,[(0,i.Wm)("div",ka,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Oa,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ra,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Na,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ua,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),Ya,(0,i.Wm)("div",Ia,[(0,i.Wm)(r,{type:"date",label:"fecha inicio",modelValue:s.fecha2,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pa,[(0,i.Wm)(r,{type:"date",label:"fecha fin",modelValue:s.fecha3,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$a,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",Fa,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{"top-right":fa((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[14]||(a[14]=e=>s.filter=e),placeholder:"Search"},{append:fa((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),za={name:"Venta",data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("http://192.168.100.8:81/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("http://192.168.100.8:81/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},agregar(){this.detalles.push({nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};za.render=La,za.__scopeId="data-v-57bd675b";k()(za,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QTd:me.Z,QIcon:_.Z});const Za={class:"row"},ja=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Registro de Garantias de Prestamo")],-1),Ba={class:"col-12"},Qa={class:"row"},Ga={class:"col-6 col-sm-6 q-pa-xs"},Ha={class:"col-6 col-sm-6 q-pa-xs"},Ja={class:"row"},Ka={class:"col-6 col-sm-3 q-pa-xs"},Xa={class:"col-6 col-sm-3 q-pa-xs"},et={class:"col-6 col-sm-3 q-pa-xs"},at={class:"col-6 col-sm-3 q-pa-xs"},tt={class:"row"},ot={class:"col-6 col-sm-2 q-pa-xs"},lt={class:"col-6 col-sm-2 q-pa-xs"},it={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},st={class:"col-12"},nt={class:"col-12"},rt={class:"row"},dt={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},ct=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de Garantia")],-1),mt={class:"col-6 col-sm-6 q-pa-xs"},ut={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},pt={class:"col-12"};function ht(e,a,t,l,s,n){const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-td"),p=(0,i.up)("q-table"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(g,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Za,[ja,(0,i.Wm)("div",Ba,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Qa,[(0,i.Wm)("div",Ga,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ha,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:"",readonly:""},null,8,["modelValue"])])]),(0,i.Wm)("div",Ja,[(0,i.Wm)("div",Ka,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Xa,[(0,i.Wm)(r,{type:"number",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[4]||(a[4]=e=>s.efectivo=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",et,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",at,[(0,i.Wm)(r,{type:"text",label:"Detalle",modelValue:s.detalle,"onUpdate:modelValue":a[6]||(a[6]=e=>s.detalle=e),outlined:""},null,8,["modelValue"])])]),(0,i.Wm)("div",tt,[(0,i.Wm)("div",ot,[(0,i.Wm)(d,{modelValue:s.inventario,"onUpdate:modelValue":a[7]||(a[7]=e=>s.inventario=e),outlined:"",options:s.inventarios,"option-label":"nombre","option-value":"id",label:"Material",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",lt,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",it,[(0,i.Wm)(c,{color:"primary",label:"Agregar",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",st,[(0,i.Wm)(p,{columns:s.columns,rows:s.detalles},{"body-cell-action":(0,i.w5)((e=>[(0,i.Wm)(u,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.deleteval(s.detalles.indexOf(e.row))},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])]),(0,i.Wm)("div",nt,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",rt,[(0,i.Wm)("div",dt,[(0,i.Wm)(c,{color:"positive",label:"Registrar Garantia",icon:"shop",type:"submit"})])])])),_:1},8,["onSubmit"])]),ct,(0,i.Wm)("div",mt,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ut,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.listado},null,8,["onClick"])]),(0,i.Wm)("div",pt,[(0,i.Wm)(p,{columns:s.columns2,rows:s.garantias,title:"Historial de Garantia",filter:s.filter},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[10]||(a[10]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})}const gt={name:"Garantias",data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",fisico:"",detalle:"",clientes:[],cliente:"",inventarios:[],inventario:"",efectivo:0,cantidad:1,acuenta:0,detalles:[],columns:[{name:"nombreinv",label:"Nombre material",field:"nombreinv"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],garantias:[],filter:""}},mounted(){this.listado(),this.$axios.get("http://192.168.100.8:81/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("http://192.168.100.8:81/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("http://192.168.100.8:81/api/listado",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{listado(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/listado",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.garantias=[],console.log(e.data),e.data.forEach((e=>{this.garantias.push({efectivo:e.efectivo,fisico:e.fisico,estado:e.estado,cliente:e.cliente["local"],user:e.user["name"]})}))}))},agregar(){this.detalles.push({nombreinv:this.inventario.nombre,inventario_id:this.inventario.id,cantidad:this.cantidad})},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/garantia",{fecha:this.fecha,efectivo:this.efectivo,fisico:this.fisico,detalle:this.detalle,estado:"PRESTAMO",cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"registro exitosa",color:"green",icon:"info"}),this.listado()}))},deleteval(e){this.detalles.splice(e,1)}}};gt.render=ht;const ft=gt;k()(gt,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QTd:me.Z,QIcon:_.Z});const bt={class:"row"},vt={class:"col-12"},Wt=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("div",{style:{"text-align":"center"}},"REGISTRO DE INVENTARIO DE MATERIALES")],-1),wt={class:"row"},yt={class:"col-12 col-sm-2 q-pa-xs"},Vt={class:"col-12 col-sm-2 q-pa-xs"},xt={class:"col-12 col-sm-2 q-pa-xs"},Ct={class:"col-12 col-sm-2 q-pa-xs"},_t={class:"col-12 col-sm-2 q-pa-xs"},qt={class:"col-12 col-sm-2 q-pa-xs"},Et={class:"col-12 col-sm-2 q-pa-xs "},At={class:"col-12"},Dt={class:"q-pa-md"},Mt={class:" responsive"},Tt={id:"example",class:"display",style:{width:"100%"}},St=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"CODIGO"),(0,i.Wm)("th",null,"ITEM"),(0,i.Wm)("th",null,"CANTIDAD GLOBAL"),(0,i.Wm)("th",null,"PRESTAMO"),(0,i.Wm)("th",null,"VENTAS"),(0,i.Wm)("th",null,"SALDO"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"OBSERVACIONES"),(0,i.Wm)("th",null,"ORDEN"),(0,i.Wm)("th",null,"ESTADO"),(0,i.Wm)("th",null,"OPCIONES")])],-1),kt=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR INVENTARIO",-1),Ot={class:"col-12 col-sm-2 q-pa-xs"},Rt=(0,i.Wm)("div",{class:"text-h7"},"AGREGAR CANTIDAD DE MATERIAL",-1),Nt=(0,i.Wm)("div",{class:"text-h7"},"DAR DE BAJA - MATERIALES ",-1),Ut=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),Yt=(0,i.Wm)("div",{class:"text-h7"},"DETALLE DE REGISTRO DE MATERIALES",-1),It=(0,i.Uk)(" Agregar "),Pt=(0,i.Uk)(" Disminuir ");function $t(e,a,t,o,l,s){const n=(0,i.up)("q-input"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-form"),c=(0,i.up)("q-card-section"),m=(0,i.up)("q-card"),u=(0,i.up)("q-dialog"),p=(0,i.up)("q-avatar"),h=(0,i.up)("q-card-actions"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-td"),b=(0,i.up)("q-table"),v=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",bt,[(0,i.Wm)("div",vt,[Wt,(0,i.Wm)(d,{onSubmit:s.registrar,onReset:s.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",wt,[(0,i.Wm)("div",yt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"text",modelValue:l.inventario.codigo,"onUpdate:modelValue":a[1]||(a[1]=e=>l.inventario.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Vt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"text",modelValue:l.inventario.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>l.inventario.nombre=e),style:{"text-transform":"uppercase"},label:"Nombre","lazy-rules":"",rules:[e=>!!e||"* Required",e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",xt,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",modelValue:l.inventario.cantidad,"onUpdate:modelValue":a[3]||(a[3]=e=>l.inventario.cantidad=e),label:"CANTIDAD",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Ct,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",step:"0.1",modelValue:l.inventario.precio,"onUpdate:modelValue":a[4]||(a[4]=e=>l.inventario.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",_t,[(0,i.Wm)(n,{outlined:"",dense:"",type:"number",modelValue:l.inventario.orden,"onUpdate:modelValue":a[5]||(a[5]=e=>l.inventario.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",qt,[(0,i.Wm)(n,{outlined:"",dense:"",modelValue:l.inventario.detalle,"onUpdate:modelValue":a[6]||(a[6]=e=>l.inventario.detalle=e),type:"text",label:"OBSERVACIONES",style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Et,[(0,i.Wm)(r,{label:"Registrar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit","onReset"]),(0,i.Wm)("div",At,[(0,i.Wm)("div",Dt,[(0,i.Wm)("div",Mt,[(0,i.Wm)("table",Tt,[St,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.rows,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.codigo),1),(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.global),1),(0,i.Wm)("td",null,(0,R.zw)(a.prestamo),1),(0,i.Wm)("td",null,(0,R.zw)(a.ventas),1),(0,i.Wm)("td",null,(0,R.zw)(a.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(a.orden),1),(0,i.Wm)("td",null,[(0,i.Wm)(r,{onClick:e=>s.activar(a),dense:"",color:"ACTIVO"==a.estado?"green":"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["onClick","color"])]),(0,i.Wm)("td",null,[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"green",onClick:e=>s.addRow(a),icon:"add"},null,8,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:e=>s.substractRow(a),icon:"remove"},null,8,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.logRow(a),icon:"list"},null,8,["onClick"]),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editinventario?((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",round:"",flat:"",color:"red",onClick:e=>s.delRow(a),icon:"delete"},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])])]),(0,i.Wm)(u,{modelValue:l.dialog_mod,"onUpdate:modelValue":a[12]||(a[12]=e=>l.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[kt])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.codigo,"onUpdate:modelValue":a[7]||(a[7]=e=>l.dato.codigo=e),label:"Codigo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.nombre,"onUpdate:modelValue":a[8]||(a[8]=e=>l.dato.nombre=e),label:"Item",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e.length>0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",Ot,[(0,i.Wm)(n,{filled:"",dense:"",type:"number",modelValue:l.dato.orden,"onUpdate:modelValue":a[9]||(a[9]=e=>l.dato.orden=e),label:"ORDEN",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",dense:"",type:"number",step:"0.1",modelValue:l.dato.precio,"onUpdate:modelValue":a[10]||(a[10]=e=>l.dato.precio=e),label:"PRECIO",rules:[e=>e>=0||"Por favor ingrese dato"]},null,8,["modelValue","rules"])]),(0,i.Wm)(n,{filled:"",type:"text",modelValue:l.dato.detalle,"onUpdate:modelValue":a[11]||(a[11]=e=>l.dato.detalle=e),style:{"text-transform":"uppercase"},label:"Observaciones"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[v]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_add,"onUpdate:modelValue":a[16]||(a[16]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Rt])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onAdd,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[13]||(a[13]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(n,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[14]||(a[14]=e=>l.dato.motivo=e),type:"text",label:"Motivo Descripción",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",modelValue:l.agregar,"onUpdate:modelValue":a[15]||(a[15]=e=>l.agregar=e),label:"Cantidad a agregar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Agregar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[v]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_sub,"onUpdate:modelValue":a[20]||(a[20]=e=>l.dialog_sub=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-amber-14 text-white"},{default:(0,i.w5)((()=>[Nt])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{onSubmit:s.onSub,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(n,{filled:"",modelValue:l.dato.nombre,"onUpdate:modelValue":a[17]||(a[17]=e=>l.dato.nombre=e),type:"text",label:"Nombre",readonly:""},null,8,["modelValue"]),(0,i.Wm)(n,{filled:"",modelValue:l.dato.motivo,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dato.motivo=e),type:"text",label:"Motivo Description",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)(n,{filled:"",modelValue:l.disminuir,"onUpdate:modelValue":a[19]||(a[19]=e=>l.disminuir=e),label:"Cantidad a retirar",type:"number",min:"1","lazy-rules":"",rules:[e=>e>0&&e<1e3||"Por favor Valor"]},null,8,["modelValue","rules"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Retirar",type:"submit",color:"red",icon:"remove_circle"}),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"teal",icon:"cancel"},null,512),[[v]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_del,"onUpdate:modelValue":a[21]||(a[21]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{icon:"clear",color:"red","text-color":"white"}),Ut])),_:1}),(0,i.Wm)(h,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"primary"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(u,{modelValue:l.dialog_log,"onUpdate:modelValue":a[22]||(a[22]=e=>l.dialog_log=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{style:{"min-width":"350px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[Yt])),_:1}),(0,i.Wm)(c,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{dense:"",title:"REGISTRO DE MATERIALES",columns:l.logcol,rows:l.logdata,"row-key":"name"},{"body-cell-agregar":(0,i.w5)((e=>[(0,i.Wm)(f,{key:"estado",props:e,onClick:a=>s.activar(e)},{default:(0,i.w5)((()=>[1==e.row.agregar?((0,i.wg)(),(0,i.j4)(g,{key:0,color:"green"},{default:(0,i.w5)((()=>[It])),_:1})):((0,i.wg)(),(0,i.j4)(g,{key:1,color:"red"},{default:(0,i.w5)((()=>[Pt])),_:1}))])),_:2},1032,["props","onClick"])])),_:1},8,["columns","rows"])])),_:1}),(0,i.Wm)(h,{align:"right",class:"text-primary"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancel"},null,512),[[v]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])}const Ft={data(){return{filter:"",crear:!1,dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_sub:!1,dialog_log:!1,agregar:"",disminuir:"",inventario:{orden:0},productos:[],color:"",dato:{},columns:[{name:"codigo",label:"Codigo",align:"center",field:"codigo",sortable:!0},{name:"nombre",label:"ITEM",align:"center",field:"nombre",sortable:!0},{name:"global",align:"center",label:"CANTIDAD GLOBAL",field:"global",sortable:!0},{name:"prestamo",align:"center",label:"PRESTAMO",field:"prestamo",sortable:!0},{name:"ventas",align:"center",label:"VENTAS",field:"ventas",sortable:!0},{name:"cantidad",align:"center",label:"SALDO",field:"cantidad",sortable:!0},{name:"detalle",align:"center",label:"OBSERVACIONES",field:"detalle",sortable:!0},{name:"orden",align:"center",label:"ORDEN",field:"orden",sortable:!0},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"opcion",label:"OPCIONES",field:"action"}],rows:[],logdata:[],logcol:[{name:"fecha",label:"FECHA",align:"center",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"agregar",align:"center",label:"AGREGAR",field:"agregar",sortable:!0},{name:"motivo",align:"center",label:"MOTIVO",field:"motivo",sortable:!0}]}},created(){se()("#example").DataTable(),this.listado(),this.cargar()},methods:{listado(){this.$q.loading.show(),se()("#example").DataTable().destroy(),this.$axios.get("http://192.168.100.8:81/api/inventario").then((e=>{this.rows=[],e.data.forEach((e=>{let a=e,t=0,o=0;0!=e.prestamos.length&&e.prestamos.forEach((e=>{"EN PRESTAMO"==e.estado&&(t+=e.prestado),"VENTA"==e.estado&&(console.log(e),o+=e.cantidad)})),a.global=a.cantidad+t,a.prestamo=t,a.ventas=o,this.rows.push(a)})),this.$q.loading.hide(),se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},cargar(){this.productos=[],this.$axios.get("http://192.168.100.8:81/api/listaproducto").then((e=>{e.data.forEach((e=>{this.productos.push({label:e.nombre,value:e.id})}))}))},registrar(){this.inventario.orden=void 0==this.inventario.orden?0:this.inventario.orden,this.$axios.post("http://192.168.100.8:81/api/inventario",this.inventario).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar "})}))},activar(e){this.dato=e,this.$axios.post("http://192.168.100.8:81/api/activarinv",this.dato).then((e=>{this.listado()}))},editRow(e){this.dato=e,this.dialog_mod=!0},delRow(e){this.dato=e,this.dialog_del=!0},addRow(e){this.dato=e,this.dialog_add=!0},substractRow(e){this.dato=e,this.dialog_sub=!0},logRow(e){this.dato=e,this.$axios.post("http://192.168.100.8:81/api/listlog/",this.dato).then((e=>{console.log(e.data),this.logdata=e.data})),this.dialog_log=!0},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/inventario/"+this.dato.id,this.dato).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/inventario/"+this.dato.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.listado()})),this.$q.loading.hide()},onAdd(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.agregar,motivo:this.dato.motivo},this.$axios.post("http://192.168.100.8:81/api/inventarioadd",this.modprod).then((e=>{console.log(e.data),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Agregado correctamente"}),this.dialog_add=!1,this.agregar="",this.dato.motivo="",this.listado()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",textColor:"white",icon:"error",message:e.response.data.message})}))},onSub(){this.$q.loading.show(),this.modprod={id:this.dato.id,cantidad:this.disminuir,motivo:this.dato.motivo},this.$axios.post("http://192.168.100.8:81/api/inventariosub",this.modprod).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"modificado correctamente"}),this.dialog_sub=!1,this.disminuir="",this.dato.motivo="",this.listado()}))},onReset(){this.inventario={orden:0}}}};Ft.render=$t;const Lt=Ft;k()(Ft,"components",{QBtn:D.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QBadge:re.Z,QAvatar:pe.Z,QCardActions:T.Z}),k()(Ft,"directives",{ClosePopup:he.Z});const zt=(0,i.HX)("data-v-7fc28906");(0,i.dD)("data-v-7fc28906");const Zt={class:"row"},jt=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"CONTROL EMPLEADOS")],-1),Bt={class:"col-12"},Qt={class:"row"},Gt={class:"col-12 q-pa-xs col-sm-2"},Ht={class:"col-12 q-pa-xs col-sm-3"},Jt={class:"col-12 q-pa-xs col-sm-2"},Kt={class:"col-12 q-pa-xs col-sm-2"},Xt={class:"col-12 q-pa-xs col-sm-2"},eo={class:"col-12 q-pa-xs col-sm-1"},ao={class:"col-12 col-sm-12 flex flex-center"},to={class:"col-12"},oo={class:"row"},lo=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-accent text-center text-white"},"HISTORIAL DE PAGOS")],-1),io={class:"col-6 col-sm-4 q-pa-xs"},so={class:"col-6 col-sm-4 q-pa-xs"},no={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},ro={class:"col-12"},co={class:" responsive"},mo={id:"example",style:{width:"100%"},class:"cell-border"},uo=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"EMPLEADO"),(0,i.Wm)("th",null,"ADELANTO"),(0,i.Wm)("th",null,"DESCUENTO"),(0,i.Wm)("th",null,"EXTRA"),(0,i.Wm)("th",null,"OPCION")])],-1),po={class:"col-12"},ho=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-primary text-center text-white"},"Modificar empleados")],-1),go={class:"col-12"},fo={class:"col-12 q-pa-xs col-sm-2"},bo={class:"col-12 q-pa-xs col-sm-3"},vo={class:"col-12 q-pa-xs col-sm-3"},Wo={class:"col-12 q-pa-xs col-sm-2"},wo={class:"col-12 q-pa-xs col-sm-2"},yo={class:"col-12 q-pa-xs col-sm-2"},Vo={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},xo={class:"text-h6"},Co={class:"row"},_o={class:"col-2"},qo={class:"col-2"},Eo={class:"col-2"},Ao={class:"col-4"},Do={class:"col-2 flex flex-center"},Mo={class:"row"},To={class:"col-12"},So={class:"col-12"},ko={class:"col-12"},Oo={class:"col-12"},Ro={class:"col-12"},No={class:"col-12"},Uo={class:"col-12"},Yo={class:"col-12"},Io={class:"col-12"},Po={class:"col-12"},$o={class:"row"};(0,i.Cn)();const Fo=zt(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-badge"),h=(0,i.up)("q-td"),g=(0,i.up)("q-table"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-card-section"),W=(0,i.up)("q-card-actions"),w=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:zt((()=>[(0,i.Wm)("div",Zt,[jt,(0,i.Wm)("div",Bt,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:zt((()=>[(0,i.Wm)("div",Qt,[(0,i.Wm)("div",Gt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"CI",modelValue:s.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>s.empleado.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ht,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Nombre",modelValue:s.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>s.empleado.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Jt,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:s.empleado.tipo,"onUpdate:modelValue":a[3]||(a[3]=e=>s.empleado.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo"},null,8,["modelValue"])]),(0,i.Wm)("div",Kt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado.fechanac,"onUpdate:modelValue":a[4]||(a[4]=e=>s.empleado.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Xt,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Celular",modelValue:s.empleado.celular,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",eo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Salario",modelValue:s.empleado.salario,"onUpdate:modelValue":a[6]||(a[6]=e=>s.empleado.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",ao,[(0,i.Wm)(c,{class:"full-width",icon:"send",label:"CREAR",type:"submit",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",to,[(0,i.Wm)(g,{columns:s.columns,rows:s.empleados,"rows-per-page-options":[50,100,0],filter:s.filter},{"top-right":zt((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[7]||(a[7]=e=>s.filter=e),placeholder:"Search"},{append:zt((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-tipo":zt((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zt((()=>[(0,i.Wm)(p,{color:"FIJO"==e.row.tipo?"green":"teal"},{default:zt((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-estado":zt((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zt((()=>[(0,i.Wm)(p,{color:"ACTIVO"==e.row.estado?"green":"red",onClick:a=>n.cambioEstado(e.row)},{default:zt((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color","onClick"])])),_:2},1032,["props"])])),"body-cell-action":zt((e=>[(0,i.Wm)(h,{props:e},{default:zt((()=>[(0,i.Wm)(c,{color:"accent","icon-right":"payment","no-caps":"",label:"Planilla",flat:"",dense:"",onClick:a=>n.verplanilla(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"warning","icon-right":"edit","no-caps":"",label:"Modificar",flat:"",dense:"",onClick:a=>n.updateval(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",label:"Eliminar",flat:"",dense:"",onClick:a=>n.deleteval(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"info","icon-right":"list","no-caps":"",label:"Sueldos",flat:"",dense:"",onClick:a=>n.pagosval(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"]),(0,i.Wm)("div",oo,[lo,(0,i.Wm)("div",io,[(0,i.Wm)(r,{dense:"",type:"date",label:"Desde",modelValue:s.fecha1,"onUpdate:modelValue":a[8]||(a[8]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",so,[(0,i.Wm)(r,{dense:"",type:"date",label:"Hasta",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",no,[(0,i.Wm)(c,{color:"info",class:"full-width",label:"Consultar",icon:"search",type:"submit",onClick:n.missalarios},null,8,["onClick"])]),(0,i.Wm)("div",ro,[(0,i.Wm)("div",co,[(0,i.Wm)("table",mo,[uo,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.salarios,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(a.adelanto),1),(0,i.Wm)("td",null,(0,R.zw)(a.descuento),1),(0,i.Wm)("td",null,(0,R.zw)(a.extra),1),(0,i.Wm)("td",null,[e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"list",dense:"",color:"accent",onClick:e=>n.genplanilla(a)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])])]),(0,i.Wm)("div",po,[(0,i.Wm)(c,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])]),(0,i.Wm)(b,{modelValue:s.modempleado,"onUpdate:modelValue":a[16]||(a[16]=e=>s.modempleado=e)},{default:zt((()=>[(0,i.Wm)(f,{style:{"min-width":"350px"}},{default:zt((()=>[ho,(0,i.Wm)("div",go,[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.modificar,["prevent"])},{default:zt((()=>[(0,i.Wm)("div",fo,[(0,i.Wm)(r,{outlined:"",label:"CI",modelValue:s.empleado2.ci,"onUpdate:modelValue":a[10]||(a[10]=e=>s.empleado2.ci=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",bo,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.empleado2.nombre,"onUpdate:modelValue":a[11]||(a[11]=e=>s.empleado2.nombre=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",vo,[(0,i.Wm)(d,{modelValue:s.empleado2.tipo,"onUpdate:modelValue":a[12]||(a[12]=e=>s.empleado2.tipo=e),options:["DESTAJO","FIJO"],label:"Tipo",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Wo,[(0,i.Wm)(r,{outlined:"",label:"Fecha Nacimiento",type:"date",modelValue:s.empleado2.fechanac,"onUpdate:modelValue":a[13]||(a[13]=e=>s.empleado2.fechanac=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",wo,[(0,i.Wm)(r,{outlined:"",label:"Celular",modelValue:s.empleado2.celular,"onUpdate:modelValue":a[14]||(a[14]=e=>s.empleado2.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",yo,[(0,i.Wm)(r,{outlined:"",label:"Salario",modelValue:s.empleado2.salario,"onUpdate:modelValue":a[15]||(a[15]=e=>s.empleado2.salario=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",Vo,[(0,i.Wm)(c,{icon:"edit",label:"MODIFICAR",type:"submit",color:"warning"})])])),_:1},8,["onSubmit"])])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.pagos,"onUpdate:modelValue":a[21]||(a[21]=e=>s.pagos=e),"full-width":""},{default:zt((()=>[(0,i.Wm)(f,null,{default:zt((()=>[(0,i.Wm)(v,null,{default:zt((()=>[(0,i.Wm)("div",xo,"Historial de "+(0,R.zw)(s.empleado2.nombre),1)])),_:1}),(0,i.Wm)(v,{class:"q-pt-none"},{default:zt((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:zt((()=>[(0,i.Wm)("div",Co,[(0,i.Wm)("div",_o,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[17]||(a[17]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",qo,[(0,i.Wm)(d,{outlined:"",dense:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[18]||(a[18]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",Eo,[(0,i.Wm)(r,{outlined:"",dense:"",label:"Fecha",modelValue:s.pago.fecha,"onUpdate:modelValue":a[19]||(a[19]=e=>s.pago.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ao,[(0,i.Wm)(r,{outlined:"",dense:"",type:"text",label:"observacion",modelValue:s.pago.observacion,"onUpdate:modelValue":a[20]||(a[20]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Do,[(0,i.Wm)(c,{class:"full-with",label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(g,{title:"Hitorial de pagos","rows-per-page-options":[50,100,0],columns:s.columns2,rows:s.empleadohistorial},{"body-cell-opcion":zt((e=>[(0,i.Wm)(h,{props:e},{default:zt((()=>[(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delsueldo(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:zt((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])]),(0,i.Wm)(b,{modelValue:s.dialoggenplanilla,"onUpdate:modelValue":a[31]||(a[31]=e=>s.dialoggenplanilla=e)},{default:zt((()=>[(0,i.Wm)(f,null,{default:zt((()=>[(0,i.Wm)(v,{class:"text-center text-bold q-pa-none q-ma-none"},{default:zt((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(v,null,{default:zt((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.creategenplanilla,["prevent"])},{default:zt((()=>[(0,i.Wm)("div",Mo,[(0,i.Wm)("div",To,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechainicio",modelValue:s.planilla.fechainicio,"onUpdate:modelValue":a[22]||(a[22]=e=>s.planilla.fechainicio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",So,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechafin",modelValue:s.planilla.fechafin,"onUpdate:modelValue":a[23]||(a[23]=e=>s.planilla.fechafin=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",ko,[(0,i.Wm)(r,{dense:"",outlined:"",label:"fechapago",modelValue:s.planilla.fechapago,"onUpdate:modelValue":a[24]||(a[24]=e=>s.planilla.fechapago=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Oo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Salario",modelValue:s.planilla.monto,"onUpdate:modelValue":[a[25]||(a[25]=e=>s.planilla.monto=e),n.actualizamonto]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",Ro,[(0,i.Wm)(r,{dense:"",outlined:"",label:"adelanto",modelValue:s.planilla.adelanto,"onUpdate:modelValue":a[26]||(a[26]=e=>s.planilla.adelanto=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",No,[(0,i.Wm)(r,{dense:"",outlined:"",label:"descuento",modelValue:s.planilla.descuento,"onUpdate:modelValue":a[27]||(a[27]=e=>s.planilla.descuento=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Uo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"bono",modelValue:s.planilla.bono,"onUpdate:modelValue":a[28]||(a[28]=e=>s.planilla.bono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yo,[(0,i.Wm)(r,{dense:"",outlined:"",label:"total",modelValue:s.planilla.total,"onUpdate:modelValue":a[29]||(a[29]=e=>s.planilla.total=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Io,[(0,i.Wm)(r,{dense:"",outlined:"",label:"observacion",modelValue:s.planilla.observacion,"onUpdate:modelValue":a[30]||(a[30]=e=>s.planilla.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Po,[s.validarplan?((0,i.wg)(),(0,i.j4)(c,{key:0,class:"full-width\t",type:"submit",color:"primary",icon:"add_circle",label:"crear planilla"})):(0,i.kq)("",!0)])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialogver,"onUpdate:modelValue":a[32]||(a[32]=e=>s.dialogver=e)},{default:zt((()=>[(0,i.Wm)(f,{style:{width:"800px","max-width":"80vw"}},{default:zt((()=>[(0,i.Wm)(v,{class:"text-center text-bold q-pa-none q-ma-none"},{default:zt((()=>[(0,i.Uk)("Datos "+(0,R.zw)(s.emp.nombre),1)])),_:1}),(0,i.Wm)(v,null,{default:zt((()=>[(0,i.Wm)("div",$o,[(0,i.Wm)(g,{title:"PLANILLAS",rows:s.planillas,columns:s.colplan,"row-key":"name","rows-per-page-options":[50,100,0]},{"body-cell-opcion":zt((e=>[(0,i.Wm)(h,{props:e},{default:zt((()=>[(0,i.Wm)(c,{dense:"",round:"",flat:"",color:"info",icon:"print",onClick:a=>n.imprimirplanilla(e.row)},null,8,["onClick"]),(0,i.Wm)(c,{color:"negative","icon-right":"delete","no-caps":"",flat:"",dense:"",onClick:a=>n.delplanilla(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));var Lo=t(47213);const zo=(0,i.HX)("data-v-27f4421f");(0,i.dD)("data-v-27f4421f");const Zo=(0,i.Uk)("Modificar empleado"),jo=(0,i.Uk)("Modificar empleado"),Bo=(0,i.Uk)("Eliminar empleado"),Qo=(0,i.Uk)("Eliminar empleado"),Go=(0,i.Uk)("Generar planilla"),Ho=(0,i.Uk)("Generar planilla"),Jo=(0,i.Uk)("Crear Empleado"),Ko={class:"row"},Xo={class:"col-12"},el={class:"col-12"},al={class:"col-12"},tl={class:"col-12"},ol={class:"col-12"},ll={class:"col-12"},il={class:"col-12"},sl=(0,i.Uk)("Modificar Empleado"),nl={class:"row"},rl={class:"col-12"},dl={class:"col-12"},cl={class:"col-12"},ml={class:"col-12"},ul={class:"col-12"},pl={class:"col-12"},hl={class:"col-12"},gl={class:"row"},fl={class:"col-12"},bl={class:"row"},vl={class:"col-3"},Wl={class:"col-3"},wl={class:"col-3"},yl={class:"col-3 flex flex-center"},Vl={class:"col-12"},xl=(0,i.Uk)("Modificar planilla"),Cl=(0,i.Uk)("Modificar planilla"),_l=(0,i.Uk)("Eliminar planilla"),ql=(0,i.Uk)("Eliminar planilla"),El=(0,i.Uk)("Imprimir planilla"),Al=(0,i.Uk)("Imprimir planilla"),Dl=(0,i.Uk)("Adelanto y decuento"),Ml=(0,i.Uk)("Adelanto y decuento"),Tl=(0,i.Uk)("Dar por cancelado"),Sl=(0,i.Uk)("Dar por cancelado"),kl={class:"row"},Ol={class:"col-12"},Rl={class:"col-12"},Nl={class:"col-12"},Ul={class:"col-12"},Yl={class:"col-12"},Il={class:"col-12"},Pl={class:"col-12 flex flex-center"},$l=(0,i.Uk)(),Fl={class:"row"},Ll={class:"col-12"},zl={class:"col-12"},Zl={class:"col-12"},jl={class:"col-12 flex flex-center"},Bl=(0,i.Uk)(),Ql={class:"row"},Gl={class:"col-12"},Hl={class:"row"},Jl={class:"col-3"},Kl={class:"col-3"},Xl={class:"col-3"},ei={class:"col-3 flex flex-center"},ai={class:"col-12"},ti=(0,i.Uk)("Modificar planilla"),oi=(0,i.Uk)("Modificar planilla"),li=(0,i.Uk)("Eliminar planilla"),ii=(0,i.Uk)("Eliminar planilla");(0,i.Cn)();const si=zo(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-avatar"),d=(0,i.up)("q-item-section"),c=(0,i.up)("q-item-label"),m=(0,i.up)("q-item"),u=(0,i.up)("q-list"),p=(0,i.up)("q-btn-dropdown"),h=(0,i.up)("q-td"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-btn"),b=(0,i.up)("q-input"),v=(0,i.up)("q-table"),W=(0,i.up)("q-card-section"),w=(0,i.up)("q-separator"),y=(0,i.up)("q-select"),V=(0,i.up)("q-form"),x=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),_=(0,i.up)("q-page"),q=(0,i.Q2)("close-popup"),E=(0,i.Q2)("ripple");return(0,i.wg)(),(0,i.j4)(_,{class:"q-pa-xs"},{default:zo((()=>[(0,i.Wm)(v,{dense:"",flat:"",bordered:"",rows:s.empleados,"rows-per-page-options":[0],columns:s.columsempleado},{"body-cell-opcion":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Wm)(p,{color:"primary",label:"Opciones"},{default:zo((()=>[(0,i.Wm)(u,null,{default:zo((()=>[(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.clickmod(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"edit",color:"warning","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[Zo])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[jo])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.deleteval(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[Bo])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Qo])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.clickplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"add_task",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[Go])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Ho])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-tipo":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Wm)(g,{color:"CONTRATO"==e.row.tipo?"green":"EVENTUAL"},{default:zo((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-nombre":zo((e=>[(0,i.Wm)(h,{props:e},{default:zo((()=>[(0,i.Uk)((0,R.zw)(e.row.nombre),1)])),_:2},1032,["props"])])),"body-cell-planillas":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Wm)(u,{dense:"",bordered:"",padding:"",class:"rounded-borders"},{default:zo((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.planillas,(e=>(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:e.id,clickable:""},{default:zo((()=>[(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Uk)((0,R.zw)(e.fechainicio)+" "+(0,R.zw)(e.fechafin)+" "+(0,R.zw)(e.monto),1)])),_:2},1024)])),_:2},1536)),[[E]]))),128))])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-celular":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Uk)((0,R.zw)(e.row.celular),1)])),_:2},1032,["props"])])),"top-right":zo((()=>[(0,i.Wm)(f,{onClick:n.clickcreateempleado,color:"positive",icon:"add_circle",label:"Crear Empleado"},null,8,["onClick"]),(0,i.Wm)(b,{dense:"",outlined:"",placeholder:"Buscar"})])),_:1},8,["rows","columns"]),(0,i.Wm)(C,{modelValue:s.dialogcreateempleado,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dialogcreateempleado=e)},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-subtitle2"},{default:zo((()=>[Jo])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)(V,{onSubmit:n.createempleado},{default:zo((()=>[(0,i.Wm)("div",Ko,[(0,i.Wm)("div",Xo,[(0,i.Wm)(b,{dense:"",outlined:"",label:"ci",modelValue:s.empleado.ci,"onUpdate:modelValue":a[1]||(a[1]=e=>s.empleado.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",el,[(0,i.Wm)(b,{dense:"",outlined:"",label:"nombre",modelValue:s.empleado.nombre,"onUpdate:modelValue":a[2]||(a[2]=e=>s.empleado.nombre=e)},null,8,["modelValue"])]),(0,i.Wm)("div",al,[(0,i.Wm)(b,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:s.empleado.fechanac,"onUpdate:modelValue":a[3]||(a[3]=e=>s.empleado.fechanac=e)},null,8,["modelValue"])]),(0,i.Wm)("div",tl,[(0,i.Wm)(b,{dense:"",outlined:"",label:"celular",modelValue:s.empleado.celular,"onUpdate:modelValue":a[4]||(a[4]=e=>s.empleado.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ol,[(0,i.Wm)(y,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:s.empleado.tipo,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.tipo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ll,[(0,i.Wm)(b,{dense:"",outlined:"",label:"salario",type:"number",modelValue:s.empleado.salario,"onUpdate:modelValue":a[6]||(a[6]=e=>s.empleado.salario=e)},null,8,["modelValue"])]),(0,i.Wm)("div",il,[(0,i.Wm)(f,{label:"Crear empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialogmodempleado,"onUpdate:modelValue":a[14]||(a[14]=e=>s.dialogmodempleado=e)},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-subtitle2"},{default:zo((()=>[sl])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)(V,{onSubmit:n.modempleado},{default:zo((()=>[(0,i.Wm)("div",nl,[(0,i.Wm)("div",rl,[(0,i.Wm)(b,{dense:"",outlined:"",label:"ci",modelValue:s.empleado2.ci,"onUpdate:modelValue":a[8]||(a[8]=e=>s.empleado2.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",dl,[(0,i.Wm)(b,{dense:"",outlined:"",label:"nombre",modelValue:s.empleado2.nombre,"onUpdate:modelValue":a[9]||(a[9]=e=>s.empleado2.nombre=e)},null,8,["modelValue"])]),(0,i.Wm)("div",cl,[(0,i.Wm)(b,{dense:"",type:"date",outlined:"",label:"fechanac",modelValue:s.empleado2.fechanac,"onUpdate:modelValue":a[10]||(a[10]=e=>s.empleado2.fechanac=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ml,[(0,i.Wm)(b,{dense:"",outlined:"",label:"celular",modelValue:s.empleado2.celular,"onUpdate:modelValue":a[11]||(a[11]=e=>s.empleado2.celular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ul,[(0,i.Wm)(y,{options:["CONTRATO","EVENTUAL"],dense:"",outlined:"",label:"tipo",modelValue:s.empleado2.tipo,"onUpdate:modelValue":a[12]||(a[12]=e=>s.empleado2.tipo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",pl,[(0,i.Wm)(b,{dense:"",outlined:"",label:"salario",type:"number",modelValue:s.empleado2.salario,"onUpdate:modelValue":a[13]||(a[13]=e=>s.empleado2.salario=e)},null,8,["modelValue"])]),(0,i.Wm)("div",hl,[(0,i.Wm)(f,{label:"Modificar empleado",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialogcreateplanilla,"onUpdate:modelValue":a[18]||(a[18]=e=>s.dialogcreateplanilla=e),"full-width":"","full-height":""},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-subtitle2"},{default:zo((()=>[(0,i.Uk)("Crear Planilla "+(0,R.zw)(s.empleado.nombre)+" "+(0,R.zw)(s.empleado.tipo),1)])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)("div",gl,[(0,i.Wm)("div",fl,[(0,i.Wm)(V,{onSubmit:n.createplanilla},{default:zo((()=>[(0,i.Wm)("div",bl,[(0,i.Wm)("div",vl,[(0,i.Wm)(b,{dense:"",type:"date",outlined:"",label:"fechainicio",modelValue:s.fechainicio,"onUpdate:modelValue":a[15]||(a[15]=e=>s.fechainicio=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Wl,[(0,i.Wm)(b,{dense:"",type:"date",outlined:"",label:"fechafin",modelValue:s.fechafin,"onUpdate:modelValue":a[16]||(a[16]=e=>s.fechafin=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wl,[(0,i.Wm)(b,{dense:"",outlined:"",label:"monto",modelValue:s.monto,"onUpdate:modelValue":a[17]||(a[17]=e=>s.monto=e)},null,8,["modelValue"])]),(0,i.Wm)("div",yl,[(0,i.Wm)(f,{label:"Crear planilla",class:"full-width",type:"submit",icon:"add_circle",color:"positive"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Vl,[(0,i.Wm)(v,{columns:s.columsmisplanillaempleado,title:"Historial de planillas","rows-per-page-options":[0],rows:s.misplanillaempleado},{"body-cell-estado":zo((e=>[(0,i.Wm)(h,{props:e},{default:zo((()=>[(0,i.Wm)(g,{color:"CREADO"==e.row.estado?"positive":"negative",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Wm)(p,{color:"CREADO"==e.row.estado?"positive":"negative",label:"Opciones"},{default:zo((()=>[(0,i.Wm)(u,null,{default:zo((()=>["CREADO"==e.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:0,clickable:"",onClick:a=>n.clickupdateplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[xl])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Cl])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"CREADO"==e.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:1,clickable:"",onClick:a=>n.eliminarplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[_l])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[ql])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.imprimirplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"print",color:"primary","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[El])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Al])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]]),"CREADO"==e.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:2,clickable:"",onClick:a=>n.adelantodescuento(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"paid",color:"positive","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[Dl])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Ml])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"CREADO"==e.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(m,{key:3,clickable:"",onClick:a=>n.darcancelado(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"logout",color:"accent","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[Tl])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[Sl])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0)])),_:2},1024)])),_:2},1032,["color"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialogplanilla,"onUpdate:modelValue":a[25]||(a[25]=e=>s.dialogplanilla=e)},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-bold"},{default:zo((()=>[(0,i.Uk)("Planilla "+(0,R.zw)(s.empleado.nombre)+" "+(0,R.zw)(s.empleado.tipo),1)])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)(V,{onSubmit:(0,o.iM)(n.updateplanilla,["prevent"])},{default:zo((()=>[(0,i.Wm)("div",kl,[(0,i.Wm)("div",Ol,[(0,i.Wm)(b,{label:"fechainicio",type:"date",dense:"",outlined:"",modelValue:s.planilla.fechainicio,"onUpdate:modelValue":a[19]||(a[19]=e=>s.planilla.fechainicio=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Rl,[(0,i.Wm)(b,{label:"fechafin",type:"date",dense:"",outlined:"",modelValue:s.planilla.fechafin,"onUpdate:modelValue":a[20]||(a[20]=e=>s.planilla.fechafin=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Nl,[(0,i.Wm)(b,{label:"monto",dense:"",outlined:"",modelValue:s.planilla.monto,"onUpdate:modelValue":a[21]||(a[21]=e=>s.planilla.monto=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Ul,[(0,i.Wm)(b,{label:"adelanto",dense:"",outlined:"",modelValue:s.planilla.adelanto,"onUpdate:modelValue":a[22]||(a[22]=e=>s.planilla.adelanto=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Yl,[(0,i.Wm)(b,{label:"bono",dense:"",outlined:"",modelValue:s.planilla.bono,"onUpdate:modelValue":a[23]||(a[23]=e=>s.planilla.bono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Il,[(0,i.Wm)(b,{label:"total",dense:"",outlined:"",modelValue:s.planilla.total,"onUpdate:modelValue":a[24]||(a[24]=e=>s.planilla.total=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Pl,[(0,i.Wm)(f,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialoglogplanillaupdate,"onUpdate:modelValue":a[29]||(a[29]=e=>s.dialoglogplanillaupdate=e)},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-bold"},{default:zo((()=>[(0,i.Wm)("div",null,"Planilla "+(0,R.zw)(s.empleado.nombre)+" "+(0,R.zw)(s.empleado.tipo),1),$l,(0,i.Wm)("div",null,"Del: "+(0,R.zw)(s.planilla.fechainicio)+" Al "+(0,R.zw)(s.planilla.fechafin),1)])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)(V,{onSubmit:(0,o.iM)(n.updatelogplanilla,["prevent"])},{default:zo((()=>[(0,i.Wm)("div",Fl,[(0,i.Wm)("div",Ll,[(0,i.Wm)(b,{label:"tipo",dense:"",outlined:"",modelValue:s.logplanillaupdate.tipo,"onUpdate:modelValue":a[26]||(a[26]=e=>s.logplanillaupdate.tipo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",zl,[(0,i.Wm)(b,{label:"monto",type:"number",dense:"",outlined:"",modelValue:s.logplanillaupdate.monto,"onUpdate:modelValue":a[27]||(a[27]=e=>s.logplanillaupdate.monto=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Zl,[(0,i.Wm)(b,{label:"motivo",dense:"",outlined:"",modelValue:s.logplanillaupdate.motivo,"onUpdate:modelValue":a[28]||(a[28]=e=>s.logplanillaupdate.motivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",jl,[(0,i.Wm)(f,{type:"submit",class:"full-width",color:"positive",icon:"edith",label:"Modificar planilla"})])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialoglogplanilla,"onUpdate:modelValue":a[33]||(a[33]=e=>s.dialoglogplanilla=e)},{default:zo((()=>[(0,i.Wm)(x,null,{default:zo((()=>[(0,i.Wm)(W,{class:"text-center text-bold"},{default:zo((()=>[(0,i.Wm)("div",null,"Historial de adelantos y descuentos "+(0,R.zw)(s.empleado.nombre)+" "+(0,R.zw)(s.empleado.tipo),1),Bl,(0,i.Wm)("div",null,"Del: "+(0,R.zw)(s.planilla.fechainicio)+" Al "+(0,R.zw)(s.planilla.fechafin),1)])),_:1}),(0,i.Wm)(w),(0,i.Wm)(W,null,{default:zo((()=>[(0,i.Wm)("div",Ql,[(0,i.Wm)("div",Gl,[(0,i.Wm)(V,{onSubmit:(0,o.iM)(n.createlogplanilla,["prevent"])},{default:zo((()=>[(0,i.Wm)("div",Hl,[(0,i.Wm)("div",Jl,[(0,i.Wm)(y,{options:["BONO","ADELANTO","DESCUENTO"],label:"Tipo",dense:"",outlined:"",modelValue:s.logplanilla.tipo,"onUpdate:modelValue":a[30]||(a[30]=e=>s.logplanilla.tipo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Kl,[(0,i.Wm)(b,{label:"Monto",type:"number",dense:"",outlined:"",modelValue:s.logplanilla.monto,"onUpdate:modelValue":a[31]||(a[31]=e=>s.logplanilla.monto=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Xl,[(0,i.Wm)(b,{label:"Motivo",type:"text",dense:"",outlined:"",modelValue:s.logplanilla.motivo,"onUpdate:modelValue":a[32]||(a[32]=e=>s.logplanilla.motivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ei,[(0,i.Wm)(f,{type:"submit",class:"full-width",color:"positive",icon:"add_circle",label:"Crear"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",ai,[(0,i.Wm)(v,{rows:s.logplanillas,title:"Historial de planillas",columns:s.columslogplanillas},{"body-cell-tipo":zo((e=>[(0,i.Wm)(h,{props:e},{default:zo((()=>[(0,i.Wm)(g,{color:"ADELANTO"==e.row.tipo||"DESCUENTO"==e.row.tipo?"negative":"BONO"==e.row.tipo?"positive":""},{default:zo((()=>[(0,i.Uk)((0,R.zw)(e.row.tipo),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":zo((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:zo((()=>[(0,i.Wm)(p,{color:"primary",label:"Opciones"},{default:zo((()=>[(0,i.Wm)(u,null,{default:zo((()=>[(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.clickupdatelogplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"edit_note",color:"accent","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[ti])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[oi])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>n.eliminarlogplanilla(e.row)},{default:zo((()=>[(0,i.Wm)(d,{avatar:""},{default:zo((()=>[(0,i.Wm)(r,{icon:"delete",color:"negative","text-color":"white"})])),_:1}),(0,i.Wm)(d,null,{default:zo((()=>[(0,i.Wm)(c,null,{default:zo((()=>[li])),_:1}),(0,i.Wm)(c,{caption:""},{default:zo((()=>[ii])),_:1})])),_:1})])),_:2},1032,["onClick"]),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns"])])])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),ni=t(21694),ri={name:"Planillas",data(){return{dialoglogplanilla:!1,logplanilla:{},dialoglogplanillaupdate:!1,logplanillaupdate:{},logplanillas:[],dialogplanilla:!1,dialogcreateempleado:!1,dialogmodempleado:!1,dialogcreateplanilla:!1,fechainicio:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fechafin:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fechahoy:le.ZP.formatDate(new Date,"YYYY-MM-DD"),monto:0,empleado:{tipo:"CONTRATO",fechanac:le.ZP.formatDate(new Date,"YYYY-MM-DD")},empleado2:{},empleados:[],columsempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"ci",name:"ci",field:"ci",align:"left"},{label:"nombre",name:"nombre",field:"nombre",align:"left"},{label:"fechanac",name:"fechanac",field:"fechanac",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"celular",name:"celular",field:"celular",align:"left"},{label:"salario",name:"salario",field:"salario",align:"left"}],columslogplanillas:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"tipo",name:"tipo",field:"tipo",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"motivo",name:"motivo",field:"motivo",align:"left"},{label:"fecha",name:"fecha",field:"fecha",align:"left"},{label:"hora",name:"hora",field:"hora",align:"left"}],misplanillaempleado:[],columsmisplanillaempleado:[{label:"opcion",name:"opcion",field:"opcion",align:"left"},{label:"fechainicio",name:"fechainicio",field:"fechainicio",align:"left"},{label:"fechafin",name:"fechafin",field:"fechafin",align:"left"},{label:"monto",name:"monto",field:"monto",align:"left"},{label:"adelanto",name:"adelanto",field:"adelanto",align:"left"},{label:"descuento",name:"descuento",field:"descuento",align:"left"},{label:"bono",name:"bono",field:"bono",align:"left"},{label:"total",name:"total",field:"total",align:"left"},{label:"estado",name:"estado",field:"estado",align:"left"}],planilla:{}}},created(){this.misempleados()},mounted(){},methods:{createlogplanilla(){this.$q.loading.show(),this.logplanilla.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanilla.hora=le.ZP.formatDate(new Date,"HH:mm:ss"),this.logplanilla.planilla_id=this.planilla.id,this.$axios.post("http://192.168.100.8:81/api/logplanilla",this.logplanilla).then((e=>{"BONO"==this.logplanilla.tipo&&this.$axios.put("http://192.168.100.8:81/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:this.planilla.descuento,bono:parseInt(this.planilla.bono)+parseInt(this.logplanilla.monto),total:parseInt(this.planilla.total)+parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"DESCUENTO"==this.logplanilla.tipo&&this.$axios.put("http://192.168.100.8:81/api/planilla/"+this.planilla.id,{adelanto:this.planilla.adelanto,descuento:parseInt(this.planilla.descuento)+parseInt(this.logplanilla.monto),bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),"ADELANTO"==this.logplanilla.tipo&&this.$axios.put("http://192.168.100.8:81/api/planilla/"+this.planilla.id,{adelanto:parseInt(this.planilla.adelanto)+parseInt(this.logplanilla.monto),descuento:this.planilla.descuento,bono:this.planilla.bono,total:parseInt(this.planilla.total)-parseInt(this.logplanilla.monto),estado:"CREADO"}).then((e=>{this.mihistorialplanilla()})),this.milogplanillas(),this.logplanilla={}}))},clickmod(e){this.empleado2=e,this.dialogmodempleado=!0},clickplanilla(e){this.empleado=e,this.monto=this.empleado.salario,this.dialogcreateplanilla=!0,this.mihistorialplanilla()},mihistorialplanilla(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/planilla/"+this.empleado.id).then((e=>{this.$q.loading.hide(),this.misplanillaempleado=e.data}))},clickcreateempleado(){this.dialogcreateempleado=!0,this.empleado={tipo:"CONTRATO",fechanac:le.ZP.formatDate(new Date,"YYYY-MM-DD")}},misempleados(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/empleado/1/edit").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},createplanilla(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/planilla",{fechainicio:this.fechainicio,fechafin:this.fechafin,fechapago:null,monto:this.monto,adelanto:0,descuento:0,bono:0,restante:this.monto,total:this.monto,estado:"CREADO",empleado_id:this.empleado.id}).then((e=>{this.mihistorialplanilla()}))},updateplanilla(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/planilla/"+this.planilla.id,this.planilla).then((e=>{this.mihistorialplanilla(),this.dialogplanilla=!1}))},updatelogplanilla(){this.$q.loading.show(),this.logplanillaupdate.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.logplanillaupdate.hora=le.ZP.formatDate(new Date,"HH:mm:ss"),this.$axios.put("http://192.168.100.8:81/api/logplanilla/"+this.logplanillaupdate.id,this.logplanillaupdate).then((e=>{this.dialoglogplanillaupdate=!1,this.milogplanillas()}))},clickupdatelogplanilla(e){this.logplanillaupdate=e,this.dialoglogplanillaupdate=!0},eliminarplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/planilla/"+e.id).then((e=>{this.mihistorialplanilla()}))}))},eliminarlogplanilla(e){this.$q.dialog({title:"Seguro eliminar planilla?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/logplanilla/"+e.id).then((e=>{this.milogplanillas()}))}))},darcancelado(e){this.$q.dialog({title:"Seguro dar por cacelado?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/planilla/"+e.id,{estado:"CANCELADO",fechapago:le.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.mihistorialplanilla()}))}))},adelantodescuento(e){this.planilla=e,this.dialoglogplanilla=!0,this.milogplanillas()},milogplanillas(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/logplanilla/"+this.planilla.id).then((e=>{this.logplanillas=e.data,this.$q.loading.hide()}))},imprimirplanilla(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"png",5,2,37,17),o.setFont(void 0,"bold"),o.setFontSize(8),o.text(170,5,"fecha de proceso: "+a.fechahoy,"DD/MM/YYYY"),o.setFontSize(11),o.text("CHICHERIA DOÑA NATI",110,7,"center"),o.text("BOLETA DE PAGO",110,12,"center"),o.text("Correspondiente  "+Be()(e.fechainicio).format("DD/MM/YYYY")+" Al "+Be()(e.fechafin).format("DD/MM/YYYY")+" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":Be()(e.fechapago).format("DD/MM/YYYY")),110,17,"center"),o.line(5,20,210,20),o.setFont(void 0,"normal")}var o=new Lo.kH("p",void 0,"letter");o.setFont("Times"),t(),o.setFontSize(10),o.setFont(void 0,"bold"),o.text(["CI:","Nombre:","Fecha nac:"],10,25),o.setFont(void 0,"normal"),o.text([this.empleado.ci,this.empleado.nombre,this.empleado.fechanac],65,25,"center"),o.setFont(void 0,"bold"),o.text(["Tipo:","Celular","Edad:"],130,25),o.setFont(void 0,"normal");var l=Be()(this.empleado.fechanac),i=Be()(),s=i.diff(l,"years");o.text([this.empleado.tipo,this.empleado.celular.toString(),s.toString()],170,25,"center"),o.line(5,35,210,35),o.setFont(void 0,"bold"),o.text("INGRESOS",45,39,"center"),o.text("DESCUENTOS",150,39,"center"),o.line(5,40,210,40),o.line(110,40,110,70),o.setFont(void 0,"bold"),o.text(["Monto:","Bono:"],15,45),o.setFont(void 0,"normal"),o.text([e.monto+" Bs",e.bono+" Bs"],105,45,"right"),o.setFont(void 0,"bold"),o.text(["Adelanto:","Descuento:"],115,45),o.setFont(void 0,"normal"),o.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),o.line(5,65,210,65),o.setFont(void 0,"bold"),o.text("Total ganado:",35,69,"center"),o.text("Total descuento:",140,69,"center"),o.setFont(void 0,"normal"),o.text(parseInt(e.monto)+parseInt(e.bono)+" Bs",105,69,"right"),o.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),o.line(5,70,210,70),o.setFont(void 0,"bold"),o.text("Liquido pagable: "+e.total+" Bs",110,75,"center");let n=ni.conversorNumerosALetras,r=new n,d=r.convertToText(e.total);o.setFont(void 0,"normal"),o.text("SON: "+d.toUpperCase()+" Bs",110,80,"center"),o.setFont(void 0,"bold"),o.text(5,90,"____________________________                     _____________________________________           ______________________________"),o.text(10,95,"FIRMA SELLO CAJERO"),o.text(75,95,"FIRMA SELLO CONTROL INTERNO"),o.text(150,95,"FIRMA SELLO LIQUIDADOR"),window.open(o.output("bloburl"),"_blank")},clickupdateplanilla(e){this.planilla=e,this.dialogplanilla=!0},createempleado(){console.log(this.empleado),this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/empleado",this.empleado).then((e=>{this.empleado={tipo:"CONTRATO",fechanac:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialogcreateempleado=!1,this.misempleados()}))},modempleado(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.dialogmodempleado=!1,this.misempleados()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))}}};var di=t(82226),ci=t(27011),mi=t(83414),ui=t(52035),pi=t(2350),hi=t(46489);ri.render=si,ri.__scopeId="data-v-27f4421f";const gi=ri;k()(ri,"components",{QPage:V.Z,QTable:de.Z,QTd:me.Z,QBtnDropdown:di.Z,QList:ci.Z,QItem:mi.Z,QItemSection:ui.Z,QAvatar:pe.Z,QItemLabel:pi.Z,QIcon:_.Z,QBadge:re.Z,QBtn:D.Z,QInput:E.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QSeparator:M.Z,QForm:q.Z,QSelect:Ge.Z}),k()(ri,"directives",{ClosePopup:he.Z,Ripple:hi.Z});t(69755);const fi=t(21694),bi={name:"Venta",data(){return{dialoggenplanilla:!1,dialogver:!1,filter:"",pagos:!1,checkgasto:"GASTO",pago:{fecha:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],emp:{},empleados2:[],empleadohistorial:{},boolcrear:!0,salarios:[],planillas:[],planilla:{},validarplan:!0,modempleado:!1,empleado:{fechanac:"2000-01-01"},empleado2:{},dialog_plan:!1,fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocaja:0,montogeneral:0,columns:[{name:"ci",label:"CI",field:"ci"},{name:"nombre",label:"NOMBRE",field:"nombre",sortable:!0,align:"left"},{name:"tipo",label:"TIPO",field:"tipo"},{name:"estado",label:"ESTADO",field:"estado"},{name:"action",label:"OPCION",field:"action"}],columns2:[{name:"fecha",label:"FECHA",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"hora",label:"HORA",field:"hora"},{name:"tipo",label:"TIPO",field:"tipo",sortable:!0},{name:"monto",label:"MONTO",field:"monto",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name,sortable:!0},{name:"opcion",label:"OPCION",field:"opcion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"extra"},{name:"pago",label:"Pago",field:"pago"},{name:"cancelar",label:"Cancelar",field:"cancelar"},{name:"opcion",label:"opcion",field:"opcion"}],colplan:[{name:"opcion",label:"opcion",field:"opcion"},{name:"Fecha",label:"Fecha In",field:e=>Be()(e.fechainicio).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha Fin",field:e=>Be()(e.fechafin).format("DD/MM/YYYY")},{name:"Fecha",label:"Fecha pago",field:e=>Be()(e.fechapago).format("DD/MM/YYYY")},{name:"salario",label:"Sueldo",field:"monto"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"},{name:"extra",label:"Extra",field:"bono"},{name:"pago",label:"Pago",field:"total"}]}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[50,100,-1],[50,100,"All"]]}),this.missalarios(),this.misempleados(),this.totalgeneral()},methods:{cambioEstado(e){this.$axios.post("http://192.168.100.8:81/api/estadoEmpleado",e).then((e=>{this.missalarios(),this.misempleados()}))},printRow(e){this.$axios.get("http://192.168.100.8:81/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},delplanilla(e){console.log(e),this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/planilla/"+e.id).then((e=>{this.$q.notify({message:"Eliminado",icon:"info",color:"green"}),this.dialogver=!1,this.misempleados()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},delsueldo(e){this.$q.dialog({title:"Confirmar",message:"Esta Seguro de Eliminar?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/sueldo/"+e.id).then((e=>{this.$q.notify({message:"Eliminado",icon:"info",color:"green"}),this.pagos=!1,this.misempleados()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},genplanilla(e){this.dialoggenplanilla=!0,this.emp=e,this.planilla.fechainicio=this.fecha1,this.planilla.fechafin=this.fecha2,this.planilla.fechapago=le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),this.planilla.monto=null==e.salario?0:e.salario,this.planilla.adelanto=null==e.adelanto?0:e.adelanto,this.planilla.descuento=null==e.descuento?0:e.descuento,this.planilla.bono=null==e.extra?0:e.extra,this.planilla.total=this.totalmonto,this.planilla.empleado_id=e.id,this.planilla.restante=0,this.$axios.post("http://192.168.100.8:81/api/valplanilla",this.planilla).then((e=>{e.data.length>0?this.validarplan=!1:this.validarplan=!0}))},actualizamonto(){this.planilla.total=this.totalmonto},creategenplanilla(){return"GASTO"==this.checkgasto&&this.planilla.total>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&this.planilla.total>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.planilla.tpago=this.checkgasto,void this.$axios.post("http://192.168.100.8:81/api/planilla",this.planilla).then((e=>{this.$q.loading.hide(),this.$q.notify({message:"Planilla Creada",icon:"info",color:"green"}),this.imprimirplanilla(this.planilla),this.dialoggenplanilla=!1,this.misempleados(),this.totalgeneral()})))},imprimirplanilla(e){function a(){var a=new Image;a.src="logo.png",t.addImage(a,"png",5,2,37,17),t.setFont(void 0,"bold"),t.setFontSize(8),t.text(170,5,"fecha de proceso: "+le.ZP.formatDate(Date.now(),"DD-MM-YYYY")),t.setFontSize(11),t.text("CHICHERIA DOÑA NATI",110,7,"center"),t.text("BOLETA DE PAGO",110,12,"center"),t.text("Correspondiente  "+Be()(e.fechainicio).format("DD/MM/YYYY")+" Al "+Be()(e.fechafin).format("DD/MM/YYYY"),100,17,"center"),t.text(" Fecha de pago: "+(null==e.fechapago||void 0==e.fechapago||""==e.fechapago?"Sn":Be()(e.fechapago).format("DD/MM/YYYY")),170,17,"left"),t.line(5,20,210,20),t.setFont(void 0,"normal")}var t=new Lo.kH("p",void 0,"letter");t.setFont("Times"),a(),t.setFontSize(10),t.setFont(void 0,"bold"),t.text(["CI:","Nombre:"],10,25),t.setFont(void 0,"normal"),t.text([this.emp.ci,this.emp.nombre],65,25,"center"),t.setFont(void 0,"bold"),t.text(["Tipo:"],130,25),t.setFont(void 0,"normal");var o=Be()(this.emp.fechanac),l=Be()();l.diff(o,"years");t.text([this.emp.tipo],170,25,"center"),t.line(5,35,210,35),t.setFont(void 0,"bold"),t.text("INGRESOS",45,39,"center"),t.text("DESCUENTOS",150,39,"center"),t.line(5,40,210,40),t.line(110,40,110,70),t.setFont(void 0,"bold"),t.text(["Salario:"],15,45),t.setFont(void 0,"normal"),t.text([e.monto+" Bs"],105,45,"right"),t.setFont(void 0,"bold"),t.text(["Adelanto:","Descuento:"],115,45),t.setFont(void 0,"normal"),t.text([e.adelanto+" Bs",e.descuento+" Bs"],205,45,"right"),t.line(5,65,210,65),t.setFont(void 0,"bold"),t.text("Total ganado:",35,69,"center"),t.text("Total descuento:",140,69,"center"),t.setFont(void 0,"normal"),t.text(parseInt(e.monto)+" Bs",105,69,"right"),t.text(parseInt(e.descuento)+parseInt(e.adelanto)+" Bs",205,69,"right"),t.line(5,70,210,70),t.setFont(void 0,"bold"),t.setFontSize(14),t.text("Liquido pagable: "+e.total+" Bs",110,75,"center"),t.setFontSize(9);let i=fi.conversorNumerosALetras,s=new i,n=s.convertToText(parseInt(e.total));t.setFont(void 0,"normal"),t.text("SON: "+n.toUpperCase()+" Bs",110,80,"center"),t.setFont(void 0,"bold"),""!=e.observacion&&null!=e.observacion&&(t.setFont(void 0,"bold"),t.text("Obs: ",2,85,"left"),t.setFont(void 0,"normal"),t.text(e.observacion.substring(0,95),10,85,"left"),t.text(e.observacion.substring(95,95),10,90,"left"),t.text(e.observacion.substring(190,95),10,90,"left"),t.setFont(void 0,"bold")),t.text(5,100,"____________________________                                                                   ______________________________"),t.text(10,105,"FIRMA EMPLEADO"),t.text(150,105,"FIRMA RESPONSABLE"),window.open(t.output("bloburl"),"_blank")},cancelar(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago,this.$axios.post("http://192.168.100.8:81/api/cancelacion",{monto:a,fecha:this.fecha2,empleado_id:e.id,empleado_nombre:e.nombre}).then((e=>{this.missalarios(),this.$q.notify({message:"Registro correctamente",icon:"info",color:"positive"})}))},imprimirboleta(e){let a=0;null==e.adelanto&&(e.adelanto=0),null==e.descuento&&(e.descuento=0),null==e.extra&&(e.extra=0),null==e.pago&&(e.pago=0),null==e.obs&&(e.obs=""),a=e.salario-e.adelanto-e.descuento+e.pago;let t="<div><img class='fondo' src='logo.png' style='height:20px'> Chicheria Doña Naty <span>"+Be()().format("DD/MM/YYYY")+"</span></div><br>";t+="<div style='text-align:center'>BOLETA DE PAGO "+le.ZP.formatDate(this.fecha1,"YYYY-MM")+"</div><hr>",t+="<div>Nombre: "+e.nombre+"</div><div>Salario Basico: "+e.salario+"</div>",t+="<div>CI: "+e.ci+"</div><div>Celular: "+e.celular+"</div><hr>",t+="<table style='width:100%'><thead><tr><th>INGRESOS</th><th>DESCUENTOS</th></tr></thead>",t+="<tbody><tr><td>Salario Basico:"+e.salario+"</td><td>Descuentos: "+e.descuento+"</td></tr>",t+="<tr><td>Extra:"+e.extra+"</td><td>Adelanto: "+e.adelanto+"</td></tr>",t+="<tr><td>Pago:"+e.pago+"</td><td> </td></tr>",t+="</tbody></table><hr>",t+="<div style='text-align:right'>Liquido Pagable: "+a+"</div>",t+="<div> "+e.obs+"</div>",t+="<br><br><div style='text-align:center; with:100%'>FIRMA</div>";let o=window.open("","Imprimir","width=1000,height=1000");o.document.write(t),o.document.close(),o.focus(),setTimeout((function(){o.print(),o.close()}),500)},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de prestmos Sueldos pagos Adelantos"),t.text(5,1.5,"DE "+e.fecha1),t.text(1,3,"Empleado"),t.text(7,3,"Sueldo"),t.text(9,3,"Extra"),t.text(11,3,"Adelanto"),t.text(13,3,"Descuento"),t.text(16,3,"Pago"),t.text(19,3,"Cancelar"),t.setFont(void 0,"normal")}var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0,l=0;this.salarios.forEach((e=>{let i=null==e.extra?0:e.extra,s=null==e.adelanto?0:e.adelanto,n=null==e.descuento?0:e.descuento,r=null==e.pago?0:e.pago,d=e.salario-s-n+r;o+=.5,t.text(1,o+3,""+e.nombre),t.text(7,o+3,""+e.salario),t.text(9,o+3,""+i),t.text(11,o+3,""+s),t.text(13,o+3,""+n),t.text(16,o+3,""+r),t.text(19,o+3,""+d),l+=d,o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,t.text(11,o+3,"TOTAL"),t.text(14,o+3,""+l),window.open(t.output("bloburl"),"_blank")},missalarios(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/missueldos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{this.salarios=e.data,se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",ordering:!1,buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[50,100,-1],[50,100,"All"]]})})),this.$q.loading.hide()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},totalcaja(){this.$axios.post("http://192.168.100.8:81/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},totalgeneral(){this.$axios.post("http://192.168.100.8:81/api/totalgeneral").then((e=>{console.log(e.data.monto),this.montogeneral=parseFloat(e.data.monto)}))},agregarpago(){return console.log(this.empleadohistorial),"FIJO"==this.empleado2.tipo&&parseFloat(this.empleado2.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleado2.id,this.pago.empleado_nombre=this.empleado2.nombre,this.pago.checkbox=this.checkgasto,void this.$axios.post("http://192.168.100.8:81/api/sueldo",this.pago).then((e=>{this.pago={fecha:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.totalgeneral();let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagos=!1})))},misempleados(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/empleado").then((e=>{this.$q.loading.hide(),this.empleados=e.data}))},valplanilla(){},modificar(){this.$axios.put("http://192.168.100.8:81/api/empleado/"+this.empleado2.id,this.empleado2).then((e=>{this.misempleados(),this.boolcrear=!0,this.empleado2=[],this.modempleado=!1,this.$q.notify({message:"Modificado correctamente",icon:"info",color:"positive"})}))},agregar(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/empleado",this.empleado).then((e=>{this.$q.loading.hide(),this.misempleados(),this.empleado={fechanac:"2000-01-01"},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})}))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/empleado/"+e.id).then((e=>{this.$q.loading.hide(),this.misempleados(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},verplanilla(e){this.emp=e,this.planillas=this.emp.planillas,this.dialogver=!0},updateval(e){this.empleado2=e,this.modempleado=!0},pagosval(e){this.$q.loading.show(),this.empleado2=e,this.$axios.get("http://192.168.100.8:81/api/empleado/"+e.id).then((e=>{console.log(e.data),this.empleadohistorial=e.data,this.$q.loading.hide(),this.pagos=!0}))}},computed:{totalmonto(){let e=0;return e=parseFloat(this.planilla.monto)-parseFloat(null==this.planilla.adelanto?0:this.planilla.adelanto)-parseFloat(null==this.planilla.descuento?0:this.planilla.descuento),e},totaldescuento(){let e=0;return this.empleadohistorial.forEach((a=>{le.ZP.formatDate(a.fecha,"YYYY-MM")==le.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e}}};bi.render=Fo,bi.__scopeId="data-v-7fc28906";const vi=bi;k()(bi,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QBadge:re.Z,QTr:ce.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(bi,"directives",{ClosePopup:he.Z});const Wi=(0,i.HX)("data-v-b8966106");(0,i.dD)("data-v-b8966106");const wi={class:"row"},yi=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Vi={class:"col-12"},xi={class:"row"},Ci={class:"col-6 col-sm-6 q-pa-xs"},_i={class:"col-6 col-sm-6 q-pa-xs"},qi={class:"row"},Ei={class:"col-6 col-sm-2 q-pa-xs"},Ai={class:"col-6 col-sm-2 q-pa-xs"},Di={class:"col-6 col-sm-2 q-pa-xs"},Mi={class:"col-6 col-sm-1 q-pa-xs"},Ti={class:"col-6 col-sm-2 q-pa-xs"},Si=(0,i.Wm)("div",{class:"col-6 col-sm-2 q-pa-xs flex flex-center"},null,-1),ki={class:"col-12"},Oi={class:"row"},Ri={class:"col-6 col-sm-2 q-pa-xs"},Ni={class:"col-6 col-sm-2 q-pa-xs"},Ui={class:"col-6 col-sm-2 q-pa-xs"},Yi={class:"col-6 col-sm-2 q-pa-xs"},Ii={class:"col-12"},Pi={class:"row"},$i={class:"col-6 col-sm-2 q-pa-xs"},Fi={class:"col-6 col-sm-2 q-pa-xs"},Li={class:"col-6 col-sm-2 q-pa-xs"},zi={class:"col-6 col-sm-2 q-pa-xs"},Zi={class:"col-6 col-sm-2 q-pa-xs flex flex-center"},ji=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Bi={class:"col-6 col-sm-6 q-pa-xs"},Qi={class:"col-6 col-sm-6 q-pa-xs flex flex-center"},Gi={class:"col-12"};(0,i.Cn)();const Hi=Wi(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-table"),h=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(h,{class:"q-pa-xs"},{default:Wi((()=>[(0,i.Wm)("div",wi,[yi,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Wi((()=>[(0,i.Wm)("div",Vi,[(0,i.Wm)("div",xi,[(0,i.Wm)("div",Ci,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",_i,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",qi,[(0,i.Wm)("div",Ei,[(0,i.Wm)(d,{modelValue:s.cliente,"onUpdate:modelValue":a[3]||(a[3]=e=>s.cliente=e),outlined:"",options:s.clientes,"option-label":"local","option-value":"id",label:"Local",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ai,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Di,[(0,i.Wm)(r,{type:"number",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Mi,[(0,i.Wm)(r,{type:"number",label:"Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ti,[(0,i.Wm)(r,{type:"text",disable:"",label:"Subtotal",modelValue:n.subtotal,"onUpdate:modelValue":a[7]||(a[7]=e=>n.subtotal=e),outlined:""},null,8,["modelValue"])]),Si])]),(0,i.Wm)("div",ki,[(0,i.Wm)("div",Oi,[(0,i.Wm)("div",Ri,[(0,i.Wm)(r,{type:"text",label:"Total",modelValue:n.total,"onUpdate:modelValue":a[8]||(a[8]=e=>n.total=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ni,[(0,i.Wm)(r,{type:"text",label:"Acuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[9]||(a[9]=e=>s.acuenta=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ui,[(0,i.Wm)(r,{type:"text",label:"Saldo",modelValue:n.saldo,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yi,[(0,i.Wm)(r,{type:"text",label:"Estado",modelValue:n.estado,"onUpdate:modelValue":a[11]||(a[11]=e=>n.estado=e),outlined:""},null,8,["modelValue"])])])]),(0,i.Wm)("div",Ii,[(0,i.Wm)("div",Pi,[(0,i.Wm)("div",$i,[(0,i.Wm)(r,{type:"number",min:"0",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[12]||(a[12]=e=>s.efectivo=e),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Fi,[(0,i.Wm)(r,{type:"text",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[13]||(a[13]=e=>s.fisico=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Li,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:e.obervacion,"onUpdate:modelValue":a[14]||(a[14]=a=>e.obervacion=a),disable:"",outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",zi,[(0,i.Wm)(r,{type:"text",label:"Estado material",modelValue:s.material,"onUpdate:modelValue":a[15]||(a[15]=e=>s.material=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Zi,[(0,i.Wm)(c,{color:"positive",label:"Venta",icon:"shop",type:"submit"})])])])])),_:1},8,["onSubmit"]),ji,(0,i.Wm)("div",Bi,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[16]||(a[16]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Qi,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])]),(0,i.Wm)("div",Gi,[(0,i.Wm)(p,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter,"hide-header":""},{"top-right":Wi((()=>[(0,i.Wm)(r,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[17]||(a[17]=e=>s.filter=e),placeholder:"Search"},{append:Wi((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["columns","rows","filter"])])])])),_:1})})),Ji={name:"Venta",data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],cliente:"",productos:[],producto:"",cantidad:1,acuenta:0,fisico:"",efectivo:0,observacion:"",material:"",detalles:[],columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"total",label:"total",field:"total"},{name:"acuenta",label:"acuenta",field:"acuenta"},{name:"saldo",label:"saldo",field:"saldo"},{name:"estado",label:"estado",field:"estado"},{name:"cliente",label:"cliente",field:"cliente"},{name:"user",label:"user",field:"user"}],ventas:[],filter:""}},mounted(){this.misventas(),this.$axios.get("http://192.168.100.8:81/api/cliente").then((e=>{this.clientes=e.data,this.cliente=e.data[0]})),this.$axios.get("http://192.168.100.8:81/api/producto").then((e=>{this.productos=e.data,this.producto=e.data[0]})),this.$axios.post("http://192.168.100.8:81/api/misventas",{fecha:this.fecha2}).then((e=>{this.venta=e.data})),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{misventas(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/misventas",{fecha:this.fecha2}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,cliente:e.cliente.local,user:e.user.name})}))}))},guardar(){this.$q.loading.show(),this.detalles={nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal},this.garantias={efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,estado:this.material},this.$axios.post("http://192.168.100.8:81/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles,garantias:this.garantias}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},deleteval(e){this.detalles.splice(e,1)}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return e=this.subtotal,e},estado(){return this.acuenta<this.total?"POR COBRAR":"CANCELADO"},saldo(){return this.total-this.acuenta}}};Ji.render=Hi,Ji.__scopeId="data-v-b8966106";k()(Ji,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z});const Ki=(0,i.HX)("data-v-0857cd66");(0,i.dD)("data-v-0857cd66");const Xi={class:"row"},es=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),as={class:"col-12"},ts={class:"row"},os={class:"col-6 col-sm-6 q-pa-xs"},ls={class:"col-6 col-sm-6 q-pa-xs"},is={class:"row"},ss={class:"col-6 col-sm-2 q-pa-xs"},ns={class:"col-6 col-sm-2 q-pa-xs"},rs={class:"col-6 col-sm-1 q-pa-xs"},ds={class:"col-6 col-sm-1 q-pa-xs"},cs={class:"col-6 col-sm-2 q-pa-xs"},ms={class:"col-6 col-sm-1 q-pa-xs"},us=(0,i.Uk)("Subtotal "),ps=(0,i.Wm)("br",null,null,-1),hs={class:"col-6 col-sm-1 q-pa-xs"},gs={class:"col-6 col-sm-1 q-pa-xs"},fs=(0,i.Uk)("Subtotal "),bs=(0,i.Wm)("br",null,null,-1),vs={class:"col-6 col-sm-1 q-pa-xs"},Ws=(0,i.Uk)("Subtotal "),ws=(0,i.Wm)("br",null,null,-1),ys={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},Vs={class:"col-12"},xs={class:"row"},Cs={class:"col-12 col-sm-12"},_s={class:"row"},qs=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),Es={class:"col-6 col-sm-4 q-pa-xs"},As={class:"col-6 col-sm-4 q-pa-xs"},Ds={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},Ms={class:"col-12"},Ts={class:"col-12"};(0,i.Cn)();const Ss=Ki(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-select"),c=(0,i.up)("q-badge"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-tr"),g=(0,i.up)("q-table"),f=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(f,{class:"q-pa-xs"},{default:Ki((()=>[(0,i.Wm)("div",Xi,[es,(0,i.Wm)("div",as,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Ki((()=>[(0,i.Wm)("div",ts,[(0,i.Wm)("div",os,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ls,[(0,i.Wm)(r,{type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",is,[(0,i.Wm)("div",ss,[(0,i.Wm)(d,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[3]||(a[3]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Selecionar local",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])]),(0,i.Wm)("div",ns,[(0,i.Wm)(d,{modelValue:s.producto,"onUpdate:modelValue":a[4]||(a[4]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",rs,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ds,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[6]||(a[6]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",cs,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ms,[(0,i.Wm)(c,{class:"full-width full-height",color:"positive"},{default:Ki((()=>[us,ps,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",hs,[(0,i.Wm)(r,{type:"text",label:"A cuenta",modelValue:s.acuenta,"onUpdate:modelValue":a[8]||(a[8]=e=>s.acuenta=e),step:"0.1",outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",gs,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Ki((()=>[fs,bs,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",vs,[(0,i.Wm)(c,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Ki((()=>[Ws,ws,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",ys,[(0,i.Wm)(m,{color:"accent",class:"",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",Vs,[(0,i.Wm)("div",xs,[(0,i.Wm)("div",Cs,[(0,i.Wm)("div",_s,[qs,e.$store.state.login.historialventalocal?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",Es,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[9]||(a[9]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",As,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[10]||(a[10]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ds,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",Ms,[(0,i.Wm)(g,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:Ki((a=>[(0,i.Wm)(h,{props:a},{default:Ki((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"local",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.local),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:Ki((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:Ki((()=>[(0,i.Wm)(c,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:Ki((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:Ki((()=>["ANULADO"!=a.row.estado&&e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"cancel",color:"red",onClick:e=>n.anular(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:1},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(m,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",Ts,[(0,i.Wm)(m,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])])])),_:1})})),ks={name:"Venta",data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.$axios.get("http://192.168.100.8:81/api/listacliente").then((e=>{e.data.forEach((e=>{1==e.tipocliente&&this.clientes.push({label:e.local+" "+e.titular,id:e.id})}))})),this.$axios.get("http://192.168.100.8:81/api/listaproducto").then((e=>{e.data.forEach((e=>{"LOCAL"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("http://192.168.100.8:81/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{impruta(e){this.$axios.post("http://192.168.100.8:81/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("http://192.168.100.8:81/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestmos "+e.model.label),t.text(5,1.5,"DE "+Be()(e.fecha4).format("DD/MM/YYYY")+" AL "+Be()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,e.fecha.toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+Be()(e.fecha2).format("DD/MM/YYYY")+" AL "+Be()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(9.5,3,"Local"),t.text(13.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;t.setFontSize(8),this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(13.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"LOCAL"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,observacion:e.observacion,user:e.user.name})})),console.log(this.ventas)}))},agregar(){},impboleta(e){console.log(e),this.$axios.post("http://192.168.100.8:81/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},guardar(){return 0==this.model?(this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",html:!0,position:"center",icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,tipo:"LOCAL",observacion:this.observacion,cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500),this.misventas(),this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",icon:"error",html:!0,position:"center"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",html:!0,icon:"error",position:"center"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};ks.render=Ss,ks.__scopeId="data-v-0857cd66";const Os=ks;k()(ks,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QBadge:re.Z,QBtn:D.Z,QTable:de.Z,QTd:me.Z,QIcon:_.Z,QTr:ce.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(ks,"directives",{ClosePopup:he.Z});const Rs={class:"row"},Ns={class:"col-12"},Us=(0,i.Wm)("div",{class:"text-h6"},[(0,i.Wm)("h5",{style:{"text-align":"center"}},"Reporte de Ventas por Usuario")],-1),Ys={class:"row"},Is={class:"col-3"},Ps={class:"col-2"},$s={class:"col-2"},Fs={class:"col-2 flex flex-center"},Ls={class:"q-pa-md"},zs={class:" responsive"},Zs={id:"example",style:{width:"100%"},class:"cell-border"},js=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado")])],-1),Bs=(0,i.Uk)("LOCAL"),Qs=(0,i.Uk)("CLIENTE"),Gs=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Hs=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1),Js={class:"col-12"},Ks={class:"row"},Xs={class:"col-4 q-pa-md"},en={class:"col-4 q-pa-md"},an={class:"col-4 q-pa-md"},tn={class:"q-pa-md",hidden:""};function on(e,a,t,l,s,n){const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-table"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-td"),W=(0,i.up)("q-icon"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",Rs,[(0,i.Wm)("div",Ns,[Us,(0,i.Wm)(m,{onSubmit:n.generar},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ys,[(0,i.Wm)("div",Is,[(0,i.Wm)(r,{modelValue:s.usuario,"onUpdate:modelValue":a[1]||(a[1]=e=>s.usuario=e),outlined:"",options:s.usuarios,"option-label":"name","option-value":"id",label:"Usuarios",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Ps,[(0,i.Wm)(d,{outlined:"",type:"date",modelValue:s.fecha,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha=e),label:"Fecha ini",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",$s,[(0,i.Wm)(d,{outlined:"",type:"date",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=s.fecha||"Fecha debe ser mayor o igual"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Fs,[(0,i.Wm)(c,{label:"Generar",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Ls,[(0,i.Wm)("div",zs,[(0,i.Wm)("table",Zs,[js,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:(0,i.w5)((()=>[Bs])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:(0,i.w5)((()=>[Qs])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[Gs])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{title:"Pagos",rows:s.pagos,columns:s.colrep,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[w]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dialog_pago=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,null,{default:(0,i.w5)((()=>[Hs])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(d,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[w]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])]),(0,i.Wm)("div",Js,[(0,i.Wm)(m,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",Ks,[(0,i.Wm)("div",Xs,[(0,i.Wm)(d,{type:"text",label:"Venta total","label-color":"positive",modelValue:n.ventat,"onUpdate:modelValue":a[8]||(a[8]=e=>n.ventat=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",en,[(0,i.Wm)(d,{type:"text",label:"Saldo caja","label-color":"info",modelValue:n.porc,"onUpdate:modelValue":a[9]||(a[9]=e=>n.porc=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",an,[(0,i.Wm)(d,{type:"text",label:"Por cobrar","label-color":"negative",modelValue:n.saldoc,"onUpdate:modelValue":a[10]||(a[10]=e=>n.saldoc=e),outlined:""},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",tn,[(0,i.Wm)(h,{title:"Reporte Deudores",rows:s.deudas,columns:s.columns2,"row-key":"local",filter:s.filter},{"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(v,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e.row)},null,8,["onClick"]),"POR COBRAR"==e.row.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[11]||(a[11]=e=>s.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(W,{name:"search"})])),_:1},8,["modelValue"])])),_:1},8,["rows","columns","filter"])])])])}const ln={data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),usuarios:[],filter:"",usuario:"",ventas:[],deudas:[],regpago:{},pagos:{},dato:{},alert:!1,dialog_pago:!1,colrep:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns:[{name:"local",label:"local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"total",field:"total"},{name:"cuenta",align:"center",label:"cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"saldo",field:"saldo"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"Tipo",field:"tipo"},{name:"usuario",align:"center",label:"usuario",field:"name"}],columns2:[{name:"local",label:"Local",align:"center",field:"local",sortable:!0},{name:"titular",align:"center",label:"Titular",field:"titular",sortable:!0},{name:"total",align:"center",label:"Total",field:"total"},{name:"cuenta",align:"center",label:"Cuenta",field:"cuenta"},{name:"saldo",align:"center",label:"Saldo",field:"saldo"},{name:"fecha",align:"center",label:"fecha",field:"fecha"},{name:"estado",align:"center",label:"Estado",field:"estado"},{name:"tipo",align:"center",label:"tipo",field:"tipocliente"},{name:"usuario",align:"center",label:"usuario",field:"name"},{name:"opcion",align:"center",label:"opcion",field:"opcion"}]}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})},created(){this.listado(),this.deudores()},methods:{onPago(){this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.$axios.post("http://192.168.100.8:81/api/listuser").then((e=>{console.log(e.data),this.usuarios.push({id:"0",name:"Todos"}),e.data.forEach((e=>{this.usuarios.push(e)})),this.usuarios.length>0&&(this.usuario=e.data[0])}))},deudores(){this.deudas=[],this.$axios.post("http://192.168.100.8:81/api/listadodeudores").then((e=>{console.log(e.data),e.data.forEach((e=>{let a="";a=1==e.cliente.tipocliente?"LOCAL":"DETALLE",this.deudas.push({id:e.id,local:e.cliente.local,titular:e.cliente.titular,total:e.total,cuenta:e.acuenta,saldo:e.saldo,tipocliente:a,fecha:e.fecha,estado:e.estado,name:e.user.name,pagos:e.pagos})}))}))},generar(){this.ventas=[],this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/listadoventa",{ini:this.fecha,fin:this.fecha2,id:this.usuario.id}).then((e=>{console.log(e.data),this.$q.loading.hide(),e.data.forEach((e=>{this.ventas.push({local:e.cliente.local,tipo:e.tipo,titular:e.cliente.titular,cuenta:e.acuenta,saldo:e.saldo,total:e.total,estado:e.estado,name:e.user.name})})),se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0}},computed:{ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.cuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};ln.render=on;const sn=ln;k()(ln,"components",{QForm:q.Z,QSelect:Ge.Z,QInput:E.Z,QBtn:D.Z,QTable:de.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z,QTd:me.Z,QIcon:_.Z}),k()(ln,"directives",{ClosePopup:he.Z});const nn={class:"q-pa-md"},rn={class:"text-h7"},dn=(0,i.Uk)(" REGISTRO DE NUEVO USUARIO"),cn={class:"row"},mn={class:"col-6"},un={class:"col-6"},pn=(0,i.Wm)("div",{class:"text-5"},"Permisos",-1),hn={class:"text-h7"},gn=(0,i.Uk)(" MODIFICAR DATOS DE USUARIO"),fn=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1),bn={class:"text-h7 text-white"},vn=(0,i.Uk)(" PERMISOS DE ACCESO");function Wn(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-icon"),c=(0,i.up)("q-card-section"),m=(0,i.up)("q-input"),u=(0,i.up)("q-checkbox"),p=(0,i.up)("q-form"),h=(0,i.up)("q-card"),g=(0,i.up)("q-dialog"),f=(0,i.up)("q-badge"),b=(0,i.up)("q-td"),v=(0,i.up)("q-table"),W=(0,i.up)("q-avatar"),w=(0,i.up)("q-card-actions"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",nn,[(0,i.Wm)(r,{label:"Nuevo usuario",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(g,{modelValue:s.alert,"onUpdate:modelValue":a[6]||(a[6]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",rn,[(0,i.Wm)(d,{name:"add_circle"}),dn])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",cn,[(0,i.Wm)("div",mn,[(0,i.Wm)(m,{filled:"",modelValue:s.dato.name,"onUpdate:modelValue":a[2]||(a[2]=e=>s.dato.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.email,"onUpdate:modelValue":a[3]||(a[3]=e=>s.dato.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato.password,"onUpdate:modelValue":a[4]||(a[4]=e=>s.dato.password=e),type:"password",label:"Contraseña",hint:"Contraseña","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",hint:"Fecha limite de acceso",modelValue:s.dato.fechalimite,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.fechalimite=e)},null,8,["modelValue"])]),(0,i.Wm)("div",un,[pn,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)(u,{style:{width:"100%"},key:a,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])))),128))])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{filter:s.filter,title:"REGISTRO DE USUARIOS",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(m,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[7]||(a[7]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(d,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{color:"ACTIVO"==e.row.estado?"green":"red",label:e.row.estado,onClick:a=>n.cambioEstado(e.row)},null,8,["color","label","onClick"])])),_:2},1032,["props"])])),"body-cell-permisos":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"permisos",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)("ul",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.permisos,((e,a)=>((0,i.wg)(),(0,i.j4)("li",{key:a},(0,R.zw)(e.nombre),1)))),128))])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(b,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"yellow",onClick:a=>n.editRow(e),icon:"edit"},null,8,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"positive",onClick:a=>n.cambiopass(e),icon:"vpn_key"},null,8,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"green-10",onClick:a=>n.mispermisos(e),icon:"post_add"},null,8,["onClick"]),(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"]),(0,i.Wm)(g,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[11]||(a[11]=e=>s.dialog_mod=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-warning text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",hn,[(0,i.Wm)(d,{name:"edit"}),gn])])),_:1}),(0,i.Wm)(c,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:n.onMod,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{filled:"",modelValue:s.dato2.name,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dato2.name=e),type:"text",label:"Nombre ",hint:"Ingresar Nombre","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",modelValue:s.dato2.email,"onUpdate:modelValue":a[9]||(a[9]=e=>s.dato2.email=e),type:"email",label:"Email",hint:"Correo electronico","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(m,{filled:"",label:"Fecha limite",type:"date",modelValue:s.dato2.fechalimite,"onUpdate:modelValue":a[10]||(a[10]=e=>s.dato2.fechalimite=e)},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.dialog_del,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,null,{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{icon:"clear",color:"red","text-color":"white"}),fn])),_:1}),(0,i.Wm)(w,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{flat:"",label:"Eliminar",color:"deep-orange",onClick:n.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cancelar",color:"primary"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(g,{modelValue:s.modelpermiso,"onUpdate:modelValue":a[13]||(a[13]=e=>s.modelpermiso=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{style:{width:"700px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{class:"bg-info"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",bn,[(0,i.Wm)(d,{name:"folder"}),vn])])),_:1}),(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.Wm)(p,{onSubmit:(0,o.iM)(n.updatepermisos,["prevent"])},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.permisos2,((e,a)=>((0,i.wg)(),(0,i.j4)(u,{style:{width:"100%"},key:a,label:e.nombre,modelValue:e.estado,"onUpdate:modelValue":a=>e.estado=a},null,8,["label","modelValue","onUpdate:modelValue"])))),128)),(0,i.Wm)(r,{type:"submit",color:"info",icon:"send",label:"Actualizar"})])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}const{addToDate:wn}=le.ZP,yn={data(){return{alert:!1,dialog_mod:!1,dialog_del:!1,filter:"",dato:{fechalimite:le.ZP.formatDate(wn(new Date,{days:7}),"YYYY-MM-DD")},model:"",dato2:{},options:[],props:[],unidades:[],permisos:[],permisos2:[],modelpermiso:!1,uni:{},columns:[{name:"name",align:"left",label:"NOMBRE ",field:"name",sortable:!0},{name:"estado",align:"left",label:"ESTADO ",field:"estado",sortable:!0},{name:"email",align:"left",label:"E-MAIL",field:"email",sortable:!0},{name:"permisos",align:"left",label:"PERMISOS",field:"permisos",sortable:!0},{name:"fechalimite",align:"left",label:"FECHA LÍMITE",field:e=>le.ZP.formatDate(e.fechalimite,"DD/MM/YYYY"),sortable:!0},{name:"opcion",label:"OPCIÓN",field:"action",sortable:!1}],data:[]}},created(){this.misdatos(),this.$axios.get("http://192.168.100.8:81/api/permiso").then((e=>{e.data.forEach((e=>{this.permisos.push({id:e.id,nombre:e.nombre,estado:!1}),this.permisos2.push({id:e.id,nombre:e.nombre,estado:!1})}))}))},methods:{cambioEstado(e){this.$axios.post("http://192.168.100.8:81/api/cambioestado",e).then((e=>{this.misdatos()}))},updatepermisos(){this.$axios.put("http://192.168.100.8:81/api/updatepermisos/"+this.dato2.id,{permisos:this.permisos2}).then((e=>{this.modelpermiso=!1,this.misdatos()})).catch((e=>{this.$q.notify({message:e.response.data.message,icon:"close",color:"red"})}))},mispermisos(e){let a;this.modelpermiso=!0,this.dato2=e.row,this.permisos2.forEach((e=>{a=this.dato2.permisos.find((a=>a.pivot.permiso_id==e.id)),e.estado=void 0!=a}))},misdatos(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/user").then((e=>{console.log(e.data),this.data=e.data,this.$q.loading.hide()}))},editRow(e){this.dato2=e.row,this.dato2.unid_id=e.row.unid,this.dialog_mod=!0},deleteRow(e){this.dato2=e.row,this.dialog_del=!0},onSubmit(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/user",{name:this.dato.name,password:this.dato.password,email:this.dato.email,celular:this.dato.celular,carnet:this.dato.carnet,fechalimite:this.dato.fechalimite,permisos:this.permisos}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.dato={fechalimite:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/user/"+this.dato2.id,{name:this.dato2.name,email:this.dato2.email,carnet:this.dato2.carnet,celular:this.dato2.celular,fechalimite:this.dato2.fechalimite}).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.misdatos()}))},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/user/"+this.dato2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.misdatos()})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))},onReset(){this.dato.nombre=null,this.dato.inicio=0,this.dato.fin=0},cambiopass(e){this.$q.dialog({title:"CAMBIAR PASSWORD",message:"Ingresar nueva contraseña",prompt:{model:"",type:"password"},cancel:!0,persistent:!0}).onOk((a=>{this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/pass/"+e.row.id,{password:a}).then((e=>{this.$q.loading.hide()}))})).onCancel((()=>{})).onDismiss((()=>{}))}}};var Vn=t(65735);yn.render=Wn;const xn=yn;k()(yn,"components",{QBtn:D.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QForm:q.Z,QInput:E.Z,QSelect:Ge.Z,QCheckbox:Vn.Z,QTable:de.Z,QTd:me.Z,QBadge:re.Z,QAvatar:pe.Z,QCardActions:T.Z}),k()(yn,"directives",{ClosePopup:he.Z});const Cn=(0,i.HX)("data-v-6206e257");(0,i.dD)("data-v-6206e257");const _n={class:"row"},qn=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-red text-center text-white"},"CONTROL DE GASTOS")],-1),En={class:"col-6 col-sm-2 q-pa-xs"},An={key:0,class:"col-6 col-sm-2 q-pa-xs"},Dn={class:"col-6 col-sm-2 q-pa-xs"},Mn={key:1,class:"col-6 col-sm-3 q-pa-xs"},Tn={class:"col-6 col-sm-3 q-pa-xs flex flex-center"},Sn={class:"col-12"},kn={class:"row"},On={class:"col-12 q-pa-xs col-sm-1"},Rn={class:"col-12 q-pa-xs col-sm-3"},Nn=(0,i.Uk)(" No results "),Un={class:"col-12 q-pa-xs col-sm-1"},Yn={class:"col-12 q-pa-xs col-sm-3"},In={class:"col-12 q-pa-xs col-sm-2"},Pn={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},$n={class:"col-12 q-pa-xs col-sm-2 flex flex-center"},Fn={class:"col-4"},Ln={class:"col-12"},zn={class:"col-12 row"},Zn={class:"col-6 "},jn={class:"col-6 "},Bn={class:"col-12"},Qn={class:"col-12"},Gn={id:"example",style:{width:"100%"},class:"cell-border"},Hn=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"precio"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"observacion"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"user"),(0,i.Wm)("th",null,"action")])],-1),Jn=(0,i.Wm)("tfoot",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{colspan:"7",style:{"text-align":"right"}},"Total:"),(0,i.Wm)("th")])],-1),Kn=(0,i.Wm)("div",{class:"text-h5",align:"center"},"HISTORIAL DE GATOS DE CAJA CHICA",-1),Xn={id:"example2",style:{width:"100%"},class:"cell-border"},er=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"id"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"glosa"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"fecha"),(0,i.Wm)("th",null,"hora"),(0,i.Wm)("th",null,"usuario"),(0,i.Wm)("th",null,"opcion")])],-1),ar={class:"text-h6"},tr={class:"row"},or={class:"col-3"},lr={class:"col-3"},ir={class:"col-3"},sr={class:"col-3"},nr={key:0,class:"col-3"},rr={class:"col-3 flex flex-center"},dr={class:"text-h6"},cr={class:"row"},mr={class:"col-12"},ur=(0,i.Uk)(" No results "),pr={class:"col-12"},hr={class:"col-12"},gr={class:"col-3 flex flex-center"},fr={class:"text-h6"},br={class:"row"},vr={class:"col-12"},Wr=(0,i.Uk)(" No results "),wr={class:"col-12"},yr={class:"col-12"},Vr={class:"col-3 flex flex-center"},xr=(0,i.Wm)("div",{class:"text-h6"},"Registro / Mod Glosa",-1),Cr={class:"row"},_r={class:"col-6"},qr={class:"col-3"},Er={class:"col-3 "};(0,i.Cn)();const Ar=Cn(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-select"),m=(0,i.up)("q-btn"),u=(0,i.up)("q-item-section"),p=(0,i.up)("q-item"),h=(0,i.up)("q-form"),g=(0,i.up)("q-td"),f=(0,i.up)("q-card-section"),b=(0,i.up)("q-radio"),v=(0,i.up)("q-table"),W=(0,i.up)("q-card-actions"),w=(0,i.up)("q-card"),y=(0,i.up)("q-dialog"),V=(0,i.up)("q-page"),x=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(V,{class:"q-pa-xs"},{default:Cn((()=>[(0,i.Wm)("div",_n,[qn,(0,i.Wm)("div",En,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",An,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Dn,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA"},null,8,["modelValue","label"])]),e.$store.state.login.gastoreporteuser?((0,i.wg)(),(0,i.j4)("div",Mn,[(0,i.Wm)(c,{dense:"",modelValue:s.user,"onUpdate:modelValue":a[4]||(a[4]=e=>s.user=e),options:s.users,label:"Usuarios",outlined:""},null,8,["modelValue","options"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Tn,[(0,i.Wm)(m,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misgastos},null,8,["onClick"])]),(0,i.Wm)("div",Sn,[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Cn((()=>[(0,i.Wm)("div",kn,[(0,i.Wm)("div",On,[(0,i.Wm)(r,{dense:"",outlined:"",type:"number",step:"0.1",label:"Precio",modelValue:s.empleado.precio,"onUpdate:modelValue":a[5]||(a[5]=e=>s.empleado.precio=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Rn,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[6]||(a[6]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Cn((()=>[(0,i.Wm)(p,null,{default:Cn((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Cn((()=>[Nn])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",Un,[e.$store.state.login.editglosa?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"green",icon:"add_circle",onClick:a[7]||(a[7]=e=>s.dialogaddglosa=!0)})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Yn,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Observacion",modelValue:s.empleado.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.empleado.observacion=e),style:{"text-transform":"uppercase"},required:""},null,8,["modelValue"])]),(0,i.Wm)("div",In,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Fecha ",type:"date",modelValue:s.empleado.fecha,"onUpdate:modelValue":a[9]||(a[9]=e=>s.empleado.fecha=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pn,[(0,i.Wm)(m,{icon:"send",label:s.boolcrear?"CREAR":"MODIFICAR",type:"submit",color:s.boolcrear?"positive":"warning"},null,8,["label","color"])])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",$n,[(0,i.Wm)("div",Fn,[(0,i.Wm)(c,{dense:"",outlined:"",label:"Empleado",modelValue:s.empleadopago,"onUpdate:modelValue":a[10]||(a[10]=e=>s.empleadopago=e),options:s.empleados},null,8,["modelValue","options"])]),(0,i.Wm)(m,{icon:"send",label:"Adelanto",type:"button",color:"teal",onClick:n.cargarPagos},null,8,["onClick"]),(0,i.Wm)(m,{icon:"price_change",label:"Caja Chica",type:"button",color:"accent",onClick:a[11]||(a[11]=e=>s.cajachica=!0)})])]),(0,i.Wm)("div",Ln,[(0,i.Wm)(m,{label:"Imprimir mis gastos",icon:"print",color:"info",class:"full-width",onClick:a[12]||(a[12]=e=>n.imprimir(s.user))})]),(0,i.Wm)("div",zn,[(0,i.Wm)("div",Zn,[(0,i.Wm)(m,{label:"Imprimir mis ventas Detalle",icon:"print",color:"teal",style:{width:"100%"},onClick:a[13]||(a[13]=e=>n.imprimirmisventasdetalle(s.user))})]),(0,i.Wm)("div",jn,[(0,i.Wm)(m,{label:"Imprimir mis ventas Local",icon:"print",color:"warning",style:{width:"100%"},onClick:a[14]||(a[14]=e=>n.imprimirmisventaslocal(s.user))})])]),(0,i.Wm)("div",Bn,[(0,i.Wm)(m,{label:"Imprimir mis ventas y gastos",icon:"print",color:"accent",class:"full-width",onClick:a[15]||(a[15]=e=>n.impresionventagasto(s.user))})]),(0,i.Wm)("div",Qn,[(0,i.Wm)("table",Gn,[Hn,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.gastos,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.i},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.precio),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.observacion),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(g,null,{default:Cn((()=>[(0,i.Wm)(m,{color:"warning","icon-right":"edit","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.updateval(a)},null,8,["onClick"]),e.$store.state.login.eliminargasto?((0,i.wg)(),(0,i.j4)(m,{key:0,color:"negative","icon-right":"delete","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.deleteval(a)},null,8,["onClick"])):(0,i.kq)("",!0),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:1,color:"info","icon-right":"print","no-caps":"",flat:"",size:"xs",dense:"",onClick:e=>n.printgasto(a)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1024)])])))),128))]),Jn]),Kn,(0,i.Wm)("table",Xn,[er,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.chica,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.id),1),(0,i.Wm)("td",null,(0,R.zw)(a.monto),1),(0,i.Wm)("td",null,(0,R.zw)(a.glosa),1),(0,i.Wm)("td",null,(0,R.zw)(a.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.hora),1),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:0,size:"xs",onClick:e=>n.modifcaja(a),color:"yellow",icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(m,{key:1,size:"xs",onClick:e=>n.printcaja(a),color:"primary",icon:"print"},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])]),(0,i.Wm)(y,{modelValue:s.pagos,"onUpdate:modelValue":a[22]||(a[22]=e=>s.pagos=e),"full-width":""},{default:Cn((()=>[(0,i.Wm)(w,null,{default:Cn((()=>[(0,i.Wm)(f,null,{default:Cn((()=>[(0,i.Wm)("div",ar,"Historial de "+(0,R.zw)(s.empleadopago.nombre),1)])),_:1}),(0,i.Wm)(f,{class:"q-pt-none"},{default:Cn((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregarpago,["prevent"])},{default:Cn((()=>[(0,i.Wm)("div",tr,[(0,i.Wm)("div",or,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.01",modelValue:s.pago.monto,"onUpdate:modelValue":a[16]||(a[16]=e=>s.pago.monto=e),required:""},null,8,["modelValue"])]),(0,i.Wm)("div",lr,[(0,i.Wm)(c,{outlined:"",label:"Tipo",modelValue:s.pago.tipo,"onUpdate:modelValue":a[17]||(a[17]=e=>s.pago.tipo=e),options:["DESCUENTO","ADELANTO","EXTRA"]},null,8,["modelValue"])]),(0,i.Wm)("div",ir,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.pago.observacion,"onUpdate:modelValue":a[18]||(a[18]=e=>s.pago.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",sr,[(0,i.Wm)(r,{outlined:"",label:"Fecha",type:"date",modelValue:s.pago.fecha,"onUpdate:modelValue":a[19]||(a[19]=e=>s.pago.fecha=e)},null,8,["modelValue"])]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)("div",nr,[(0,i.Wm)(b,{modelValue:s.checkgasto,"onUpdate:modelValue":a[20]||(a[20]=e=>s.checkgasto=e),val:"GASTO",label:"GASTO"},null,8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.checkgasto,"onUpdate:modelValue":a[21]||(a[21]=e=>s.checkgasto=e),val:"CAJA",label:"CAJA CHICA"},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",rr,[(0,i.Wm)(m,{label:"Agregar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(v,{title:"Hitorial de pagos","rows-per-page-options":[50,100,0],columns:s.columns2,rows:s.listpagos},{"body-cell-opcion":Cn((e=>[(0,i.Wm)(g,{key:"opcion",props:e},{default:Cn((()=>[(0,i.Wm)(m,{dense:"",round:"",flat:"",color:"teal",onClick:a=>n.printRow(e),icon:"print"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:Cn((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"OK"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(y,{modelValue:s.cajachica,"onUpdate:modelValue":a[26]||(a[26]=e=>s.cajachica=e)},{default:Cn((()=>[(0,i.Wm)(w,null,{default:Cn((()=>[(0,i.Wm)(f,null,{default:Cn((()=>[(0,i.Wm)("div",dr,"Registro Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(f,{class:"q-pt-none"},{default:Cn((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.agregarcjchica,["prevent"])},{default:Cn((()=>[(0,i.Wm)("div",cr,[(0,i.Wm)("div",mr,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[23]||(a[23]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Cn((()=>[(0,i.Wm)(p,null,{default:Cn((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Cn((()=>[ur])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",pr,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica.precio,"onUpdate:modelValue":a[24]||(a[24]=e=>s.cchica.precio=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",hr,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica.observacion,"onUpdate:modelValue":a[25]||(a[25]=e=>s.cchica.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",gr,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info",loading:s.loading},null,8,["loading"])])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:Cn((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(y,{modelValue:s.modifcajachica,"onUpdate:modelValue":a[30]||(a[30]=e=>s.modifcajachica=e)},{default:Cn((()=>[(0,i.Wm)(w,null,{default:Cn((()=>[(0,i.Wm)(f,null,{default:Cn((()=>[(0,i.Wm)("div",fr,"Modificar Gasto de Caja Chica "+(0,R.zw)(s.montocajachica)+" Bs",1)])),_:1}),(0,i.Wm)(f,{class:"q-pt-none"},{default:Cn((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.modificarcjchica,["prevent"])},{default:Cn((()=>[(0,i.Wm)("div",br,[(0,i.Wm)("div",vr,[(0,i.Wm)(c,{outlined:"",modelValue:s.glosa,"onUpdate:modelValue":a[27]||(a[27]=e=>s.glosa=e),options:s.glosas,label:"Glosa","use-input":"",onFilter:n.filterFn,dense:""},{"no-option":Cn((()=>[(0,i.Wm)(p,null,{default:Cn((()=>[(0,i.Wm)(u,{class:"text-grey"},{default:Cn((()=>[Wr])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",wr,[(0,i.Wm)(r,{outlined:"",label:"Monto",type:"number",step:"0.1",modelValue:s.cchica2.monto,"onUpdate:modelValue":a[28]||(a[28]=e=>s.cchica2.monto=e),rules:[e=>e>0&&e<=s.montocajachica||"No debe exceder el monto"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",yr,[(0,i.Wm)(r,{outlined:"",label:"Observacion",type:"text",modelValue:s.cchica2.motivo,"onUpdate:modelValue":a[29]||(a[29]=e=>s.cchica2.motivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vr,[(0,i.Wm)(m,{label:"Registrar",type:"submit",icon:"send",color:"info"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:Cn((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(y,{modelValue:s.dialogaddglosa,"onUpdate:modelValue":a[33]||(a[33]=e=>s.dialogaddglosa=e)},{default:Cn((()=>[(0,i.Wm)(w,null,{default:Cn((()=>[(0,i.Wm)(f,null,{default:Cn((()=>[xr])),_:1}),(0,i.Wm)(f,{class:"q-pt-none"},{default:Cn((()=>[(0,i.Wm)(h,{onSubmit:(0,o.iM)(n.regglosa,["prevent"])},{default:Cn((()=>[(0,i.Wm)("div",Cr,[(0,i.Wm)("div",_r,[(0,i.Wm)(r,{outlined:"",label:"Nombre",modelValue:s.glosa.nombre,"onUpdate:modelValue":a[31]||(a[31]=e=>s.glosa.nombre=e),rules:[e=>e.length>0||"INGRESE NOMBRE"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",qr,[(0,i.Wm)(r,{outlined:"",label:"N orden",modelValue:s.glosa.orden,"onUpdate:modelValue":a[32]||(a[32]=e=>s.glosa.orden=e),type:"number",rules:[e=>e>=0||"INGRESE nummero"],"lazy-rules":""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Er,[(0,i.Wm)(m,{label:"Reg/Mod",type:"submit",icon:"send",color:"info",dense:""})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(W,{align:"right",class:"bg-white text-teal"},{default:Cn((()=>[(0,i.wy)((0,i.Wm)(m,{flat:"",label:"Cerrar"},null,512),[[x]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})}));var Dr=t(59988),Mr=t.n(Dr);const Tr={name:"Venta",data(){return{filter:"",loading:!1,filtercaja:"",cchica:{},cchica2:{},glosa:{},glosas:[],chica:[],checkgasto:"CAJA",dialogaddglosa:!1,pagos:!1,cajachica:!1,modifcajachica:!1,pago:{fecha:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},empleados:[],empleadohistorial:{},boolcrear:!0,gastos:[],anulados:[],rango:"RANGO",empleadopago:{},rpagos:[],reporteventa:[],prestamoventa:[],users:[],user:{},gl:[],filterglosa:[],listpagos:[],pageTotal:"",tot:"",resumenplanilla:0,empleado:{fecha:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),montocajachica:0,montogeneral:0,columns:[{name:"id",label:"Id",field:"id"},{name:"precio",label:"Precio",field:"precio"},{name:"glosa",label:"Glosa",field:e=>e.glosa.nombre},{name:"observacion",label:"Observacion",field:"observacion"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"action",label:"Action",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha",sortable:!0},{name:"hora",label:"Hora",field:"hora"},{name:"tipo",label:"Tipo",field:"tipo",sortable:!0},{name:"monto",label:"Monto",field:"monto"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"nombre",label:"Empleado",field:"nombre"},{name:"salario",label:"Sueldo",field:"salario"},{name:"pago",label:"Pago",field:"pago"},{name:"adelanto",label:"Adelanto",field:"adelanto"},{name:"descuento",label:"Descuento",field:"descuento"}],columns4:[{name:"id",label:"Id",field:"id"},{name:"monto",label:"Monto",field:"monto"},{name:"glosa",label:"Glosa",field:"glosa"},{name:"motivo",label:"Motivo",field:"motivo"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"hora",label:"Hora",field:"hora"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion"}],encabezado:{id:"id",Monto:"monto",Glosa:"glosa",Motivo:"glosa",Fecha:"fecha",Hora:"hora",Usuario:"user"}}},mounted(){se()("#example").DataTable(),se()("#example2").DataTable(),this.misglosa(),this.listadog(),this.misempleados(),this.totalcaja(),this.totalgeneral(),this.misuser(),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.misgastos()},methods:{cargarPagos(){console.log(this.empleadopago),this.$axios.get("http://192.168.100.8:81/api/empleado/"+this.empleadopago.id).then((e=>{console.log(e.data),this.listpagos=e.data,this.pagos=!0}))},modificarcjchica(){if(void 0==this.glosa.id)return!1;this.cchica2.glosa_id=this.glosa.id,this.$axios.put("http://192.168.100.8:81/api/logcaja/"+this.cchica2.id,this.cchica2).then((e=>{console.log(e.data),this.modifcajachica=!1,this.glosa={label:""},this.misgastos(),this.totalcaja(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})}))},exportTable(){let e=[{sheet:"Caja Chica",columns:[{label:"id",value:"id"},{label:"Monto",value:"monto"},{label:"Glosa",value:"glosa"},{label:"Motivo",value:"motivo"},{label:"fecha",value:"fecha"},{label:"Hora",value:"hora"},{label:"Usuario",value:"user"}],content:this.chica}],a={fileName:"CajaChica",extraLength:7,writeOptions:{}};Mr()(e,a)},totalgeneral(){this.$axios.post("http://192.168.100.8:81/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},regglosa(){void 0==this.glosa.id?this.$axios.post("http://192.168.100.8:81/api/glosa",{nombre:this.glosa.nombre,orden:void 0==this.glosa.orden?0:this.glosa.orden}).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})})):(void 0!=this.glosa.orden&&this.glosa.orden,this.$axios.put("http://192.168.100.8:81/api/glosa/"+this.glosa.id,this.glosa).then((e=>{this.misglosa(),this.dialogaddglosa=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"})})))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.glosas=this.filterglosa.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.glosas=this.filterglosa})},printRow(e){this.$axios.get("http://192.168.100.8:81/api/impade/"+e.row.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},modifcaja(e){this.cchica2=e;let a=e.gl;a.label=a.nombre,this.glosa=a,this.modifcajachica=!0,console.log(this.cchica2)},printcaja(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO CAJA CHICA</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+Be()(e.fecha).format("DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.monto+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.motivo+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.print(),t.close()},agregarcjchica(){if(void 0==this.glosa.id)return!1;this.loading=!0,this.cchica.glosa_id=this.glosa.id,this.$axios.post("http://192.168.100.8:81/api/gastocaja",this.cchica).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.cchica.precio=0,this.cchica.observacion="",this.cajachica=!1,this.glosa={},this.misgastos(),this.totalcaja(),this.loading=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Registrado correctamente"})}))},totalcaja(){this.$axios.post("http://192.168.100.8:81/api/totalcaja").then((e=>{this.montocajachica=e.data.monto}))},listadog(){this.$axios.post("http://192.168.100.8:81/api/listglosa").then((e=>{this.gl=e.data}))},misuser(){this.$axios.post("http://192.168.100.8:81/api/listuser").then((e=>{this.users=[{label:"TODOS",id:0}],e.data.forEach((e=>{this.users.push({label:e.name,id:e.id})})),this.user=this.users[0]}))},misglosa(){this.glosas=[{label:""}],this.$axios.get("http://192.168.100.8:81/api/glosa").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.glosas.push(e)})),this.filterglosa=this.glosas,this.glosa=this.glosas[0]}))},async impresionventagasto(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o=0,l=0,i="style='color:red'",s="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL DE INGRESOS Y GASTOS DE "+e.label+" "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";this.ventas.length>0&&(s+="<div>VENTAS DETALLE Y LOCAL</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(t+=e.acuenta,s+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{s+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),s+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(s+=i),s+=">"+e.estado+"</td></tr>")})),s+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>",this.totalruta&&(s+="<div>VENTAS CON RUTA</div>         <table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(o+=e.acuenta,s+="<tr><td>R-"+e.id+"</td><td>",e.detalles.forEach((e=>{s+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),s+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(s+=i),s+=">"+e.estado+"</td></tr>")})),s+="</table><div><b>TOTAL VENTAS RUTA:</b>"+o+"</div><br>        "));let n=0;this.totalanulado>0&&(n+=this.totalanulado,s+="<div>INGRESOS DE ANULADOS PRESTAMOS</div>        <table>          <tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>TITULAR</th><th>LOCAL</th></tr>",this.anulados.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local.toString():"",s+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs</td>              <td>"+e.cliente.titular+"</td><td>"+e.cliente.local+"</td></tr>"})),s+="</table><div><b>TOTAL ANULADO:</b>"+this.totalanulado+"</div><br>");let r=0;if(this.totalpresventa>0&&(s+="<div>INGRESOS DE VENTA MATERIAL</div>        <table><tr><th>CANTIDAD</th><th>MATERIAL</th><th>EFECTIVO</th><th>TITULAR</th><th>LOCAL</th></tr>",this.prestamoventa.forEach((e=>{e.cliente.local=null!=e.cliente.local?e.cliente.local:"",s+="<tr><td>"+e.cantidad+"</td><td>"+e.inventario.nombre+"</td><td>"+e.efectivo+" Bs.</td><td>"+e.cliente.titular+"</td><td>"+e.cliente.local+"</td></tr>",r+=parseFloat(e.efectivo)})),s+="</table><div><b>TOTAL VENTA MATERIAL: </b> "+this.totalpresventa+" Bs</div><br>"),this.rpagos.length>0){let e="";s+="<div>INGRESOS DE PENDIENTES DE PAGO</div>        <table><tr><th>TIPO</th><th>DETALLE</th><th>MONTO</th><th>TITULAR</th><th>LOCAL</th></tr>",this.rpagos.forEach((a=>{l+=a.monto,e=null!=a.venta.fechaentrega&&""!=a.venta.fechaentrega?"R-"+a.venta.id:a.venta.tipo.substring(0,1)+"-"+a.venta.id,a.venta.cliente.local=null!=a.venta.cliente.local?a.venta.cliente.local.toString():"",s+="<tr><td>"+e+"</td><td>",a.venta.detalles.forEach((e=>{s+=e.cantidad+" - "+e.nombreproducto+"<br>"})),s+="</td><td>"+a.monto+" Bs </td><td>"+a.venta.cliente.titular+"</td><td>"+a.venta.cliente.local+"</td></tr>"})),s+="</table><div><b>T.V. Pago: </b>"+this.totalpagos+"</div><br>"}let d=0,c=0;this.gastos.length>0&&(s+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{s+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?d+=parseFloat(null!=e.precio?e.precio:0):c+=parseFloat(null!=e.precio?e.precio:0)})),s+="</table><div><b>TOTAL GASTOS: </b>"+c+" Bs</div><br>"),this.chica.length>0&&(s+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{s+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",d+=parseFloat(null!=e.monto?e.monto:0)})),s+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+d+" Bs</div><br>"),s+="<table><tr><td>",t>0&&(s+="<div style='font-size:16px'><b>TOTAL VENTAS : </b>"+t+" Bs</div>"),o>0&&(s+="<div style='font-size:16px'><b>TOTAL VENTAS RUTA: </b>"+o+" Bs</div>"),r>0&&(s+="<div style='font-size:16px'><b>TOTAL VENTA MATERIAL: </b>"+r+" Bs</div>"),n>0&&(s+="<div style='font-size:16px'><b>TOTAL PRESTAMO ANULADOS: </b>"+n+" Bs</div>"),l>0&&(s+="<div style='font-size:16px'><b>TOTAL CXC PAGOS: </b>"+l+" Bs</div>"),s+="</td><td>",c>0&&(s+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+c+" Bs</div>"),s+="</td><td>",d>0&&(s+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+d+" Bs</div>"),s+="</td></tr></table>",s+="<div style='font-size:16px'><b>TOTAL SALDO: </b>"+(t+o+r+l-c)+" Bs</div>",1==this.$store.state.login.user.id&&(s+="<div style='font-size:16px'><b>SALARIOS : </b>"+this.resumenplanilla+" Bs</div>");let m=window.open("_blank");m.document.write(s),m.document.close()},imprimirmisventasygastos(e){let a=this;function t(){var t=new Image;t.src="logo.png",o.addImage(t,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"HISTORIAL DE INGRESOS Y GASTOS "+e.label),o.text(5,1.5,"DE "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"Tipo V"),o.text(2.5,3,"Cant"),o.text(3.5,3,"Producto"),o.text(7,3,"Total"),o.text(8.5,3,"Acuenta"),o.text(10,3,"Saldo"),o.text(11.5,3,"Titular"),o.text(15.5,3,"Local"),o.text(19,3,"Estado"),o.setFont(void 0,"normal")}this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);var o=new Lo.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0,i=0,s=0,n=0;this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||(l+=.5,o.setFontSize(6),o.text(1,l+3,e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),i+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T VENTA:"),o.text(3,l+3,i+" Bs."),l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------"),l+=.5,o.text(1,l+3,"REGISTRO DE VENTAS CON RUTA"),o.setFont(void 0,"normal"),this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega&&(l+=.5,o.setFontSize(6),o.text(1,l+3,"R-"+e.id),o.setFontSize(9),o.text(7,l+3,null!=e.total?e.total.toString():" Bs."),o.text(8.5,l+3,null!=e.acuenta?e.acuenta.toString():" Bs."),s+=parseFloat(null!=e.acuenta?e.acuenta:0),o.text(10,l+3,null!=e.saldo?e.saldo.toString():" Bs."),o.setFontSize(6),o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),o.setFontSize(9),"POR COBRAR"==e.estado&&o.setTextColor(255,0,0),o.text(19,l+3,e.estado+""),o.setTextColor(0,0,0)),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"TR VENTA:"),o.text(3,l+3,s+" Bs.");let r=0,d=0;i+=s,l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO"),o.setFont(void 0,"normal"),this.gastos.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.precio?e.precio+" Bs":"0 Bs."),"CAJA CHICA"==e.glosa?d+=parseFloat(null!=e.precio?e.precio:0):r+=parseFloat(null!=e.precio?e.precio:0),o.text(10,l+3,e.glosa+": "+e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T GASTO:"),o.text(3,l+3,r+"Bs."),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"DETALLE DE GASTO CAJA CHICA"),o.setFont(void 0,"normal"),this.chica.forEach((e=>{l+=.5,o.text(6.5,l+3,null!=e.monto?e.monto+" Bs":"0 Bs."),d+=parseFloat(null!=e.monto?e.monto:0),o.text(10,l+3,null==e.glosa?"GASTO":e.glosa+" : "+e.motivo),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"Gasto Caja Chica:"),o.text(6,l+3,d+"Bs."),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5;let c=0;o.setFont(void 0,"bold"),o.text(1,l+3,"INGRESOS DE ANULADOS PRESTAMOS"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.totalanulado>0&&(c+=this.totalanulado,this.anulados.forEach((e=>{l+=.5,o.text(2.5,l+3,e.cantidad+""),o.text(3.5,l+3,e.inventario.nombre),o.text(7,l+3,e.efectivo+" Bs"),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T. Anulado"),o.text(3,l+3,this.totalanulado+" Bs")),o.setFont(void 0,"bold"),l+=.5,o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE VENTA MATERIAL"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0);let m=0;this.prestamoventa.forEach((e=>{l+=.5,o.text(1,l+3,""),o.text(2.5,l+3,e.cantidad+""),o.setFontSize(6),o.text(3.5,l+3,e.inventario.nombre),o.setFontSize(9),o.text(7,l+3,e.efectivo+" Bs."),m+=parseFloat(e.efectivo),o.text(11.5,l+3,null!=e.cliente.titular?e.cliente.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.cliente.local?e.cliente.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,o.text(1,l+3,"T MATERIAL"),o.text(3,l+3,this.totalpresventa+" Bs."),this.totalpagos>0&&(l+=.5,o.setFont(void 0,"bold"),o.text(1,l+3,"-------------------------------------------------------"),l+=.5,o.text(1,l+3,"INGRESOS DE PENDIENTES DE PAGO"),o.setFont(void 0,"normal"),l+3>25&&(o.addPage(),t(),l=0),this.rpagos.forEach((e=>{l+=.5,o.setFontSize(6),o.text(1,l+3,null!=e.fechaentrega&&""!=e.fechaentrega?"R-"+e.id:e.tipo.substring(0,1)+"-"+e.id),o.setFontSize(9),o.text(3.5,l+3,null!=e.nombreproducto?e.nombreproducto.toString():""),o.text(7,l+3,null!=e.monto?e.monto+" Bs":" 0 Bs."),n+=e.monto,o.text(11.5,l+3,null!=e.titular?e.titular.substring(0,20):""),o.text(15.5,l+3,null!=e.local?e.local.toString():""),l+3>25&&(o.addPage(),t(),l=0)})),l+=.5,l+4>25&&(o.addPage(),t(),l=0),o.text(1,l+3,"T.V. Pago:"),o.text(3,l+3,this.totalpagos+" Bs.")),l+4>25&&(o.addPage(),t(),l=0),o.setFontSize(11),o.setFont(void 0,"normal"),o.text(2,l+4,"T Ing Venta: "),o.setFont(void 0,"bold"),o.text(5.5,l+4,i+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5,"T Prest A: "),o.setFont(void 0,"bold"),o.text(5.5,l+5,c+"Bs"),o.setFont(void 0,"normal"),o.text(2,l+5.5,"T Mat Vent: "),o.setFont(void 0,"bold"),o.text(5.5,l+5.5,m+"Bs"),o.setFont(void 0,"normal"),o.text(8,l+4,"Total gasto: "),o.setFont(void 0,"bold"),o.text(11,l+4,r+"Bs"),o.setFont(void 0,"normal"),o.text(14,l+4,"Total saldo: "),o.setFont(void 0,"bold"),o.text(17,l+4,i-r+" Bs"),o.setFont(void 0,"normal"),o.text(2,l+4.5,"T. CxC pagos: "),o.setFont(void 0,"bold"),o.text(5.5,l+4.5,n+"Bs"),1==this.$store.state.login.user.id&&(o.setFont(void 0,"normal"),o.text(8,l+4.5,"Salarios:"),o.setFont(void 0,"bold"),o.text(11,l+4.5,this.resumenplanilla+"Bs.")),window.open(o.output("bloburl"),"_blank")},imprimirmisventasdetalle(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA DETALLE DE "+e.label+" "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"DETALLE"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimirmisventaslocal(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t=0,o="style='color:red'",l="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL VENTA LOCAL DE "+e.label+" "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")+"</div><br>";if(this.ventas.length>0){l+="<table>          <tr><th>TIPO</th><th>DETALLE</th><th>TOTAL</th><th>ACUENTA</th><th>SALDO</th><th>TITULAR</th><th>LOCAL</th><th>ESTADO</th></tr>",this.ventas.forEach((e=>{null!=e.fechaentrega&&""!=e.fechaentrega||"LOCAL"!=e.tipo||(t+=e.acuenta,l+="<tr><td>"+e.tipo.substring(0,1)+"-"+e.id+"</td><td>",e.detalles.forEach((e=>{l+=" "+e.cantidad+" - "+e.nombreproducto+"<br>"})),l+="</td><td>"+e.total+" Bs</td><td>"+e.acuenta+" Bs</td><td>"+e.saldo+" Bs</td><td>"+e.titular+"</td><td>"+e.local+"</td><td ","POR COBRAR"==e.estado&&(l+=o),l+=">"+e.estado+"</td></tr>")})),l+="</table><div><b>TOTAL VENTAS:</b>"+t+"</div><br>";let e=window.open("_blank");e.document.write(l),e.document.close()}},imprimir(e){let a=this;this.$store.state.login.gastoreporteuser||(e.label=this.$store.state.login.user.name);let t="<style>        *{font-size:10px}        table{width:100%;border-collapse: collapse;}        table, th, td {  border: 1px solid;}        .titulo1{text-align:center; font-weight: bold;}        </style>        <div><img src='logo.png' style='width:150px; height:75px;'></div>        <div class='titulo1'>HISTORIAL GASTOS DE "+e.label+" "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")+"</div><br>",o=0,l=0;this.gastos.length>0&&(t+="<div>DETALLE DE GASTO</div>      <table><tr><th>MONTO</th><th>GLOSA</th><th>OBSERVACION</th></tr>",this.gastos.forEach((e=>{t+="<tr><td>"+e.precio+" Bs</td><td>"+e.glosa+"</td><td>"+e.observacion+"</td></tr>","CAJA CHICA"==e.glosa?o+=parseFloat(null!=e.precio?e.precio:0):l+=parseFloat(null!=e.precio?e.precio:0)})),t+="</table><div><b>TOTAL GASTOS: </b>"+l+" Bs</div><br>"),this.chica.length>0&&(t+="<div>DETALLE DE GASTO CAJA CHICA</div>        <table><tr><th>MONTO</th><th>GLOSA</th><th>MOTIVO</th></tr>",this.chica.forEach((e=>{t+="<tr><td>"+e.monto+" Bs</td><td>"+e.glosa+"</td><td>"+e.motivo+"</td></tr>",o+=parseFloat(null!=e.monto?e.monto:0)})),t+="</table><div><b>TOTAL GASTO CAJA CHICA: </b>"+o+" Bs</div><br>"),t+="<table><tr><td>",t+="</td><td>",l>0&&(t+="<div style='font-size:16px'><b>TOTAL GASTOS : </b>"+l+" Bs</div>"),t+="</td><td>",o>0&&(t+="<div style='font-size:16px'><b>TOTAL CAJA CHICA : </b>"+o+" Bs</div>"),t+="</td></tr></table>";let i=window.open("_blank");i.document.write(t),i.document.close()},misgastos(){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$q.loading.show(),this.gastos=[],this.chica=[],this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),se()("#example").DataTable().destroy(),se()("#example2").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/misgastos",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{se()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{this.gastos.push({id:e.id,observacion:e.observacion,glosa:e.glosa.nombre,precio:e.precio,fecha:Be()(e.fecha).format("DD-MM-YYYY"),hora:e.hora,user:e.user.name})})),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("http://192.168.100.8:81/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{console.log(e.data),se()("#example2").DataTable().destroy(),e.data.forEach((e=>{"GASTO"==e.tipo&&this.chica.push({id:e.id,motivo:e.motivo,glosa:null==e.glosa?"GASTO":e.glosa.nombre,monto:e.monto,fecha:Be()(e.fecha).format("DD-MM-YYYY"),hora:e.hora,user:e.user.name,gl:null==e.glosa?"GASTO":e.glosa})})),this.$nextTick((()=>{se()("#example2").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[20,50,100,-1],[20,50,100,"All"]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),se()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})})),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[20,50,100,-1],[20,50,100,"All"]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),se()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}})}))})),this.$axios.post("http://192.168.100.8:81/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),this.resumenplanilla=null==e.data[0].total?0:e.data[0].total})),this.$store.state.login.gastoreporteuser||(this.user=this.users.find((e=>e.id==this.$store.state.login.user.id))),this.$axios.post("http://192.168.100.8:81/api/reportSale",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:this.user.id}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:e.fecha,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:null==e.cliente.local?"":e.cliente.local,titular:e.cliente.titular,user:e.user.name,fechaentrega:e.fechaentrega,tipo:e.tipo,hora:e.hora,detalles:e.detalles})})),console.log(this.ventas),this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("http://192.168.100.8:81/api/misanulados",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.anulados=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("http://192.168.100.8:81/api/reportepago",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{console.log(e.data),this.rpagos=[],this.rpagos=e.data,this.$store.state.login.gastoreporteuser||(this.user={label:this.$store.state.login.user.name,id:this.$store.state.login.user.id}),this.$axios.post("http://192.168.100.8:81/api/reporteventa",{fecha1:this.fecha1,fecha2:this.fecha2,id:this.user.id}).then((e=>{this.prestamoventa=[],this.prestamoventa=e.data}))}))}))}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({color:"red",icon:"error",message:e.response.data.message})}))},agregarpago(){return"FIJO"==this.empleadopago.tipo&&parseFloat(this.empleadopago.salario)-this.totaldescuento<parseFloat(this.pago.monto)&&("ADELANTO"==this.pago.tipo||"DESCUENTO"==this.pago.tipo)?(this.$q.notify({message:"El monto excede al salario ",icon:"info",color:"red"}),!1):(this.pago.empleado_id=this.empleadopago.id,this.pago.empleado_nombre=this.empleadopago.label,this.pago.checkbox=this.checkgasto,"GASTO"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montogeneral?(this.$q.notify({message:"El monto excede en General ",icon:"info",color:"red"}),!1):"CAJA"==this.checkgasto&&("ADELANTO"==this.pago.tipo||"EXTRA"==this.pago.tipo)&&this.pago.monto>this.montocajachica?(this.$q.notify({message:"El monto excede en Caja Chica ",icon:"info",color:"red"}),!1):void this.$axios.post("http://192.168.100.8:81/api/sueldo",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.pagosval(),this.misgastos(),this.totalcaja(),this.totalgeneral(),this.pagos=!1,this.checkgasto="CAJA",this.pago.monto=0,this.pago.tipo="",this.pago.observacion="",this.pago.fecha=le.ZP.formatDate(Date.now(),"YYYY-MM-DD")})))},misempleados(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/listEmpleado").then((e=>{this.$q.loading.hide(),this.empleados=[],e.data.forEach((e=>{e.label=e.nombre,this.empleados.push(e)})),console.log(this.empleados),this.empleadopago=this.empleados[0]}))},agregar(){return void 0!=this.glosa.id&&(this.totalgeneral(),console.log(this.montogeneral),parseFloat(this.montogeneral)<parseFloat(this.empleado.precio)?(this.$q.notify({message:"No se Tiene Fondos",icon:"info",color:"red"}),!1):(this.$q.loading.show(),this.empleado.observacion=this.empleado.observacion.toUpperCase(),this.empleado.glosa=this.glosa.nombre,this.empleado.glosa_id=this.glosa.id,void(this.boolcrear?this.$axios.post("http://192.168.100.8:81/api/gasto",this.empleado).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.loading.hide(),this.misgastos(),this.listadog(),this.totalgeneral(),this.empleado.precio=0,this.empleado.observacion="",this.empleado.glosa="",this.glosa={label:""},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})):this.$axios.put("http://192.168.100.8:81/api/gasto/"+this.empleado.id,this.empleado).then((e=>{this.$q.loading.hide(),this.misgastos(),this.listadog(),this.boolcrear=!0,this.empleado={fecha:le.ZP.formatDate(Date.now(),"YYYY-MM-DD")},this.$q.notify({message:"Creado correctamente",icon:"info",color:"positive"})})))))},guardar(){if(0==this.detalles.length)return this.$q.notify({message:"Tienes que tener un detalle de ventas",color:"red",icon:"error"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/venta",{total:this.total,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,cliente_id:this.cliente.id,detalles:this.detalles}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"}),this.misventas()}))},printgasto(e){let a="<style>   .textcnt{   text-align:center;        }        table{width:100%;}        td{vertical-align:top;}        </style>";a+="<div class='textcnt'> DETALLE GASTO</div>",a+="<div class='textcnt'>Nro "+e.id+"</div>        <hr>",a+="<div>Nombre: "+e.user+"</div>",a+="<div>Fecha: "+le.ZP.formatDate(e.fecha,"DD/MM/YYYY")+"</div>        <hr>",a+="<table>        <tr><td>Glosa: </td><td><b>"+e.glosa+"</b></td></tr>",a+="<tr><td>Costo: </td><td><b>"+e.precio+"</b></td></tr>",a+="<tr><td>Observacion: </td><td><b>"+e.observacion+"</b></td></tr>        </table>",a+="    <br>";let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(a),t.document.close(),t.focus(),t.print(),t.close()},deleteval(e){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/gasto/"+e.id).then((e=>{this.$q.loading.hide(),this.misgastos(),this.$q.notify({message:"Borrado correctamente",icon:"info",color:"positive"})})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,icon:"error",color:"red"})}))}))},updateval(e){console.log(e),e.glosa.label=e.glosa.nombre,this.glosa=e.glosa,this.empleado=e,this.boolcrear=!1},pagosval(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/empleado/"+this.empleadopago.id).then((e=>{this.listpagos=e.data,this.$q.loading.hide()}))}},computed:{totalruta(){let e=0;return this.ventas.forEach((a=>{null!=a.fechaentrega&&""!=a.fechaentrega&&e++})),e},totaldescuento(){let e=0;return this.listpagos.forEach((a=>{le.ZP.formatDate(a.fecha,"YYYY-MM")==le.ZP.formatDate(this.pago.fecha,"YYYY-MM")&&("ADELANTO"!=a.tipo&&"DESCUENTO"!=a.tipo||(e+=parseFloat(a.monto)))})),e},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e},totalanulado(){let e=0;return this.anulados.forEach((a=>{e+=parseFloat(a.efectivo)})),e},totalpagos(){let e=0;return this.rpagos.forEach((a=>{e+=parseFloat(a.monto)})),e},totalpresventa(){let e=0;return this.prestamoventa.forEach((a=>{e+=parseFloat(a.efectivo)})),e}}};var Sr=t(77991);Tr.render=Ar,Tr.__scopeId="data-v-6206e257";const kr=Tr;k()(Tr,"components",{QPage:V.Z,QInput:E.Z,QToggle:A.Z,QSelect:Ge.Z,QBtn:D.Z,QForm:q.Z,QItem:mi.Z,QItemSection:ui.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QTr:ce.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QRadio:Sr.Z,QCardActions:T.Z}),k()(Tr,"directives",{ClosePopup:he.Z});const Or=(0,i.HX)("data-v-3602833e");(0,i.dD)("data-v-3602833e");const Rr={class:"row"},Nr=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),Ur={class:"col-12"},Yr={class:"row"},Ir={class:"col-6 col-sm-6 q-pa-xs"},Pr={class:"col-6 col-sm-6 q-pa-xs"},$r={class:"row"},Fr={class:"col-6 col-sm-2 q-pa-xs"},Lr={class:"row"},zr={class:"col-2"},Zr={class:"col-10"},jr={class:"col-6 col-sm-2 q-pa-xs"},Br={class:"col-6 col-sm-1 q-pa-xs"},Qr={class:"col-4 col-sm-1 q-pa-xs"},Gr={class:"col-4 col-sm-2 q-pa-xs"},Hr={class:"col-6 col-sm-1 q-pa-xs"},Jr=(0,i.Uk)("Subtotal "),Kr=(0,i.Wm)("br",null,null,-1),Xr={class:"col-6 col-sm-1 q-pa-xs"},ed={class:"col-6 col-sm-1 q-pa-xs"},ad=(0,i.Uk)("Subtotal "),td=(0,i.Wm)("br",null,null,-1),od={class:"col-6 col-sm-1 q-pa-xs"},ld=(0,i.Uk)("Subtotal "),id=(0,i.Wm)("br",null,null,-1),sd={class:"col-12 col-sm-12 q-pa-xs flex flex-center"},nd={class:"col-12"},rd={class:"row"},dd={class:"col-12 col-sm-12"},cd={class:"row"},md=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),ud={class:"col-6 col-sm-4 q-pa-xs"},pd={class:"col-6 col-sm-4 q-pa-xs"},hd={class:"col-6 col-sm-4 q-pa-xs flex flex-center"},gd={class:"col-12"},fd={class:"col-12"},bd=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),vd={class:"row"},Wd={class:"col-12 col-md-6 q-pa-xs"},wd={class:"col-12 col-md-6 q-pa-xs"},yd={class:"col-12 col-md-6 q-pa-xs"},Vd={class:"col-12 col-md-6 q-pa-xs"},xd={class:"col-12  q-pa-xs flex flex-center"},Cd=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),_d=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),qd={class:"row"},Ed={class:"col-12 col-md-4 q-pa-xs"},Ad={class:"col-12 col-md-4 q-pa-xs"},Dd={class:"col-12 col-md-4 q-pa-xs"},Md={class:"col-12 col-md-4 q-pa-xs"},Td={class:"col-12 col-md-4 q-pa-xs"},Sd={class:"col-12 col-md-4 q-pa-xs"},kd={class:"col-12 col-md-4 q-pa-xs"},Od={class:"col-12 col-md-4 q-pa-xs"},Rd={class:"col-12 col-md-4 q-pa-xs flex flex-center"},Nd=(0,i.Wm)("b",null," EN PRESTAMO ",-1),Ud=(0,i.Wm)("b",null," VENTA ",-1),Yd={class:"col-12  q-pa-xs flex flex-center"},Id={class:"text-h6"},Pd={class:"row"},$d={class:"col-12 col-md-6 q-pa-xs"},Fd={class:"col-12 col-md-6 q-pa-xs"},Ld={class:"col-12 col-md-6 q-pa-xs"},zd={class:"col-12 col-md-6 q-pa-xs"},Zd={class:"col-12 col-md-6 q-pa-xs"},jd={class:"col-12 col-md-6 q-pa-xs"},Bd={class:"col-12 col-md-6 q-pa-xs"},Qd={class:"col-12 col-md-6 q-pa-xs"},Gd={class:"col-12 col-md-6 q-pa-xs"},Hd={class:"col-12 col-md-6 q-pa-xs"},Jd={class:"col-12 col-md-6 q-pa-xs"},Kd={class:"col-12  q-pa-xs flex flex-center"};(0,i.Cn)();const Xd=Or(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-btn"),c=(0,i.up)("q-select"),m=(0,i.up)("q-badge"),u=(0,i.up)("q-form"),p=(0,i.up)("q-td"),h=(0,i.up)("q-btn-group"),g=(0,i.up)("q-tr"),f=(0,i.up)("q-table"),b=(0,i.up)("q-card-section"),v=(0,i.up)("q-card"),W=(0,i.up)("q-dialog"),w=(0,i.up)("q-page"),y=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(w,{class:"q-pa-xs"},{default:Or((()=>[(0,i.Wm)("div",Rr,[Nr,(0,i.Wm)("div",Ur,[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.guardar,["prevent"])},{default:Or((()=>[(0,i.Wm)("div",Yr,[(0,i.Wm)("div",Ir,[(0,i.Wm)(r,{dense:"",type:"date",label:"fecha",modelValue:s.fecha,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Pr,[(0,i.Wm)(r,{dense:"",type:"text",label:"Responsable",modelValue:s.responsable,"onUpdate:modelValue":a[2]||(a[2]=e=>s.responsable=e),outlined:"",required:""},null,8,["modelValue"])])]),(0,i.Wm)("div",$r,[(0,i.Wm)("div",Fr,[(0,i.Wm)("div",Lr,[(0,i.Wm)("div",zr,[(0,i.Wm)(d,{onClick:a[3]||(a[3]=e=>s.modalregistro=!0),class:"full-width full-height",color:"green",icon:"add_circle",size:"xs"}),s.model?((0,i.wg)(),(0,i.j4)(d,{key:0,onClick:a[4]||(a[4]=e=>{s.modcliente=s.model,s.dialog_mod=!0}),class:"full-width full-height",color:"yellow",icon:"edit",size:"xs"})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Zr,[(0,i.Wm)(c,{outlined:"",modelValue:s.model,"onUpdate:modelValue":a[5]||(a[5]=e=>s.model=e),"use-input":"","input-debounce":"0",label:"Seleccionar Cliente",options:s.options,onFilter:n.filterFn,onClick:n.generar},null,8,["modelValue","options","onFilter","onClick"])])])]),(0,i.Wm)("div",jr,[(0,i.Wm)(c,{modelValue:s.producto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.producto=e),outlined:"",options:s.productos,"option-label":"nombre","option-value":"id",label:"Producto",required:""},null,8,["modelValue","options"])]),(0,i.Wm)("div",Br,[(0,i.Wm)(r,{type:"number",step:"0.1",label:"precio",modelValue:s.producto.precio,"onUpdate:modelValue":a[7]||(a[7]=e=>s.producto.precio=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Qr,[(0,i.Wm)(r,{label:"Cantidad",type:"number",step:"0.5",modelValue:s.cantidad,"onUpdate:modelValue":a[8]||(a[8]=e=>s.cantidad=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Gr,[(0,i.Wm)(r,{type:"text",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[9]||(a[9]=e=>s.observacion=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",Hr,[(0,i.Wm)(m,{class:"full-width full-height",color:"positive"},{default:Or((()=>[Jr,Kr,(0,i.Uk)(" "+(0,R.zw)(n.subtotal),1)])),_:1})]),(0,i.Wm)("div",Xr,[(0,i.Wm)(r,{type:"number",label:"A cuenta",step:"0.1",modelValue:s.acuenta,"onUpdate:modelValue":a[10]||(a[10]=e=>s.acuenta=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",ed,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Or((()=>[ad,td,(0,i.Uk)(" "+(0,R.zw)(n.saldo),1)])),_:1},8,["color"])]),(0,i.Wm)("div",od,[(0,i.Wm)(m,{class:"full-width full-height",color:n.subtotal>s.acuenta?"red-7":"positive"},{default:Or((()=>[ld,id,(0,i.Uk)(" "+(0,R.zw)(n.estado),1)])),_:1},8,["color"])]),(0,i.Wm)("div",sd,[(0,i.Wm)(d,{color:"accent",size:"lg",label:"Generar Venta",icon:"send",type:"submit"})])])])),_:1},8,["onSubmit"])]),(0,i.Wm)("div",nd,[(0,i.Wm)("div",rd,[(0,i.Wm)("div",dd,[(0,i.Wm)("div",cd,[md,e.$store.state.login.historialventadetalle?((0,i.wg)(),(0,i.j4)(i.HY,{key:0},[(0,i.Wm)("div",ud,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[11]||(a[11]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",pd,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[12]||(a[12]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",hd,[(0,i.Wm)(d,{color:"info",label:"Consultar",icon:"search",type:"submit",onClick:n.misventas},null,8,["onClick"])])],64)):(0,i.kq)("",!0),(0,i.Wm)("div",gd,[(0,i.Wm)(f,{dense:"",columns:s.columns2,rows:s.ventas,title:"Historial de ventas",filter:s.filter},{body:Or((a=>[(0,i.Wm)(g,{props:a},{default:Or((()=>[(0,i.Wm)(p,{key:"fecha",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.fecha),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"titular",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.titular),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"cantidad",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.cantidad),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"producto",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.producto),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"total",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.total),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"acuenta",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.acuenta),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"saldo",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.saldo),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"estado",props:a},{default:Or((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.estado?"positive":"negative"},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"user",props:a},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.user),1)])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"observacion",props:a},{default:Or((()=>[(0,i.Wm)(m,{color:"CANCELADO"==a.row.observacion?"positive":"negative"},{default:Or((()=>[(0,i.Uk)((0,R.zw)(a.row.observacion),1)])),_:2},1032,["color"])])),_:2},1032,["props"]),(0,i.Wm)(p,{key:"opcion",props:a},{default:Or((()=>["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:0},{default:Or((()=>[e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(d,{key:0,icon:"cancel",color:"red",onClick:e=>n.anular(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(d,{key:1,icon:"local_shipping",color:"info",onClick:e=>n.clickhojaruta(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:2},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(d,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows","filter"])]),(0,i.Wm)("div",fd,[(0,i.Wm)(d,{label:"Imprimir",icon:"print",color:"info",class:"full-width",onClick:n.imprimir},null,8,["onClick"])])])])])])]),(0,i.Wm)(W,{modelValue:s.modalregistro,"onUpdate:modelValue":a[17]||(a[17]=e=>s.modalregistro=e)},{default:Or((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Or((()=>[(0,i.Wm)(b,null,{default:Or((()=>[bd])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Or((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:Or((()=>[(0,i.Wm)("div",vd,[(0,i.Wm)("div",Wd,[(0,i.Wm)(r,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[13]||(a[13]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",wd,[(0,i.Wm)(r,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[14]||(a[14]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",yd,[(0,i.Wm)(r,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[15]||(a[15]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vd,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[16]||(a[16]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",xd,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Or((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[23]||(a[23]=e=>s.dialog_mod=e)},{default:Or((()=>[(0,i.Wm)(v,null,{default:Or((()=>[(0,i.Wm)(b,{class:"bg-green-14 text-white"},{default:Or((()=>[Cd])),_:1}),(0,i.Wm)(b,{class:"q-pt-xs"},{default:Or((()=>[(0,i.Wm)(u,{onSubmit:n.onMod,class:"q-gutter-md"},{default:Or((()=>[(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.ci,"onUpdate:modelValue":a[18]||(a[18]=e=>s.modcliente.ci=e),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.titular,"onUpdate:modelValue":a[19]||(a[19]=e=>s.modcliente.titular=e),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{outlined:"",type:"text",modelValue:s.modcliente.telefono,"onUpdate:modelValue":a[20]||(a[20]=e=>s.modcliente.telefono=e),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{type:"text",outlined:"",modelValue:s.modcliente.direccion,"onUpdate:modelValue":a[21]||(a[21]=e=>s.modcliente.direccion=e),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(r,{outlined:"",modelValue:s.modcliente.observacion,"onUpdate:modelValue":a[22]||(a[22]=e=>s.modcliente.observacion=e),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(d,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(d,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[y]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[34]||(a[34]=e=>s.modalgarantia=e)},{default:Or((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Or((()=>[(0,i.Wm)(b,null,{default:Or((()=>[_d])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Or((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:Or((()=>[(0,i.Wm)("div",qd,[(0,i.Wm)("div",Ed,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.model.label,"onUpdate:modelValue":a[24]||(a[24]=e=>s.model.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ad,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.model.telefono,"onUpdate:modelValue":a[25]||(a[25]=e=>s.model.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Dd,[(0,i.Wm)(r,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.model.direccion,"onUpdate:modelValue":a[26]||(a[26]=e=>s.model.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Md,[(0,i.Wm)(c,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":a[27]||(a[27]=e=>s.inventario=e),options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Td,[(0,i.Wm)(r,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":a[28]||(a[28]=e=>s.newgarantia.cantidad=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Sd,[(0,i.Wm)(r,{outlined:"",type:"number",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[29]||(a[29]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",kd,[(0,i.Wm)(r,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[30]||(a[30]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Od,[(0,i.Wm)(r,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[31]||(a[31]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Rd,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[32]||(a[32]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Nd,(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[33]||(a[33]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Ud]),(0,i.Wm)("div",Yd,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Or((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[46]||(a[46]=e=>s.modalhojaruta=e)},{default:Or((()=>[(0,i.Wm)(v,{style:{width:"700px","min-width":"80vw"}},{default:Or((()=>[(0,i.Wm)(b,null,{default:Or((()=>[(0,i.Wm)("div",Id,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(b,{class:"q-pt-none"},{default:Or((()=>[(0,i.Wm)(u,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:Or((()=>[(0,i.Wm)("div",Pd,[(0,i.Wm)("div",$d,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[35]||(a[35]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Fd,[(0,i.Wm)(r,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[36]||(a[36]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Ld,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[37]||(a[37]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",zd,[(0,i.Wm)(r,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[38]||(a[38]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Zd,[(0,i.Wm)(r,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[39]||(a[39]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",jd,[(0,i.Wm)(r,{required:"",outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[40]||(a[40]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Bd,[(0,i.Wm)(r,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[41]||(a[41]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Qd,[(0,i.Wm)(r,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[42]||(a[42]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Gd,[(0,i.Wm)(r,{required:"",outlined:"",label:"precio",modelValue:s.venta.precio,"onUpdate:modelValue":a[43]||(a[43]=e=>s.venta.precio=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Hd,[(0,i.Wm)(r,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[44]||(a[44]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Jd,[(0,i.Wm)(r,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[45]||(a[45]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Kd,[(0,i.Wm)(d,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(b,{align:"right",class:""},{default:Or((()=>[(0,i.wy)((0,i.Wm)(d,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[y]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),ec={name:"Venta",data(){return{modalregistro:!1,dialog_mod:!1,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),responsable:"",newgarantia:{tipo:"EN PRESTAMO"},newcliente:{},clientes:[],clientes2:[],modcliente:{},cliente:"",productos:[],inventarios:[],inventario:{},producto:"",observacion:"NINGUNA",cantidad:1,cantidades:[],acuenta:0,detalles:[],garantia:{},dialog_garantia:!1,cantidadprestamo:0,prestamo:{},modalgarantia:!1,modalhojaruta:!1,columns:[{name:"nombreproducto",label:"Nombre producto",field:"nombreproducto"},{name:"precio",label:"Precio",field:"precio"},{name:"cantidad",label:"Cantidad",field:"cantidad"},{name:"subtotal",label:"Subtotal",field:"subtotal"},{name:"action",label:"Borrar",field:"action"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"titular",label:"Cliente",field:"titular"},{name:"cantidad",label:"cantidad",field:"cantidad"},{name:"producto",label:"Producto",field:"producto"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"observacion",label:"Observacion",field:"observacion"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],respuesta:{},venta:{},prestamos:[],filter:"",options:[],model:""}},mounted(){for(let e=1;e<=500;e++)this.cantidades.push(e);this.misventas(),this.misclientes(),this.$axios.get("http://192.168.100.8:81/api/listaproducto").then((e=>{e.data.forEach((e=>{"DETALLE"==e.tipo&&this.productos.push(e)})),this.producto.length>0&&(this.producto=this.productos[0])})),this.$axios.get("http://192.168.100.8:81/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.get("http://192.168.100.8:81/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.misclientes()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},misclientes(){this.$axios.get("http://192.168.100.8:81/api/listacliente").then((e=>{this.clientes=[],e.data.forEach((e=>{2==e.tipocliente&&(e.label=e.ci+" "+e.titular,this.clientes.push(e))}))}))},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("http://192.168.100.8:81/api/agregarcliente",this.newcliente).then((()=>{this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))},actualizarventa(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/venta/"+this.venta.id,{turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misventas(),this.modalhojaruta=!1}))},agregargarantia(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("http://192.168.100.8:81/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.model.id,tipo:this.newgarantia.tipo,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.$q.loading.hide(),this.misclientes(),this.modalregistro=!1,this.newcliente={},this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.modalgarantia=!1,this.respuesta={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message.error,color:"red",position:"center",icon:"error"})}))},impboleta(e){console.log(e),this.$axios.post("http://192.168.100.8:81/api/impresiondetalle/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},impruta(e){this.$axios.post("http://192.168.100.8:81/api/ruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("http://192.168.100.8:81/api/anular",{id:e.id,observacion:a}).then((e=>{this.misventas(),this.$q.notify({message:"Venta Anulado ",color:"green",position:"center",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},impprestamos(){if(""==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",icon:"error",html:!0}),!1;let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(3,1,"Historial de prestamos "+e.model.label),t.text(5,1.5,"DE "+Be()(e.fecha4).format("DD/MM/YYYY")+" AL "+Be()(e.fecha5).format("DD/MM/YYYY")),t.text(1,3,"Fecha"),t.text(3,3,"Material"),t.text(5,3,"Efectivo"),t.text(7,3,"Fisico"),t.text(9.5,3,"Observacion"),t.text(13.5,3,"Estado"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}console.log(this.model);var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.prestamos.forEach((e=>{o+=.5,t.text(1,o+3,le.ZP.formatDate(e.fecha,"DD/MM/YYYY").toString()),t.text(3,o+3,e.nombre.toString()),t.text(5,o+3,null==e.efectivo?"":""+e.efectivo),t.text(7,o+3,null==e.fisico?"":""+e.fisico),t.text(9.5,o+3,null==e.observacion?"":""+e.observacion),t.text(13.5,o+3,e.estado.toString()),t.text(18.5,o+3,e.name.toString()),o+3>25&&(t.addPage(),a(),o=0)})),window.open(t.output("bloburl"),"_blank")},imprimir(){let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"Historial de ventas"),t.text(5,1.5,"DE "+Be()(e.fecha2).format("DD/MM/YYYY")+" AL "+Be()(e.fecha3).format("DD/MM/YYYY")),t.text(1,3,"Total"),t.text(3,3,"A cuenta"),t.text(5,3,"Saldo"),t.text(7,3,"Estado"),t.text(11.5,3,"Titular"),t.text(18.5,3,"Usuario"),t.setFont(void 0,"normal")}var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(9),a();let o=0;this.ventas.forEach((e=>{o+=.5,t.text(1,o+3,e.total.toString()),t.text(3,o+3,e.acuenta.toString()),t.text(5,o+3,e.saldo.toString()),t.text(7,o+3,e.estado.toString()),t.text(9.5,o+3,e.local.toString()),t.text(11.5,o+3,e.titular.toString()),t.text(18.5,o+3,e.user.toString()),o+3>25&&(t.addPage(),a(),o=0)})),t.setFont(void 0,"bold"),t.text(2,o+4,"Ventas totales: "),t.setFont(void 0,"normal"),t.text(5,o+4,this.ventat+"Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"Por cobrar totales: "),t.setFont(void 0,"normal"),t.text(11,o+4,this.porc+"Bs"),t.setFont(void 0,"bold"),t.text(14,o+4,"Saldo totales: "),t.setFont(void 0,"normal"),t.text(17,o+4,this.saldoc+"Bs"),window.open(t.output("bloburl"),"_blank")},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.options=this.clientes.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.options=this.clientes})},misventas(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/misventas",{fecha1:this.fecha2,fecha2:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{"DETALLE"==e.tipo&&this.ventas.push({id:e.id,fecha:e.fecha,precio:e.total,total:e.total,acuenta:e.acuenta,saldo:e.saldo,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,direccion:e.direccion,envase:e.envase,telefono1:e.cliente.telefono,fechaentrega:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),telefono2:e.telefono2,user:e.user.name,turno:e.turno,hora:e.hora,observacion:e.observacion,producto:e.detalle.nombreproducto,cantidad:e.detalle.cantidad})})),console.log(this.ventas)}))},agregar(){},guardar(){return 0==this.model?(this.$q.notify({position:"center",message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",spinnerSize:"100px",icon:"error",html:!0}),!1):void 0==this.fecha?(this.$q.notify({message:"<h5>Tienes que seleccionar fecha</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):this.acuenta>this.subtotal||this.acuenta<0?(this.$q.notify({message:"<h5>Ingrese monto acuenta correcto</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,observacion:this.observacion,tipo:"DETALLE",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.$q.notify({message:"Venta exitosa",color:"green",position:"center",icon:"info"}),this.misventas(),this.$q.dialog({message:"Deseas registrar garantia?",title:"Garantia?",cancel:!0}).onOk((()=>{this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.modalgarantia=!0})).onCancel((()=>{this.subtotal="",this.acuenta=0,this.saldo="",this.estado="",this.model="",this.producto="",this.observacion="NINGUNA",this.cantidad=1,this.subtotal=0,this.respuesta={}}))})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"<h5>Tienes que seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.prestamo.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",position:"center",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))):this.$q.notify({message:"<h5>Debes seleccionar cliente</h5>",color:"red",position:"center",html:!0,icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};var ac=t(36375);ec.render=Xd,ec.__scopeId="data-v-3602833e";const tc=ec;k()(ec,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QBtn:D.Z,QSelect:Ge.Z,QBadge:re.Z,QTable:de.Z,QTd:me.Z,QIcon:_.Z,QTr:ce.Z,QBtnGroup:ac.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(ec,"directives",{ClosePopup:he.Z});const oc=(0,i.HX)("data-v-56a5802a");(0,i.dD)("data-v-56a5802a");const lc={class:"row"},ic={class:"col-12 col-sm-3 q-pa-xs"},sc={class:"col-12 col-sm-3 q-pa-xs"},nc={class:"col-12 col-sm-3 q-pa-xs"},rc={class:"col-12 col-sm-3 q-pa-xs"},dc={class:"col-12 col-sm-3 q-pa-xs"},cc={class:"col-12 col-sm-3 q-pa-xs"},mc={class:"col-12 col-sm-3 q-pa-xs"},uc={class:"col-12 col-sm-3 q-pa-xs flex flex-center"},pc={class:"row"},hc={class:"col-6  q-pa-xs "},gc={class:"col-6  q-pa-xs ",style:{"text-align":"right"}},fc={style:{margin:"0px",padding:"0px",border:"0px"}},bc=(0,i.Wm)("b",null,"Cant:",-1),vc=(0,i.Wm)("b",null,"Fecha:",-1),Wc=(0,i.Uk)("BAJA"),wc=(0,i.Wm)("hr",null,null,-1),yc={key:1},Vc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Uk)(),(0,i.Wm)("th",null,"Monto")])],-1),xc=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),Cc=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion ",-1);(0,i.Cn)();const _c=oc(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-td"),g=(0,i.up)("q-avatar"),f=(0,i.up)("q-item-section"),b=(0,i.up)("q-item"),v=(0,i.up)("q-item-label"),W=(0,i.up)("q-list"),w=(0,i.up)("q-btn-dropdown"),y=(0,i.up)("q-table"),V=(0,i.up)("q-card-section"),x=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),_=(0,i.up)("q-page"),q=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(_,{class:"q-pa-xs"},{default:oc((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:oc((()=>[(0,i.Wm)("div",lc,[(0,i.Wm)("div",ic,["local"==s.tab?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"","use-input":"",outlined:"",label:"Seleccionar local",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos,onFilter:n.filterFn},null,8,["modelValue","options","onFilter"])):((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"","use-input":"",onFilter:n.filterFn,outlined:"",label:"Seleccionar Cliente",modelValue:s.cliente,"onUpdate:modelValue":a[2]||(a[2]=e=>s.cliente=e),options:s.prestamos,"option-label":"titular"},null,8,["onFilter","modelValue","options"]))]),(0,i.Wm)("div",sc,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",nc,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.cantidad=e),n.calcular],options:s.cantidades},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",rc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",dc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.efectivo=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",cc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[7]||(a[7]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",mc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",uc,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[10]||(a[10]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)])]),(0,i.Wm)("div",pc,[(0,i.Wm)("div",hc,[(0,i.Wm)(c,{label:"Imprimir Pendientes",color:"amber",icon:"print",onClick:n.imprimir},null,8,["onClick"])]),(0,i.Wm)("div",gc,[s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(c,{key:1,label:"agregar",icon:"send",color:"positive",type:"submit"}))])])])),_:1},8,["onSubmit"]),"cliente"==s.tab?((0,i.wg)(),(0,i.j4)(u,{key:0,class:"full-width text-h5 flex flex-center",color:"red"},{default:oc((()=>[(0,i.Uk)("TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs.",1)])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(y,{title:"LISTA DE PRESTAMOS DETALLE",rows:s.listadop,columns:s.colprestamo,filter:s.filter,pagination:s.pagination,"row-key":"name"},{"top-right":oc((()=>[(0,i.Wm)(d,{outlined:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[11]||(a[11]=e=>s.filter=e),placeholder:"Buscar"},{append:oc((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-observacion":oc((e=>[(0,i.Wm)(h,{key:"observacion",props:e},{default:oc((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":oc((e=>[(0,i.Wm)(h,{key:"estado",props:e},{default:oc((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"negative"},{default:oc((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:1,color:"amber"},{default:oc((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:2,color:"positive"},{default:oc((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(u,{key:3,color:"blue"},{default:oc((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":oc((e=>[(0,i.Wm)(h,{key:"logprestamos",props:e},{default:oc((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",fc,[bc,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),vc,(0,i.Uk)((0,R.zw)(e.fecha),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":oc((e=>[(0,i.Wm)(h,{key:"telfono",props:e},{default:oc((()=>[(0,i.Wm)(c,{icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-opcion":oc((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:oc((()=>[(0,i.Wm)(w,{color:"primary",label:"Opcion"},{default:oc((()=>[(0,i.Wm)(W,null,{default:oc((()=>["EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:0,clickable:"",onClick:e=>n.onDev(a.row)},{default:oc((()=>[(0,i.Wm)(f,{avatar:""},{default:oc((()=>[(0,i.Wm)(g,{icon:"refresh",color:"primary","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(b,{clickable:"",onClick:e=>n.onList(a.row)},{default:oc((()=>[(0,i.Wm)(f,{avatar:""},{default:oc((()=>[(0,i.Wm)(g,{icon:"list",color:"green","text-color":"white"})])),_:1})])),_:2},1032,["onClick"]),[[q]]),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:1,clickable:"",onClick:e=>n.onMod(a.row)},{default:oc((()=>[(0,i.Wm)(f,{avatar:""},{default:oc((()=>[(0,i.Wm)(g,{icon:"edit",color:"yellow","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:2,clickable:"",onClick:e=>n.onEliminar(a.row)},{default:oc((()=>[(0,i.Wm)(f,null,{default:oc((()=>[(0,i.Wm)(v,{"content-style":"{background-color: coral;}"},{default:oc((()=>[Wc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:3,clickable:"",onClick:e=>n.ondelete(a.row)},{default:oc((()=>[(0,i.Wm)(f,{avatar:""},{default:oc((()=>[(0,i.Wm)(g,{icon:"delete",color:"negative","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","pagination"]),wc,"local"==s.tab?((0,i.wg)(),(0,i.j4)("table",yc,[Vc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(C,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[14]||(a[14]=e=>s.dialog_dev=e)},{default:oc((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:oc((()=>[(0,i.Wm)(V,null,{default:oc((()=>[xc])),_:1}),(0,i.Wm)(m,{onSubmit:n.devolver,class:"q-gutter-md"},{default:oc((()=>[(0,i.Wm)(V,{class:"q-pt-none"},{default:oc((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[13]||(a[13]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[q]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialog_list,"onUpdate:modelValue":a[15]||(a[15]=e=>s.dialog_list=e)},{default:oc((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:oc((()=>[(0,i.Wm)(V,null,{default:oc((()=>[Cc])),_:1}),(0,i.Wm)(V,{class:"q-pt-none"},{default:oc((()=>[(0,i.Wm)(y,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),qc={name:"Venta",data(){return{tab:"cliente",prestamos:[],cliente:"",inventarios:[],inventario:"",cantidades:[],pagination:{rowsPerPage:20},cantidad:1,fisico:"",efectivo:0,observacion:"",tipo:"EN PRESTAMO",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},prestamo_id:"",listado:[],listadop:[],dev:{},reportepres:[],options:[],boolmod:!1,filter:"",fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),colum:[{name:"fecha",align:"center",label:"fecha",field:e=>le.ZP.formatDate(e.fecha,"DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"fisico",label:"FISICO",field:"fisico",sortable:!0},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}]}},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("http://192.168.100.8:81/api/listInv").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0],console.log(this.inventario),this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:e.cliente.telefono}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.prestamos.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fecha:this.fecha,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.listadoprestamo(),this.boolmod=!1,this.$q.loading.hide(),this.cantidad=1,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.efectivo=0,this.observacion=""})),this.filtrarlista(),this.cajaprestamo()},reporte(){this.$axios.post("http://192.168.100.8:81/api/reportecliente").then((e=>{this.reportepres=[],e.data.forEach((e=>{"local"==this.tab&&"1"==e.tipocliente&&this.reportepres.push(e),"cliente"==this.tab&&"2"==e.tipocliente&&this.reportepres.push(e)}))}))},listadoprestamo(){this.$axios.get("http://192.168.100.8:81/api/prestamo").then((e=>{this.listadop=[],e.data.forEach((e=>{"local"==this.tab&&"1"==e.cliente.tipocliente&&this.listadop.push(e),"cliente"==this.tab&&"2"==e.cliente.tipocliente&&this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){confirm("seguro de Anular?")&&this.$axios.post("http://192.168.100.8:81/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("http://192.168.100.8:81/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},onMod(e){console.log(e),this.boolmod=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fecha=e.fecha,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.inventario=e.inventario},cajaprestamo(){this.$axios.post("http://192.168.100.8:81/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},listclientes(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/listacliente").then((e=>{this.prestamos=[],console.log(e.data),e.data.forEach((e=>{"local"==this.tab&&"1"==e.tipocliente&&(e.titular=e.local,e.label=e.titular,this.prestamos.push(e)),"cliente"==this.tab&&"2"==e.tipocliente&&(e.label=e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/cliente").then((e=>{this.prestamos=e.data,this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):null==this.cliente?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/prestamo",{efectivo:this.efectivo,fecha:this.fecha,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,tipo:this.tipo,inventario_id:this.inventario.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.listadoprestamo(),this.$q.loading.hide(),this.cantidad=1,this.efectivo=0,this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.calcular})),this.filtrarlista(),void this.cajaprestamo())},devolver(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/logprestamo",{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.listadoprestamo(),this.cajaprestamo(),this.dialog_dev=!1,this.dev={},this.$q.loading.hide(),this.filtrarlista()}))},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new Lo.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto&&"ANULADO"!=l.estado?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};qc.render=_c,qc.__scopeId="data-v-56a5802a";const Ec=qc;k()(qc,"components",{QPage:V.Z,QForm:q.Z,QSelect:Ge.Z,QInput:E.Z,QBtn:D.Z,QBadge:re.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QBtnDropdown:di.Z,QList:ci.Z,QItem:mi.Z,QItemSection:ui.Z,QAvatar:pe.Z,QItemLabel:pi.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z}),k()(qc,"directives",{ClosePopup:he.Z});const Ac=(0,i.HX)("data-v-360aafaf");(0,i.dD)("data-v-360aafaf");const Dc={class:"row"},Mc={class:"col-12 col-sm-3 q-pa-xs"},Tc={class:"col-12 col-sm-3 q-pa-xs"},Sc={class:"col-12 col-sm-3 q-pa-xs"},kc={class:"col-12 col-sm-3 q-pa-xs"},Oc={class:"col-12 col-sm-3 q-pa-xs"},Rc={class:"col-12 col-sm-3 q-pa-xs"},Nc={class:"col-12 col-sm-3 q-pa-xs"},Uc={class:"col-12 col-sm-3 q-pa-xs flex flex-center"},Yc={class:"row"},Ic={class:"col-6  q-pa-xs "},Pc={class:"col-6  q-pa-xs ",style:{"text-align":"right"}},$c={key:0,class:"text-h5"},Fc={style:{margin:"0px",padding:"0px",border:"0px"}},Lc=(0,i.Wm)("b",null,"Cant:",-1),zc=(0,i.Wm)("b",null,"Fecha:",-1),Zc=(0,i.Uk)("BAJA"),jc=(0,i.Wm)("hr",null,null,-1),Bc={key:1,id:"example",style:{width:"100%"},class:"cell-border"},Qc=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Material"),(0,i.Wm)("th",null,"Total"),(0,i.Uk)(),(0,i.Wm)("th",null,"Monto")])],-1),Gc=(0,i.Wm)("div",{class:"text-h6"},"Devolucion de prestamo",-1),Hc=(0,i.Wm)("div",{class:"text-h6"},"Listado Devolucion ",-1);(0,i.Cn)();const Jc=Ac(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-select"),d=(0,i.up)("q-input"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-icon"),p=(0,i.up)("q-td"),h=(0,i.up)("q-badge"),g=(0,i.up)("q-avatar"),f=(0,i.up)("q-item-section"),b=(0,i.up)("q-item"),v=(0,i.up)("q-item-label"),W=(0,i.up)("q-list"),w=(0,i.up)("q-btn-dropdown"),y=(0,i.up)("q-table"),V=(0,i.up)("q-card-section"),x=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),_=(0,i.up)("q-page"),q=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(_,{class:"q-pa-xs"},{default:Ac((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.agregar,["prevent"])},{default:Ac((()=>[(0,i.Wm)("div",Dc,[(0,i.Wm)("div",Mc,["local"==s.tab?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"","use-input":"",onFilter:n.filterFn,outlined:"",label:"Seleccionar local",modelValue:s.cliente,"onUpdate:modelValue":a[1]||(a[1]=e=>s.cliente=e),options:s.prestamos,"option-label":"label"},null,8,["onFilter","modelValue","options"])):((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",outlined:"",label:"Seleccionar Cliente",modelValue:s.cliente,"onUpdate:modelValue":a[2]||(a[2]=e=>s.cliente=e),options:s.prestamos,"option-label":"titular"},null,8,["modelValue","options"]))]),(0,i.Wm)("div",Tc,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[3]||(a[3]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Sc,[(0,i.Wm)(r,{dense:"",outlined:"",label:"Seleccionar Cantidad",modelValue:s.cantidad,"onUpdate:modelValue":[a[4]||(a[4]=e=>s.cantidad=e),n.calcular],options:s.cantidades},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",kc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fecha",modelValue:s.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.fecha=e),type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Oc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Efectivo",modelValue:s.efectivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.efectivo=e),type:"number"},null,8,["modelValue"])]),(0,i.Wm)("div",Rc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Fisico",modelValue:s.fisico,"onUpdate:modelValue":a[7]||(a[7]=e=>s.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Nc,[(0,i.Wm)(d,{dense:"",outlined:"",label:"Observacion",modelValue:s.observacion,"onUpdate:modelValue":a[8]||(a[8]=e=>s.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Uc,[(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[9]||(a[9]=e=>s.tipo=e),style:{"margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"EN PRESTAMO"==s.tipo?"color:red":""}," EN PRESTAMO ",4),(0,i.wy)((0,i.Wm)("input",{type:"radio",value:"VENTA","onUpdate:modelValue":a[10]||(a[10]=e=>s.tipo=e),style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"}},null,512),[[o.G2,s.tipo]]),(0,i.Wm)("b",{style:"VENTA"==s.tipo?"color:red":""}," VENTA ",4)])]),(0,i.Wm)("div",Yc,[(0,i.Wm)("div",Ic,[(0,i.Wm)(c,{label:"Imprimir Pendientes",color:"amber",icon:"print",onClick:n.imprimir},null,8,["onClick"])]),(0,i.Wm)("div",Pc,[s.boolmod?((0,i.wg)(),(0,i.j4)(c,{key:0,label:"Modficar",icon:"edit",color:"yellow",onClick:n.modificar},null,8,["onClick"])):((0,i.wg)(),(0,i.j4)(c,{key:1,label:"agregar",icon:"send",color:"positive",type:"submit"}))])])])),_:1},8,["onSubmit"]),"cliente"==s.tab?((0,i.wg)(),(0,i.j4)("div",$c,"TOTAL EN CAJA: "+(0,R.zw)(s.totalefectivo)+" Bs.",1)):(0,i.kq)("",!0),(0,i.Wm)(y,{title:"LISTA DE PRESTAMOS LOCAL",rows:s.listadop,columns:s.colprestamo,pagination:s.pagination,filter:s.filter,"row-key":"name"},{"top-right":Ac((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[11]||(a[11]=e=>s.filter=e),placeholder:"Buscar"},{append:Ac((()=>[(0,i.Wm)(u,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-observacion":Ac((e=>[(0,i.Wm)(p,{key:"observacion",props:e},{default:Ac((()=>[""!=e.row.observacion&&null!=e.row.observacion?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"accent",icon:"notes",onClick:a=>n.verObs(e.row),dense:""},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-estado":Ac((e=>[(0,i.Wm)(p,{key:"estado",props:e},{default:Ac((()=>["ANULADO"==e.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:0,color:"negative"},{default:Ac((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"DEVUELTO"==e.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:1,color:"amber"},{default:Ac((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"EN PRESTAMO"==e.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:2,color:"positive"},{default:Ac((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0),"VENTA"==e.row.estado?((0,i.wg)(),(0,i.j4)(h,{key:3,color:"blue"},{default:Ac((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-logprestamos":Ac((e=>[(0,i.Wm)(p,{key:"logprestamos",props:e},{default:Ac((()=>[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.row.logprestamos,(e=>((0,i.wg)(),(0,i.j4)("ul",{key:e.id,style:{margin:"0px",padding:"0px",border:"0px","list-style":"none"}},[(0,i.Wm)("li",Fc,[Lc,(0,i.Uk)(" "+(0,R.zw)(e.cantidad)+" ",1),zc,(0,i.Uk)((0,R.zw)(e.fecha),1)])])))),128))])),_:2},1032,["props"])])),"body-cell-telefono":Ac((e=>[(0,i.Wm)(p,{key:"telfono",props:e},{default:Ac((()=>[(0,i.Wm)(c,{icon:"call",color:"accent",onClick:a=>n.verTelef(e.row),dense:""},null,8,["onClick"])])),_:2},1032,["props"])])),"body-cell-opcion":Ac((a=>[(0,i.Wm)(p,{key:"opcion",props:a},{default:Ac((()=>[(0,i.Wm)(w,{color:"primary",label:"Opcion"},{default:Ac((()=>[(0,i.Wm)(W,null,{default:Ac((()=>["EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:0,clickable:"",onClick:e=>n.onDev(a.row)},{default:Ac((()=>[(0,i.Wm)(f,{avatar:""},{default:Ac((()=>[(0,i.Wm)(g,{icon:"refresh",color:"primary","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),(0,i.wy)((0,i.Wm)(b,{clickable:"",onClick:e=>n.onList(a.row)},{default:Ac((()=>[(0,i.Wm)(f,{avatar:""},{default:Ac((()=>[(0,i.Wm)(g,{icon:"list",color:"green","text-color":"white"})])),_:1})])),_:2},1032,["onClick"]),[[q]]),"EN PRESTAMO"==a.row.estado?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:1,clickable:"",onClick:e=>n.onMod(a.row)},{default:Ac((()=>[(0,i.Wm)(f,{avatar:""},{default:Ac((()=>[(0,i.Wm)(g,{icon:"edit",color:"yellow","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"==a.row.estado&&e.$store.state.login.anularprestamo?(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:2,clickable:"",onClick:e=>n.onEliminar(a.row)},{default:Ac((()=>[(0,i.Wm)(f,null,{default:Ac((()=>[(0,i.Wm)(v,{"content-style":"{background-color: coral;}"},{default:Ac((()=>[Zc])),_:1})])),_:1})])),_:2},1032,["onClick"])),[[q]]):(0,i.kq)("",!0),"EN PRESTAMO"!=a.row.estado&&"VENTA"!=a.row.estado||!e.$store.state.login.delprestamo?(0,i.kq)("",!0):(0,i.wy)(((0,i.wg)(),(0,i.j4)(b,{key:3,clickable:"",onClick:e=>n.ondelete(a.row)},{default:Ac((()=>[(0,i.Wm)(f,{avatar:""},{default:Ac((()=>[(0,i.Wm)(g,{icon:"delete",color:"negative","text-color":"white"})])),_:1})])),_:2},1032,["onClick"])),[[q]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),_:1},8,["rows","columns","pagination","filter"]),jc,"local"==s.tab?((0,i.wg)(),(0,i.j4)("table",Bc,[Qc,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.reportepres,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.nombre),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.monto),1)])))),128))])])):(0,i.kq)("",!0),(0,i.Wm)(C,{modelValue:s.dialog_dev,"onUpdate:modelValue":a[14]||(a[14]=e=>s.dialog_dev=e)},{default:Ac((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:Ac((()=>[(0,i.Wm)(V,null,{default:Ac((()=>[Gc])),_:1}),(0,i.Wm)(m,{onSubmit:n.devolver,class:"q-gutter-md"},{default:Ac((()=>[(0,i.Wm)(V,{class:"q-pt-none"},{default:Ac((()=>[(0,i.Wm)(d,{dense:"",modelValue:s.dev.cantidad,"onUpdate:modelValue":a[12]||(a[12]=e=>s.dev.cantidad=e),autofocus:"",type:"number",label:"Cantidad",required:"",min:"1",rules:[e=>e<=s.datoprestamo.prestado||"Ingrese la cantidad correcta"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{dense:"",modelValue:s.dev.motivo,"onUpdate:modelValue":a[13]||(a[13]=e=>s.dev.motivo=e),label:"Observacion"},null,8,["modelValue"])])),_:1}),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Devolver",type:"submit",color:"primary"}),(0,i.wy)((0,i.Wm)(c,{label:"Cancel",color:"red"},null,512),[[q]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(C,{modelValue:s.dialog_list,"onUpdate:modelValue":a[15]||(a[15]=e=>s.dialog_list=e)},{default:Ac((()=>[(0,i.Wm)(x,{style:{"min-width":"350px"}},{default:Ac((()=>[(0,i.Wm)(V,null,{default:Ac((()=>[Hc])),_:1}),(0,i.Wm)(V,{class:"q-pt-none"},{default:Ac((()=>[(0,i.Wm)(y,{title:"Datos de Devolucion",rows:s.listado,columns:s.colum,"row-key":"name"},null,8,["rows","columns"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})})),Kc={name:"Venta",data(){return{tab:"local",prestamos:[],cliente:"",inventarios:[],inventario:"",cantidades:[],cantidad:1,fisico:"",efectivo:0,observacion:"",totalefectivo:0,dialog_dev:!1,dialog_list:!1,datoprestamo:{},listado:[],listadop:[],dev:{},tipo:"EN PRESTAMO",reportepres:[],options:[],fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),boolmod:!1,filter:"",pagination:{rowsPerPage:20},colum:[{name:"fecha",align:"center",label:"fecha",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"cantidad",label:"cantidad",field:"cantidad",sortable:!0},{name:"motivo",label:"Observacion",field:"motivo"}],colprestamo:[{name:"opcion",label:"OPCION",field:"opcion"},{name:"local",label:"LOCAL",field:e=>e.cliente.local,sortable:!0,align:"left"},{name:"titular",label:"TITULAR",field:e=>e.cliente.titular,sortable:!0,align:"left"},{name:"telefono",label:"TELEFONO",field:e=>e.cliente.telefono,sortable:!0},{name:"Inventario",label:"INVENTARIO",field:e=>e.inventario.nombre,sortable:!0,align:"left"},{name:"fecha",label:"FECHA",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"estado",label:"ESTADO",field:"estado",sortable:!0},{name:"cantidad",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"prestado",label:"PENDIENTE",field:"prestado",sortable:!0},{name:"efectivo",label:"EFECTIVO",field:"efectivo",sortable:!0},{name:"observacion",label:"OBSERVACION",field:"observacion"},{name:"user",label:"USUARIO",field:e=>e.user.name},{name:"logprestamos",label:"HISTORIAL",field:"logprestamos"}]}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})},created(){for(let e=1;e<=100;e++)this.cantidades.push(e);this.$axios.get("http://192.168.100.8:81/api/inventario").then((e=>{this.inventarios=e.data,this.inventario=this.inventarios[0]})),this.listclientes(),this.cajaprestamo(),this.listadoprestamo(),this.reporte()},methods:{verTelef(e){this.$q.dialog({title:"Telefono Cliente: "+e.cliente.titular,message:e.cliente.telefono}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.efectivo=parseFloat(this.cantidad)*parseFloat(this.inventario.precio)},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.prestamos=this.prestamos.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.prestamos=this.options})},reporte(){this.$axios.post("http://192.168.100.8:81/api/reportecliente").then((e=>{this.reportepres=[],se()("#example").DataTable().destroy(),e.data.forEach((e=>{"local"==this.tab&&"1"==e.tipocliente&&this.reportepres.push(e),"cliente"==this.tab&&"2"==e.tipocliente&&this.reportepres.push(e)})),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},listadoprestamo(){this.$axios.get("http://192.168.100.8:81/api/prestamo").then((e=>{console.log(e.data),this.listadop=[],e.data.forEach((e=>{"local"==this.tab&&"1"==e.cliente.tipocliente&&this.listadop.push(e),"cliente"==this.tab&&"2"==e.cliente.tipocliente&&this.listadop.push(e)}))}))},onDev(e){this.datoprestamo=e,this.dialog_dev=!0},onEliminar(e){confirm("seguro de eliminar?")&&this.$axios.post("http://192.168.100.8:81/api/anularprestamo",e).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},ondelete(e){confirm("seguro de ELIMINAR?")&&this.$axios.delete("http://192.168.100.8:81/api/prestamo/"+e.id).then((e=>{this.cajaprestamo(),this.listadoprestamo(),console.log(e.data)}))},onList(e){this.listado=e.logprestamos,this.dialog_list=!0},cajaprestamo(){this.$axios.post("http://192.168.100.8:81/api/tefectivo").then((e=>{this.totalefectivo=e.data[0].total}))},filtrarlista(){this.listadoprestamo(),this.listclientes(),this.reporte()},modificar(){if(this.inventario.cantidad<this.cantidad)return this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/modprestamo",{id:this.prestamo_id,efectivo:this.efectivo,fisico:this.fisico,fecha:this.fecha,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,inventario_id:this.inventario.id}).then((e=>{this.listadoprestamo(),this.boolmod=!1,this.$q.loading.hide(),this.cantidad=1,this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.efectivo=0,this.observacion=""})),this.filtrarlista(),this.cajaprestamo()},listclientes(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/listacliente").then((e=>{this.prestamos=[],console.log(e.data),e.data.forEach((e=>{"local"==this.tab&&"1"==e.tipocliente&&(e.titular=e.local+" "+e.titular,e.label=e.titular,this.prestamos.push(e)),"cliente"==this.tab&&"2"==e.tipocliente&&(e.label=e.titular,this.prestamos.push(e))})),this.options=this.prestamos,this.$q.loading.hide()}))},misprestamos(){this.$q.loading.show(),this.$axios.get("http://192.168.100.8:81/api/cliente").then((e=>{this.prestamos=e.data,this.$q.loading.hide(),this.cliente=this.prestamos[0]}))},agregar(){return this.inventario.cantidad<this.cantidad?(this.$q.notify({message:"No ay sufuciente en Inventario",color:"red",icon:"warning"}),!1):null==this.cliente?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):(this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/prestamo",{efectivo:this.efectivo,fisico:this.fisico,observacion:this.observacion,cantidad:this.cantidad,cliente_id:this.cliente.id,tipo:this.tipo,fecha:this.fecha,inventario_id:this.inventario.id}).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.listadoprestamo(),this.$q.loading.hide(),this.cantidad=1,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.cliente=this.cliente[0],this.inventario=this.inventario[0],this.calcular})),this.filtrarlista(),void this.cajaprestamo())},onMod(e){console.log(e),this.boolmod=!0,this.prestamo_id=e.id,this.efectivo=e.efectivo,this.fisico=e.fisico,this.observacion=e.observacion,this.cantidad=e.cantidad,this.cliente=e.cliente,this.inventario=e.inventario,this.fecha=e.fecha},devolver(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/logprestamo",{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),cantidad:this.dev.cantidad,motivo:this.dev.motivo,inventario_id:this.datoprestamo.inventario_id,id:this.datoprestamo.id}).then((e=>{console.log(e.data);let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),a.print(),a.close(),this.dialog_dev=!1,this.listadoprestamo(),this.cajaprestamo(),this.dev={},this.$q.loading.hide()}))},imprimir(){function e(){var e=new Image;e.src="logo.png",a.addImage(e,"jpg",.5,.5,2,2),a.setFont(void 0,"bold"),a.text(5,1,"Historial de prestamos Pendientes"),a.text(1,3,"Local"),a.text(5,3,"Titular"),a.text(11,3,"Material"),a.text(15,3,"Cantidad"),a.text(17.5,3,"Monto"),a.setFont(void 0,"normal")}var a=new Lo.kH("p","cm","letter");a.setFont("courier"),a.setFontSize(9),e();let t=0,o=0;this.reportepres.forEach((l=>{t+=.5,a.text(1,t+3,""+l.local),a.text(5,t+3,""+l.titular),a.text(11,t+3,""+l.nombre),a.text(16.5,t+3,""+l.total,{align:"right"}),null!=l.monto?(a.text(18,t+3,""+l.monto,{align:"right"}),o+=l.monto):a.text(17,t+3,"sin garantía"),t+3>25&&(a.addPage(),e(),t=0)})),a.setFont(void 0,"bold"),a.text(16.5,t+3.5,"TOTAL"),a.text(18,t+3.5,o+" Bs"),a.setFont(void 0,"normal"),window.open(a.output("bloburl"),"_blank")}}};Kc.render=Jc,Kc.__scopeId="data-v-360aafaf";const Xc=Kc;k()(Kc,"components",{QPage:V.Z,QForm:q.Z,QSelect:Ge.Z,QInput:E.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QBadge:re.Z,QBtnDropdown:di.Z,QList:ci.Z,QItem:mi.Z,QItemSection:ui.Z,QAvatar:pe.Z,QItemLabel:pi.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z}),k()(Kc,"directives",{ClosePopup:he.Z});const em=(0,i.HX)("data-v-bf6abba8");(0,i.dD)("data-v-bf6abba8");const am=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas")],-1),tm=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas")],-1),om={class:"row"},lm={class:"col-3  q-pa-xs"},im={key:0,class:"col-3  q-pa-xs"},sm={class:"col-3"},nm={class:"col-3  q-pa-xs flex flex-center"},rm={class:"col-12"},dm={class:" responsive"},cm={id:"example",style:{width:"100%"},class:"cell-border"},mm=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),um=(0,i.Uk)("LOCAL"),pm=(0,i.Uk)("CLIENTE"),hm=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),gm=(0,i.Wm)("b",null,"Obs:",-1),fm={style:{width:"100%"}},bm=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1),vm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Wm=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const wm=em(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-card-actions"),g=(0,i.up)("q-card"),f=(0,i.up)("q-dialog"),b=(0,i.up)("q-table"),v=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(v,{class:"q-pa-xs"},{default:em((()=>[am,tm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:em((()=>[(0,i.Wm)("div",om,[(0,i.Wm)("div",lm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",im,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",sm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",nm,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",rm,[(0,i.Wm)("div",dm,[(0,i.Wm)("table",cm,[mm,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:em((()=>[um])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:em((()=>[pm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:em((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e)},null,8,["onClick"]),(0,i.Wm)(c,{icon:"shopping_cart",color:"accent",onClick:a=>{s.venta=e,s.modalDialog=!0}},null,8,["onClick"])])])))),128))])])]),(0,i.Wm)(f,{modelValue:s.modalDialog,"onUpdate:modelValue":a[4]||(a[4]=e=>s.modalDialog=e)},{default:em((()=>[(0,i.Wm)(g,{style:{width:"700px","max-width":"80vw"}},{default:em((()=>[(0,i.Wm)(p,null,{default:em((()=>[hm])),_:1}),(0,i.Wm)(p,null,{default:em((()=>[(0,i.Wm)("div",null,[gm,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",fm,[bm,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(h,{align:"right"},{default:em((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(f,{modelValue:s.alert,"onUpdate:modelValue":a[5]||(a[5]=e=>s.alert=e)},{default:em((()=>[(0,i.Wm)(g,null,{default:em((()=>[(0,i.Wm)(p,null,{default:em((()=>[vm])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:em((()=>[(0,i.Wm)(b,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(h,{align:"right"},{default:em((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(f,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:em((()=>[(0,i.Wm)(g,null,{default:em((()=>[(0,i.Wm)(p,null,{default:em((()=>[Wm])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:em((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:em((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));t(79720);var ym=t(7167),Vm=t.n(ym),xm=t(90182),Cm=t.n(xm),_m=t(17033),qm=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),Cm().vfs=_m.I.vfs,window.JSZip=Vm();const Em={name:"Venta",data(){return{valcobrar:!1,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],rango:"RANGO",inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,modalDialog:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},venta:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){qm("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]}),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onPago(){this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),qm("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/listadoventa",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],qm("#example").DataTable().destroy(),e.data.forEach((e=>{console.log(e),this.ventas.push({id:e.id,fecha:Be()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,observacion:e.observacion,detalles:e.detalles})})),this.$nextTick((()=>{qm("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Em.render=wm,Em.__scopeId="data-v-bf6abba8";const Am=Em;k()(Em,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTr:ce.Z,QTd:me.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(Em,"directives",{ClosePopup:he.Z});const Dm=(0,i.HX)("data-v-7b2d4ea8");(0,i.dD)("data-v-7b2d4ea8");const Mm={class:"col-12"},Tm=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas Detalle",-1),Sm=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas Detalle")],-1),km={class:"row q-pa-xs"},Om={class:"col-3"},Rm={key:0,class:"col-3"},Nm={class:"col-3"},Um={class:"col-3"},Ym={class:"col-12"},Im={class:" responsive"},Pm={id:"example",style:{width:"100%"},class:"cell-border"},$m=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Fm=(0,i.Uk)("LOCAL"),Lm=(0,i.Uk)("CLIENTE"),zm=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Zm=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const jm=Dm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-table"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(v,{class:"q-pa-xs"},{default:Dm((()=>[(0,i.Wm)("div",Mm,[Tm,Sm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Dm((()=>[(0,i.Wm)("div",km,[(0,i.Wm)("div",Om,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:"",style:{width:"100%"}},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Rm,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:"",style:{width:"100%"}},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Nm,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Um,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Ym,[(0,i.Wm)("div",Im,[(0,i.Wm)("table",Pm,[$m,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Dm((()=>[Fm])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Dm((()=>[Lm])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:Dm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e)},null,8,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:Dm((()=>[(0,i.Wm)(f,null,{default:Dm((()=>[(0,i.Wm)(p,null,{default:Dm((()=>[zm])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Dm((()=>[(0,i.Wm)(h,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:Dm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:Dm((()=>[(0,i.Wm)(f,null,{default:Dm((()=>[(0,i.Wm)(p,null,{default:Dm((()=>[Zm])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Dm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Dm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])),_:1})})),Bm={name:"Venta",data(){return{loading:!1,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),rango:"RANGO",alert:!1,responsable:"",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:e=>Be()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]}),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onPago(){this.loading=!0,this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{console.log(e.data),this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),se()("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/listventdetalle",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:Be()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),se()("#example").DataTable().destroy(),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Bm.render=jm,Bm.__scopeId="data-v-7b2d4ea8";const Qm=Bm;k()(Bm,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QTable:de.Z,QCardActions:T.Z}),k()(Bm,"directives",{ClosePopup:he.Z});const Gm=(0,i.HX)("data-v-baf95226");(0,i.dD)("data-v-baf95226");const Hm={class:"col-12"},Jm=(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas Local",-1),Km={class:"col-12 col-sm-12"},Xm=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas Local")],-1),eu={class:"row"},au={class:"col-3  q-pa-xs"},tu={key:0,class:"col-3  q-pa-xs"},ou={class:"col-3"},lu={class:"col-3  q-pa-xs flex flex-center"},iu={class:"col-12"},su={class:" responsive"},nu={id:"example",style:{width:"100%"},class:"cell-border"},ru=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),du=(0,i.Uk)("LOCAL"),cu=(0,i.Uk)("CLIENTE"),mu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),uu=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const pu=Gm(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-table"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(v,{class:"q-pa-xs"},{default:Gm((()=>[(0,i.Wm)("div",Hm,[Jm,(0,i.Wm)("div",Km,[Xm,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Gm((()=>[(0,i.Wm)("div",eu,[(0,i.Wm)("div",au,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",tu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",ou,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",lu,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",iu,[(0,i.Wm)("div",su,[(0,i.Wm)("table",nu,[ru,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.i},[(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Gm((()=>[du])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Gm((()=>[cu])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:Gm((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e)},null,8,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:Gm((()=>[(0,i.Wm)(f,null,{default:Gm((()=>[(0,i.Wm)(p,null,{default:Gm((()=>[mu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Gm((()=>[(0,i.Wm)(h,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:Gm((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:Gm((()=>[(0,i.Wm)(f,null,{default:Gm((()=>[(0,i.Wm)(p,null,{default:Gm((()=>[uu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Gm((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Gm((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])])])),_:1})})),hu={name:"Venta",data(){return{loading:!1,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:e=>Be()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:"",tot:"",pageTotal:"",ttotal:"",tacuenta:"",tsaldo:""}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(4).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.ttotal=i.column(3,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tcuenta=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tsaldo=i.column(5,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),se()(i.column(4).footer()).html("total:"+this.ttotal+" a cuenta:"+this.tcuenta+" saldo:"+this.tsaldo+" ")}}),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onPago(){this.loading=!0,this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),se()("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/listventlocal",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],se()("#example").DataTable().destroy(),e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:Be()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(4).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.ttotal=i.column(3,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tcuenta=i.column(4,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),this.tsaldo=i.column(5,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),se()(i.column(4).footer()).html("total:"+this.ttotal+" a cuenta:"+this.tcuenta+" saldo:"+this.tsaldo+" ")}})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};hu.render=pu,hu.__scopeId="data-v-baf95226";const gu=hu;k()(hu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QTable:de.Z,QCardActions:T.Z}),k()(hu,"directives",{ClosePopup:he.Z});const fu=(0,i.HX)("data-v-abd6e852");(0,i.dD)("data-v-abd6e852");const bu=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-blue-9 text-center text-white"},"Ventas RUTA")],-1),vu=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas Ruta")],-1),Wu={class:"row"},wu={class:"col-3  q-pa-xs"},yu={key:0,class:"col-3  q-pa-xs"},Vu={class:"col-3"},xu={class:"col-3  q-pa-xs flex flex-center"},Cu={class:"col-12"},_u={class:" responsive"},qu={id:"example",style:{width:"100%"},class:"cell-border"},Eu=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Au=(0,i.Uk)("LOCAL"),Du=(0,i.Uk)("CLIENTE"),Mu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Tu=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1),Su=(0,i.Uk)("pre ");(0,i.Cn)();const ku=fu(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-table"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(v,{class:"q-pa-xs"},{default:fu((()=>[bu,vu,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:fu((()=>[(0,i.Wm)("div",Wu,[(0,i.Wm)("div",wu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",yu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",Vu,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",xu,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Cu,[(0,i.Wm)("div",_u,[(0,i.Wm)("table",qu,[Eu,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e.id},[(0,i.Wm)("td",null,(0,R.zw)(e.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(e.local),1),(0,i.Wm)("td",null,(0,R.zw)(e.titular),1),(0,i.Wm)("td",null,(0,R.zw)(e.total),1),(0,i.Wm)("td",null,(0,R.zw)(e.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(e.saldo),1),(0,i.Wm)("td",null,[1==e.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:fu((()=>[Au])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:fu((()=>[Du])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==e.estado?"positive":"negative"},{default:fu((()=>[(0,i.Uk)((0,R.zw)(e.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(e.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:a=>n.listpago(e)},null,8,["onClick"]),"POR COBRAR"==e.estado?((0,i.wg)(),(0,i.j4)(c,{key:0,icon:"monetization_on",color:"amber",onClick:a=>n.pago(e)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:fu((()=>[(0,i.Wm)(f,null,{default:fu((()=>[(0,i.Wm)(p,null,{default:fu((()=>[Mu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:fu((()=>[(0,i.Wm)(h,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:fu((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[8]||(a[8]=e=>s.dialog_pago=e)},{default:fu((()=>[(0,i.Wm)(f,null,{default:fu((()=>[(0,i.Wm)(p,null,{default:fu((()=>[Tu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:fu((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:fu((()=>[(0,i.Wm)(r,{outlined:"",modelValue:s.regpago.fecha,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.fecha=e),type:"date",label:"Fecha","lazy-rules":"",rules:[e=>e&&e.length>0||"Ingrese la fecha"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"no exceder el monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[7]||(a[7]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green",loading:s.loading},null,8,["loading"]),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),Su])])),_:1})})),Ou={name:"Venta",data(){return{loading:!1,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",clientes:[],clientes2:[],rango:"RANGO",cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:e=>Be()(e.fecha).format("DD/MM/YYYY")},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"opcion",label:"Opcion",field:"opcion"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]}),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{onPago(){this.loading=!0,this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.dialog_pago=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.regpago={fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")},this.misventas(),this.loading=!1,this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.regpago.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD"),this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),this.ventas=[],this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),se()("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/listventruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],se()("#example").DataTable().destroy(),e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:Be()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos})})),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Ou.render=ku,Ou.__scopeId="data-v-abd6e852";const Ru=Ou;k()(Ou,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTr:ce.Z,QTd:me.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(Ou,"directives",{ClosePopup:he.Z});const Nu=(0,i.HX)("data-v-50e5b92a");(0,i.dD)("data-v-50e5b92a");const Uu=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-subtitle1 bg-info text-center text-white"},"Historial de ventas con Rutas")],-1),Yu={class:"row"},Iu={class:"col-3  q-pa-xs"},Pu={key:0,class:"col-3  q-pa-xs"},$u={class:"col-3"},Fu={class:"col-3  q-pa-xs flex flex-center"},Lu={class:"col-12"},zu={class:" responsive"},Zu={id:"example",style:{width:"100%"},class:"cell-border"},ju=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Local"),(0,i.Wm)("th",null,"Titular"),(0,i.Wm)("th",null,"Total"),(0,i.Wm)("th",null,"A cuenta"),(0,i.Wm)("th",null,"Saldo"),(0,i.Wm)("th",null,"Tipo cliente"),(0,i.Wm)("th",null,"Estado"),(0,i.Wm)("th",null,"Usuario"),(0,i.Wm)("th",null,"Opcion")])],-1),Bu=(0,i.Uk)("LOCAL"),Qu=(0,i.Uk)("CLIENTE"),Gu=(0,i.Wm)("div",{class:"text-h6"},"Pagos Realizados",-1),Hu=(0,i.Wm)("div",{class:"text-h6"},"Registrar Pago",-1);(0,i.Cn)();const Ju=Nu(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-input"),d=(0,i.up)("q-toggle"),c=(0,i.up)("q-btn"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-card-section"),h=(0,i.up)("q-table"),g=(0,i.up)("q-card-actions"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-page"),W=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(v,{class:"q-pa-xs"},{default:Nu((()=>[Uu,(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misventas,["prevent"])},{default:Nu((()=>[(0,i.Wm)("div",Yu,[(0,i.Wm)("div",Iu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[1]||(a[1]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])]),"RANGO"==s.rango?((0,i.wg)(),(0,i.j4)("div",Pu,[(0,i.Wm)(r,{type:"date",label:"fecha",modelValue:s.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha3=e),outlined:"",required:""},null,8,["modelValue"])])):(0,i.kq)("",!0),(0,i.Wm)("div",$u,[(0,i.Wm)(d,{modelValue:s.rango,"onUpdate:modelValue":a[3]||(a[3]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Fu,[(0,i.Wm)(c,{color:"info",label:"Consultar",icon:"search",type:"submit",style:{width:"100%"}})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Lu,[(0,i.Wm)("div",zu,[(0,i.Wm)("table",Zu,[ju,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.ventas,(a=>((0,i.wg)(),(0,i.j4)("tr",{key:a.id},[(0,i.Wm)("td",null,(0,R.zw)(a.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(a.local),1),(0,i.Wm)("td",null,(0,R.zw)(a.titular),1),(0,i.Wm)("td",null,(0,R.zw)(a.total),1),(0,i.Wm)("td",null,(0,R.zw)(a.acuenta),1),(0,i.Wm)("td",null,(0,R.zw)(a.saldo),1),(0,i.Wm)("td",null,[1==a.tipocliente?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"accent"},{default:Nu((()=>[Bu])),_:1})):((0,i.wg)(),(0,i.j4)(u,{key:1,color:"teal"},{default:Nu((()=>[Qu])),_:1}))]),(0,i.Wm)("td",null,[(0,i.Wm)(u,{color:"CANCELADO"==a.estado?"positive":"negative"},{default:Nu((()=>[(0,i.Uk)((0,R.zw)(a.estado),1)])),_:2},1032,["color"])]),(0,i.Wm)("td",null,(0,R.zw)(a.user),1),(0,i.Wm)("td",null,[(0,i.Wm)(c,{icon:"segment",color:"green",onClick:e=>n.listpago(a),dense:""},null,8,["onClick"]),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(c,{key:0,color:"info",icon:"print",dense:"",onClick:e=>n.printRuta(a)},null,8,["onClick"])):(0,i.kq)("",!0)])])))),128))])])]),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[4]||(a[4]=e=>s.alert=e)},{default:Nu((()=>[(0,i.Wm)(f,null,{default:Nu((()=>[(0,i.Wm)(p,null,{default:Nu((()=>[Gu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Nu((()=>[(0,i.Wm)(h,{title:"Pagos",rows:s.pagos,columns:s.columns,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(g,{align:"right"},{default:Nu((()=>[(0,i.wy)((0,i.Wm)(c,{flat:"",label:"OK",color:"primary"},null,512),[[W]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(b,{modelValue:s.dialog_pago,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dialog_pago=e)},{default:Nu((()=>[(0,i.Wm)(f,null,{default:Nu((()=>[(0,i.Wm)(p,null,{default:Nu((()=>[Hu])),_:1}),(0,i.Wm)(p,{class:"q-pt-none"},{default:Nu((()=>[(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.onPago,["prevent"]),class:"q-gutter-md"},{default:Nu((()=>[(0,i.Wm)(r,{filled:"",modelValue:s.regpago.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.regpago.monto=e),label:"Monto",hint:"Efectivo",type:"number","lazy-rules":"",rules:[e=>e&&e>0&&e<=s.regpago.saldo||"Please type something"]},null,8,["modelValue","rules"]),(0,i.Wm)(r,{filled:"",type:"text",modelValue:s.regpago.observacion,"onUpdate:modelValue":a[6]||(a[6]=e=>s.regpago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(c,{label:"Registrar",type:"submit",color:"green"}),(0,i.wy)((0,i.Wm)(c,{flat:"",label:"Cancelar",color:"primary"},null,512),[[W]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}));var Ku=t(47345);t(55241)(),t(79720)(),t(22905),t(21400),Cm().vfs=_m.I.vfs,window.JSZip=Vm();const Xu={name:"Venta",data(){return{fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha3:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha4:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha5:le.ZP.formatDate(new Date,"YYYY-MM-DD"),alert:!1,responsable:"",rango:"RANGO",clientes:[],clientes2:[],cliente:"",productos:[],inventarios:[],inventario:{},producto:"",cantidad:1,cantidades:[],acuenta:"",detalles:[],garantia:{},dialog_garantia:!1,dialog_pago:!1,cantidadprestamo:0,pagos:[],regpago:{},prestamo:{},columns:[{name:"fecha",label:"Fecha",field:"fecha"},{name:"monto",label:"Monto",field:"monto"},{name:"Observacion",label:"Observacion",field:"observacion"}],columns2:[{name:"id",label:"Id",field:"id"},{name:"fecha",label:"Fecha",field:"fecha"},{name:"local",label:"Local",field:"local"},{name:"titular",label:"Titular",field:"titular"},{name:"total",label:"Total",field:"total"},{name:"acuenta",label:"A cuenta",field:"acuenta"},{name:"saldo",label:"Saldo",field:"saldo"},{name:"tipocliente",label:"Tipo cliente",field:"tipocliente"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"user"},{name:"direccion",label:"Direccion",field:"direccion"},{name:"fechaentrega",label:"Fecha Entrega",field:"fechaentrega"},{name:"telefono1",label:"Telefono 1",field:"telefono1"},{name:"telefono2",label:"Telefono 2",field:"telefono2"}],columns3:[{name:"fecha",label:"fecha",field:"fecha"},{name:"nombre",label:"Material",field:"nombre"},{name:"efectivo",label:"efectivo",field:"efectivo"},{name:"fisico",label:"fisico",field:"fisico"},{name:"observacion",label:"observacion",field:"observacion"},{name:"estado",label:"Estado",field:"estado"},{name:"user",label:"Usuario",field:"name"},{name:"opcion",label:"opcion",field:"opcion"}],ventas:[],prestamos:[],filter:"",options:[],model:""}},mounted(){Ku("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]}),this.$axios.post("http://192.168.100.8:81/api/me").then((e=>{this.responsable=e.data.name}))},methods:{printRuta(e){console.log(e),this.$axios.post("http://192.168.100.8:81/api/impresionruta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close()}))},onPago(){this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.misventas(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},pago(e){this.regpago.venta_id=e.id,this.regpago.saldo=e.saldo,this.dialog_pago=!0},listpago(e){this.pagos=e.pagos,this.alert=!0},misventas(){this.$q.loading.show(),Ku("#example").DataTable().destroy(),this.ventas=[],"DIA"==this.rango&&(this.fecha3=this.fecha2),this.$axios.post("http://192.168.100.8:81/api/listadoventaruta",{ini:this.fecha2,fin:this.fecha3}).then((e=>{this.$q.loading.hide(),this.ventas=[],e.data.forEach((e=>{this.ventas.push({id:e.id,fecha:Be()(e.fecha).format("DD/MM/YYYY"),total:e.total,acuenta:e.acuenta,saldo:e.saldo,tipocliente:e.cliente.tipocliente,estado:e.estado,local:e.cliente.local,titular:e.cliente.titular,user:e.user.name,pagos:e.pagos,direccion:e.direccion,fechaentrega:e.fechaentrega,telefono1:e.telefono1,telefono2:e.telefono2})})),this.$nextTick((()=>{Ku("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",buttons:["copy","csv","excel","pdf","print"],lengthMenu:[[10,25,50,-1],[10,25,50,"All"]]})}))}))},guardar(){return 0==this.model?(this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1):void 0==this.fecha?(this.$q.notify({message:"Tienes que seleccionar fecha",color:"red",icon:"error"}),!1):(this.$q.loading.show(),void this.$axios.post("http://192.168.100.8:81/api/venta",{fecha:this.fecha,total:this.subtotal,acuenta:this.acuenta,saldo:this.saldo,estado:this.estado,filtro:"",tipo:"LOCAL",cliente_id:this.model.id,detalles:[{nombreproducto:this.producto.nombre,precio:this.producto.precio,producto_id:this.producto.id,cantidad:this.cantidad,subtotal:this.subtotal}]}).then((e=>{this.$q.notify({message:"Venta exitosa",color:"green",icon:"info"});let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),this.misventas(),this.subtotal="",this.acuenta="",this.saldo="",this.estado="",this.model="",this.producto="",this.cantidad=1,this.subtotal=0,this.fecha=le.ZP.formatDate(new Date,"YYYY-MM-DD")})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})})))},deleteval(e){this.detalles.splice(e,1)},generar(){if(0==this.model)return this.$q.notify({message:"Tienes que seleccionar cliente",color:"red",icon:"error"}),!1;console.log(this.model.id),""!=this.model&&this.$axios.post("http://192.168.100.8:81/api/listaprestamo",{fecha1:this.fecha4,fecha2:this.fecha5,cliente_id:this.model.id}).then((e=>{console.log(e.data),this.prestamos=e.data}))},regprestamo(){""!=this.model?(this.prestamo.cliente_id=this.model.id,this.prestamo.inventario_id=this.inventario.id,this.$axios.post("http://192.168.100.8:81/api/garantia",this.prestamo).then((e=>{console.log(e.data),this.$q.notify({message:"Prestamo exitosa",color:"green",icon:"info"}),this.generar()})).catch((e=>{this.$q.loading.hide(),console.error(e),this.$q.notify({message:e.response.data.message,color:"red",icon:"error"})}))):this.$q.notify({message:"Debes seleccionar cliente",color:"red",icon:"error"})},devolver1(e){this.garantia=e.row,console.log(this.garantia),this.dialog_garantia=!0},devolver(){console.log(this.garantia),this.$axios.post("http://192.168.100.8:81/api/devolver",this.garantia).then((e=>{this.$q.notify({message:"Devolucion exitosa",color:"green",icon:"info"})})),this.dialog_garantia=!1},onReset(){}},computed:{subtotal(){return void 0!=this.producto.precio&&NaN!=this.producto.precio?parseFloat(this.producto.precio)*parseFloat(this.cantidad):0},total(){let e=0;return this.detalles.forEach((a=>{e+=parseFloat(a.subtotal)})),e},estado(){return this.acuenta<this.subtotal?"POR COBRAR":"CANCELADO"},saldo(){return this.subtotal-this.acuenta},ventat(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.total)})),e},porc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.acuenta)})),e},saldoc(){let e=0;return this.ventas.forEach((a=>{e+=parseFloat(a.saldo)})),e}}};Xu.render=Ju,Xu.__scopeId="data-v-50e5b92a";const ep=Xu;k()(Xu,"components",{QPage:V.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBtn:D.Z,QTable:de.Z,QIcon:_.Z,QTr:ce.Z,QTd:me.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QCardActions:T.Z}),k()(Xu,"directives",{ClosePopup:he.Z});const ap={class:"q-pa-md"},tp={class:"row"},op={class:"col-3  q-pa-xs"},lp={class:"col-3  q-pa-xs"},ip={class:"col-3"},sp={class:"col-3  q-pa-xs flex flex-center"},np={class:"text-h6"},rp=(0,i.Uk)(" Caja Chica"),dp={class:"row"},cp={class:"col-12"};function mp(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.up)("q-td"),W=(0,i.up)("q-table"),w=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",ap,[(0,i.Wm)(r,{label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",tp,[(0,i.Wm)("div",op,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",lp,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",ip,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",sp,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA CHICA: "+(0,R.zw)(s.cajachica.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[8]||(a[8]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",np,[(0,i.Wm)(p,{name:"add_circle"}),rp])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",dp,[(0,i.Wm)("div",cp,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGA","RETIRA"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[w]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(W,{filter:s.filter,title:"Caja Chica",rows:s.data,columns:s.columns,"row-key":"name","rows-per-page-options":[50,100]},{"top-right":(0,i.w5)((()=>[(0,i.Wm)(d,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[9]||(a[9]=e=>s.filter=e),placeholder:"Search"},{append:(0,i.w5)((()=>[(0,i.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,i.w5)((e=>[(0,i.Wm)(v,{key:"opcion",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(r,{dense:"",round:"",flat:"",color:"red",onClick:a=>n.deleteRow(e.row),icon:"delete"},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["filter","rows","columns"])])}const up={data(){return{alert:!1,filter:"",fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",rango:"RANGO",dato:{},options:[],props:[],cajachica:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[]}},created(){this.misdatos(),this.totalcaja()},methods:{deleteRow(e){this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/logcaja/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("http://192.168.100.8:81/api/totalcaja").then((e=>{this.cajachica=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$axios.post("http://192.168.100.8:81/api/listcaja",{fecha1:this.fecha1,fecha2:this.fecha2,user_id:0}).then((e=>{console.log(e.data),this.data=e.data,this.totalcaja(),this.$q.loading.hide()}))},onSubmit(){if("RETIRA"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajachica.monto))return this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/logcaja",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGA"}}};up.render=mp;const pp=up;k()(up,"components",{QBtn:D.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QSelect:Ge.Z,QTable:de.Z,QTd:me.Z}),k()(up,"directives",{ClosePopup:he.Z});const hp={class:"q-pa-md"},gp={class:"row"},fp={class:"col-3  q-pa-xs"},bp={class:"col-3  q-pa-xs"},vp={class:"col-3"},Wp={class:"col-3  q-pa-xs flex flex-center"},wp={class:"text-h6"},yp=(0,i.Uk)(" Caja General"),Vp={class:"row"},xp={class:"col-12"},Cp={id:"example",class:"display"},_p=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"Fecha"),(0,i.Wm)("th",null,"Monto"),(0,i.Wm)("th",null,"Detalle"),(0,i.Wm)("th",null,"Motivo"),(0,i.Wm)("th",null,"Glosa"),(0,i.Wm)("th",null,"Tipo"),(0,i.Wm)("th",null,"Opcion")])],-1),qp=(0,i.Wm)("td",null,null,-1);function Ep(e,a,t,l,s,n){const r=(0,i.up)("q-btn"),d=(0,i.up)("q-input"),c=(0,i.up)("q-toggle"),m=(0,i.up)("q-form"),u=(0,i.up)("q-badge"),p=(0,i.up)("q-icon"),h=(0,i.up)("q-card-section"),g=(0,i.up)("q-select"),f=(0,i.up)("q-card"),b=(0,i.up)("q-dialog"),v=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)("div",hp,[(0,i.Wm)(r,{label:"Agregar o Retirar",color:"positive",onClick:a[1]||(a[1]=e=>s.alert=!0),icon:"add_circle",class:"q-mb-xs"}),(0,i.Wm)(m,{onSubmit:(0,o.iM)(n.misdatos,["prevent"])},{default:(0,i.w5)((()=>[(0,i.Wm)("div",gp,[(0,i.Wm)("div",fp,[(0,i.Wm)(d,{type:"date",label:"fecha",modelValue:s.fecha1,"onUpdate:modelValue":a[2]||(a[2]=e=>s.fecha1=e),outlined:"",required:""},null,8,["modelValue"])]),(0,i.Wm)("div",bp,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(d,{key:0,type:"date",label:"fecha",modelValue:s.fecha2,"onUpdate:modelValue":a[3]||(a[3]=e=>s.fecha2=e),outlined:"",required:""},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",vp,[(0,i.Wm)(c,{modelValue:s.rango,"onUpdate:modelValue":a[4]||(a[4]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Wp,[(0,i.Wm)(r,{color:"info",label:"Consultar",icon:"search",type:"submit"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)(u,{class:"full-width text-h5 flex flex-center",color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)("TOTAL EN CAJA GENERAL: "+(0,R.zw)(s.cajageneral.monto)+" Bs.",1)])),_:1}),(0,i.Wm)(b,{modelValue:s.alert,"onUpdate:modelValue":a[8]||(a[8]=e=>s.alert=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{style:{"max-width":"80%",width:"50%"}},{default:(0,i.w5)((()=>[(0,i.Wm)(h,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",wp,[(0,i.Wm)(p,{name:"add_circle"}),yp])])),_:1}),(0,i.Wm)(h,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onSubmit:n.onSubmit,onReset:n.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Vp,[(0,i.Wm)("div",xp,[(0,i.Wm)(d,{filled:"",modelValue:s.dato.monto,"onUpdate:modelValue":a[5]||(a[5]=e=>s.dato.monto=e),type:"number",step:"0.1",label:"Monto Bs ","lazy-rules":"",rules:[e=>e&&e>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"]),(0,i.Wm)(d,{filled:"",modelValue:s.dato.motivo,"onUpdate:modelValue":a[6]||(a[6]=e=>s.dato.motivo=e),type:"text",label:"Motivo"},null,8,["modelValue"]),(0,i.Wm)(g,{filled:"",modelValue:s.dato.tipo,"onUpdate:modelValue":a[7]||(a[7]=e=>s.dato.tipo=e),label:"TIPO",options:["AGREGAR","RETIRAR"],"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresa datos"]},null,8,["modelValue","rules"])])]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Crear",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[v]])])])),_:1},8,["onSubmit","onReset"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("table",Cp,[_p,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.data,(t=>((0,i.wg)(),(0,i.j4)("tr",{key:t},[(0,i.Wm)("td",null,(0,R.zw)(t.fecha),1),(0,i.Wm)("td",null,(0,R.zw)(t.monto),1),(0,i.Wm)("td",null,(0,R.zw)(t.detalle),1),(0,i.Wm)("td",null,(0,R.zw)(t.motivo),1),(0,i.Wm)("td",null,(0,R.zw)(null==t.glosa?"":t.glosa.nombre),1),(0,i.Wm)("td",null,["INGRESO"==t.tipo?((0,i.wg)(),(0,i.j4)(u,{key:0,color:"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(t.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"EGRESO"==t.tipo?((0,i.wg)(),(0,i.j4)(u,{key:1,color:"red"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(t.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"AGREGAR"==t.tipo?((0,i.wg)(),(0,i.j4)(u,{key:2,color:"blue"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(t.tipo),1)])),_:2},1024)):(0,i.kq)("",!0),"RETIRAR"==t.tipo?((0,i.wg)(),(0,i.j4)(u,{key:3,color:"purple"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(t.tipo),1)])),_:2},1024)):(0,i.kq)("",!0)]),1==e.$store.state.login.user.id?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",round:"",flat:"",color:"red",onClick:a[9]||(a[9]=e=>n.deleteRow(s.props.row)),icon:"delete"})):(0,i.kq)("",!0),qp])))),128))])])])}const Ap={data(){return{alert:!1,filter:"",fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),model:"",dato:{},options:[],props:[],pageTotal:"",rango:"RANGO",tot:"",cajageneral:0,columns:[{name:"fecha",align:"left",label:"FECHA ",field:e=>Be()(e.fecha).format("DD/MM/YYYY"),sortable:!0},{name:"monto",align:"left",label:"MONTO",field:"monto",sortable:!0},{name:"detalle",align:"left",label:"DETALLE",field:"detalle",sortable:!0},{name:"motivo",align:"left",label:"MOTIVO",field:"motivo",sortable:!0},{name:"glosa",align:"left",label:"GLOSA",field:e=>null==e.glosa?"":e.glosa.nombre,sortable:!0},{name:"tipo",align:"left",label:"TIPO",field:"tipo",sortable:!0},{name:"opcion",align:"left",label:"OPCION",field:"opcion"}],data:[]}},created(){se()("#example").DataTable(),this.misdatos(),this.totalcaja()},methods:{deleteRow(e){this.$q.dialog({title:"Confirmar",message:"Esta seguro de eliminar",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/loggeneral/"+e.id).then((e=>{console.log(e.data),this.misdatos()}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},totalcaja(){this.$axios.post("http://192.168.100.8:81/api/totalgeneral").then((e=>{this.cajageneral=e.data}))},misdatos(){this.$q.loading.show(),"DIA"==this.rango&&(this.fecha2=this.fecha1),se()("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/listgeneral",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{se()("#example").DataTable().destroy(),console.log(e.data),e.data.forEach((e=>{e.fecha=Be()(e.fecha).format("DD/MM/YYYY")})),this.data=e.data,this.totalcaja(),this.$nextTick((()=>{se()("#example").DataTable({language:{processing:"Procesando...",lengthMenu:"Mostrar _MENU_ registros",zeroRecords:"No se encontraron resultados",emptyTable:"Ningún dato disponible en esta tabla",infoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",infoFiltered:"(filtrado de un total de _MAX_ registros)",search:"Buscar:",infoThousands:",",loadingRecords:"Cargando...",paginate:{first:"Primero",last:"Último",next:"Siguiente",previous:"Anterior"},aria:{sortAscending:": Activar para ordenar la columna de manera ascendente",sortDescending:": Activar para ordenar la columna de manera descendente"},buttons:{copy:"Copiar",colvis:"Visibilidad",collection:"Colección",colvisRestore:"Restaurar visibilidad",copyKeys:"Presione ctrl o u2318 + C para copiar los datos de la tabla al portapapeles del sistema. <br /> <br /> Para cancelar, haga clic en este mensaje o presione escape.",copySuccess:{1:"Copiada 1 fila al portapapeles",_:"Copiadas %ds fila al portapapeles"},copyTitle:"Copiar al portapapeles",csv:"CSV",excel:"Excel",pageLength:{"-1":"Mostrar todas las filas",_:"Mostrar %d filas"},pdf:"PDF",print:"Imprimir",renameState:"Cambiar nombre",updateState:"Actualizar",createState:"Crear Estado",removeAllStates:"Remover Estados",removeState:"Remover",savedStates:"Estados Guardados",stateRestore:"Estado %d"},autoFill:{cancel:"Cancelar",fill:"Rellene todas las celdas con <i>%d</i>",fillHorizontal:"Rellenar celdas horizontalmente",fillVertical:"Rellenar celdas verticalmentemente"},decimal:",",searchBuilder:{add:"Añadir condición",button:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},clearAll:"Borrar todo",condition:"Condición",conditions:{date:{after:"Despues",before:"Antes",between:"Entre",empty:"Vacío",equals:"Igual a",notBetween:"No entre",notEmpty:"No Vacio",not:"Diferente de"},number:{between:"Entre",empty:"Vacio",equals:"Igual a",gt:"Mayor a",gte:"Mayor o igual a",lt:"Menor que",lte:"Menor o igual que",notBetween:"No entre",notEmpty:"No vacío",not:"Diferente de"},string:{contains:"Contiene",empty:"Vacío",endsWith:"Termina en",equals:"Igual a",notEmpty:"No Vacio",startsWith:"Empieza con",not:"Diferente de",notContains:"No Contiene",notStarts:"No empieza con",notEnds:"No termina con"},array:{not:"Diferente de",equals:"Igual",empty:"Vacío",contains:"Contiene",notEmpty:"No Vacío",without:"Sin"}},data:"Data",deleteTitle:"Eliminar regla de filtrado",leftTitle:"Criterios anulados",logicAnd:"Y",logicOr:"O",rightTitle:"Criterios de sangría",title:{0:"Constructor de búsqueda",_:"Constructor de búsqueda (%d)"},value:"Valor"},searchPanes:{clearMessage:"Borrar todo",collapse:{0:"Paneles de búsqueda",_:"Paneles de búsqueda (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Sin paneles de búsqueda",loadMessage:"Cargando paneles de búsqueda",title:"Filtros Activos - %d",showMessage:"Mostrar Todo",collapseMessage:"Colapsar Todo"},select:{cells:{1:"1 celda seleccionada",_:"%d celdas seleccionadas"},columns:{1:"1 columna seleccionada",_:"%d columnas seleccionadas"},rows:{1:"1 fila seleccionada",_:"%d filas seleccionadas"}},thousands:".",datetime:{previous:"Anterior",next:"Proximo",hours:"Horas",minutes:"Minutos",seconds:"Segundos",unknown:"-",amPm:["AM","PM"],months:{0:"Enero",1:"Febrero",10:"Noviembre",11:"Diciembre",2:"Marzo",3:"Abril",4:"Mayo",5:"Junio",6:"Julio",7:"Agosto",8:"Septiembre",9:"Octubre"},weekdays:["Dom","Lun","Mar","Mie","Jue","Vie","Sab"]},editor:{close:"Cerrar",create:{button:"Nuevo",title:"Crear Nuevo Registro",submit:"Crear"},edit:{button:"Editar",title:"Editar Registro",submit:"Actualizar"},remove:{button:"Eliminar",title:"Eliminar Registro",submit:"Eliminar",confirm:{_:"¿Está seguro que desea eliminar %d filas?",1:"¿Está seguro que desea eliminar 1 fila?"}},error:{system:'Ha ocurrido un error en el sistema (<a target="\\" rel="\\ nofollow" href="\\">Más información&lt;\\/a&gt;).</a>'},multi:{title:"Múltiples Valores",info:"Los elementos seleccionados contienen diferentes valores para este registro. Para editar y establecer todos los elementos de este registro con el mismo valor, hacer click o tap aquí, de lo contrario conservarán sus valores individuales.",restore:"Deshacer Cambios",noMulti:"Este registro puede ser editado individualmente, pero no como parte de un grupo."}},info:"Mostrando _START_ a _END_ de _TOTAL_ registros",stateRestore:{creationModal:{button:"Crear",name:"Nombre:",order:"Clasificación",paging:"Paginación",search:"Busqueda",select:"Seleccionar",columns:{search:"Búsqueda de Columna",visible:"Visibilidad de Columna"},title:"Crear Nuevo Estado",toggleLabel:"Incluir:"},emptyError:"El nombre no puede estar vacio",removeConfirm:"¿Seguro que quiere eliminar este %s?",removeError:"Error al eliminar el registro",removeJoiner:"y",removeSubmit:"Eliminar",renameButton:"Cambiar Nombre",renameLabel:"Nuevo nombre para %s",duplicateError:"Ya existe un Estado con este nombre.",emptyStates:"No hay Estados guardados",removeTitle:"Remover Estado",renameTitle:"Cambiar Nombre Estado"}},dom:"Blfrtip",lengthMenu:[[20,50,100,-1],[20,50,100,"All"]],footerCallback:function(e,a,t,o,l){var i=this.api(),s=function(e){return"string"===typeof e?1*e.replace(/[\$,]/g,""):"number"===typeof e?e:0};this.tot=i.column(1).data().reduce((function(e,a){return s(e)+s(a)}),0),this.pageTotal=i.column(1,{page:"current"}).data().reduce((function(e,a){return s(e)+s(a)}),0),se()(i.column(4).footer()).html("$"+this.pageTotal+" ( $"+this.tot+" total)")}}),this.$q.loading.hide()}))}))},onSubmit(){if("RETIRAR"==this.dato.tipo&&parseFloat(this.dato.monto)>parseFloat(this.cajageneral.monto))return this.$q.notify({message:"No debe ser Mayor a lo q esta en caja",icon:"close",color:"red"}),!1;this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/loggeneral",{monto:this.dato.monto,motivo:this.dato.motivo,tipo:this.dato.tipo}).then((e=>{this.onReset(),this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.alert=!1,this.misdatos()})).catch((e=>{console.log(e.response.data),this.$q.notify({message:e.response.data.message,icon:"close",color:"red"}),this.$q.loading.hide()}))},onReset(){this.dato.monto=0,this.dato.motivo="",this.dato.tipo="AGREGAR"}}};Ap.render=Ep;const Dp=Ap;k()(Ap,"components",{QBtn:D.Z,QForm:q.Z,QInput:E.Z,QToggle:A.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QIcon:_.Z,QSelect:Ge.Z,QTable:de.Z,QTd:me.Z}),k()(Ap,"directives",{ClosePopup:he.Z});const Mp={class:"row"},Tp=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-h5 text-center text-bold"},"INVENTARIO DE MATERIAL")],-1),Sp={class:"col-3 flex flex-center"},kp=(0,i.Uk)("REGISTRO"),Op=(0,i.Uk)("MODIFICAR"),Rp=(0,i.Uk)("ELIMINAR"),Np={class:"col-6"},Up={class:"col-3 flex flex-center"},Yp={class:"col-12"},Ip={class:"q-pa-none"},Pp={class:"absolute-full flex flex-center"},$p={class:"row"},Fp={class:"col-3"},Lp={class:"col-3"},zp={class:"col-3"},Zp={class:"col-3"},jp={class:"q-pa-none"},Bp={class:"q-pa-none"},Qp=(0,i.Wm)("div",{class:"text-h7"},"Compra MATERIAL ",-1),Gp={class:"text-h7"},Hp={class:"row"},Jp={class:"col-12"},Kp={class:"col-2"},Xp={class:"col-2"},eh={class:"col-2"},ah={class:"col-3"},th={class:"col-3"},oh={class:"col-3"},lh={class:"col-1"},ih={style:{width:"100%","border-collapse":"collapse"}},sh=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"NRO"),(0,i.Wm)("th",null,"MATERIAL"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"COSTO"),(0,i.Wm)("th",null,"SUBTOTAL"),(0,i.Wm)("th",null,"LOTE"),(0,i.Wm)("th",null,"FEC VEN"),(0,i.Wm)("th",null,"OBS"),(0,i.Wm)("th",null,"OPCION")])],-1),nh=(0,i.Wm)("div",{class:"text-h7"},"RETIRAR MATERIAL ",-1),rh={class:"text-h7"},dh={class:"text-h7"},ch={class:"text-h7"},mh=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO PROVEEDOR",-1),uh=(0,i.Wm)("div",{class:"text-h7"},"REGISTRO MATERIAL",-1),ph=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR MATERIAL",-1),hh=(0,i.Wm)("div",{class:"text-h7"},"PAGAR POR LA COMPRA",-1),gh=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR PROVEEDOR",-1),fh=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1),bh=(0,i.Wm)("span",{class:"q-ml-sm"},"Seguro de eliminar Registro.",-1);function vh(e,a,t,o,l,s){const n=(0,i.up)("q-item-label"),r=(0,i.up)("q-item-section"),d=(0,i.up)("q-item"),c=(0,i.up)("q-list"),m=(0,i.up)("q-btn-dropdown"),u=(0,i.up)("q-select"),p=(0,i.up)("q-btn"),h=(0,i.up)("q-icon"),g=(0,i.up)("q-input"),f=(0,i.up)("q-td"),b=(0,i.up)("q-badge"),v=(0,i.up)("q-linear-progress"),W=(0,i.up)("q-table"),w=(0,i.up)("q-card-section"),y=(0,i.up)("q-card"),V=(0,i.up)("q-dialog"),x=(0,i.up)("q-form"),C=(0,i.up)("q-card-actions"),_=(0,i.up)("q-avatar"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,{class:"q-pa-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Mp,[Tp,(0,i.Wm)("div",Sp,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(m,{key:0,icon:"list",class:"full-width",color:"accent",label:"PROVEEDOR"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,null,{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:a[1]||(a[1]=e=>{l.dialog_prov=!0,l.proveedor={}})},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[kp])),_:1})])),_:1})])),_:1},512),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.modif_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Op])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]]),(0,i.wy)((0,i.Wm)(d,{clickable:"",onClick:s.del_prov},{default:(0,i.w5)((()=>[(0,i.Wm)(r,null,{default:(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[Rp])),_:1})])),_:1})])),_:1},8,["onClick"]),[[E]])])),_:1})])),_:1})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Np,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(u,{key:0,dense:"",outlined:"",modelValue:l.proveedor,"onUpdate:modelValue":a[2]||(a[2]=e=>l.proveedor=e),options:l.proveedores,label:"Provedores"},null,8,["modelValue","options"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Up,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,icon:"engineering",color:"teal",class:"full-width",label:"Registrar Material",onClick:a[3]||(a[3]=e=>{l.dialog_mat=!0,l.material={}})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",Yp,[(0,i.Wm)("div",Ip,[(0,i.Wm)(W,{dense:"","rows-per-page-options":[10,20,50,100,0],title:"LISTA DE MATERIALES ",rows:l.materiales,columns:l.columns,filter:l.filter,"row-key":"name"},{"top-right":(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,color:"amber-8",icon:"shopping_cart",label:"COMPRAS",onClick:a[4]||(a[4]=e=>{l.dialog_add=!0,l.compras=[]})})):(0,i.kq)("",!0),(0,i.Wm)(g,{dense:"",outlined:"",debounce:"300",modelValue:l.filter,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filter=e),placeholder:"Buscar"},{append:(0,i.w5)((()=>[(0,i.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"accent",onClick:e=>s.retirarRow(a),icon:"download"},null,8,["onClick"]),(0,i.Wm)(p,{dense:"",round:"",flat:"",color:"cyan",onClick:e=>s.reporte(a),icon:"poll"},null,8,["onClick"]),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"yellow",onClick:e=>s.editRow(a),icon:"edit"},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-stock":(0,i.w5)((e=>[(0,i.Wm)(f,{props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{size:"25px",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",class:"full-width"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Pp,[(0,i.Wm)(b,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"negative":"positive",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",$p,[(0,i.Wm)("div",Fp,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[6]||(a[6]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Lp,[(0,i.Wm)(g,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[7]||(a[7]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",zp,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material3,"onUpdate:modelValue":a[8]||(a[8]=e=>l.material3=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Zp,[(0,i.Wm)(p,{color:"info",label:"Consultar",onClick:s.consultmaterial},null,8,["onClick"])])]),(0,i.Wm)("div",jp,[(0,i.Wm)(W,{dense:"","rows-per-page-options":[10,20,50,100,0],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,"row-key":"name"},{"body-cell-estado":(0,i.w5)((e=>[(0,i.Wm)(f,{key:"estado",props:e},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{color:"POR PAGAR"==e.row.estado?"red":"green"},{default:(0,i.w5)((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda>0?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listpago(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:2,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",Bp,[(0,i.Wm)(W,{dense:"","rows-per-page-options":[10,20,50,100,0],title:"LISTA DE RETIROS ",rows:l.recutodo,columns:l.colrecuento,filter:l.filter,"row-key":"name"},{"body-cell-opcion":(0,i.w5)((a=>[(0,i.Wm)(f,{key:"opcion",props:a},{default:(0,i.w5)((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:0,dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:e=>s.modrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(p,{key:1,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(V,{modelValue:l.dialog_add,"onUpdate:modelValue":a[15]||(a[15]=e=>l.dialog_add=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,{style:{width:"800px","max-width":"80vw"}},{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[Qp,(0,i.Wm)("div",Gp,"Proveedor: "+(0,R.zw)(l.proveedor.razon),1)])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",Hp,[(0,i.Wm)("div",Jp,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[9]||(a[9]=e=>l.material=e),options:l.materiales,label:"Material"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Kp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[10]||(a[10]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Xp,[(0,i.Wm)(g,{dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[11]||(a[11]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])]),(0,i.Wm)("div",eh,"Subtotal: "+(0,R.zw)(l.compra.costo*l.compra.cantidad),1),(0,i.Wm)("div",ah,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[12]||(a[12]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",th,[(0,i.Wm)(g,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[13]||(a[13]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),(0,i.Wm)("div",oh,[(0,i.Wm)(g,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[14]||(a[14]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",lh,[(0,i.Wm)(p,{dense:"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])]),(0,i.Wm)("table",ih,[sh,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",null,(0,R.zw)(a+1),1),(0,i.Wm)("td",null,(0,R.zw)(e.material),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",null,(0,R.zw)(e.lote),1),(0,i.Wm)("td",null,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",null,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",null,[(0,i.Wm)(p,{color:"red",icon:"delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_remove,"onUpdate:modelValue":a[18]||(a[18]=e=>l.dialog_remove=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[nh,(0,i.Wm)("div",rh,"Material: "+(0,R.zw)(l.material2.nombre),1)])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onRegRecuento2,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.cantidad,"onUpdate:modelValue":a[16]||(a[16]=e=>l.recuento.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento.observacion,"onUpdate:modelValue":a[17]||(a[17]=e=>l.recuento.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modcompra,"onUpdate:modelValue":a[24]||(a[24]=e=>l.dialog_modcompra=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",dh,"Modificar Compra material : "+(0,R.zw)(l.compra2.material.nombre),1)])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.updatecompra,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[19]||(a[19]=e=>l.compra2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"number",modelValue:l.compra2.costo,"onUpdate:modelValue":a[20]||(a[20]=e=>l.compra2.costo=e),label:"Costo U"},null,8,["modelValue"]),(0,i.Uk)(" Subtotal: "+(0,R.zw)(l.compra2.costo*l.compra2.cantidad)+" ",1),(0,i.Wm)(g,{outlined:"",type:"date",modelValue:l.compra2.fechaven,"onUpdate:modelValue":a[21]||(a[21]=e=>l.compra2.fechaven=e),label:"fecha Ven"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.lote,"onUpdate:modelValue":a[22]||(a[22]=e=>l.compra2.lote=e),label:"Lote"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.compra2.observacion,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modret,"onUpdate:modelValue":a[27]||(a[27]=e=>l.dialog_modret=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[(0,i.Wm)("div",ch,"Modificar Retiro material : "+(0,R.zw)(l.recuento2.material.nombre),1)])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.updateretiro,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.cantidad,"onUpdate:modelValue":a[25]||(a[25]=e=>l.recuento2.cantidad=e),label:"Cantidad"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.recuento2.observacion,"onUpdate:modelValue":a[26]||(a[26]=e=>l.recuento2.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_prov,"onUpdate:modelValue":a[33]||(a[33]=e=>l.dialog_prov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[mh])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.razon,"onUpdate:modelValue":a[28]||(a[28]=e=>l.proveedor.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.nit,"onUpdate:modelValue":a[29]||(a[29]=e=>l.proveedor.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.direccion,"onUpdate:modelValue":a[30]||(a[30]=e=>l.proveedor.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.email,"onUpdate:modelValue":a[31]||(a[31]=e=>l.proveedor.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor.telefono,"onUpdate:modelValue":a[32]||(a[32]=e=>l.proveedor.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_mat,"onUpdate:modelValue":a[37]||(a[37]=e=>l.dialog_mat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[uh])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onRegmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.nombre,"onUpdate:modelValue":a[34]||(a[34]=e=>l.material.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.unid,"onUpdate:modelValue":a[35]||(a[35]=e=>l.material.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material.min,"onUpdate:modelValue":a[36]||(a[36]=e=>l.material.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"REGISTRAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modmat,"onUpdate:modelValue":a[41]||(a[41]=e=>l.dialog_modmat=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[ph])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onModmat,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.nombre,"onUpdate:modelValue":a[38]||(a[38]=e=>l.material2.nombre=e),label:"NOMBRE"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.unid,"onUpdate:modelValue":a[39]||(a[39]=e=>l.material2.unid=e),label:"UNIDADES"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.material2.min,"onUpdate:modelValue":a[40]||(a[40]=e=>l.material2.min=e),label:"MIN STOCK"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[44]||(a[44]=e=>l.dialogpagar=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-green-14 text-white"},{default:(0,i.w5)((()=>[hh])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.regpago,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.monto,"onUpdate:modelValue":a[42]||(a[42]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[43]||(a[43]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_modprov,"onUpdate:modelValue":a[50]||(a[50]=e=>l.dialog_modprov=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-yellow-14 text-white"},{default:(0,i.w5)((()=>[gh])),_:1}),(0,i.Wm)(w,{class:"q-pt-xs"},{default:(0,i.w5)((()=>[(0,i.Wm)(x,{onSubmit:s.onReg,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.razon,"onUpdate:modelValue":a[45]||(a[45]=e=>l.proveedor2.razon=e),label:"Razon Social"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.nit,"onUpdate:modelValue":a[46]||(a[46]=e=>l.proveedor2.nit=e),label:"NIT / CI"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.direccion,"onUpdate:modelValue":a[47]||(a[47]=e=>l.proveedor2.direccion=e),label:"DIRECCION"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.email,"onUpdate:modelValue":a[48]||(a[48]=e=>l.proveedor2.email=e),label:"Email"},null,8,["modelValue"]),(0,i.Wm)(g,{outlined:"",type:"text",modelValue:l.proveedor2.telefono,"onUpdate:modelValue":a[49]||(a[49]=e=>l.proveedor2.telefono=e),label:"telefono"},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(p,{label:"MODIFICAR",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(p,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[53]||(a[53]=e=>l.dialog_reporte=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"bg-cyan-14 text-white"},{default:(0,i.w5)((()=>[fh])),_:1}),(0,i.Wm)(w,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[51]||(a[51]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(g,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[52]||(a[52]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_del,"onUpdate:modelValue":a[54]||(a[54]=e=>l.dialog_del=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(_,{icon:"clear",color:"red","text-color":"white"}),bh])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(p,{flat:"",label:"Eliminar",color:"deep-orange",onClick:s.onDel},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[55]||(a[55]=e=>l.dialoglistpagos=e)},{default:(0,i.w5)((()=>[(0,i.Wm)(y,null,{default:(0,i.w5)((()=>[(0,i.Wm)(w,{class:"row items-center"},{default:(0,i.w5)((()=>[(0,i.Wm)(W,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(C,{align:"right"},{default:(0,i.w5)((()=>[(0,i.wy)((0,i.Wm)(p,{flat:"",label:"Cancelar",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})}const Wh={data(){return{proveedor:{},proveedor2:{},dialog_prov:!1,dialog_modprov:!1,dialog_mat:!1,dialog_modmat:!1,dialog_reporte:!1,dialog_modcompra:!1,dialog_modret:!1,checkgasto:"CAJA",material:{},materiales:[],material2:{},material3:{},proveedores:[],compras:[],comptodo:[],compra:{},compra2:{},recutodo:[],crear:!1,recuento:{},recuento2:{},filter:"",dialog_mod:!1,dialog_del:!1,dialog_add:!1,dialog_remove:!1,dialog_log:!1,dialogpagar:!1,dialoglistpagos:!1,pago:{},agregar:0,disminuir:0,producto:{},color:"",dato:{},fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha3:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha4:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),columns:[{name:"nombre",align:"center",label:"Nombre",field:"nombre",sortable:!0},{name:"unid",align:"center",label:"unidad",field:"unid",sortable:!0},{name:"min",align:"center",label:"Minimo",field:"min",sortable:!0},{name:"stock",align:"center",label:"stock",field:"stock",sortable:!0},{name:"opcion",label:"OPCIONES",field:"opcion"}],colcompra:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"deuda",align:"center",label:"DEUDA",field:"deuda",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:"fechaven",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colpagos:[{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],rows:[],montogeneral:0,totalcompra:0,montocaja:0,pagos:[]}},created(){this.misproveedores(),this.mismateriales(),this.totalgeneral(),this.totalcaja()},methods:{listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},totalcaja(){this.$axios.post("http://192.168.100.8:81/api/totalcaja").then((e=>{this.montocaja=e.data.monto}))},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$axios.post("http://192.168.100.8:81/api/logcompra",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "}),this.checkgasto="CAJA",this.consultmaterial()})))},totalgeneral(){this.$axios.post("http://192.168.100.8:81/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},updatecompra(){this.$axios.put("http://192.168.100.8:81/api/compra/"+this.compra2.id,this.compra2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modcompra=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modrecuento(e){this.recuento2=e,this.dialog_modret=!0},updateretiro(){this.$axios.put("http://192.168.100.8:81/api/recuento/"+this.recuento2.id,this.recuento2).then((e=>{this.mismateriales(),this.consultmaterial(),this.dialog_modret=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"modificado "})}))},modcompra(e){this.compra2=e,this.dialog_modcompra=!0},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/compra/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},delrecuento(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/recuento/"+e.id).then((e=>{this.mismateriales(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultmaterial(){this.$axios.post("http://192.168.100.8:81/api/consultar",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{console.log(e.data),this.comptodo=e.data})),this.$axios.post("http://192.168.100.8:81/api/consulrecuento",{material_id:this.material3.id,fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},genreporte(){console.log(le.ZP.formatDate(new Date,"DD/MM/YYYY HH:mm:ss")),this.$axios.post("http://192.168.100.8:81/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=this;function t(){var e=new Image;e.src="logo.png",o.addImage(e,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"INVENTARIO MATERIAL : "+a.material2.nombre),o.text(5,1.5,"DE "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"TIPO"),o.text(2.5,3,"PROVEEDOR"),o.text(5,3,"MATERIAL"),o.text(7,3,"FECHA"),o.text(9.5,3,"COSTO"),o.text(11,3,"CANTIDAD"),o.text(13,3,"FECHA VEN"),o.text(15,3,"OBSERVACION"),o.setFont(void 0,"normal")}var o=new Lo.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0;e.data.forEach((e=>{l+=.5,o.text(1,l+3,e.tipo),o.text(2.5,l+3,e.razon),o.text(5,l+3,e.nombre),o.text(7,l+3,le.ZP.formatDate(new Date(e.fecha),"DD/MM/YYYY")),o.text(9.5,l+3,null==e.costo?"":e.costo+""),o.text(11,l+3,e.cantidad+""),o.text(13,l+3,null==e.fechaven?"":e.fechaven),o.text(15,l+3,null==e.observacion?"":e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),window.open(o.output("bloburl"),"_blank")}))},reporte(e){this.material2=e.row,this.dialog_reporte=!0},regcompra(){return 0==this.compras.length?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1):(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra)?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1):void this.$axios.post("http://192.168.100.8:81/api/compra",{provider_id:this.proveedor.id,user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.mismateriales()})))},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){return""!=this.compra.cantidad&&0!=this.compra.cantidad&&void 0!=this.compra.cantidad&&(void 0!=this.compra.costo&&""!=this.compra.costo&&0!=this.compra.costo&&(void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,this.compras.push(this.compra),void(this.compra={})))},onRegRecuento(){this.recuento.material_id=this.material2.id,this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("http://192.168.100.8:81/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_add=!1,this.mismateriales()}))},onRegRecuento2(){if(this.material2.stock<this.recuento.cantidad)return!1;this.recuento.material_id=this.material2.id,this.recuento.tipo="RETIRAR",this.recuento.user_id=this.$store.getters["login/user"].id,this.$axios.post("http://192.168.100.8:81/api/recuento",this.recuento).then((e=>{this.recuento={},this.dialog_remove=!1,this.mismateriales()}))},agregarRow(e){this.material2=e.row,this.dialog_add=!0},retirarRow(e){this.material2=e.row,this.dialog_remove=!0},modif_prov(){this.proveedor2=this.proveedor,this.dialog_modprov=!0},onReg(){this.$axios.post("http://192.168.100.8:81/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},onRegmat(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/material",this.material).then((e=>{this.$q.loading.hide(),this.dialog_mat=!1,this.mismateriales(),this.material={}}))},onModmat(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/material/"+this.material2.id,this.material2).then((e=>{this.$q.loading.hide(),this.dialog_modmat=!1,this.mismateriales(),this.material={}}))},misproveedores(){this.proveedores=[],this.$axios.get("http://192.168.100.8:81/api/provider").then((e=>{e.data.forEach((e=>{e.label=e.razon,this.proveedores.push(e)})),this.proveedor=this.proveedores[0]}))},mismateriales(){this.materiales=[],this.$axios.get("http://192.168.100.8:81/api/material").then((e=>{e.data.forEach((e=>{e.label=e.nombre,this.materiales.push(e)})),this.material=this.materiales[0],this.material3=this.materiales[0]}))},registrar(){this.producto.nombre=this.producto.nombre.toUpperCase(),void 0!=this.producto.observacion&&(this.producto.observacion=this.producto.observacion.toUpperCase()),this.$axios.post("http://192.168.100.8:81/api/producto",this.producto).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Creado correctamente"}),this.crear=!1,this.onReset(),this.listado()})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al registrar"})}))},activar(e){this.dato=e.row,this.$axios.post("http://192.168.100.8:81/api/activarprod",this.dato).then((e=>{this.listado()}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},editRow(e){this.material2=e.row,this.dialog_modmat=!0},logRow(e){this.dato=e.row,this.dialog_log=!0},delRow(e){this.material2=e.row,this.dialog_del=!0},addRow(e){this.dato=e.row,this.dialog_add=!0},substractRow(e){this.dato=e.row,this.dialog_sub=!0},onDel(){this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/material/"+this.material2.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.dialog_del=!1,this.mismateriales()})),this.$q.loading.hide()},del_prov(){this.$q.dialog({title:"Seguro de eliminar?",cancel:!0}).onOk((()=>{this.$q.loading.show(),this.$axios.delete("http://192.168.100.8:81/api/provider/"+this.proveedor.id).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Eliminado correctamente"}),this.misproveedores()})),this.$q.loading.hide()}))},onReset(){this.producto={}},computed:{}}};var wh=t(51598);Wh.render=vh;const yh=Wh;k()(Wh,"components",{QPage:V.Z,QBtnDropdown:di.Z,QList:ci.Z,QItem:mi.Z,QItemSection:ui.Z,QItemLabel:pi.Z,QSelect:Ge.Z,QBtn:D.Z,QTable:de.Z,QInput:E.Z,QIcon:_.Z,QTd:me.Z,QLinearProgress:wh.Z,QBadge:re.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QForm:q.Z,QCardActions:T.Z,QAvatar:pe.Z}),k()(Wh,"directives",{ClosePopup:he.Z});const Vh={class:"row"},xh=(0,i.Wm)("div",{class:"col-12"},[(0,i.Wm)("div",{class:"text-center text-bold"},"RESUMEN DE INGRESOS Y EGRESOS")],-1),Ch={class:"col-12"},_h={class:"row"},qh={class:"col-4"},Eh={class:"col-4"},Ah={class:"col-4 flex "},Dh={class:"col-12"},Mh={class:" responsive"},Th={class:"col-12"},Sh={class:"row"},kh={class:"col-4 q-pa-md"},Oh={class:"col-4 q-pa-md"},Rh={class:"col-4 q-pa-md"},Nh={class:"col-12"};function Uh(e,a,t,o,l,s){const n=(0,i.up)("q-input"),r=(0,i.up)("q-btn"),d=(0,i.up)("q-form"),c=(0,i.up)("q-table");return(0,i.wg)(),(0,i.j4)("div",Vh,[xh,(0,i.Wm)("div",Ch,[(0,i.Wm)(d,{onSubmit:s.listado},{default:(0,i.w5)((()=>[(0,i.Wm)("div",_h,[(0,i.Wm)("div",qh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha1,"onUpdate:modelValue":a[1]||(a[1]=e=>l.fecha1=e),label:"Fecha ini",required:"",hint:"Porfavor ingresar fecha inicio",counter:""},null,8,["modelValue"])]),(0,i.Wm)("div",Eh,[(0,i.Wm)(n,{outlined:"",dense:"",type:"date",modelValue:l.fecha2,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha2=e),label:"Fecha fin",required:"",rules:[e=>e>=l.fecha1||"Fecha debe ser mayor o igual"],hint:"Porfavor ingresar fecha fin",counter:""},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Ah,[(0,i.Wm)(r,{label:"Generar",class:"full-width ",type:"submit",color:"primary",icon:"send"})])])])),_:1},8,["onSubmit"]),(0,i.Wm)("div",Dh,[(0,i.Wm)("div",Mh,[(0,i.Wm)(c,{dense:"",title:"Ingresos",rows:l.ingreso,columns:l.columns,"row-key":"name"},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Egresos",rows:l.egreso,columns:l.columns2,"row-key":"name"},null,8,["rows","columns"]),(0,i.Wm)(c,{dense:"",title:"Caja Chica",rows:l.cchica,columns:l.columns3,"row-key":"name"},null,8,["rows","columns"])])]),(0,i.Wm)("div",Th,[(0,i.Wm)(d,null,{default:(0,i.w5)((()=>[(0,i.Wm)("div",Sh,[(0,i.Wm)("div",kh,[(0,i.Wm)(n,{type:"text",label:"Ingreso total","label-color":"positive",modelValue:s.totalingreso,"onUpdate:modelValue":a[3]||(a[3]=e=>s.totalingreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Oh,[(0,i.Wm)(n,{type:"text",label:"Egreso Total","label-color":"info",modelValue:s.totalegreso,"onUpdate:modelValue":a[4]||(a[4]=e=>s.totalegreso=e),outlined:""},null,8,["modelValue"])]),(0,i.Wm)("div",Rh,[(0,i.Wm)(n,{type:"text",label:"Balance","label-color":"teal",outlined:"",modelValue:s.balance,"onUpdate:modelValue":a[5]||(a[5]=e=>s.balance=e)},null,8,["modelValue"])])])])),_:1})]),(0,i.Wm)("div",Nh,[(0,i.Wm)(r,{label:"Imprimir",icon:"print",color:"accent",class:"full-width",onClick:a[6]||(a[6]=e=>s.impresion())})])])])}const Yh={data(){return{fecha1:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),resumen:[],usuarios:[],filter:"",usuario:"",ventas:[],deudas:[],ingreso:[],egreso:[],cchica:[],regpago:{},pagos:{},final:0,dato:{},alert:!1,dialog_pago:!1,columns:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns2:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}],columns3:[{name:"detalle",align:"center",label:"DETALLE",field:"detalle",sortable:!0},{name:"total",align:"center",label:"total",field:"total"}]}},mounted(){},created(){this.listado()},methods:{onPago(){this.$axios.post("http://192.168.100.8:81/api/pago",this.regpago).then((e=>{this.regpago={},this.dialog_pago=!1,this.deudores(),this.$q.notify({message:"Registro correcto",color:"green",icon:"send"})}))},listado(){this.ingreso=[],this.egreso=[],this.cchica=[],se()("#example").DataTable().destroy(),this.$axios.post("http://192.168.100.8:81/api/repventa",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Venta "+e.tipo,total:e.total,ingreso:e.total,egreso:0})}))})),this.$axios.post("http://192.168.100.8:81/api/repventpago",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{null!=e.data.total&&void 0!=e.data.total&&this.ingreso.push({detalle:"CxC pagos",total:e.data.total,ingreso:e.data.total,egreso:0})})),this.$axios.post("http://192.168.100.8:81/api/repingprestamo",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.ingreso.push({detalle:"Prest/mat "+e.estado,total:e.total,ingreso:e.total,egreso:0})}))})),this.$axios.post("http://192.168.100.8:81/api/repgastos",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{e.data.forEach((e=>{null!=e.total&&void 0!=e.total&&this.egreso.push({detalle:e.glosa,total:e.total,egreso:e.total,ingreso:0})}))})),this.$axios.post("http://192.168.100.8:81/api/replanilla",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"SALARIOS",total:a.total,egreso:a.total,ingreso:0})})),this.$axios.post("http://192.168.100.8:81/api/repcompra",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=e.data[0];null!=a.total&&void 0!=a.total&&this.egreso.push({detalle:"COMPRA ALMACEN",total:a.total,egreso:a.total,ingreso:0})})),this.$axios.post("http://192.168.100.8:81/api/repcaja",{fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data),e.data.forEach((e=>{this.cchica.push({detalle:"CJA CHICA: "+e.glosa,total:e.total,egreso:e.total,ingreso:0})}))}))},impresion(){this.resumen=[],this.ingreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:e.total,egreso:0})})),this.egreso.forEach((e=>{this.resumen.push({detalle:e.detalle,ingreso:0,egreso:e.total})}));let e=this;function a(){var a=new Image;a.src="logo.png",t.addImage(a,"jpg",.5,.5,2,2),t.setFont(void 0,"bold"),t.text(5,1,"RESUMEN DE BALANCE "),t.text(5,1.5,"DE "+Be()(e.fecha1).format("DD/MM/YYYY")+" AL "+Be()(e.fecha2).format("DD/MM/YYYY")),t.text(1,3,"DETALLE"),t.text(10,3,"INGRESO"),t.text(14,3,"EGRESO"),t.setFont(void 0,"normal")}var t=new Lo.kH("p","cm","letter");t.setFont("courier"),t.setFontSize(12),a();let o=0,l=0,i=0,s=0;this.ingreso.forEach((e=>{l+=e.ingreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.egreso.forEach((e=>{i+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),o+=.5,this.cchica.forEach((e=>{s+=e.egreso,o+=.5,t.text(1,o+3,e.detalle),t.text(10,o+3,e.ingreso+""),t.text(14,o+3,e.egreso+""),o+3>25&&(t.addPage(),a(),o=0)})),t.setFontSize(9),t.setFont(void 0,"bold"),t.text(1,o+4,"TOTAL INGRESO: "),t.setFont(void 0,"normal"),t.text(4,o+4,l+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4,"TOTAL EGRESO: "),t.setFont(void 0,"normal"),t.text(10,o+4,i+" Bs"),t.setFont(void 0,"bold"),t.text(7,o+4.5,"T. CJA CHICA: "),t.setFont(void 0,"normal"),t.text(10,o+4.5,s+" Bs");var n=l-i;t.setFont(void 0,"bold"),t.text(14,o+4,"BALANCE: "),t.setFont(void 0,"normal"),t.text(18,o+4,n+"Bs"),window.open(t.output("bloburl"),"_blank")}},computed:{totalingreso(){let e=0;return this.ingreso.forEach((a=>{e+=parseFloat(a.ingreso)})),e},totalegreso(){let e=0;return this.egreso.forEach((a=>{e+=parseFloat(a.egreso)})),e},balance(){var e=this.totalingreso-this.totalegreso;return e}}};Yh.render=Uh;const Ih=Yh;k()(Yh,"components",{QForm:q.Z,QInput:E.Z,QBtn:D.Z,QTable:de.Z});const Ph=(0,i.HX)("data-v-6d5a2b0c");(0,i.dD)("data-v-6d5a2b0c");const $h={class:"row"},Fh={class:"col-12"},Lh={class:"col-2 flex flex-center"},zh={class:"col-4"},Zh=(0,i.Uk)(" No results "),jh={class:"col-2"},Bh={class:"col-4"},Qh={class:"col-7"},Gh={class:"row"},Hh={class:"text-bold text-grey"},Jh={key:0},Kh={class:"text-subtitle2 flex-center flex text-center"},Xh={class:"col-5"},eg=(0,i.Wm)("div",{class:"text-subtitle2 flex-center flex text-center bg-primary text-white"},"PRODUCTOS",-1),ag=(0,i.Wm)("div",{class:"row items-center bg-primary text-white"},[(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Cantidad"),(0,i.Wm)("div",{class:"col-5 text-center text-bold"},"Nombre"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Precio"),(0,i.Wm)("div",{class:"col-2 text-center text-bold"},"Subtotal"),(0,i.Wm)("div",{class:"col-1 text-center text-bold"},"Op")],-1),tg={class:"col-2 text-center text-bold"},og={class:"col-5 text-grey"},lg={class:"col-2 text-right text-grey"},ig=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),sg={class:"col-2 text-right q-pr-xs text-bold"},ng={class:"col-1"},rg={class:"row"},dg={class:"col-4"},cg=(0,i.Wm)("div",{class:"text-subtitle1"},"Bs.",-1),mg={class:"col-4"},ug={class:"text-bold text-grey"},pg=(0,i.Uk)("Total: "),hg={class:"text-red text-h5"},gg={class:"col-4"},fg={class:"col-12",align:"right"},bg={class:"col-12"},vg=(0,i.Wm)("div",{class:"text-h6"},"Registro de cliente",-1),Wg={class:"row"},wg={class:"col-12 col-md-6 q-pa-xs"},yg={class:"col-12 col-md-6 q-pa-xs"},Vg={class:"col-12 col-md-6 q-pa-xs"},xg={class:"col-12 col-md-6 q-pa-xs"},Cg={class:"col-12  q-pa-xs flex flex-center"},_g=(0,i.Wm)("div",{class:"text-h7"},"MODIFICAR REGISTRO CLIENTE",-1),qg={class:"col-12"},Eg={class:"row"},Ag={class:"col-3"},Dg={class:"col-3"},Mg={class:"col-3"},Tg={class:"col-3"},Sg={class:"col-12"},kg=(0,i.Wm)("div",{class:"text-h6"},"Garantia",-1),Og={class:"row"},Rg={class:"col-12 col-md-4 q-pa-xs"},Ng={class:"col-12 col-md-4 q-pa-xs"},Ug={class:"col-12 col-md-4 q-pa-xs"},Yg={class:"col-12 col-md-4 q-pa-xs"},Ig={class:"col-12 col-md-4 q-pa-xs"},Pg={class:"col-12 col-md-4 q-pa-xs"},$g={class:"col-12 col-md-4 q-pa-xs"},Fg={class:"col-12 col-md-4 q-pa-xs"},Lg={class:"col-12 col-md-4 q-pa-xs flex flex-center"},zg=(0,i.Wm)("b",null," EN PRESTAMO ",-1),Zg=(0,i.Wm)("b",null," VENTA ",-1),jg={class:"col-12  q-pa-xs flex flex-center"},Bg={class:"text-h6"},Qg={class:"row"},Gg={class:"col-12  q-pa-xs"},Hg={class:"col-12 col-md-6 q-pa-xs"},Jg={class:"col-12 col-md-6 q-pa-xs"},Kg={class:"col-12 col-md-6 q-pa-xs"},Xg={class:"col-12 col-md-6 q-pa-xs"},ef={class:"col-12 col-md-6 q-pa-xs"},af={class:"col-12 col-md-6 q-pa-xs"},tf={class:"col-12 col-md-6 q-pa-xs"},of={class:"col-12 col-md-6 q-pa-xs"},lf={class:"col-12  q-pa-xs"},sf={class:"col-12  q-pa-xs flex flex-center"},nf=(0,i.Wm)("div",{class:"text-h6"},"DETALLE DE COMPRA",-1),rf=(0,i.Wm)("b",null,"Obs:",-1),df={style:{width:"100%"}},cf=(0,i.Wm)("tr",null,[(0,i.Wm)("th",null,"PRODUCTO"),(0,i.Wm)("th",null,"CANTIDAD"),(0,i.Wm)("th",null,"PRECIO"),(0,i.Wm)("th",null,"SUBTOTAL")],-1);(0,i.Cn)();const mf=Ph(((e,a,t,l,s,n)=>{const r=(0,i.up)("q-btn"),d=(0,i.up)("q-item-section"),c=(0,i.up)("q-item"),m=(0,i.up)("q-select"),u=(0,i.up)("q-input"),p=(0,i.up)("q-space"),h=(0,i.up)("q-chip"),g=(0,i.up)("q-card-section"),f=(0,i.up)("q-card"),b=(0,i.up)("q-form"),v=(0,i.up)("q-dialog"),W=(0,i.up)("q-toggle"),w=(0,i.up)("q-icon"),y=(0,i.up)("q-td"),V=(0,i.up)("q-badge"),x=(0,i.up)("q-btn-group"),C=(0,i.up)("q-table"),_=(0,i.up)("q-card-actions"),q=(0,i.up)("q-page"),E=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(q,null,{default:Ph((()=>[(0,i.Wm)("div",$h,[(0,i.Wm)("div",Fh,[(0,i.Wm)("div",{class:`q-pa-xs bg-${"detalle"==s.type?"red":"green"} text-center text-bold text-white`},(0,R.zw)("detalle"==s.type?"VENTA POR DETALLE":"VENTA POR LOCAL"),3)]),(0,i.Wm)("div",Lh,["detalle"==s.type?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",color:"green",icon:"add_circle",onClick:a[1]||(a[1]=e=>{s.modalregistro=!0,s.newcliente={}})})):(0,i.kq)("",!0),s.client&&"detalle"==s.type?((0,i.wg)(),(0,i.j4)(r,{key:1,dense:"",color:"yellow",icon:"edit",onClick:a[2]||(a[2]=a=>{e.modcliente=s.client,s.dialog_mod=!0})})):(0,i.kq)("",!0)]),(0,i.Wm)("div",zh,[(0,i.Wm)(m,{outlined:"",dense:"",modelValue:s.client,"onUpdate:modelValue":a[3]||(a[3]=e=>s.client=e),"use-input":"","input-debounce":"0",label:"Cliente",options:s.clients,onFilter:n.filterFn,behavior:"menu"},{"no-option":Ph((()=>[(0,i.Wm)(c,null,{default:Ph((()=>[(0,i.Wm)(d,{class:"text-grey"},{default:Ph((()=>[Zh])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])]),(0,i.Wm)("div",jh,[(0,i.Wm)(u,{type:"date",outlined:"",modelValue:s.fecha,"onUpdate:modelValue":a[4]||(a[4]=e=>s.fecha=e),dense:"",label:"Fecha"},null,8,["modelValue"])]),(0,i.Wm)("div",Bh,[(0,i.Wm)(u,{dense:"",outlined:"",modelValue:s.obs,"onUpdate:modelValue":a[5]||(a[5]=e=>s.obs=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",Qh,[(0,i.Wm)("div",Gh,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.products,(e=>((0,i.wg)(),(0,i.j4)("div",{class:"col-2",key:e.id,style:{padding:"5px"}},[(0,i.Wm)(f,{style:{height:"80px"},onClick:a=>n.saleAdd(e),class:"no_selection"},{default:Ph((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"},{default:Ph((()=>[(0,i.Wm)("div",Hh,(0,R.zw)(e.precio)+"Bs.",1),(0,i.Wm)(p),e.cantidad>0?((0,i.wg)(),(0,i.j4)("div",Jh,[(0,i.Wm)(h,{color:"primary",class:" q-ma-none text-bold text-white",dense:"",label:e.cantidad},null,8,["label"])])):(0,i.kq)("",!0)])),_:2},1024),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ph((()=>[(0,i.Wm)("div",Kh,(0,R.zw)(e.nombre),1)])),_:2},1024)])),_:2},1032,["onClick"])])))),128))])]),(0,i.Wm)("div",Xh,[(0,i.Wm)(f,null,{default:Ph((()=>[(0,i.Wm)(g,{class:"row items-center q-pb-none"}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ph((()=>[eg])),_:1}),(0,i.Wm)(g,{class:"q-pa-none"},{default:Ph((()=>[ag,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.productSales,((e,a)=>((0,i.wg)(),(0,i.j4)("div",{class:"row items-center",key:e.id},[(0,i.Wm)("div",tg,[(0,i.Wm)(u,{modelValue:e.cantidad,"onUpdate:modelValue":a=>e.cantidad=a,dense:"",type:"number",step:"0.25"},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",og,(0,R.zw)(e.nombre),1),(0,i.Wm)("div",lg,[(0,i.Wm)(u,{modelValue:e.precio,"onUpdate:modelValue":a=>e.precio=a,dense:"",type:"number",step:"0.1"},{append:Ph((()=>[ig])),_:2},1032,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",sg,(0,R.zw)(e.precio*e.cantidad)+"Bs.",1),(0,i.Wm)("div",ng,[(0,i.Wm)(r,{color:"red",icon:"delete",dense:"",onClick:t=>n.delProduct(a,e.id)},null,8,["onClick"])])])))),128))])),_:1})])),_:1}),(0,i.Wm)(b,null,{default:Ph((()=>[(0,i.Wm)("div",rg,[(0,i.Wm)("div",dg,[(0,i.Wm)(u,{modelValue:s.monto,"onUpdate:modelValue":a[6]||(a[6]=e=>s.monto=e),dense:"",outlined:"",label:"Monto",type:"number",step:"0.1"},{append:Ph((()=>[cg])),_:1},8,["modelValue"])]),(0,i.Wm)("div",mg,[(0,i.Wm)("div",ug,[pg,(0,i.Wm)("span",hg,(0,R.zw)(n.total)+"Bs.",1)])]),(0,i.Wm)("div",gg,[(0,i.Wm)("div",{class:`bg-${n.porCobrar>0?"red":"green"}-3 text-${n.porCobrar>0?"red":"green"}-8 text-bold q-ma-xs q-pa-xs`,style:`border: 1px solid ${n.porCobrar>0?"red":"green"};border-radius: 5px`},(0,R.zw)(n.porCobrar>0?"POR COBRAR":"CANCELADO"),7)]),(0,i.Wm)("div",fg,[(0,i.Wm)(r,{color:"green",icon:"check_circle",label:"Generar Venta",onClick:n.saleSave},null,8,["onClick"])]),(0,i.Wm)("div",bg,(0,R.zw)(n.porCobrar),1)])])),_:1})]),(0,i.Wm)(v,{modelValue:s.modalregistro,"onUpdate:modelValue":a[11]||(a[11]=e=>s.modalregistro=e)},{default:Ph((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ph((()=>[(0,i.Wm)(g,null,{default:Ph((()=>[vg])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ph((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregarcliente,["prevent"])},{default:Ph((()=>[(0,i.Wm)("div",Wg,[(0,i.Wm)("div",wg,[(0,i.Wm)(u,{outlined:"",label:"ci",modelValue:s.newcliente.ci,"onUpdate:modelValue":a[7]||(a[7]=e=>s.newcliente.ci=e)},null,8,["modelValue"])]),(0,i.Wm)("div",yg,[(0,i.Wm)(u,{required:"",outlined:"",label:"titular",style:{"text-transform":"uppercase"},modelValue:s.newcliente.titular,"onUpdate:modelValue":a[8]||(a[8]=e=>s.newcliente.titular=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Vg,[(0,i.Wm)(u,{outlined:"",label:"telefono",modelValue:s.newcliente.telefono,"onUpdate:modelValue":a[9]||(a[9]=e=>s.newcliente.telefono=e)},null,8,["modelValue"])]),(0,i.Wm)("div",xg,[(0,i.Wm)(u,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.newcliente.direccion,"onUpdate:modelValue":a[10]||(a[10]=e=>s.newcliente.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Cg,[(0,i.Wm)(r,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Ph((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.dialog_mod,"onUpdate:modelValue":a[17]||(a[17]=e=>s.dialog_mod=e)},{default:Ph((()=>[(0,i.Wm)(f,null,{default:Ph((()=>[(0,i.Wm)(g,{class:"bg-green-14 text-white"},{default:Ph((()=>[_g])),_:1}),(0,i.Wm)(g,{class:"q-pt-xs"},{default:Ph((()=>[(0,i.Wm)(b,{onSubmit:n.onMod,class:"q-gutter-md"},{default:Ph((()=>[(0,i.Wm)(u,{outlined:"",type:"text",modelValue:e.modcliente.ci,"onUpdate:modelValue":a[12]||(a[12]=a=>e.modcliente.ci=a),label:"Cedula Identidad",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.titular,"onUpdate:modelValue":a[13]||(a[13]=a=>e.modcliente.titular=a),type:"text",label:"Nombre Completo",style:{"text-transform":"uppercase"},"lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor ingresar dato"]},null,8,["modelValue","rules"]),(0,i.Wm)(u,{outlined:"",type:"text",modelValue:e.modcliente.telefono,"onUpdate:modelValue":a[14]||(a[14]=a=>e.modcliente.telefono=a),label:"Telefono o Celular",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(u,{type:"text",outlined:"",modelValue:e.modcliente.direccion,"onUpdate:modelValue":a[15]||(a[15]=a=>e.modcliente.direccion=a),label:"Direccion*",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)(u,{outlined:"",modelValue:e.modcliente.observacion,"onUpdate:modelValue":a[16]||(a[16]=a=>e.modcliente.observacion=a),label:"Observacion",type:"text",style:{"text-transform":"uppercase"}},null,8,["modelValue"]),(0,i.Wm)("div",null,[(0,i.Wm)(r,{label:"Modificar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(r,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[E]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)("div",qg,[(0,i.Wm)("div",Eg,[(0,i.Wm)("div",Ag,[(0,i.Wm)(u,{outlined:"",modelValue:s.fecha1,"onUpdate:modelValue":a[18]||(a[18]=e=>s.fecha1=e),label:"Fecha Inicial",dense:"",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Dg,["RANGO"==s.rango?((0,i.wg)(),(0,i.j4)(u,{key:0,outlined:"",modelValue:s.fecha2,"onUpdate:modelValue":a[19]||(a[19]=e=>s.fecha2=e),label:"Fecha Final",dense:"",type:"date"},null,8,["modelValue"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Mg,[(0,i.Wm)(W,{modelValue:s.rango,"onUpdate:modelValue":a[20]||(a[20]=e=>s.rango=e),"true-value":"RANGO","false-value":"DIA",label:s.rango+" FECHA",style:{width:"100%"}},null,8,["modelValue","label"])]),(0,i.Wm)("div",Tg,[(0,i.Wm)(r,{color:"green",label:"BUSCAR",icon:"search",dense:"",onClick:a[21]||(a[21]=e=>n.consultaVenta(s.type))})])]),(0,i.Wm)("div",Sg,[(0,i.Wm)(C,{title:"Ventas",rows:s.ventas,columns:s.columnas,"row-key":"name",filter:s.filter},{"top-right":Ph((()=>[(0,i.Wm)(u,{borderless:"",dense:"",debounce:"300",modelValue:s.filter,"onUpdate:modelValue":a[22]||(a[22]=e=>s.filter=e),placeholder:"Search"},{append:Ph((()=>[(0,i.Wm)(w,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-cliente":Ph((e=>[(0,i.Wm)(y,{key:"cliente",props:e},{default:Ph((()=>[(0,i.Uk)((0,R.zw)(e.row.cliente.local)+" "+(0,R.zw)(e.row.cliente.titular),1)])),_:2},1032,["props"])])),"body-cell-observacion":Ph((e=>[(0,i.Wm)(y,{key:"cliente",props:e},{default:Ph((()=>[""!=e.row.observacion?((0,i.wg)(),(0,i.j4)(r,{key:0,color:"purple",icon:"subject",onClick:a=>n.verObs(e.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),"body-cell-user":Ph((e=>[(0,i.Wm)(y,{key:"user",props:e},{default:Ph((()=>[(0,i.Uk)((0,R.zw)(e.row.user.name),1)])),_:2},1032,["props"])])),"body-cell-estado":Ph((e=>[(0,i.Wm)(y,{key:"estado",props:e},{default:Ph((()=>[(0,i.Wm)(V,{color:"POR COBRAR"==e.row.estado||"ANULADO"==e.row.estado?"red":"green",label:e.row.estado},null,8,["color","label"])])),_:2},1032,["props"])])),"body-cell-opcion":Ph((a=>[(0,i.Wm)(y,{key:"opcion",props:a},{default:Ph((()=>["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(x,{key:0},{default:Ph((()=>[e.$store.state.login.anularventa?((0,i.wg)(),(0,i.j4)(r,{key:0,icon:"cancel",color:"red",onClick:e=>n.anular(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),null!=a.row.fechaentrega&&""!=a.row.fechaentrega?((0,i.wg)(),(0,i.j4)(r,{key:1,icon:"local_shipping",color:"indigo-3",onClick:e=>n.printruta(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.ruta?((0,i.wg)(),(0,i.j4)(r,{key:2,icon:"local_shipping",color:"accent",onClick:e=>n.clickhojaruta(a.row),size:"xs"},null,8,["onClick"])):(0,i.kq)("",!0),(0,i.Wm)(r,{icon:"shopping_cart",color:"orange",onClick:e=>n.clickcompra(a.row),size:"xs"},null,8,["onClick"]),e.$store.state.login.reimpresion?((0,i.wg)(),(0,i.j4)(i.HY,{key:3},["ANULADO"!=a.row.estado?((0,i.wg)(),(0,i.j4)(r,{key:0,dense:"",icon:"print",color:"info",onClick:e=>n.impboleta(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)],64)):(0,i.kq)("",!0)])),_:2},1024)):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(v,{modelValue:s.modalgarantia,"onUpdate:modelValue":a[33]||(a[33]=e=>s.modalgarantia=e)},{default:Ph((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ph((()=>[(0,i.Wm)(g,null,{default:Ph((()=>[kg])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ph((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.agregargarantia,["prevent"])},{default:Ph((()=>[(0,i.Wm)("div",Og,[(0,i.Wm)("div",Rg,[(0,i.Wm)(u,{required:"",type:"text",outlined:"",label:"Cliente",modelValue:s.client.label,"onUpdate:modelValue":a[23]||(a[23]=e=>s.client.label=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ng,[(0,i.Wm)(u,{required:"",type:"text",outlined:"",label:"telefono",modelValue:s.client.telefono,"onUpdate:modelValue":a[24]||(a[24]=e=>s.client.telefono=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Ug,[(0,i.Wm)(u,{required:"",type:"text",outlined:"",label:"direccion",modelValue:s.client.direccion,"onUpdate:modelValue":a[25]||(a[25]=e=>s.client.direccion=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",Yg,[(0,i.Wm)(m,{required:"",outlined:"",label:"inventario",modelValue:s.inventario,"onUpdate:modelValue":[a[26]||(a[26]=e=>s.inventario=e),n.calcular],options:s.inventarios,"option-label":"nombre"},null,8,["modelValue","options","onUpdate:modelValue"])]),(0,i.Wm)("div",Ig,[(0,i.Wm)(u,{required:"",type:"number",outlined:"",label:"cantidad",modelValue:s.newgarantia.cantidad,"onUpdate:modelValue":[a[27]||(a[27]=e=>s.newgarantia.cantidad=e),n.calcular]},null,8,["modelValue","onUpdate:modelValue"])]),(0,i.Wm)("div",Pg,[(0,i.Wm)(u,{outlined:"",type:"number",label:"efectivo",modelValue:s.newgarantia.efectivo,"onUpdate:modelValue":a[28]||(a[28]=e=>s.newgarantia.efectivo=e)},null,8,["modelValue"])]),(0,i.Wm)("div",$g,[(0,i.Wm)(u,{outlined:"",label:"fisico",modelValue:s.newgarantia.fisico,"onUpdate:modelValue":a[29]||(a[29]=e=>s.newgarantia.fisico=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Fg,[(0,i.Wm)(u,{outlined:"",label:"observacion",modelValue:s.newgarantia.observacion,"onUpdate:modelValue":a[30]||(a[30]=e=>s.newgarantia.observacion=e),style:{"text-transform":"uppercase"}},null,8,["modelValue"])]),(0,i.Wm)("div",Lg,[(0,i.wy)((0,i.Wm)("input",{style:{"margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"EN PRESTAMO","onUpdate:modelValue":a[31]||(a[31]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),zg,(0,i.wy)((0,i.Wm)("input",{style:{"margin-left":"1em","margin-right":"0.5em",height:"35px",width:"35px"},type:"radio",value:"VENTA","onUpdate:modelValue":a[32]||(a[32]=e=>s.newgarantia.tipo=e)},null,512),[[o.G2,s.newgarantia.tipo]]),Zg]),(0,i.Wm)("div",jg,[(0,i.Wm)(r,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Registrar"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Ph((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalhojaruta,"onUpdate:modelValue":a[44]||(a[44]=e=>s.modalhojaruta=e)},{default:Ph((()=>[(0,i.Wm)(f,{style:{width:"700px","min-width":"80vw"}},{default:Ph((()=>[(0,i.Wm)(g,null,{default:Ph((()=>[(0,i.Wm)("div",Bg,"Hoja ruta "+(0,R.zw)(s.venta.titular)+" "+(0,R.zw)(s.venta.direccion),1)])),_:1}),(0,i.Wm)(g,{class:"q-pt-none"},{default:Ph((()=>[(0,i.Wm)(b,{onSubmit:(0,o.iM)(n.actualizarventa,["prevent"])},{default:Ph((()=>[(0,i.Wm)("div",Qg,[(0,i.Wm)("div",Gg,[(0,i.Wm)(u,{type:"date",outlined:"",label:"fechaentrega",modelValue:s.venta.fechaentrega,"onUpdate:modelValue":a[34]||(a[34]=e=>s.venta.fechaentrega=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Hg,[(0,i.Wm)(m,{required:"",options:["MAÑANA","TARDE","NOCHE"],outlined:"",label:"turno",modelValue:s.venta.turno,"onUpdate:modelValue":a[35]||(a[35]=e=>s.venta.turno=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Jg,[(0,i.Wm)(u,{required:"",type:"text",style:{"text-transform":"uppercase"},outlined:"",label:"hora",modelValue:s.venta.hora,"onUpdate:modelValue":a[36]||(a[36]=e=>s.venta.hora=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Kg,[(0,i.Wm)(u,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono1",modelValue:s.venta.telefono1,"onUpdate:modelValue":a[37]||(a[37]=e=>s.venta.telefono1=e)},null,8,["modelValue"])]),(0,i.Wm)("div",Xg,[(0,i.Wm)(u,{outlined:"",type:"text",style:{"text-transform":"uppercase"},label:"telefono2",modelValue:s.venta.telefono2,"onUpdate:modelValue":a[38]||(a[38]=e=>s.venta.telefono2=e)},null,8,["modelValue"])]),(0,i.Wm)("div",ef,[(0,i.Wm)(u,{outlined:"",label:"direccion",style:{"text-transform":"uppercase"},modelValue:s.venta.direccion,"onUpdate:modelValue":a[39]||(a[39]=e=>s.venta.direccion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",af,[(0,i.Wm)(u,{required:"",outlined:"",label:"envase",style:{"text-transform":"uppercase"},modelValue:s.venta.envase,"onUpdate:modelValue":a[40]||(a[40]=e=>s.venta.envase=e)},null,8,["modelValue"])]),(0,i.Wm)("div",tf,[(0,i.Wm)(u,{required:"",outlined:"",label:"acuenta",modelValue:s.venta.acuenta,"onUpdate:modelValue":a[41]||(a[41]=e=>s.venta.acuenta=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",of,[(0,i.Wm)(u,{required:"",outlined:"",label:"saldo",modelValue:s.venta.saldo,"onUpdate:modelValue":a[42]||(a[42]=e=>s.venta.saldo=e),disable:""},null,8,["modelValue"])]),(0,i.Wm)("div",lf,[(0,i.Wm)(u,{outlined:"",label:"observacion",style:{"text-transform":"uppercase"},modelValue:s.venta.observacion,"onUpdate:modelValue":a[43]||(a[43]=e=>s.venta.observacion=e)},null,8,["modelValue"])]),(0,i.Wm)("div",sf,[(0,i.Wm)(r,{type:"submit",class:"full-width",color:"primary",icon:"add_circle",label:"Imprimir"})])])])),_:1},8,["onSubmit"])])),_:1}),(0,i.Wm)(g,{align:"right",class:""},{default:Ph((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"Cerrar",icon:"delete",color:"negative"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(v,{modelValue:s.modalDialog,"onUpdate:modelValue":a[45]||(a[45]=e=>s.modalDialog=e)},{default:Ph((()=>[(0,i.Wm)(f,{style:{width:"700px","max-width":"80vw"}},{default:Ph((()=>[(0,i.Wm)(g,null,{default:Ph((()=>[nf])),_:1}),(0,i.Wm)(g,null,{default:Ph((()=>[(0,i.Wm)("div",null,[rf,(0,i.Uk)((0,R.zw)(s.venta.observacion),1)]),(0,i.Wm)("div",null,[(0,i.Wm)("table",df,[cf,((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(s.venta.detalles,(e=>((0,i.wg)(),(0,i.j4)("tr",{key:e},[(0,i.Wm)("td",null,(0,R.zw)(e.nombreproducto),1),(0,i.Wm)("td",null,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.precio),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1)])))),128))])])])),_:1}),(0,i.Wm)(_,{align:"right"},{default:Ph((()=>[(0,i.wy)((0,i.Wm)(r,{flat:"",label:"OK",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1})})),uf={name:"Sale",data(){return{monto:0,printboleta:"",prestamolista:[],fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha1:le.ZP.formatDate(new Date,"YYYY-MM-DD"),fecha2:le.ZP.formatDate(new Date,"YYYY-MM-DD"),products:[],modalregistro:!1,newcliente:{},filter:"",product:{},clients2:[],clients:[],client:"",productSales:[],sale:{},ventas:[],obs:"",inventarios:[],inventario:{},newgarantia:{},modalgarantia:!1,modalhojaruta:!1,modalDialog:!1,dialog_mod:!1,rango:"RANGO",venta:{},type:this.$route.params.type,columnas:[{label:"opcion",name:"opcion",field:"opcion"},{label:"id",name:"id",field:"id"},{label:"fecha",name:"fecha",field:e=>Be()(e.fecha).format("DD/MM/YYYY")},{label:"hora",name:"hora",field:"hora"},{label:"cliente",name:"cliente",field:e=>e.cliente.local+" "+e.cliente.titular,align:"left"},{label:"total",name:"total",field:"total"},{label:"acuenta",name:"acuenta",field:"acuenta"},{label:"saldo",name:"saldo",field:"saldo"},{label:"estado",name:"estado",field:"estado"},{label:"user",name:"user",field:"user"},{label:"observacion",name:"observacion",field:"observacion"}]}},mounted(){this.$watch((()=>this.$route.params.type),((e,a)=>{if(console.log("nuevo",e),console.log("antiguo",a),void 0==e)return!1;this.datosGet(e),this.type=e,this.consultaVenta(this.type),this.calcular()})),this.datosGet(this.type),this.$axios.get("http://192.168.100.8:81/api/listainventario").then((e=>{this.inventarios=e.data,this.inventario=e.data[0]})),this.consultaVenta(this.type),this.calcular()},methods:{delProduct(e,a){console.log(e),this.productSales.splice(e,1),find=this.products.find((e=>e.id==a)),find.cantidad=0},verObs(e){this.$q.dialog({title:"Observacion",message:e.observacion}).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},calcular(){this.newgarantia.efectivo=parseFloat(this.newgarantia.cantidad)*parseFloat(this.inventario.precio)},onMod(){this.$q.loading.show(),this.$axios.put("http://192.168.100.8:81/api/cliente/"+this.modcliente.id,this.modcliente).then((e=>{this.$q.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Modificado correctamente"}),this.dialog_mod=!1,this.modcliente={},this.datosGet(this.type)})).catch((e=>{this.$q.notify({color:"red-4",textColor:"white",icon:"error",message:"Error al Modificar"})})),this.$q.loading.hide()},agregarcliente(){this.$q.loading.show(),this.newcliente.tipocliente=2,this.$axios.post("http://192.168.100.8:81/api/agregarcliente",this.newcliente).then((()=>{this.$q.loading.hide(),this.datosGet(this.type),this.modalregistro=!1,this.newcliente={}})).catch((e=>{this.$q.loading.hide(),this.$q.notify({message:e.response.data.message,color:"red",position:"center",icon:"error"})}))},impresion(){if(0==this.ventas.length)return!1;let e=0,a=0,t=0,o="<style>\n      *{\n      }\n      table{width:100%;border-collapse: collapse;}\n      table, th, td {\n        //border: 1px solid;\n      }\n      </style>\n      <div style='padding:5px'>\n      <div style='text-align:center'>HISTORIAL DE VENTAS DE "+this.fecha1+" AL "+this.fecha2+"</div>\n      <hr>\n      <table>\n        <tr><th>TOTAL</th><th>A CUENTA</th><th>SALDO</th><th>TITULAR</th><th>USUARIO</th><tr>";this.ventas.forEach((l=>{e+=l.total,a+=l.acuenta,t+=l.saldo,o+="<tr><td>"+l.total+"</td><td>"+l.acuenta+"</td><td>"+l.saldo+"</td><td>"+l.cliente.titular+"</td><td>"+l.user.name+"</td></tr>"})),o+="</table>      <div><b>Total Venta </b>"+e+"</div>      <div><b>Total A Cuenta </b>"+a+"</div>      <div><b>Total Saldo </b>"+t+"</div>      </div>";let l=window.open("","Imprimir","width=1000,height=1000");l.document.write(o),l.document.close(),l.focus(),setTimeout((function(){l.print(),l.close()}),500)},impboleta(e){this.$axios.post("http://192.168.100.8:81/api/impresionVenta/"+e.id).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.focus(),setTimeout((function(){a.print(),a.close()}),500)}))},clickcompra(e){console.log(e),this.venta=e,this.modalDialog=!0},actualizarventa(){this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/updateRuta",{id:this.venta.id,turno:this.venta.turno,hora:this.venta.hora,telefono1:this.venta.telefono1,telefono2:this.venta.telefono2,envase:this.venta.envase,direccion:this.venta.direccion,acuenta:this.venta.acuenta,saldo:this.venta.saldo,observacion:this.venta.observacion,fechaentrega:this.venta.fechaentrega}).then((e=>{this.modalhojaruta=!1;let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close();let t=window.open("","Imprimir","width=1000,height=1000");t.document.write(e.data),t.document.close(),t.print(),t.close(),this.$q.loading.hide(),this.consultaVenta(this.type)}))},printruta(e){this.$axios.post("http://192.168.100.8:81/api/impresionruta/"+e.id).then((e=>{let a=window.open("_blank");a.document.write(e.data),a.document.close()}))},clickhojaruta(e){this.venta=e,this.modalhojaruta=!0},anular(e){this.$q.dialog({title:"Anular Venta?",message:"Motivo?",cancel:!0,prompt:{model:"",type:"text"}}).onOk((a=>{this.$axios.post("http://192.168.100.8:81/api/anular",{id:e.id,observacion:a}).then((e=>{this.consultaVenta(this.type),this.$q.notify({message:"Venta Anulado ",color:"green",position:"center",icon:"info"})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},consultaVenta(e){"DIA"==this.rango&&(this.fecha2=this.fecha1),this.$api.post("listSale",{tipo:"detalle"==e?"DETALLE":"LOCAL",ini:this.fecha1,fin:this.fecha2}).then((e=>{console.log(e.data),e.data.forEach((e=>{e.telefono1=e.cliente.telefono})),this.ventas=e.data}))},saleSave(){return""==this.fecha||void 0==this.fecha?(this.$q.notify({message:"Ingrese la fecha",color:"red",position:"center",icon:"error"}),!1):0==this.productSales.length?(console.log("sin prod"),this.$q.notify({message:"Seleccione Productos",color:"red",position:"center",icon:"error"}),!1):void 0==this.client.id||""==this.client.id?(console.log("sin cliente"),this.$q.notify({message:"Debe Seleccionar Cliente",color:"red",position:"center",icon:"error"}),!1):this.monto<0||this.monto>this.total||void 0==this.monto?(console.log("sin monto"),!1):(console.log(this.client.id),this.productSales.forEach((e=>{e.subtotal=e.precio*e.cantidad})),this.sale.tipo="detalle"==this.type?"DETALLE":"LOCAL",this.sale.fecha=this.fecha,this.sale.cliente_id=this.client.id,this.sale.total=this.total,this.sale.acuenta=this.monto,this.sale.saldo=this.porCobrar,this.sale.estado=this.porCobrar>0?"POR COBRAR":"CANCELADO",this.sale.detalles=this.productSales,this.sale.observacion=this.obs,console.log(this.sale),this.printboleta="",void this.$api.post("sale",this.sale).then((e=>{this.printboleta=e.data,this.consultaVenta(this.type),this.saleClear(),this.$q.notify({message:"Venta exitosa",color:"green",position:"center",icon:"info"}),this.$q.dialog({message:"Desea registrar préstamo o venta de material?",title:"Garantia?",cancel:!0,persistent:!0}).onOk((()=>{this.prestamolista=[],this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.calcular,this.modalgarantia=!0})).onCancel((()=>{this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""};let e=window.open("","Imprimir","width=1000,height=1000");e.document.write(this.printboleta),e.document.close(),e.focus(),e.print(),e.close()}))})))},datosGet(e){this.products=[],this.$api.get(`/listaproducto/${e}`).then((e=>{e.data.forEach((e=>{e.cantidad=0,this.products.push(e)}))})),this.clients=[],this.clients2=[],this.$api.get(`/listacliente/${e}`).then((e=>{e.data.forEach((e=>{e.label=e.ci+" "+e.local+" "+e.titular,this.clients2.push(e),this.clients.push(e)}))}))},filterFn(e,a){a(""!==e?()=>{const a=e.toLowerCase();this.clients=this.clients2.filter((e=>e.label.toLowerCase().indexOf(a)>-1))}:()=>{this.clients=this.clients2})},saleClear(){this.productSales=[],this.products.forEach((e=>{e.cantidad=0}))},saleAdd(e){e.cantidad++;let a=this.productSales.find((a=>a.id==e.id));a?a.cantidad++:this.productSales.push({id:e.id,nombre:e.nombre,precio:e.precio,cantidad:1})},agregargarantia(){this.monto=0,this.obs="",this.sale={},this.productSales=[],this.$q.loading.show(),this.$axios.post("http://192.168.100.8:81/api/prestamo",{inventario_id:this.inventario.id,cantidad:this.newgarantia.cantidad,efectivo:this.newgarantia.efectivo,fisico:this.newgarantia.fisico,observacion:this.newgarantia.observacion,cliente_id:this.client.id,tipo:this.newgarantia.tipo,fecha:le.ZP.formatDate(new Date,"YYYY-MM-DD")}).then((e=>{this.prestamolista.push({cantidad:this.newgarantia.cantidad,nombre:this.inventario.nombre,efectivo:this.newgarantia.efectivo,tipo:this.newgarantia.tipo}),this.$q.loading.hide(),this.producto="",this.cantidad=1,this.newgarantia={},this.calcular,this.modalgarantia=!1,this.$q.dialog({message:"Deseas registrar garantia?",title:"Garantia?",cancel:!0,persistent:!0}).onOk((()=>{this.newgarantia={},this.newgarantia.cantidad=1,this.newgarantia.efectivo=0,this.newgarantia.tipo="EN PRESTAMO",this.modalgarantia=!0})).onCancel((()=>{this.printboleta+="<hr><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((e=>{this.printboleta+="<tr><td>"+e.cantidad+"</td><td>"+e.nombre+"</td><td>"+e.efectivo+"</td><td>"+e.tipo+"</td></tr>"})),this.printboleta+="</table></div>",this.printboleta+="<br><hr><div><b>Cliente </b>"+this.client.local+" - "+this.client.titular+"</div><div><b>Fecha: </b>"+this.fecha+"</div><div><table><tr><th>CANT</th><th>MATERIAL</th><th>MONTO</th><th>TIPO</th></tr>",this.prestamolista.forEach((e=>{this.printboleta+="<tr><td>"+e.cantidad+"</td><td>"+e.nombre+"</td><td>"+e.efectivo+"</td><td>"+e.tipo+"</td></tr>"})),this.printboleta+="</table></div><div class='leyenda'><b>* Solo se recibirá el envase si esta limpio y en buen estado<br>* Tiempo maximo de devolución 5 días, caso contrario se dará de baja<br>* Horarios Lun - Vier de 8:30 a 17:00<b></div>";let e=window.open("","Imprimir","width=1000,height=1000");e.document.write(this.printboleta),e.document.close(),e.focus(),e.print(),e.close(),this.monto=0,this.obs="",this.sale={},this.productSales=[],this.client={label:""}}))})).catch((e=>{this.$q.loading.hide(),console.log(e),this.$q.notify({message:e.message.error,color:"red",position:"center",icon:"error"})}))}},computed:{total(){let e=0;return this.productSales.forEach((a=>{e+=a.precio*a.cantidad})),e},porCobrar(){return this.total-this.monto}}};var pf=t(62025),hf=t(67030);uf.render=mf,uf.__scopeId="data-v-6d5a2b0c";const gf=uf;k()(uf,"components",{QPage:V.Z,QBtn:D.Z,QSelect:Ge.Z,QItem:mi.Z,QItemSection:ui.Z,QInput:E.Z,QCard:x.Z,QCardSection:C.Z,QSpace:pf.Z,QChip:hf.Z,QForm:q.Z,QDialog:ue.Z,QToggle:A.Z,QTable:de.Z,QIcon:_.Z,QTd:me.Z,QBadge:re.Z,QBtnGroup:ac.Z,QCardActions:T.Z}),k()(uf,"directives",{ClosePopup:he.Z});const ff=(0,i.HX)("data-v-49087b2d");(0,i.dD)("data-v-49087b2d");const bf={class:"row"},vf={class:"col-4 flex flex-center"},Wf={class:"col-4 flex flex-center"},wf={class:"col-4 flex flex-center"},yf={class:"col-12"},Vf=(0,i.Uk)("Editar"),xf=(0,i.Uk)("Eliminar"),Cf=(0,i.Uk)("Reporte"),_f={class:"absolute-full flex flex-center"},qf={class:"col-4"},Ef={class:"col-4"},Af={class:"col-4 flex flex-center"},Df={class:"col-12"},Mf={class:"col-12"},Tf={class:"text-h6"},Sf={class:"row"},kf={class:"col-8"},Of={class:"col-4"},Rf={class:"col-12"},Nf={class:"col-6"},Uf={class:"col-6"},Yf={class:"text-h6"},If={class:"row"},Pf={class:"col-12"},$f={class:"col-6"},Ff={class:"col-6"},Lf=(0,i.Uk)(" Cantidad minima de material en almacen "),zf=(0,i.Wm)("div",{class:"text-bold text-center"},"INGRESO DE MATERIA PRIMA",-1),Zf={class:"row"},jf={class:"col-6"},Bf={class:"col-6"},Qf={class:"col-2"},Gf={class:"col-2"},Hf={class:"col-1 flex-center flex text-bold text-center"},Jf={class:"col-1"},Kf={class:"col-3"},Xf={class:"col-3"},eb={class:"col-12 text-right"},ab={class:"col-12"},tb=(0,i.Wm)("thead",null,[(0,i.Wm)("tr",null,[(0,i.Wm)("th",{class:"text-left"},"NRO"),(0,i.Wm)("th",{class:"text-left"},"MATERIAL"),(0,i.Wm)("th",{class:"text-center"},"CANTIDAD"),(0,i.Wm)("th",null,"COSTO"),(0,i.Wm)("th",null,"SUBTOTAL"),(0,i.Wm)("th",{class:"text-center"},"LOTE"),(0,i.Wm)("th",{class:"text-left"},"FEC VEN"),(0,i.Wm)("th",{class:"text-left"},"OBS"),(0,i.Wm)("th",{class:"text-right"},"OPCION")])],-1),ob={class:"text-left"},lb={class:"text-left"},ib={class:"text-center"},sb={class:"text-center"},nb={class:"text-left"},rb={class:"text-left"},db={class:"text-right"},cb=(0,i.Wm)("div",null,null,-1),mb=(0,i.Wm)("div",{class:"text-h7 text-bold text-center"},"PAGAR POR LA COMPRA",-1),ub={class:"row"},pb={class:"col-5"},hb={class:"col-5"},gb={class:"col-2"},fb={class:"col-4"},bb={class:"col-4"},vb={class:"col-4"},Wb={class:"col-6"},wb={class:"col-6"},yb={class:"col-12"},Vb=(0,i.Wm)("div",{class:"text-h7"},"GENERAR REPORTE",-1);(0,i.Cn)();const xb=ff(((e,a,t,o,l,s)=>{const n=(0,i.up)("q-btn"),r=(0,i.up)("q-icon"),d=(0,i.up)("q-input"),c=(0,i.up)("q-item-section"),m=(0,i.up)("q-item"),u=(0,i.up)("q-list"),p=(0,i.up)("q-btn-dropdown"),h=(0,i.up)("q-td"),g=(0,i.up)("q-badge"),f=(0,i.up)("q-linear-progress"),b=(0,i.up)("q-table"),v=(0,i.up)("q-space"),W=(0,i.up)("q-card-section"),w=(0,i.up)("q-form"),y=(0,i.up)("q-card"),V=(0,i.up)("q-dialog"),x=(0,i.up)("q-select"),C=(0,i.up)("q-tooltip"),_=(0,i.up)("q-markup-table"),q=(0,i.up)("q-card-actions"),E=(0,i.up)("q-page"),A=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(E,{class:"q-pa-xs"},{default:ff((()=>[(0,i.Wm)("div",bf,[(0,i.Wm)("div",vf,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.providerAdd,loading:l.loading,label:"Registro de Provedor",color:"blue-7","no-caps":"",icon:"o_assignment_ind"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",Wf,[(0,i.Wm)(n,{onClick:s.materialAdd,loading:l.loading,label:"Registro de Materia Prima",color:"green-7","no-caps":"",icon:"o_shopping_bag"},null,8,["onClick","loading"])]),(0,i.Wm)("div",wf,[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:0,onClick:s.compraAdd,loading:l.loading,label:"Ingreso de Material Prima",color:"cyan-7","no-caps":"",icon:"add_circle_outline"},null,8,["onClick","loading"])):(0,i.kq)("",!0)]),(0,i.Wm)("div",yf,[(0,i.Wm)(b,{dense:"",title:"Lista de Materiales",rows:l.materials,columns:l.materialColumns,loading:l.loading,"rows-per-page-options":[10,25,50],filter:l.almacenFilter,"row-class":"cursor-pointer"},{"top-right":ff((()=>[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.almacenFilter,"onUpdate:modelValue":a[1]||(a[1]=e=>l.almacenFilter=e),debounce:"300",placeholder:"Buscar..."},{append:ff((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-actions":ff((e=>[(0,i.Wm)(h,{props:e,"auto-width":""},{default:ff((()=>[(0,i.Wm)(p,{icon:"more_vert","no-caps":"",dense:"",color:"primary",label:"Opciones"},{default:ff((()=>[(0,i.Wm)(u,null,{default:ff((()=>[(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialEdit(e.row)},{default:ff((()=>[(0,i.Wm)(c,null,{default:ff((()=>[Vf])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.materialDelete(e.row)},{default:ff((()=>[(0,i.Wm)(c,null,{default:ff((()=>[xf])),_:1})])),_:2},1032,["onClick"]),[[A]]),(0,i.wy)((0,i.Wm)(m,{clickable:"",onClick:a=>s.reporte(e.row)},{default:ff((()=>[(0,i.Wm)(c,null,{default:ff((()=>[Cf])),_:1})])),_:2},1032,["onClick"]),[[A]])])),_:2},1024)])),_:2},1024)])),_:2},1032,["props"])])),"body-cell-stock":ff((e=>[(0,i.Wm)(h,{props:e},{default:ff((()=>[(0,i.Wm)(f,{size:"18px",rounded:"",value:s.calcular(e.row.stock,e.row.min),color:s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",class:"full-width"},{default:ff((()=>[(0,i.Wm)("div",_f,[(0,i.Wm)(g,{color:"white","text-color":s.calcular(e.row.stock,e.row.min)<1?"red-7":"green-7",label:e.row.stock},null,8,["text-color","label"])])])),_:2},1032,["value","color"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","loading","filter"])]),(0,i.Wm)("div",qf,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha3,"onUpdate:modelValue":a[2]||(a[2]=e=>l.fecha3=e),label:"Fecha Ini",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Ef,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.fecha4,"onUpdate:modelValue":a[3]||(a[3]=e=>l.fecha4=e),label:"Fecha fin",type:"date"},null,8,["modelValue"])]),(0,i.Wm)("div",Af,[(0,i.Wm)(n,{color:"info",label:"Consultar",onClick:s.consultmaterial,"no-caps":""},null,8,["onClick"])]),(0,i.Wm)("div",Df,[(0,i.Wm)(b,{dense:"","rows-per-page-options":[10,20,50,100,0],title:"LISTA DE COMPRAS ",rows:l.comptodo,columns:l.colcompra,filter:l.filter,"row-key":"name"},{"body-cell-estado":ff((e=>[(0,i.Wm)(h,{key:"estado",props:e},{default:ff((()=>[(0,i.Wm)(g,{color:"POR PAGAR"==e.row.estado?"red":"green"},{default:ff((()=>[(0,i.Uk)((0,R.zw)(e.row.estado),1)])),_:2},1032,["color"])])),_:2},1032,["props"])])),"top-right":ff((()=>[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[4]||(a[4]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:ff((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-opcion":ff((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:ff((()=>[e.$store.state.login.pagoalmacen&&a.row.deuda>0?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"green",icon:"paid",onClick:e=>s.pagarcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen&&a.row.logcompras.length>0?((0,i.wg)(),(0,i.j4)(n,{key:1,dense:"",round:"",flat:"",color:"purple",icon:"list",onClick:e=>s.listpago(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:2,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:e=>s.delcompra(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])]),(0,i.Wm)("div",Mf,[(0,i.Wm)(b,{dense:"","rows-per-page-options":[10,20,50,100,0],title:"LISTA DE RETIROS ",rows:l.recutodo,columns:l.colrecuento,filter:l.filter,"row-key":"name"},{"top-right":ff((()=>[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.filter,"onUpdate:modelValue":a[5]||(a[5]=e=>l.filter=e),debounce:"300",placeholder:"Buscar..."},{append:ff((()=>[(0,i.Wm)(r,{name:"search",class:"cursor-pointer"})])),_:1},8,["modelValue"])])),"body-cell-opcion":ff((a=>[(0,i.Wm)(h,{key:"opcion",props:a},{default:ff((()=>[e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:0,dense:"",round:"",flat:"",color:"accent",icon:"edit",onClick:t=>e.modrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0),e.$store.state.login.editalmacen?((0,i.wg)(),(0,i.j4)(n,{key:1,dense:"",round:"",flat:"",color:"red",icon:"delete",onClick:t=>e.delrecuento(a.row)},null,8,["onClick"])):(0,i.kq)("",!0)])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter"])])]),(0,i.Wm)(V,{modelValue:l.providerDialog,"onUpdate:modelValue":a[12]||(a[12]=e=>l.providerDialog=e)},{default:ff((()=>[(0,i.Wm)(y,{style:{width:"700px","max-width":"90vw"}},{default:ff((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:ff((()=>[(0,i.Wm)("div",Tf,(0,R.zw)("create"===l.providerOptions?"Registro de Provedor":"Editar Provedor"),1),(0,i.Wm)(v),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:ff((()=>[(0,i.Wm)(w,{onSubmit:a[11]||(a[11]=a=>"create"===l.providerOptions?s.providerCreate():e.providerUpdate())},{default:ff((()=>[(0,i.Wm)("div",Sf,[(0,i.Wm)("div",kf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.razon,"onUpdate:modelValue":a[6]||(a[6]=e=>l.provider.razon=e),label:"Nombre o Razón Social","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",Of,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.nit,"onUpdate:modelValue":a[7]||(a[7]=e=>l.provider.nit=e),label:"CI/NIT",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Rf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.direccion,"onUpdate:modelValue":a[8]||(a[8]=e=>l.provider.direccion=e),label:"Dirección",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Nf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.email,"onUpdate:modelValue":a[9]||(a[9]=e=>l.provider.email=e),label:"Email",hint:""},null,8,["modelValue"])]),(0,i.Wm)("div",Uf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.provider.telefono,"onUpdate:modelValue":a[10]||(a[10]=e=>l.provider.telefono=e),label:"Teléfono",hint:""},null,8,["modelValue"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:ff((()=>[(0,i.wy)((0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:""},null,8,["loading"]),[[A]]),(0,i.Wm)(n,{loading:l.loading,color:"green","no-caps":"",icon:"o_save",label:"Guardar",dense:"",type:"submit"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.materialDialog,"onUpdate:modelValue":a[17]||(a[17]=e=>l.materialDialog=e)},{default:ff((()=>[(0,i.Wm)(y,{style:{width:"500px","max-width":"90vw"}},{default:ff((()=>[(0,i.Wm)(W,{class:"q-pb-none row items-center"},{default:ff((()=>[(0,i.Wm)("div",Yf,(0,R.zw)("create"===l.materialOptions?"Registro de ":"Editar ")+" Material",1),(0,i.Wm)(v),(0,i.wy)((0,i.Wm)(n,{flat:"",round:"",dense:"",icon:"close"},null,512),[[A]])])),_:1}),(0,i.Wm)(W,null,{default:ff((()=>[(0,i.Wm)(w,{onSubmit:a[16]||(a[16]=e=>"create"===l.materialOptions?s.materialCreate():s.materialUpdate())},{default:ff((()=>[(0,i.Wm)("div",If,[(0,i.Wm)("div",Pf,[(0,i.Wm)(d,{outlined:"",dense:"",modelValue:l.material.nombre,"onUpdate:modelValue":a[13]||(a[13]=e=>l.material.nombre=e),label:"Nombre","lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",$f,[(0,i.Wm)(x,{outlined:"",dense:"",modelValue:l.material.unid,"onUpdate:modelValue":a[14]||(a[14]=e=>l.material.unid=e),label:"Unidad",options:l.unidades,"lazy-rules":"",rules:[e=>!!e||"Campo requerido"]},null,8,["modelValue","options","rules"])]),(0,i.Wm)("div",Ff,[(0,i.Wm)(d,{outlined:"",type:"number",dense:"",modelValue:l.material.min,"onUpdate:modelValue":a[15]||(a[15]=e=>l.material.min=e),label:"Minimo",hint:"",rules:[e=>!!e||"Campo requerido"]},{default:ff((()=>[(0,i.Wm)(C,null,{default:ff((()=>[Lf])),_:1})])),_:1},8,["modelValue","rules"])])]),(0,i.Wm)(W,{class:"row justify-end"},{default:ff((()=>[(0,i.wy)((0,i.Wm)(n,{loading:l.loading,color:"red","no-caps":"",icon:"o_delete",label:"Cancelar",dense:""},null,8,["loading"]),[[A]]),(0,i.Wm)(n,{loading:l.loading,color:"green","no-caps":"",icon:"o_save",label:"Guardar",dense:"",type:"submit"},null,8,["loading"])])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_add,"onUpdate:modelValue":a[25]||(a[25]=e=>l.dialog_add=e)},{default:ff((()=>[(0,i.Wm)(y,{style:{width:"800px","max-width":"80vw"}},{default:ff((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white q-pb-none"},{default:ff((()=>[zf])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:ff((()=>[(0,i.Wm)("div",Zf,[(0,i.Wm)("div",jf,[(0,i.Wm)(x,{dense:"",outlined:"",modelValue:l.material,"onUpdate:modelValue":a[18]||(a[18]=e=>l.material=e),options:l.materials,label:"Material","option-label":"nombre","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Bf,[(0,i.Wm)(x,{dense:"",outlined:"",modelValue:l.provider,"onUpdate:modelValue":a[19]||(a[19]=e=>l.provider=e),options:l.providers,label:"Proveedor","option-label":"razon","option-value":"id"},null,8,["modelValue","options"])]),(0,i.Wm)("div",Qf,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.cantidad,"onUpdate:modelValue":a[20]||(a[20]=e=>l.compra.cantidad=e),label:"Cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",Gf,[(0,i.Wm)(d,{dense:"",outlined:"",type:"number",step:"0.01",modelValue:l.compra.costo,"onUpdate:modelValue":a[21]||(a[21]=e=>l.compra.costo=e),label:"Costo U"},null,8,["modelValue"])]),(0,i.Wm)("div",Hf,"Subtotal: "+(0,R.zw)(s.subTotalNumber(l.compra.costo,l.compra.cantidad)),1),(0,i.Wm)("div",Jf,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.lote,"onUpdate:modelValue":a[22]||(a[22]=e=>l.compra.lote=e),label:"Lote"},null,8,["modelValue"])]),(0,i.Wm)("div",Kf,[(0,i.Wm)(d,{dense:"",outlined:"",type:"date",modelValue:l.compra.fechaven,"onUpdate:modelValue":a[23]||(a[23]=e=>l.compra.fechaven=e),label:"Fecha Vencimiento"},null,8,["modelValue"])]),(0,i.Wm)("div",Xf,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.compra.observacion,"onUpdate:modelValue":a[24]||(a[24]=e=>l.compra.observacion=e),label:"Observacion"},null,8,["modelValue"])]),(0,i.Wm)("div",eb,[(0,i.Wm)(n,{label:"Añadir","no-caps":"",color:"green",icon:"add_circle",onClick:s.agregarcompra},null,8,["onClick"])]),(0,i.Wm)("div",ab,[(0,i.Wm)(_,null,{default:ff((()=>[tb,(0,i.Wm)("tbody",null,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(l.compras,((e,a)=>((0,i.wg)(),(0,i.j4)("tr",{key:a},[(0,i.Wm)("td",ob,(0,R.zw)(a+1),1),(0,i.Wm)("td",lb,(0,R.zw)(e.material),1),(0,i.Wm)("td",ib,(0,R.zw)(e.cantidad),1),(0,i.Wm)("td",null,(0,R.zw)(e.costo),1),(0,i.Wm)("td",null,(0,R.zw)(e.subtotal),1),(0,i.Wm)("td",sb,(0,R.zw)(e.lote),1),(0,i.Wm)("td",nb,(0,R.zw)(e.fechaven),1),(0,i.Wm)("td",rb,(0,R.zw)(e.observacion),1),(0,i.Wm)("td",db,[(0,i.Wm)(n,{flat:"",dense:"",color:"red",icon:"o_delete",onClick:e=>s.eliminar(a)},null,8,["onClick"])])])))),128))])])),_:1})]),cb]),(0,i.Wm)("div",null,[(0,i.Wm)(n,{loading:l.loading,label:"REGISTRAR",color:"positive",icon:"add_circle",onClick:s.regcompra},null,8,["loading","onClick"]),(0,i.wy)((0,i.Wm)(n,{loading:l.loading,label:"Cancelar",icon:"delete",color:"negative"},null,8,["loading"]),[[A]])])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialoglistpagos,"onUpdate:modelValue":a[26]||(a[26]=e=>l.dialoglistpagos=e)},{default:ff((()=>[(0,i.Wm)(y,null,{default:ff((()=>[(0,i.Wm)(W,{class:"row items-center"},{default:ff((()=>[(0,i.Wm)(b,{title:"pagos",rows:l.pagos,columns:l.colpagos,"row-key":"name"},null,8,["rows","columns"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:ff((()=>[(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialogpagar,"onUpdate:modelValue":a[35]||(a[35]=e=>l.dialogpagar=e)},{default:ff((()=>[(0,i.Wm)(y,{style:{width:"700px","max-width":"90vw"}},{default:ff((()=>[(0,i.Wm)(W,{class:"bg-green-14 text-white"},{default:ff((()=>[mb])),_:1}),(0,i.Wm)(W,{class:"q-pt-xs"},{default:ff((()=>[(0,i.Wm)(w,{onSubmit:s.regpago,class:"q-gutter-md"},{default:ff((()=>[(0,i.Wm)("div",ub,[(0,i.Wm)("div",pb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.provider.razon,"onUpdate:modelValue":a[27]||(a[27]=e=>l.compra2.provider.razon=e),readonly:"",label:"proveedor"},null,8,["modelValue"])]),(0,i.Wm)("div",hb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.material.nombre,"onUpdate:modelValue":a[28]||(a[28]=e=>l.compra2.material.nombre=e),readonly:"",label:"material"},null,8,["modelValue"])]),(0,i.Wm)("div",gb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.lote,"onUpdate:modelValue":a[29]||(a[29]=e=>l.compra2.lote=e),readonly:"",label:"lote"},null,8,["modelValue"])]),(0,i.Wm)("div",fb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.cantidad,"onUpdate:modelValue":a[30]||(a[30]=e=>l.compra2.cantidad=e),readonly:"",label:"cantidad"},null,8,["modelValue"])]),(0,i.Wm)("div",bb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.costo,"onUpdate:modelValue":a[31]||(a[31]=e=>l.compra2.costo=e),readonly:"",label:"costo"},null,8,["modelValue"])]),(0,i.Wm)("div",vb,[(0,i.Wm)(d,{dense:"",outlined:"",modelValue:l.compra2.subtotal,"onUpdate:modelValue":a[32]||(a[32]=e=>l.compra2.subtotal=e),readonly:"",label:"subtotal"},null,8,["modelValue"])]),(0,i.Wm)("div",Wb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.pago.monto,"onUpdate:modelValue":a[33]||(a[33]=e=>l.pago.monto=e),label:"Monto",step:"0.01","lazy-rules":"",rules:[e=>e&&e>0&&e<=l.compra2.deuda||"ingrese otro monto"]},null,8,["modelValue","rules"])]),(0,i.Wm)("div",wb,[(0,i.Wm)(d,{dense:"",outlined:"",type:"text",modelValue:l.pago.observacion,"onUpdate:modelValue":a[34]||(a[34]=e=>l.pago.observacion=e),label:"Observacion"},null,8,["modelValue"])])]),(0,i.Wm)("div",yb,[(0,i.Wm)(n,{label:"Registrar",type:"submit",color:"positive",icon:"add_circle"}),(0,i.wy)((0,i.Wm)(n,{label:"Cancelar",icon:"delete",color:"negative"},null,512),[[A]])])])),_:1},8,["onSubmit"])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,i.Wm)(V,{modelValue:l.dialog_reporte,"onUpdate:modelValue":a[38]||(a[38]=e=>l.dialog_reporte=e)},{default:ff((()=>[(0,i.Wm)(y,null,{default:ff((()=>[(0,i.Wm)(W,{class:"bg-cyan-14 text-white"},{default:ff((()=>[Vb])),_:1}),(0,i.Wm)(W,{class:"row items-center"},{default:ff((()=>[(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha1,"onUpdate:modelValue":a[36]||(a[36]=e=>l.fecha1=e),label:"Fecha Inicio"},null,8,["modelValue"]),(0,i.Wm)(d,{dense:"",type:"date",outlined:"",modelValue:l.fecha2,"onUpdate:modelValue":a[37]||(a[37]=e=>l.fecha2=e),label:"Fecha Fin"},null,8,["modelValue"])])),_:1}),(0,i.Wm)(q,{align:"right"},{default:ff((()=>[(0,i.Wm)(n,{flat:"",label:"GENERAR",color:"deep-orange",onClick:s.genreporte},null,8,["onClick"]),(0,i.wy)((0,i.Wm)(n,{flat:"",label:"Cancelar",color:"primary"},null,512),[[A]])])),_:1})])),_:1})])),_:1},8,["modelValue"])])),_:1})}));t(19544);const Cb={data(){return{providers:[],provider:{},dialogpagar:!1,dialog_reporte:!1,filter:"",pago:{},pagos:[],compra2:{},providerOptions:"create",providerDialog:!1,loading:!1,almacenFilter:"",materials:[],material:"",dialog_add:!1,fecha3:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha4:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha1:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),fecha2:le.ZP.formatDate(Date.now(),"YYYY-MM-DD"),unidades:["Kilogramos","Litros","Unidad","Metros","Metros Cuadrados","Metros Cubicos","Caja","Bolsa","Paquete","Otro"],materialDialog:!1,compra:{cantidad:0,costo:0,lote:"",fechaven:"",observacion:""},comptodo:[],colrecuento:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colcompra:[{name:"opcion",label:"OPCIONES",field:"opcion"},{name:"estado",align:"center",label:"ESTADO",field:"estado"},{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"id",align:"center",label:"ID",field:"id",sortable:!0},{name:"cantidad",align:"center",label:"CANTIDAD",field:"cantidad",sortable:!0},{name:"costo",align:"center",label:"COSTO",field:"costo",sortable:!0},{name:"subtotal",align:"center",label:"SUBTOTAL",field:"subtotal",sortable:!0},{name:"deuda",align:"center",label:"DEUDA",field:"deuda",sortable:!0},{name:"lote",align:"center",label:"LOTE",field:"lote",sortable:!0},{name:"fechaven",align:"center",label:"FECHA VEN",field:"fechaven",sortable:!0},{name:"material",align:"center",label:"MATERIAL",field:e=>e.material.nombre,sortable:!0},{name:"provider",align:"center",label:"PROVEEDOR",field:e=>e.provider.razon,sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],colpagos:[{name:"fecha",align:"center",label:"FECHA",field:"fecha",sortable:!0},{name:"monto",align:"center",label:"MONTO",field:"monto",sortable:!0},{name:"observacion",align:"center",label:"OBSERVACION",field:"observacion",sortable:!0}],recutodo:[],compras:[],materialOptions:"create",materialColumns:[{name:"nombre",label:"Material",align:"left",field:"nombre"},{name:"unid",label:"Unidad",align:"left",field:"unid"},{name:"min",label:"Minimo",align:"center",field:"min"},{name:"stock",label:"Stock",align:"center",field:"stock"},{name:"actions",label:"Acciones",align:"center",field:"actions"}],dialoglistpagos:!1}},created(){this.providersGet(),this.materialsGet(),this.consultmaterial()},methods:{reporte(e){this.material2=e,this.dialog_reporte=!0},genreporte(){console.log(le.ZP.formatDate(new Date,"DD/MM/YYYY HH:mm:ss")),this.$axios.post("http://192.168.100.8:81/api/repalmacen",{id:this.material2.id,fecha1:this.fecha1,fecha2:this.fecha2}).then((e=>{console.log(e.data);let a=this;function t(){var e=new Image;e.src="logo.png",o.addImage(e,"jpg",.5,.5,2,2),o.setFont(void 0,"bold"),o.text(5,1,"INVENTARIO MATERIAL : "+a.material2.nombre),o.text(5,1.5,"DE "+Be()(a.fecha1).format("DD/MM/YYYY")+" AL "+Be()(a.fecha2).format("DD/MM/YYYY")),o.text(1,3,"TIPO"),o.text(2.5,3,"PROVEEDOR"),o.text(5,3,"MATERIAL"),o.text(7,3,"FECHA"),o.text(9.5,3,"COSTO"),o.text(11,3,"CANTIDAD"),o.text(13,3,"FECHA VEN"),o.text(15,3,"OBSERVACION"),o.setFont(void 0,"normal")}var o=new Lo.kH("p","cm","letter");o.setFont("courier"),o.setFontSize(9),t();let l=0;e.data.forEach((e=>{l+=.5,o.text(1,l+3,e.tipo),o.text(2.5,l+3,e.razon),o.text(5,l+3,e.nombre),o.text(7,l+3,le.ZP.formatDate(new Date(e.fecha),"DD/MM/YYYY")),o.text(9.5,l+3,null==e.costo?"":e.costo+""),o.text(11,l+3,e.cantidad+""),o.text(13,l+3,null==e.fechaven?"":e.fechaven),o.text(15,l+3,null==e.observacion?"":e.observacion),l+3>25&&(o.addPage(),t(),l=0)})),window.open(o.output("bloburl"),"_blank")}))},regpago(){return 1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.montogeneral<this.pago.monto&&"GASTO"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja General "}),!1):this.montocaja<this.pago.monto&&"CAJA"==this.checkgasto?(this.$q.notify({color:"red",icon:"info",message:"No ay suficiente en Cja Chica "}),!1):(this.pago.compra_id=this.compra2.id,this.pago.checktipo=this.checkgasto,void this.$axios.post("http://192.168.100.8:81/api/logcompra",this.pago).then((e=>{let a=window.open("","Imprimir","width=1000,height=1000");a.document.write(e.data),a.document.close(),a.print(),a.close(),this.dialogpagar=!1,this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"registrado "}),this.checkgasto="CAJA",this.consultmaterial()})))},onReg(){this.$axios.post("http://192.168.100.8:81/api/provider",this.proveedor).then((e=>{this.dialog_prov=!1,this.misproveedores(),this.provider={}}))},listpago(e){this.pagos=e.logcompras,this.dialoglistpagos=!0},delcompra(e){this.$q.dialog({title:"ADVERTENCIA",message:"Esta seguro de eliminar registro?",cancel:!0,persistent:!1}).onOk((()=>{this.$axios.delete("http://192.168.100.8:81/api/compra/"+e.id).then((e=>{this.materialsGet(),this.consultmaterial(),this.$q.notify({color:"green-4",textColor:"white",icon:"info",message:"Eliminado "})}))})).onOk((()=>{})).onCancel((()=>{})).onDismiss((()=>{}))},pagarcompra(e){this.compra2=e,this.pago={},1==this.$store.state.login.user.id?this.checkgasto="GASTO":this.checkgasto="CAJA",this.dialogpagar=!0},consultmaterial(){this.$axios.post("http://192.168.100.8:81/api/consultar2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.comptodo=e.data})),this.$axios.post("http://192.168.100.8:81/api/consulrecuento2",{fecha1:this.fecha3,fecha2:this.fecha4}).then((e=>{this.recutodo=e.data}))},subTotalNumber(e,a){return void 0==e||""==e||0==e||void 0==a||""==a||0==a?0:parseFloat(e)*parseFloat(a)},eliminar(e){this.compras.splice(this.compras.indexOf(e),1)},agregarcompra(){if(""==this.compra.cantidad||0==this.compra.cantidad||void 0==this.compra.cantidad)return this.$q.notify({color:"red-4",textColor:"white",icon:"warning",message:"Ingrese la cantidad",position:"top"}),!1;void 0!=this.compra.fechaven&&""!=this.compra.fechaven||(this.compra.fechaven=""),void 0!=this.compra.observacion&&""!=this.compra.observacion||(this.compra.observacion=""),void 0!=this.compra.lote&&""!=this.compra.lote||(this.compra.lote=""),this.compra.material_id=this.material.id,this.compra.subtotal=parseFloat(this.compra.cantidad)*parseFloat(this.compra.costo),this.compra.material=this.material.nombre,this.compra.provider_id=this.provider.id,this.compras.push(this.compra),this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""}},regcompra(){return 0==this.compras.length?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"Debe registrar "}),!1):(this.totalgeneral(),this.totalcompra=0,this.compras.forEach((e=>{this.totalcompra+=e.subtotal})),parseFloat(this.montogeneral)<parseFloat(this.totalcompra)?(this.$q.notify({color:"red-4",textColor:"white",icon:"info",message:"No puede exeder monto"}),!1):(this.loading=!0,void this.$axios.post("http://192.168.100.8:81/api/compra2",{user_id:this.$store.getters["login/user"].id,compras:this.compras}).then((e=>{this.dialog_add=!1,this.materialsGet(),this.loading=!1}))))},totalgeneral(){this.$axios.post("http://192.168.100.8:81/api/totalgeneral").then((e=>{this.montogeneral=parseFloat(e.data.monto)}))},calcular(e,a){let t=e/a*100/100;return t>1?1:t},compraAdd(){this.dialog_add=!0,this.compras=[],this.compra={cantidad:"",costo:"",lote:"",fechaven:"2023-01-01",observacion:""},this.material="",this.provider=""},materialAdd(){this.material={},this.materialDialog=!0,this.materialOptions="create"},providerAdd(){this.provider={},this.providerDialog=!0,this.providerOptions="create"},providersGet(){this.$axios.get("provider").then((e=>{this.providers=e.data})).catch((e=>{console.log(e)}))},providerCreate(){this.loading=!0,this.$axios.post("provider",this.provider).then((e=>{this.providerDialog=!1,this.providersGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialUpdate(){this.loading=!0,this.$axios.put("material/"+this.material.id,this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialCreate(){this.loading=!0,this.$axios.post("material",this.material).then((e=>{this.materialDialog=!1,this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))},materialEdit(e){this.material=e,this.materialDialog=!0,this.materialOptions="update"},materialDelete(e){this.$q.dialog({title:"Confirmar",message:"¿Desea eliminar el material?",cancel:!0,persistent:!0}).onOk((()=>{this.loading=!0,this.$axios.delete("material/"+e.id).then((e=>{this.materialsGet()})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}))},materialsGet(){this.loading=!0,this.$axios.get("material").then((e=>{this.materials=e.data,console.log(this.materials)})).catch((e=>{console.log(e)})).finally((()=>{this.loading=!1}))}}};var _b=t(5363),qb=t(30481);Cb.render=xb,Cb.__scopeId="data-v-49087b2d";const Eb=Cb;k()(Cb,"components",{QPage:V.Z,QBtn:D.Z,QTable:de.Z,QInput:E.Z,QIcon:_.Z,QTd:me.Z,QBtnDropdown:di.Z,QList:ci.Z,QItem:mi.Z,QItemSection:ui.Z,QLinearProgress:wh.Z,QBadge:re.Z,QSelect:Ge.Z,QDialog:ue.Z,QCard:x.Z,QCardSection:C.Z,QSpace:pf.Z,QForm:q.Z,QTooltip:_b.Z,QMarkupTable:qb.Z,QCardActions:T.Z}),k()(Cb,"directives",{ClosePopup:he.Z});const Ab=[{path:"/",component:()=>Promise.all([t.e(736),t.e(73)]).then(t.bind(t,14073)),children:[{path:"",component:()=>t.e(992).then(t.bind(t,52992))},{path:"login",component:O},{path:"cliente",component:ge,meta:{requiresAuth:!0}},{path:"clientelocal",component:He,meta:{requiresAuth:!0}},{path:"producto",component:ga,meta:{requiresAuth:!0}},{path:"venta",component:tc,meta:{requiresAuth:!0}},{path:"ventalocal",component:Os,meta:{requiresAuth:!0}},{path:"garantia",component:ft,meta:{requiresAuth:!0}},{path:"inventario",component:Lt,meta:{requiresAuth:!0}},{path:"empleado",component:vi,meta:{requiresAuth:!0}},{path:"reporteuser",component:sn,meta:{requiresAuth:!0}},{path:"user",component:xn,meta:{requiresAuth:!0}},{path:"gasto",component:kr,meta:{requiresAuth:!0}},{path:"prestamos",component:Ec,meta:{requiresAuth:!0}},{path:"prestamoslocal",component:Xc,meta:{requiresAuth:!0}},{path:"historial",component:Am,meta:{requiresAuth:!0}},{path:"cxcdetalle",component:Qm,meta:{requiresAuth:!0}},{path:"cxclocal",component:gu,meta:{requiresAuth:!0}},{path:"cxcruta",component:Ru,meta:{requiresAuth:!0}},{path:"historialruta",component:ep,meta:{requiresAuth:!0}},{path:"caja",component:pp,meta:{requiresAuth:!0}},{path:"cajageneral",component:Dp,meta:{requiresAuth:!0}},{path:"planillas",component:gi,meta:{requiresAuth:!0}},{path:"almacen",component:yh,meta:{requiresAuth:!0}},{path:"almacen2",component:Eb,meta:{requiresAuth:!0}},{path:"contable",component:Ih,meta:{requiresAuth:!0}},{path:"sale/:type",component:gf,meta:{requiresAuth:!0}}]},{path:"/:catchAll(.*)*",component:()=>t.e(193).then(t.bind(t,32193))}],Db=Ab,Mb=(0,c.BC)((function(){const e=m.r5,a=(0,m.p7)({scrollBehavior:()=>({left:0,top:0}),routes:Db,history:e("")});return a.beforeEach(((e,a,t)=>{if(e.matched.some((e=>e.meta.requiresAuth))){if((0,d.default)().getters["login/isLoggedIn"])return void t();t("/login")}else t()})),a}));async function Tb(e,a){const o="function"===typeof d.default?await(0,d.default)({}):d.default,{storeKey:i}=await Promise.resolve().then(t.bind(t,60214)),s="function"===typeof Mb?await Mb({store:o}):Mb;o.$router=s;const n=e(r);return n.use(l.Z,a),{app:n,store:o,storeKey:i,router:s}}var Sb=t(40729),kb=t(16249),Ob=t(64434),Rb=t(48508);const Nb={config:{},lang:Sb.Z,plugins:{Loading:kb.Z,Notify:Ob.Z,Dialog:Rb.Z}},Ub="";async function Yb({app:e,router:a,store:t,storeKey:o},l){let i=!1;const s=e=>{i=!0;const t=Object(e)===e?a.resolve(e).fullPath:e;window.location.href=t},n=window.location.href.replace(window.location.origin,"");for(let d=0;!1===i&&d<l.length;d++)try{await l[d]({app:e,router:a,store:t,ssrContext:null,redirect:s,urlPath:n,publicPath:Ub})}catch(r){return r&&r.url?void(window.location.href=r.url):void console.error("[Quasar] boot error:",r)}!0!==i&&(e.use(a),e.use(t,o),e.mount("#q-app"))}Tb(o.ri,Nb).then((e=>Promise.all([Promise.resolve().then(t.bind(t,5474))]).then((a=>{const t=a.map((e=>e.default)).filter((e=>"function"===typeof e));Yb(e,t)}))))},5474:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>n,axios:()=>i.a,api:()=>s});var o=t(47083),l=t(30052),i=t.n(l);const s=i().create({baseURL:"http://192.168.100.8:81/api"}),n=(0,o.xr)((({app:e,router:a,store:t})=>{e.config.globalProperties.$axios=i().create({baseURL:"http://192.168.100.8:81/api"}),e.config.globalProperties.$api=s;const o=localStorage.getItem("tokenchi");o&&(e.config.globalProperties.$axios.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$api.defaults.headers.common["Authorization"]="Bearer "+o,e.config.globalProperties.$axios.post("http://192.168.100.8:81/api/me").then((e=>{t.commit("login/auth_success",{token:o,user:e.data})})))}))},60214:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>w});var o={};t.r(o),t.d(o,{authStatus:()=>c,isLoggedIn:()=>d,user:()=>m});var l={};t.r(l),t.d(l,{auth_error:()=>h,auth_request:()=>u,auth_success:()=>p,salir:()=>g});var i={};t.r(i),t.d(i,{login:()=>b,logout:()=>v});var s=t(47083),n=t(87874);function r(){return{status:"",token:localStorage.getItem("tokenchi")||"",user:{},pedido:[],usuarios:!1,clientes:!1,productos:!1,inventario:!1,ventadetalle:!1,historialventadetalle:!1,ventalocal:!1,historialventalocal:!1,empleados:!1,reportes:!1,gastos:!1,historialprestamo:!1,anularventa:!1,ruta:!1,anularprestamo:!1,reimpresion:!1,eliminargasto:!1,cobrardetalle:!1,cobrarlocal:!1,cobrarruta:!1,cajachica:!1,editalmacen:!1,editproducto:!1,editinventario:!1,editglosa:!1,delprestamo:!1,veralmacen:!1,pagoalmacen:!1,cajageneral:!1,gastoreporteuser:!1}}function d(e){return!!e.token}function c(e){return e.status}function m(e){return e.user}function u(e){e.status="loading"}function p(e,a){e.status="success",e.token=a.token,e.user=a.user,e.usuarios=void 0!=a.user.permisos.find((e=>1===e.id)),e.clientes=void 0!=a.user.permisos.find((e=>2===e.id)),e.productos=void 0!=a.user.permisos.find((e=>3===e.id)),e.inventario=void 0!=a.user.permisos.find((e=>4===e.id)),e.ventadetalle=void 0!=a.user.permisos.find((e=>5===e.id)),e.historialventadetalle=void 0!=a.user.permisos.find((e=>6===e.id)),e.ventalocal=void 0!=a.user.permisos.find((e=>7===e.id)),e.historialventalocal=void 0!=a.user.permisos.find((e=>8===e.id)),e.empleados=void 0!=a.user.permisos.find((e=>9===e.id)),e.reportes=void 0!=a.user.permisos.find((e=>10===e.id)),e.gastos=void 0!=a.user.permisos.find((e=>11===e.id)),e.historialprestamo=void 0!=a.user.permisos.find((e=>12===e.id)),e.historialventa=void 0!=a.user.permisos.find((e=>13===e.id)),e.anularventa=void 0!=a.user.permisos.find((e=>14===e.id)),e.ruta=void 0!=a.user.permisos.find((e=>15===e.id)),e.anularprestamo=void 0!=a.user.permisos.find((e=>16===e.id)),e.reimpresion=void 0!=a.user.permisos.find((e=>17===e.id)),e.eliminargasto=void 0!=a.user.permisos.find((e=>18===e.id)),e.cobrardetalle=void 0!=a.user.permisos.find((e=>19===e.id)),e.cobrarlocal=void 0!=a.user.permisos.find((e=>20===e.id)),e.cobrarruta=void 0!=a.user.permisos.find((e=>21===e.id)),e.cajachica=void 0!=a.user.permisos.find((e=>22===e.id)),e.editalmacen=void 0!=a.user.permisos.find((e=>23===e.id)),e.editproducto=void 0!=a.user.permisos.find((e=>24===e.id)),e.editinventario=void 0!=a.user.permisos.find((e=>25===e.id)),e.editglosa=void 0!=a.user.permisos.find((e=>26===e.id)),e.delprestamo=void 0!=a.user.permisos.find((e=>27===e.id)),e.veralmacen=void 0!=a.user.permisos.find((e=>28===e.id)),e.pagoalmacen=void 0!=a.user.permisos.find((e=>29===e.id)),e.cajageneral=void 0!=a.user.permisos.find((e=>30===e.id)),e.gastoreporteuser=void 0!=a.user.permisos.find((e=>31===e.id))}function h(e){e.status="error"}function g(e){e.status="",e.token="",e.usuarios=!1,e.clientes=!1,e.productos=!1,e.inventario=!1,e.ventadetalle=!1,e.historialventadetalle=!1,e.ventalocal=!1,e.historialventalocal=!1,e.empleados=!1,e.reportes=!1,e.gastos=!1,e.historialprestamo=!1,e.historialventa=!1,e.anularventa=!1,e.ruta=!1,e.anularprestamo=!1,e.reimpresion=!1,e.eliminargasto=!1,e.cobrardetalle=!1,e.cobrarlocal=!1,e.cobrarruta=!1,e.cajachica=!1,e.editalmacen=!1,e.editproducto=!1,e.editinventario=!1,e.editglosa=!1,e.delprestamo=!1,e.veralmacen=!1,e.pagoalmacen=!1,e.cajageneral=!1,e.gastoreporteuser=!1}var f=t(5474);function b({commit:e},a){return new Promise(((t,o)=>{e("auth_request"),f.axios.post("http://192.168.100.8:81/api/login",a).then((a=>{const o=a.data.token,l=a.data.user;localStorage.setItem("tokenchi",o),f.axios.defaults.headers.common.Authorization="Bearer "+o,f.api.defaults.headers.common.Authorization="Bearer "+o,e("auth_success",{token:o,user:l}),t(a)})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),o(a)}))}))}function v({commit:e}){return new Promise(((a,t)=>{f.axios.post("http://192.168.100.8:81/api/logout").then((t=>{e("salir"),localStorage.removeItem("tokenchi"),delete f.axios.defaults.headers.common.Authorization,delete f.api.defaults.headers.common.Authorization,a()})).catch((a=>{e("auth_error"),localStorage.removeItem("tokenchi"),t(a)}))}))}const W={namespaced:!0,state:r,getters:o,mutations:l,actions:i},w=(0,s.h)((function(){const e=(0,n.MT)({modules:{login:W},strict:!1});return e}))},46700:(e,a,t)=>{var o={"./af":5809,"./af.js":5809,"./ar":46069,"./ar-dz":70481,"./ar-dz.js":70481,"./ar-kw":93994,"./ar-kw.js":93994,"./ar-ly":33312,"./ar-ly.js":33312,"./ar-ma":90239,"./ar-ma.js":90239,"./ar-sa":31863,"./ar-sa.js":31863,"./ar-tn":19607,"./ar-tn.js":19607,"./ar.js":46069,"./az":69281,"./az.js":69281,"./be":29945,"./be.js":29945,"./bg":59384,"./bg.js":59384,"./bm":21476,"./bm.js":21476,"./bn":43345,"./bn-bd":70216,"./bn-bd.js":70216,"./bn.js":43345,"./bo":81713,"./bo.js":81713,"./br":19655,"./br.js":19655,"./bs":87296,"./bs.js":87296,"./ca":43049,"./ca.js":43049,"./cs":62722,"./cs.js":62722,"./cv":98039,"./cv.js":98039,"./cy":95563,"./cy.js":95563,"./da":31960,"./da.js":31960,"./de":67533,"./de-at":76674,"./de-at.js":76674,"./de-ch":17732,"./de-ch.js":17732,"./de.js":67533,"./dv":78343,"./dv.js":78343,"./el":37004,"./el.js":37004,"./en-au":32517,"./en-au.js":32517,"./en-ca":84929,"./en-ca.js":84929,"./en-gb":99722,"./en-gb.js":99722,"./en-ie":96923,"./en-ie.js":96923,"./en-il":68050,"./en-il.js":68050,"./en-in":99624,"./en-in.js":99624,"./en-nz":70540,"./en-nz.js":70540,"./en-sg":14375,"./en-sg.js":14375,"./eo":10040,"./eo.js":10040,"./es":99720,"./es-do":25595,"./es-do.js":25595,"./es-mx":10180,"./es-mx.js":10180,"./es-us":61563,"./es-us.js":61563,"./es.js":99720,"./et":9217,"./et.js":9217,"./eu":39474,"./eu.js":39474,"./fa":85243,"./fa.js":85243,"./fi":57645,"./fi.js":57645,"./fil":55350,"./fil.js":55350,"./fo":75622,"./fo.js":75622,"./fr":91467,"./fr-ca":53439,"./fr-ca.js":53439,"./fr-ch":14335,"./fr-ch.js":14335,"./fr.js":91467,"./fy":86026,"./fy.js":86026,"./ga":32969,"./ga.js":32969,"./gd":21347,"./gd.js":21347,"./gl":11085,"./gl.js":11085,"./gom-deva":904,"./gom-deva.js":904,"./gom-latn":69597,"./gom-latn.js":69597,"./gu":28705,"./gu.js":28705,"./he":69128,"./he.js":69128,"./hi":92821,"./hi.js":92821,"./hr":9002,"./hr.js":9002,"./hu":94814,"./hu.js":94814,"./hy-am":30658,"./hy-am.js":30658,"./id":29344,"./id.js":29344,"./is":28204,"./is.js":28204,"./it":70376,"./it-ch":81549,"./it-ch.js":81549,"./it.js":70376,"./ja":69293,"./ja.js":69293,"./jv":96401,"./jv.js":96401,"./ka":60482,"./ka.js":60482,"./kk":87329,"./kk.js":87329,"./km":44241,"./km.js":44241,"./kn":23566,"./kn.js":23566,"./ko":52742,"./ko.js":52742,"./ku":92915,"./ku.js":92915,"./ky":86846,"./ky.js":86846,"./lb":44959,"./lb.js":44959,"./lo":82188,"./lo.js":82188,"./lt":58967,"./lt.js":58967,"./lv":41245,"./lv.js":41245,"./me":90751,"./me.js":90751,"./mi":57501,"./mi.js":57501,"./mk":11643,"./mk.js":11643,"./ml":15597,"./ml.js":15597,"./mn":67612,"./mn.js":67612,"./mr":19065,"./mr.js":19065,"./ms":84703,"./ms-my":84645,"./ms-my.js":84645,"./ms.js":84703,"./mt":64365,"./mt.js":64365,"./my":83788,"./my.js":83788,"./nb":57357,"./nb.js":57357,"./ne":99109,"./ne.js":99109,"./nl":63746,"./nl-be":31985,"./nl-be.js":31985,"./nl.js":63746,"./nn":27175,"./nn.js":27175,"./oc-lnc":70566,"./oc-lnc.js":70566,"./pa-in":32733,"./pa-in.js":32733,"./pl":182,"./pl.js":182,"./pt":505,"./pt-br":17839,"./pt-br.js":17839,"./pt.js":505,"./ro":39578,"./ro.js":39578,"./ru":32328,"./ru.js":32328,"./sd":641,"./sd.js":641,"./se":51758,"./se.js":51758,"./si":36680,"./si.js":36680,"./sk":25016,"./sk.js":25016,"./sl":7424,"./sl.js":7424,"./sq":88635,"./sq.js":88635,"./sr":49038,"./sr-cyrl":73716,"./sr-cyrl.js":73716,"./sr.js":49038,"./ss":64771,"./ss.js":64771,"./sv":3517,"./sv.js":3517,"./sw":39419,"./sw.js":39419,"./ta":55959,"./ta.js":55959,"./te":21739,"./te.js":21739,"./tet":22264,"./tet.js":22264,"./tg":94792,"./tg.js":94792,"./th":88328,"./th.js":88328,"./tk":60702,"./tk.js":60702,"./tl-ph":57814,"./tl-ph.js":57814,"./tlh":10797,"./tlh.js":10797,"./tr":16691,"./tr.js":16691,"./tzl":76891,"./tzl.js":76891,"./tzm":16362,"./tzm-latn":37855,"./tzm-latn.js":37855,"./tzm.js":16362,"./ug-cn":77606,"./ug-cn.js":77606,"./uk":30513,"./uk.js":30513,"./ur":43803,"./ur.js":43803,"./uz":60344,"./uz-latn":8957,"./uz-latn.js":8957,"./uz.js":60344,"./vi":70003,"./vi.js":70003,"./x-pseudo":8842,"./x-pseudo.js":8842,"./yo":62083,"./yo.js":62083,"./zh-cn":84536,"./zh-cn.js":84536,"./zh-hk":92475,"./zh-hk.js":92475,"./zh-mo":67593,"./zh-mo.js":67593,"./zh-tw":4746,"./zh-tw.js":4746};function l(e){var a=i(e);return t(a)}function i(e){if(!t.o(o,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return o[e]}l.keys=function(){return Object.keys(o)},l.resolve=i,e.exports=l,l.id=46700},54130:()=>{}},a={};function t(o){var l=a[o];if(void 0!==l)return l.exports;var i=a[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,(()=>{var e=[];t.O=(a,o,l,i)=>{if(!o){var s=1/0;for(c=0;c<e.length;c++){for(var[o,l,i]=e[c],n=!0,r=0;r<o.length;r++)(!1&i||s>=i)&&Object.keys(t.O).every((e=>t.O[e](o[r])))?o.splice(r--,1):(n=!1,i<s&&(s=i));if(n){e.splice(c--,1);var d=l();void 0!==d&&(a=d)}}return a}i=i||0;for(var c=e.length;c>0&&e[c-1][2]>i;c--)e[c]=e[c-1];e[c]=[o,l,i]}})(),(()=>{t.n=e=>{var a=e&&e.__esModule?()=>e["default"]:()=>e;return t.d(a,{a}),a}})(),(()=>{var e,a=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;t.t=function(o,l){if(1&l&&(o=this(o)),8&l)return o;if("object"===typeof o&&o){if(4&l&&o.__esModule)return o;if(16&l&&"function"===typeof o.then)return o}var i=Object.create(null);t.r(i);var s={};e=e||[null,a({}),a([]),a(a)];for(var n=2&l&&o;"object"==typeof n&&!~e.indexOf(n);n=a(n))Object.getOwnPropertyNames(n).forEach((e=>s[e]=()=>o[e]));return s["default"]=()=>o,t.d(i,s),i}})(),(()=>{t.d=(e,a)=>{for(var o in a)t.o(a,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:a[o]})}})(),(()=>{t.f={},t.e=e=>Promise.all(Object.keys(t.f).reduce(((a,o)=>(t.f[o](e,a),a)),[]))})(),(()=>{t.u=e=>"js/"+e+"."+{73:"ddaa4c4d",193:"39207638",992:"8df56fc7"}[e]+".js"})(),(()=>{t.miniCssF=e=>"css/"+(736===e?"vendor":e)+"."+{73:"05389cc0",736:"8c101867"}[e]+".css"})(),(()=>{t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{t.o=(e,a)=>Object.prototype.hasOwnProperty.call(e,a)})(),(()=>{var e={},a="Chicheria:";t.l=(o,l,i,s)=>{if(e[o])e[o].push(l);else{var n,r;if(void 0!==i)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==o||m.getAttribute("data-webpack")==a+i){n=m;break}}n||(r=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,t.nc&&n.setAttribute("nonce",t.nc),n.setAttribute("data-webpack",a+i),n.src=o),e[o]=[l];var u=(a,t)=>{n.onerror=n.onload=null,clearTimeout(p);var l=e[o];if(delete e[o],n.parentNode&&n.parentNode.removeChild(n),l&&l.forEach((e=>e(t))),a)return a(t)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=u.bind(null,n.onerror),n.onload=u.bind(null,n.onload),r&&document.head.appendChild(n)}}})(),(()=>{t.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e)})(),(()=>{t.p=""})(),(()=>{var e=(e,a,t,o)=>{var l=document.createElement("link");l.rel="stylesheet",l.type="text/css";var i=i=>{if(l.onerror=l.onload=null,"load"===i.type)t();else{var s=i&&("load"===i.type?"missing":i.type),n=i&&i.target&&i.target.href||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.type=s,r.request=n,l.parentNode.removeChild(l),o(r)}};return l.onerror=l.onload=i,l.href=a,document.head.appendChild(l),l},a=(e,a)=>{for(var t=document.getElementsByTagName("link"),o=0;o<t.length;o++){var l=t[o],i=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(i===e||i===a))return l}var s=document.getElementsByTagName("style");for(o=0;o<s.length;o++){l=s[o],i=l.getAttribute("data-href");if(i===e||i===a)return l}},o=o=>new Promise(((l,i)=>{var s=t.miniCssF(o),n=t.p+s;if(a(s,n))return l();e(o,n,l,i)})),l={143:0};t.f.miniCss=(e,a)=>{var t={73:1};l[e]?a.push(l[e]):0!==l[e]&&t[e]&&a.push(l[e]=o(e).then((()=>{l[e]=0}),(a=>{throw delete l[e],a})))}})(),(()=>{var e={143:0};t.f.j=(a,o)=>{var l=t.o(e,a)?e[a]:void 0;if(0!==l)if(l)o.push(l[2]);else{var i=new Promise(((t,o)=>l=e[a]=[t,o]));o.push(l[2]=i);var s=t.p+t.u(a),n=new Error,r=o=>{if(t.o(e,a)&&(l=e[a],0!==l&&(e[a]=void 0),l)){var i=o&&("load"===o.type?"missing":o.type),s=o&&o.target&&o.target.src;n.message="Loading chunk "+a+" failed.\n("+i+": "+s+")",n.name="ChunkLoadError",n.type=i,n.request=s,l[1](n)}};t.l(s,r,"chunk-"+a,a)}},t.O.j=a=>0===e[a];var a=(a,o)=>{var l,i,[s,n,r]=o,d=0;for(l in n)t.o(n,l)&&(t.m[l]=n[l]);if(r)var c=r(t);for(a&&a(o);d<s.length;d++)i=s[d],t.o(e,i)&&e[i]&&e[i][0](),e[s[d]]=0;return t.O(c)},o=self["webpackChunkChicheria"]=self["webpackChunkChicheria"]||[];o.forEach(a.bind(null,0)),o.push=a.bind(null,o.push.bind(o))})();var o=t.O(void 0,[736],(()=>t(28562)));o=t.O(o)})();